var rC=Object.defineProperty;var nC=(e,t,s)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var rt=(e,t,s)=>(nC(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))h(y);new MutationObserver(y=>{for(const S of y)if(S.type==="childList")for(const r of S.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function s(y){const S={};return y.integrity&&(S.integrity=y.integrity),y.referrerpolicy&&(S.referrerPolicy=y.referrerpolicy),y.crossorigin==="use-credentials"?S.credentials="include":y.crossorigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function h(y){if(y.ep)return;y.ep=!0;const S=s(y);fetch(y.href,S)}})();var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jg={exports:{}};(function(e,t){(function(h,y){e.exports=y()})(aC,()=>(()=>{var s={50792:r=>{var T=Object.prototype.hasOwnProperty,i="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(i=!1));function x(n,u,c){this.fn=n,this.context=u,this.once=c||!1}function f(n,u,c,l,v){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new x(c,l||n,v),g=i?i+u:u;return n._events[g]?n._events[g].fn?n._events[g]=[n._events[g],p]:n._events[g].push(p):(n._events[g]=p,n._eventsCount++),n}function o(n,u){--n._eventsCount===0?n._events=new d:delete n._events[u]}function a(){this._events=new d,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,l;if(this._eventsCount===0)return u;for(l in c=this._events)T.call(c,l)&&u.push(i?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=i?i+u:u,l=this._events[c];if(!l)return[];if(l.fn)return[l.fn];for(var v=0,p=l.length,g=new Array(p);v<p;v++)g[v]=l[v].fn;return g},a.prototype.listenerCount=function(u){var c=i?i+u:u,l=this._events[c];return l?l.fn?1:l.length:0},a.prototype.emit=function(u,c,l,v,p,g){var m=i?i+u:u;if(!this._events[m])return!1;var C=this._events[m],P=arguments.length,M,E;if(C.fn){switch(C.once&&this.removeListener(u,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,c),!0;case 3:return C.fn.call(C.context,c,l),!0;case 4:return C.fn.call(C.context,c,l,v),!0;case 5:return C.fn.call(C.context,c,l,v,p),!0;case 6:return C.fn.call(C.context,c,l,v,p,g),!0}for(E=1,M=new Array(P-1);E<P;E++)M[E-1]=arguments[E];C.fn.apply(C.context,M)}else{var w=C.length,R;for(E=0;E<w;E++)switch(C[E].once&&this.removeListener(u,C[E].fn,void 0,!0),P){case 1:C[E].fn.call(C[E].context);break;case 2:C[E].fn.call(C[E].context,c);break;case 3:C[E].fn.call(C[E].context,c,l);break;case 4:C[E].fn.call(C[E].context,c,l,v);break;default:if(!M)for(R=1,M=new Array(P-1);R<P;R++)M[R-1]=arguments[R];C[E].fn.apply(C[E].context,M)}}return!0},a.prototype.on=function(u,c,l){return f(this,u,c,l,!1)},a.prototype.once=function(u,c,l){return f(this,u,c,l,!0)},a.prototype.removeListener=function(u,c,l,v){var p=i?i+u:u;if(!this._events[p])return this;if(!c)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===c&&(!v||g.once)&&(!l||g.context===l)&&o(this,p);else{for(var m=0,C=[],P=g.length;m<P;m++)(g[m].fn!==c||v&&!g[m].once||l&&g[m].context!==l)&&C.push(g[m]);C.length?this._events[p]=C.length===1?C[0]:C:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=i?i+u:u,this._events[c]&&o(this,c)):(this._events=new d,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,r.exports=a},11517:(r,T,i)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38829),x=function(f,o,a,n){for(var u=f[0],c=1;c<f.length;c++){var l=f[c];d(l,u,o,a,n),u=l}return f};r.exports=x},80318:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"angle",o,a,n,u)};r.exports=x},60757:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){for(var f=0;f<i.length;f++){var o=i[f];d.call(x,o)}return i};r.exports=T},69927:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){x===void 0&&(x=0);for(var f=x;f<i.length;f++){var o=i[f],a=!0;for(var n in d)o[n]!==d[n]&&(a=!1);if(a)return o}return null};r.exports=T},32265:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){x===void 0&&(x=0);for(var f=i.length-1;f>=x;f--){var o=i[f],a=!0;for(var n in d)o[n]!==d[n]&&(a=!1);if(a)return o}return null};r.exports=T},94420:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(11879),x=i(60461),f=i(95540),o=i(29747),a=i(41481),n=new a({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1).setOrigin(0,0),u=function(c,l){l===void 0&&(l={});var v=l.hasOwnProperty("width"),p=l.hasOwnProperty("height"),g=f(l,"width",-1),m=f(l,"height",-1),C=f(l,"cellWidth",1),P=f(l,"cellHeight",C),M=f(l,"position",x.TOP_LEFT),E=f(l,"x",0),w=f(l,"y",0),R=0,A=0,L=g*C,F=m*P;n.setPosition(E,w),n.setSize(C,P);for(var O=0;O<c.length;O++)if(d(c[O],n,M),v&&g===-1)n.x+=C;else if(p&&m===-1)n.y+=P;else if(p&&!v){if(A+=P,n.y+=P,A===F&&(A=0,R+=C,n.y=w,n.x+=C,R===L))break}else if(R+=C,n.x+=C,R===L&&(R=0,A+=P,n.x=E,n.y+=P,A===F))break;return c};r.exports=u},41721:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"alpha",o,a,n,u)};r.exports=x},67285:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"x",o,a,n,u)};r.exports=x},9074:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"x",o,n,c,l),d(f,"y",a,u,c,l)};r.exports=x},75222:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"y",o,a,n,u)};r.exports=x},22983:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x===void 0&&(x=0),f===void 0&&(f=6.28);for(var o=x,a=(f-x)/i.length,n=d.x,u=d.y,c=d.radius,l=0;l<i.length;l++)i[l].x=n+c*Math.cos(o),i[l].y=u+c*Math.sin(o),o+=a;return i};r.exports=T},95253:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x===void 0&&(x=0),f===void 0&&(f=6.28);for(var o=x,a=(f-x)/i.length,n=d.width/2,u=d.height/2,c=0;c<i.length;c++)i[c].x=d.x+n*Math.cos(o),i[c].y=d.y+u*Math.sin(o),o+=a;return i};r.exports=T},88505:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15258),x=i(26708),f=function(o,a,n){var u;n?u=x(a,n,o.length):u=d(a,o.length);for(var c=0;c<o.length;c++){var l=o[c],v=u[c];l.x=v.x,l.y=v.y}return o};r.exports=f},41346:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14649),x=i(86003),f=i(49498),o=function(a,n,u){u===void 0&&(u=0);var c=d(n,!1,a.length);u>0?x(c,u):u<0&&f(c,Math.abs(u));for(var l=0;l<a.length;l++)a[l].x=c[l].x,a[l].y=c[l].y;return a};r.exports=o},11575:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84993),x=function(f,o,a){var n=d({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},a),u=d({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},a),c=d({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},a);n.pop(),u.pop(),c.pop(),n=n.concat(u,c);for(var l=n.length/f.length,v=0,p=0;p<f.length;p++){var g=f[p],m=n[Math.floor(v)];g.x=m.x,g.y=m.y,v+=l}return f};r.exports=x},29953:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){for(var f=0;f<i.length;f++){var o=i[f];o.anims&&o.anims.play(d,x)}return i};r.exports=T},66979:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a){f===void 0&&(f=0),o===void 0&&(o=0),a===void 0&&(a=1);var n,u=0,c=i.length;if(a===1)for(n=o;n<c;n++)i[n][d]+=x+u*f,u++;else for(n=o;n>=0;n--)i[n][d]+=x+u*f,u++;return i};r.exports=T},43967:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a){f===void 0&&(f=0),o===void 0&&(o=0),a===void 0&&(a=1);var n,u=0,c=i.length;if(a===1)for(n=o;n<c;n++)i[n][d]=x+u*f,u++;else for(n=o;n>=0;n--)i[n][d]=x+u*f,u++;return i};r.exports=T},88926:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28176),x=function(f,o){for(var a=0;a<f.length;a++)d(o,f[a]);return f};r.exports=x},33286:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(24820),x=function(f,o){for(var a=0;a<f.length;a++)d(o,f[a]);return f};r.exports=x},96e3:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65822),x=function(f,o){for(var a=0;a<f.length;a++)d(o,f[a]);return f};r.exports=x},28789:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26597),x=function(f,o){for(var a=0;a<f.length;a++)d(o,f[a]);return f};r.exports=x},97154:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90260),x=function(f,o){for(var a=0;a<f.length;a++)d(o,f[a]);return f};r.exports=x},20510:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"rotation",o,a,n,u)};r.exports=x},91051:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1163),x=i(20339),f=function(o,a,n){for(var u=a.x,c=a.y,l=0;l<o.length;l++){var v=o[l];d(v,u,c,n,Math.max(1,x(v.x,v.y,u,c)))}return o};r.exports=f},76332:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1163),x=function(f,o,a,n){var u=o.x,c=o.y;if(n===0)return f;for(var l=0;l<f.length;l++)d(f[l],u,c,a,n);return f};r.exports=x},61619:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"scaleX",o,a,n,u)};r.exports=x},94868:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"scaleX",o,n,c,l),d(f,"scaleY",a,u,c,l)};r.exports=x},95532:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),x=function(f,o,a,n,u){return d(f,"scaleY",o,a,n,u)};r.exports=x},8689:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"alpha",o,a,n,u)};r.exports=x},2645:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n){return d(f,"blendMode",o,0,a,n)};r.exports=x},32372:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"depth",o,a,n,u)};r.exports=x},85373:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){for(var f=0;f<i.length;f++)i[f].setInteractive(d,x);return i};r.exports=T},81583:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"originX",o,n,c,l),d(f,"originY",a,u,c,l),f.forEach(function(v){v.updateDisplayOrigin()}),f};r.exports=x},79939:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"rotation",o,a,n,u)};r.exports=x},2699:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"scaleX",o,n,c,l),d(f,"scaleY",a,u,c,l)};r.exports=x},98739:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"scaleX",o,a,n,u)};r.exports=x},98476:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"scaleY",o,a,n,u)};r.exports=x},6207:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"scrollFactorX",o,n,c,l),d(f,"scrollFactorY",a,u,c,l)};r.exports=x},6607:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"scrollFactorX",o,a,n,u)};r.exports=x},72248:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"scrollFactorY",o,a,n,u)};r.exports=x},14036:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){for(var a=0;a<i.length;a++)i[a].setTint(d,x,f,o);return i};r.exports=T},50159:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n){return d(f,"visible",o,0,a,n)};r.exports=x},77597:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"x",o,a,n,u)};r.exports=x},83194:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u,c,l){return a==null&&(a=o),d(f,"x",o,n,c,l),d(f,"y",a,u,c,l)};r.exports=x},67678:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),x=function(f,o,a,n,u){return d(f,"y",o,a,n,u)};r.exports=x},35850:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u){n===void 0&&(n=0),u===void 0&&(u=new d);var c,l,v=f.length;if(v===1)c=f[0].x,l=f[0].y,f[0].x=o,f[0].y=a;else{var p=1,g=0;n===0&&(g=v-1,p=v-2),c=f[g].x,l=f[g].y,f[g].x=o,f[g].y=a;for(var m=0;m<v;m++)if(!(p>=v||p===-1)){var C=f[p],P=C.x,M=C.y;C.x=c,C.y=l,c=P,l=M,n===0?p--:p++}}return u.x=c,u.y=l,u};r.exports=x},8628:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33680),x=function(f){return d(f)};r.exports=x},21837:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7602),x=function(f,o,a,n,u){u===void 0&&(u=!1);var c=Math.abs(n-a)/f.length,l;if(u)for(l=0;l<f.length;l++)f[l][o]+=d(l*c,a,n);else for(l=0;l<f.length;l++)f[l][o]=d(l*c,a,n);return f};r.exports=x},21910:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54261),x=function(f,o,a,n,u){u===void 0&&(u=!1);var c=Math.abs(n-a)/f.length,l;if(u)for(l=0;l<f.length;l++)f[l][o]+=d(l*c,a,n);else for(l=0;l<f.length;l++)f[l][o]=d(l*c,a,n);return f};r.exports=x},62054:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){if(o===void 0&&(o=!1),i.length===0)return i;if(i.length===1)return o?i[0][d]+=(f+x)/2:i[0][d]=(f+x)/2,i;var a=Math.abs(f-x)/(i.length-1),n;if(o)for(n=0;n<i.length;n++)i[n][d]+=n*a+x;else for(n=0;n<i.length;n++)i[n][d]=n*a+x;return i};r.exports=T},79815:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=0;d<i.length;d++)i[d].visible=!i[d].visible;return i};r.exports=T},39665:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),x=function(f,o,a){a===void 0&&(a=0);for(var n=0;n<f.length;n++){var u=f[n];u.x=d(u.x,o.left-a,o.right+a),u.y=d(u.y,o.top-a,o.bottom+a)}return f};r.exports=x},61061:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(74943),o=i(81957),a=i(41138),n=i(35154),u=i(90126),c=new x({initialize:function(v,p,g){this.manager=v,this.key=p,this.type="frame",this.frames=this.getFrames(v.textureManager,n(g,"frames",[]),n(g,"defaultTextureKey",null),n(g,"sortFrames",!0)),this.frameRate=n(g,"frameRate",null),this.duration=n(g,"duration",null),this.msPerFrame,this.skipMissedFrames=n(g,"skipMissedFrames",!0),this.delay=n(g,"delay",0),this.repeat=n(g,"repeat",0),this.repeatDelay=n(g,"repeatDelay",0),this.yoyo=n(g,"yoyo",!1),this.showBeforeDelay=n(g,"showBeforeDelay",!1),this.showOnStart=n(g,"showOnStart",!1),this.hideOnComplete=n(g,"hideOnComplete",!1),this.randomFrame=n(g,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(f.PAUSE_ALL,this.pause,this),this.manager.on(f.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,v,p,g){p===null&&g===null?(l.frameRate=24,l.duration=24/v*1e3):p&&g===null?(l.duration=p,l.frameRate=v/(p/1e3)):(l.frameRate=g,l.duration=v/g*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,v){var p=this.getFrames(this.manager.textureManager,v);if(p.length>0){if(l===0)this.frames=p.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,l),m=this.frames.slice(l);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.currentFrame.duration?l.currentFrame.duration:l.msPerFrame},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,v,p,g){g===void 0&&(g=!0);var m=[],C,P,M=1,E,w;if(typeof v=="string"){if(w=v,!l.exists(w))return console.warn('Texture "%s" not found',w),m;var R=l.get(w),A=R.getFrameNames();g&&u(A),v=[],A.forEach(function(B){v.push({key:w,frame:B})})}if(!Array.isArray(v)||v.length===0)return m;for(E=0;E<v.length;E++){var L=v[E],F=n(L,"key",p);if(!!F){var O=n(L,"frame",0),b=l.getFrame(F,O);if(!b){console.warn('Texture "%s" not found',F);continue}P=new a(F,O,M,b),P.duration=n(L,"duration",0),P.isFirst=!C,C&&(C.nextFrame=P,P.prevFrame=C),m.push(P),C=P,M++}}if(m.length>0){P.isLast=!0,P.nextFrame=m[0],m[0].prevFrame=P;var I=1/(m.length-1);for(E=0;E<m.length;E++)m[E].progress=E*I}return m},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.currentFrame.duration?l.currentFrame.duration:l.msPerFrame},getFrameByProgress:function(l){return l=d(l,0,1),o(l,this.frames,"progress")},nextFrame:function(l){var v=l.currentFrame;v.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,v.nextFrame)},handleYoyoFrame:function(l,v){if(v||(v=!1),l.inReverse===!v&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=v),this.repeatAnimation(l);return}if(l.inReverse!==v&&l.repeatCounter===0){l.complete();return}l.forward=v;var p=v?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var v=l.currentFrame;v.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,v.prevFrame)},updateAndGetNextTick:function(l,v){l.setCurrentFrame(v),this.getNextTick(l)},removeFrame:function(l){var v=this.frames.indexOf(l);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){l.frames.push(v.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,v=1/(l-1),p,g=0;g<l;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*v,g===0?(p.isFirst=!0,l===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[l-1],p.nextFrame=this.frames[g+1])):g===l-1&&l>1?(p.isLast=!0,p.prevFrame=this.frames[l-2],p.nextFrame=this.frames[0]):l>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(f.PAUSE_ALL,this.pause,this),this.manager.off(f.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});r.exports=c},41138:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u,c){c===void 0&&(c=!1),this.textureKey=o,this.textureFrame=a,this.index=n,this.frame=u,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});r.exports=x},60848:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42099),x=i(83419),f=i(90330),o=i(50792),a=i(74943),n=i(8443),u=i(95540),c=i(35154),l=i(36383),v=i(20283),p=i(41836),g=new x({Extends:o,initialize:function(C){o.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new f,this.mixes=new f,this.paused=!1,this.name="AnimationManager",C.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(m,C,P){var M=this.anims,E=this.mixes,w=typeof m=="string"?m:m.key,R=typeof C=="string"?C:C.key;if(M.has(w)&&M.has(R)){var A=E.get(w);A||(A={}),A[R]=P,E.set(w,A)}return this},removeMix:function(m,C){var P=this.mixes,M=typeof m=="string"?m:m.key,E=P.get(M);if(E)if(C){var w=typeof C=="string"?C:C.key;E.hasOwnProperty(w)&&delete E[w]}else C||P.delete(M);return this},getMix:function(m,C){var P=this.mixes,M=typeof m=="string"?m:m.key,E=typeof C=="string"?C:C.key,w=P.get(M);return w&&w.hasOwnProperty(E)?w[E]:0},add:function(m,C){return this.anims.has(m)?(console.warn("Animation key exists: "+m),this):(C.key=m,this.anims.set(m,C),this.emit(a.ADD_ANIMATION,m,C),this)},exists:function(m){return this.anims.has(m)},createFromAseprite:function(m,C,P){var M=[],E=this.game.cache.json.get(m);if(!E)return console.warn("No Aseprite data found for: "+m),M;var w=this,R=c(E,"meta",null),A=c(E,"frames",null);if(R&&A){var L=c(R,"frameTags",[]);L.forEach(function(F){var O=[],b=u(F,"name",null),I=u(F,"from",0),B=u(F,"to",0),N=u(F,"direction","forward");if(!!b&&(!C||C&&C.indexOf(b)>-1)){for(var k=0,Y=I;Y<=B;Y++){var H=Y.toString(),z=A[H];if(z){var X=u(z,"duration",l.MAX_SAFE_INTEGER);O.push({key:m,frame:H,duration:X}),k+=X}}N==="reverse"&&(O=O.reverse());var D={key:b,frames:O,duration:k,yoyo:N==="pingpong"},G;P?P.anims&&(G=P.anims.create(D)):G=w.create(D),G&&M.push(G)}})}return M},create:function(m){var C=m.key,P=!1;return C&&(P=this.get(C),P?console.warn("AnimationManager key already exists: "+C):(P=new d(this,C,m),this.anims.set(C,P),this.emit(a.ADD_ANIMATION,C,P))),P},fromJSON:function(m,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof m=="string"&&(m=JSON.parse(m));var P=[];if(m.hasOwnProperty("anims")&&Array.isArray(m.anims)){for(var M=0;M<m.anims.length;M++)P.push(this.create(m.anims[M]));m.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=m.globalTimeScale)}else m.hasOwnProperty("key")&&m.type==="frame"&&P.push(this.create(m));return P},generateFrameNames:function(m,C){var P=c(C,"prefix",""),M=c(C,"start",0),E=c(C,"end",0),w=c(C,"suffix",""),R=c(C,"zeroPad",0),A=c(C,"outputArray",[]),L=c(C,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),A;var F=this.textureManager.get(m);if(!F)return A;var O;if(C)for(L||(L=v(M,E)),O=0;O<L.length;O++){var b=P+p(L[O],R,"0",1)+w;F.has(b)?A.push({key:m,frame:b}):console.warn('Frame "%s" not found in texture "%s"',b,m)}else for(L=F.getFrameNames(),O=0;O<L.length;O++)A.push({key:m,frame:L[O]});return A},generateFrameNumbers:function(m,C){var P=c(C,"start",0),M=c(C,"end",-1),E=c(C,"first",!1),w=c(C,"outputArray",[]),R=c(C,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),w;var A=this.textureManager.get(m);if(!A)return w;E&&A.has(E)&&w.push({key:m,frame:E}),R||(M===-1&&(M=A.frameTotal-2),R=v(P,M));for(var L=0;L<R.length;L++){var F=R[L];A.has(F)?w.push({key:m,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,m)}return w},get:function(m){return this.anims.get(m)},getAnimsFromTexture:function(m){for(var C=this.textureManager.get(m),P=C.key,M=this.anims.getArray(),E=[],w=0;w<M.length;w++)for(var R=M[w],A=R.frames,L=0;L<A.length;L++)if(A[L].textureKey===P){E.push(R.key);break}return E},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(m,C){Array.isArray(C)||(C=[C]);for(var P=0;P<C.length;P++)C[P].anims.play(m);return this},staggerPlay:function(m,C,P,M){P===void 0&&(P=0),M===void 0&&(M=!0),Array.isArray(C)||(C=[C]);var E=C.length;M||E--;for(var w=0;w<C.length;w++){var R=P<0?Math.abs(P)*(E-w):P*w;C[w].anims.playAfterDelay(m,R)}return this},remove:function(m){var C=this.get(m);return C&&(this.emit(a.REMOVE_ANIMATION,m,C),this.anims.delete(m),this.removeMix(m)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(m){var C={anims:[],globalTimeScale:this.globalTimeScale};return m!==void 0&&m!==""?C.anims.push(this.anims.get(m).toJSON()):this.anims.each(function(P,M){C.anims.push(M.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});r.exports=g},9674:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42099),x=i(30976),f=i(83419),o=i(90330),a=i(74943),n=i(95540),u=new f({initialize:function(l){this.parent=l,this.animationManager=l.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(c){var l=this.parent;if(c===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(c)||(c=[c]);for(var v=0;v<c.length;v++){var p=c[v];this.nextAnim?this.nextAnimsQueue.push(p):this.nextAnim=p}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(c){this.isPlaying&&this.stop();var l=this.animationManager,v=typeof c=="string"?c:n(c,"key",null),p=this.exists(v)?this.get(v):l.get(v);if(!p)console.warn("Missing animation: "+v);else{this.currentAnim=p;var g=p.getTotalFrames(),m=n(c,"frameRate",p.frameRate),C=n(c,"duration",p.duration);p.calculateDuration(this,g,C,m),this.delay=n(c,"delay",p.delay),this.repeat=n(c,"repeat",p.repeat),this.repeatDelay=n(c,"repeatDelay",p.repeatDelay),this.yoyo=n(c,"yoyo",p.yoyo),this.showBeforeDelay=n(c,"showBeforeDelay",p.showBeforeDelay),this.showOnStart=n(c,"showOnStart",p.showOnStart),this.hideOnComplete=n(c,"hideOnComplete",p.hideOnComplete),this.skipMissedFrames=n(c,"skipMissedFrames",p.skipMissedFrames),this.randomFrame=n(c,"randomFrame",p.randomFrame),this.timeScale=n(c,"timeScale",this.timeScale);var P=n(c,"startFrame",0);P>g&&(P=0),this.randomFrame&&(P=x(0,g-1));var M=p.frames[P];P===0&&!this.forward&&(M=p.getLastFrame()),this.currentFrame=M}return this.parent},pause:function(c){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),c!==void 0&&this.setCurrentFrame(c),this.parent},resume:function(c){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),c!==void 0&&this.setCurrentFrame(c),this.parent},playAfterDelay:function(c,l){if(!this.isPlaying)this.delayCounter=l,this.play(c,!0);else{var v=this.nextAnim,p=this.nextAnimsQueue;v&&p.unshift(v),this.nextAnim=c,this._pendingStop=1,this._pendingStopValue=l}return this.parent},playAfterRepeat:function(c,l){if(l===void 0&&(l=1),!this.isPlaying)this.play(c);else{var v=this.nextAnim,p=this.nextAnimsQueue;v&&p.unshift(v),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=c,this._pendingStop=2,this._pendingStopValue=l}return this.parent},play:function(c,l){l===void 0&&(l=!1);var v=this.currentAnim,p=this.parent,g=typeof c=="string"?c:c.key;if(l&&this.isPlaying&&v.key===g)return p;if(v&&this.isPlaying){var m=this.animationManager.getMix(v.key,c);if(m>0)return this.playAfterDelay(c,m)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c)},playReverse:function(c,l){l===void 0&&(l=!1);var v=typeof c=="string"?c:c.key;return l&&this.isPlaying&&this.currentAnim.key===v?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c))},startAnimation:function(c){this.load(c);var l=this.currentAnim,v=this.parent;return l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),v},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(c,l){var v=this.currentAnim;if(v){var p=this.currentFrame,g=this.parent,m=p.textureFrame;g.emit(c,v,p,g,m),l&&g.emit(l+v.key,v,p,g,m)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var c=this.currentFrame;if(!c)return 0;var l=c.progress;return this.inReverse&&(l*=-1),l},setProgress:function(c){return this.forward||(c=1-c),this.setCurrentFrame(this.currentAnim.getFrameByProgress(c)),this.parent},setRepeat:function(c){return this.repeatCounter=c===-1?Number.MAX_VALUE:c,this.parent},globalRemove:function(c,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(c,l){c===void 0&&(c=!1),l===void 0&&(l=!1);var v=this.currentAnim,p=this.parent;return v?(l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),v.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!c,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(v.frames[0]),this.parent):p},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(c)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(c)}return this.parent},stopAfterDelay:function(c){return this._pendingStop=1,this._pendingStopValue=c,this.parent},stopAfterRepeat:function(c){return c===void 0&&(c=1),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=c,this.parent},stopOnFrame:function(c){return this._pendingStop=3,this._pendingStopValue=c,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(c,l){var v=this.currentAnim;if(!(!this.isPlaying||!v||v.paused)){if(this.accumulator+=l*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?v.nextFrame(this):v.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var p=0;do this.forward?v.nextFrame(this):v.previousFrame(this),p++;while(this.isPlaying&&this.accumulator>this.nextTick&&p<60)}}},setCurrentFrame:function(c){var l=this.parent;return this.currentFrame=c,l.texture=c.frame.texture,l.frame=c.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),c.setAlpha&&(l.alpha=c.alpha),l.setSizeToFrame(),l._originComponent&&(c.frame.customPivot?l.setOrigin(c.frame.pivotX,c.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===c&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(c){return this.anims?this.anims.get(c):null},exists:function(c){return this.anims?this.anims.has(c):!1},create:function(c){var l=c.key,v=!1;return l&&(v=this.get(l),v?console.warn("Animation key already exists: "+l):(v=new d(this,l,c),this.anims||(this.anims=new o),this.anims.set(l,v))),v},createFromAseprite:function(c,l){return this.animationManager.createFromAseprite(c,l,this.parent)},generateFrameNames:function(c,l){return this.animationManager.generateFrameNames(c,l)},generateFrameNumbers:function(c,l){return this.animationManager.generateFrameNumbers(c,l)},remove:function(c){var l=this.get(c);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(c)),l},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});r.exports=u},57090:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},25312:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete"},89580:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete-"},52860:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrepeat"},63850:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrestart"},99085:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstart"},28087:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstop"},1794:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationupdate"},52562:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"},57953:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},68339:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"},74943:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(90330),f=i(50792),o=i(24736),a=new d({initialize:function(){this.entries=new x,this.events=new f},add:function(n,u){return this.entries.set(n,u),this.events.emit(o.ADD,this,n,u),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var u=this.get(n);return u&&(this.entries.delete(n),this.events.emit(o.REMOVE,this,n,u.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});r.exports=a},24047:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2161),x=i(83419),f=i(8443),o=new x({initialize:function(n){this.game=n,this.binary=new d,this.bitmapFont=new d,this.json=new d,this.physics=new d,this.shader=new d,this.audio=new d,this.video=new d,this.text=new d,this.html=new d,this.obj=new d,this.tilemap=new d,this.xml=new d,this.custom={},this.game.events.once(f.DESTROY,this.destroy,this)},addCustom:function(a){return this.custom.hasOwnProperty(a)||(this.custom[a]=new d),this.custom[a]},destroy:function(){for(var a=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<a.length;n++)this[a[n]].destroy(),this[a[n]]=null;for(var u in this.custom)this.custom[u].destroy();this.custom=null,this.game=null}});r.exports=o},51464:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},59261:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},24736:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(39506),o=i(50792),a=i(19715),n=i(87841),u=i(61340),c=i(80333),l=i(26099),v=new d({Extends:o,Mixins:[x.AlphaSingle,x.Visible],initialize:function(g,m,C,P){g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=0),P===void 0&&(P=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=g,this._y=m,this._width=C,this._height=P,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new u,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(C/2,P/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new l);var C=this.width*.5,P=this.height*.5;return m.x=p-C,m.y=g-P,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],C=g[1],P=g[2],M=g[3],E=m*M-C*P;if(!E)return p;var w=g[4],R=g[5],A=this.scrollX,L=this.scrollY,F=this.width,O=this.height,b=this.y,I=b+O,B=this.x,N=B+F,k=this.culledObjects,Y=p.length;E=1/E,k.length=0;for(var H=0;H<Y;++H){var z=p[H];if(!z.hasOwnProperty("width")||z.parentContainer){k.push(z);continue}var X=z.width,D=z.height,G=z.x-A*z.scrollFactorX-X*z.originX,V=z.y-L*z.scrollFactorY-D*z.originY,W=G*m+V*P+w,U=G*C+V*M+R,$=(G+X)*m+(V+D)*P+w,K=(G+X)*C+(V+D)*M+R;$>B&&W<N&&K>b&&U<I&&k.push(z)}return k},getWorldPoint:function(p,g,m){m===void 0&&(m=new l);var C=this.matrix.matrix,P=C[0],M=C[1],E=C[2],w=C[3],R=C[4],A=C[5],L=P*w-M*E;if(!L)return m.x=p,m.y=g,m;L=1/L;var F=w*L,O=-M*L,b=-E*L,I=P*L,B=(E*A-w*R)*L,N=(M*R-P*A)*L,k=Math.cos(this.rotation),Y=Math.sin(this.rotation),H=this.zoomX,z=this.zoomY,X=this.scrollX,D=this.scrollY,G=p+(X*k-D*Y)*H,V=g+(X*Y+D*k)*z;return m.x=G*F+V*b+B,m.y=G*O+V*I+N,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var C=p[m];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,C=g*.5,P=this.zoomX,M=this.zoomY,E=this.matrix,w=p*this.originX,R=g*this.originY,A=this.scrollX,L=this.scrollY;this.useBounds&&(A=this.clampX(A),L=this.clampY(L)),this.scrollX=A,this.scrollY=L;var F=A+m,O=L+C;this.midPoint.set(F,O);var b=p/P,I=g/M;this.worldView.setTo(F-b/2,O-I/2,b,I),E.applyITRS(this.x+w,this.y+R,this.rotation,P,M),E.translate(-w,-R)},clampX:function(p){var g=this._bounds,m=this.displayWidth,C=g.x+(m-this.width)/2,P=Math.max(C,C+g.width-m);return p<C?p=C:p>P&&(p=P),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,C=g.y+(m-this.height)/2,P=Math.max(C,C+g.height-m);return p<C?p=C:p>P&&(p=P),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=f(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,C,P){return P===void 0&&(P=!1),this._bounds.setTo(p,g,m,C),this.dirty=!0,this.useBounds=!0,P?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new n);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p,g){g===void 0&&(g=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p,this.isSceneCamera=g;var m=p.sys;return this.sceneManager=m.game.scene,this.scaleManager=m.scale,this.cameraManager=m.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,C){return this.x=p,this.y=g,this.width=m,this.height=C,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},setIsSceneCamera:function(p){return this.isSceneCamera=p,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){p!==this._scrollX&&(this._scrollX=p,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(p){p!==this._scrollY&&(this._scrollY=p,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});r.exports=v},38058:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71911),x=i(67502),f=i(45319),o=i(83419),a=i(31401),n=i(20052),u=i(19715),c=i(28915),l=i(87841),v=i(26099),p=new o({Extends:d,Mixins:[a.PostPipeline],initialize:function(m,C,P,M){d.call(this,m,C,P,M),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new l(0,0,g,m),this._follow){var C=this.width/2,P=this.height/2,M=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y;this.midPoint.set(M,E),this.scrollX=M-C,this.scrollY=E-P}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,C,P,M,E){return this.fadeEffect.start(!1,g,m,C,P,!0,M,E)},fadeOut:function(g,m,C,P,M,E){return this.fadeEffect.start(!0,g,m,C,P,!0,M,E)},fadeFrom:function(g,m,C,P,M,E,w){return this.fadeEffect.start(!1,g,m,C,P,M,E,w)},fade:function(g,m,C,P,M,E,w){return this.fadeEffect.start(!0,g,m,C,P,M,E,w)},flash:function(g,m,C,P,M,E,w){return this.flashEffect.start(g,m,C,P,M,E,w)},shake:function(g,m,C,P,M){return this.shakeEffect.start(g,m,C,P,M)},pan:function(g,m,C,P,M,E,w){return this.panEffect.start(g,m,C,P,M,E,w)},rotateTo:function(g,m,C,P,M,E,w){return this.rotateToEffect.start(g,m,C,P,M,E,w)},zoomTo:function(g,m,C,P,M,E){return this.zoomEffect.start(g,m,C,P,M,E)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,C=g*.5,P=m*.5,M=this.zoom,E=this.matrix,w=g*this.originX,R=m*this.originY,A=this._follow,L=this.deadzone,F=this.scrollX,O=this.scrollY;L&&x(L,this.midPoint.x,this.midPoint.y);var b=!1;if(A&&!this.panEffect.isRunning){var I=this.lerp,B=A.x-this.followOffset.x,N=A.y-this.followOffset.y;L?(B<L.x?F=c(F,F-(L.x-B),I.x):B>L.right&&(F=c(F,F+(B-L.right),I.x)),N<L.y?O=c(O,O-(L.y-N),I.y):N>L.bottom&&(O=c(O,O+(N-L.bottom),I.y))):(F=c(F,B-w,I.x),O=c(O,N-R,I.y)),b=!0}this.useBounds&&(F=this.clampX(F),O=this.clampY(O)),this.scrollX=F,this.scrollY=O;var k=F+C,Y=O+P;this.midPoint.set(k,Y);var H=g/M,z=m/M,X=Math.floor(k-H/2),D=Math.floor(Y-z/2);this.worldView.setTo(X,D,H,z),E.applyITRS(Math.floor(this.x+w),Math.floor(this.y+R),this.rotation,M,M),E.translate(-w,-R),this.shakeEffect.preRender(),b&&this.emit(u.FOLLOW_UPDATE,this,A)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,C,P,M,E){m===void 0&&(m=!1),C===void 0&&(C=1),P===void 0&&(P=C),M===void 0&&(M=0),E===void 0&&(E=M),this._follow=g,this.roundPixels=m,C=f(C,0,1),P=f(P,0,1),this.lerp.set(C,P),this.followOffset.set(M,E);var w=this.width/2,R=this.height/2,A=g.x-M,L=g.y-E;return this.midPoint.set(A,L),this.scrollX=A-w,this.scrollY=L-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),d.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});r.exports=p},32743:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38058),x=i(83419),f=i(95540),o=i(37277),a=i(37303),n=i(97480),u=i(44594),c=new x({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(u.BOOT,this.boot,this),v.sys.events.on(u.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new d(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(u.UPDATE,this.update,this),v.once(u.SHUTDOWN,this.shutdown,this)},add:function(l,v,p,g,m,C){l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),C===void 0&&(C="");var P=new d(l,v,p,g);return P.setName(C),P.setScene(this.scene),P.setRoundPixels(this.roundPixels),P.id=this.getNextID(),this.cameras.push(P),m&&(this.main=P),P},addExisting:function(l,v){v===void 0&&(v=!1);var p=this.cameras.indexOf(l);return p===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),v&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,v=1,p=0;p<32;p++){for(var g=!1,m=0;m<l.length;m++){var C=l[m];if(C&&C.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var v=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!l||l&&m.visible)&&v++}return v},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var v=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<l.length;g++){var m=l[g],C=f(m,"x",0),P=f(m,"y",0),M=f(m,"width",v),E=f(m,"height",p),w=this.add(C,P,M,E);w.name=f(m,"name",""),w.zoom=f(m,"zoom",1),w.rotation=f(m,"rotation",0),w.scrollX=f(m,"scrollX",0),w.scrollY=f(m,"scrollY",0),w.roundPixels=f(m,"roundPixels",!1),w.visible=f(m,"visible",!0);var R=f(m,"backgroundColor",!1);R&&w.setBackgroundColor(R);var A=f(m,"bounds",null);if(A){var L=f(A,"x",0),F=f(A,"y",0),O=f(A,"width",v),b=f(A,"height",p);w.setBounds(L,F,O,b)}}return this},getCamera:function(l){for(var v=this.cameras,p=0;p<v.length;p++)if(v[p].name===l)return v[p];return null},getCamerasBelowPointer:function(l){for(var v=this.cameras,p=l.x,g=l.y,m=[],C=0;C<v.length;C++){var P=v[C];P.visible&&P.inputEnabled&&a(P,p,g)&&m.unshift(P)}return m},remove:function(l,v){v===void 0&&(v=!0),Array.isArray(l)||(l=[l]);for(var p=0,g=this.cameras,m=0;m<l.length;m++){var C=g.indexOf(l[m]);C!==-1&&(v?g[C].destroy():g[C].renderList=[],g.splice(C,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(l,v){for(var p=this.scene,g=this.cameras,m=0;m<g.length;m++){var C=g[m];if(C.visible&&C.alpha>0){C.preRender();var P=this.getVisibleChildren(v.getChildren(),C);l.render(p,P,C)}}},getVisibleChildren:function(l,v){return l.filter(function(p){return p.willRender(v)})},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(l,v)},onResize:function(l,v,p,g,m){for(var C=0;C<this.cameras.length;C++){var P=this.cameras[C];P._x===0&&P._y===0&&P._width===g&&P._height===m&&P.setSize(v.width,v.height)}},resize:function(l,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(l,v)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var v=this.systems.events;v.off(u.UPDATE,this.update,this),v.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(u.START,this.start,this),this.systems.events.off(u.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});o.register("CameraManager",c,"cameras"),r.exports=c},5020:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(19715),o=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,n,u,c,l,v,p,g){if(a===void 0&&(a=!0),n===void 0&&(n=1e3),u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=a,this.progress=0,this.red=u,this.green=c,this.blue=l,this.alpha=a?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=a?f.FADE_OUT_START:f.FADE_IN_START;return this.camera.emit(m,this.camera,this,n,u,c,l),this.camera},update:function(a,n){!this.isRunning||(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(a){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(a,n){if(!this.isRunning&&!this.isComplete)return!1;var u=this.camera,c=this.red/255,l=this.green/255,v=this.blue/255;return a.drawFillRect(u.x,u.y,u.width,u.height,n(v,l,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var a=this.direction?f.FADE_OUT_COMPLETE:f.FADE_IN_COMPLETE;this.camera.emit(a,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=o},10662:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(19715),o=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(a,n,u,c,l,v,p){return a===void 0&&(a=250),n===void 0&&(n=255),u===void 0&&(u=255),c===void 0&&(c=255),l===void 0&&(l=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,this.red=n,this.green=u,this.blue=c,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(f.FLASH_START,this.camera,this,a,n,u,c),this.camera)},update:function(a,n){!this.isRunning||(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(a){if(!this.isRunning)return!1;var n=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(a,n){if(!this.isRunning)return!1;var u=this.camera,c=this.red/255,l=this.green/255,v=this.blue/255;return a.drawFillRect(u.x,u.y,u.width,u.height,n(v,l,c,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=o},20359:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(62640),o=i(19715),a=i(26099),n=new x({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,c,l,v,p,g,m){l===void 0&&(l=1e3),v===void 0&&(v=f.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var C=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(u,c),C.getScroll(u,c,this.current),typeof v=="string"&&f.hasOwnProperty(v)?this.ease=f[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(o.PAN_START,this.camera,this,l,u,c)),C},update:function(u,c){if(!!this.isRunning){this._elapsed+=c;var l=d(this._elapsed/this.duration,0,1);this.progress=l;var v=this.camera;if(this._elapsed<this.duration){var p=this.ease(l);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;v.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,l,g,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,l,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=n},34208:(r,T,i)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var d=i(45319),x=i(83419),f=i(19715),o=i(62640),a=new x({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,u,c,l,v,p,g){c===void 0&&(c=1e3),l===void 0&&(l=o.Linear),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),u===void 0&&(u=!1),this.shortestPath=u;var m=n;n<0?(m=-1*n,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;m=m-Math.floor(m/C)*C;var P=this.camera;if(!v&&this.isRunning)return P;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=P.rotation,this.destination=m,typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var M=0,E=0;this.destination>this.source?M=Math.abs(this.destination-this.source):M=Math.abs(this.destination+C)-this.source,this.source>this.destination?E=Math.abs(this.source-this.destination):E=Math.abs(this.source+C)-this.destination,M<E?this.clockwise=!0:M>E&&(this.clockwise=!1)}return this.camera.emit(f.ROTATE_START,this.camera,this,c,m),P},update:function(n,u){if(!!this.isRunning){this._elapsed+=u;var c=d(this._elapsed/this.duration,0,1);this.progress=c;var l=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=l.rotation;var p=0,g=360*Math.PI/180,m=this.destination,C=this.current;this.clockwise===!1&&(m=this.current,C=this.destination),m>=C?p=Math.abs(m-C):p=Math.abs(m+g)-C;var P=0;this.clockwise?P=l.rotation+p*v:P=l.rotation-p*v,l.rotation=P,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,P)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=a},30330:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(19715),o=i(26099),a=new x({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,u,c,l,v){return n===void 0&&(n=100),u===void 0&&(u=.05),c===void 0&&(c=!1),l===void 0&&(l=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof u=="number"?this.intensity.set(u):this.intensity.set(u.x,u.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=v,this.camera.emit(f.SHAKE_START,this.camera,this,n,u),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,u){if(!!this.isRunning)if(this._elapsed+=u,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,l=this.camera.width,v=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*l*2-c.x*l)*p,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});r.exports=a},45641:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(62640),o=i(19715),a=new x({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,u,c,l,v,p){u===void 0&&(u=1e3),c===void 0&&(c=f.Linear),l===void 0&&(l=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source=g.zoom,this.destination=n,typeof c=="string"&&f.hasOwnProperty(c)?this.ease=f[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(o.ZOOM_START,this.camera,this,u,n)),g},update:function(n,u){!this.isRunning||(this._elapsed+=u,this.progress=d(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=a},20052:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameradestroy"},32726:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeincomplete"},87807:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeinstart"},45917:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutcomplete"},95666:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutstart"},47056:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashcomplete"},91261:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashstart"},45047:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="followupdate"},81927:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapancomplete"},74264:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapanstart"},54419:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},79330:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},93183:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatecomplete"},80112:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatestart"},62252:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakecomplete"},86017:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakestart"},539:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomcomplete"},51892:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomstart"},19715:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(35154),f=new d({initialize:function(a){this.camera=x(a,"camera",null),this.left=x(a,"left",null),this.right=x(a,"right",null),this.up=x(a,"up",null),this.down=x(a,"down",null),this.zoomIn=x(a,"zoomIn",null),this.zoomOut=x(a,"zoomOut",null),this.zoomSpeed=x(a,"zoomSpeed",.01),this.minZoom=x(a,"minZoom",.001),this.maxZoom=x(a,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=x(a,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=x(a,"speed.x",0),this.speedY=x(a,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var a=this.camera;this.up&&this.up.isDown?a.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(a.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?a.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(a.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(a.zoom-=this.zoomSpeed,a.zoom<this.minZoom&&(a.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(a.zoom+=this.zoomSpeed,a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=f},58818:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(35154),f=new d({initialize:function(a){this.camera=x(a,"camera",null),this.left=x(a,"left",null),this.right=x(a,"right",null),this.up=x(a,"up",null),this.down=x(a,"down",null),this.zoomIn=x(a,"zoomIn",null),this.zoomOut=x(a,"zoomOut",null),this.zoomSpeed=x(a,"zoomSpeed",.01),this.minZoom=x(a,"minZoom",.001),this.maxZoom=x(a,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=x(a,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=x(a,"acceleration.x",0),this.accelY=x(a,"acceleration.y",0)),this.dragX=0,this.dragY=0;var u=x(a,"drag",null);typeof u=="number"?(this.dragX=u,this.dragY=u):(this.dragX=x(a,"drag.x",0),this.dragY=x(a,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=x(a,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=x(a,"maxSpeed.x",0),this.maxSpeedY=x(a,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var a=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(a.scrollX-=this._speedX*o|0),this._speedY!==0&&(a.scrollY-=this._speedY*o|0),this._zoom!==0&&(a.zoom+=this._zoom,a.zoom<this.minZoom?a.zoom=this.minZoom:a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=f},38865:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={VERSION:"3.80.1",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};r.exports=d},69547:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(8054),f=i(42363),o=i(82264),a=i(95540),n=i(35154),u=i(41212),c=i(29747),l=i(75508),v=i(36060),p=i(80333),g=new d({initialize:function(C){C===void 0&&(C={});var P=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],M="#ffffff",E=n(C,"scale",null);this.width=n(E,"width",1024,C),this.height=n(E,"height",768,C),this.zoom=n(E,"zoom",1,C),this.parent=n(E,"parent",void 0,C),this.scaleMode=n(E,E?"mode":"scaleMode",0,C),this.expandParent=n(E,"expandParent",!0,C),this.autoRound=n(E,"autoRound",!1,C),this.autoCenter=n(E,"autoCenter",0,C),this.resizeInterval=n(E,"resizeInterval",500,C),this.fullscreenTarget=n(E,"fullscreenTarget",null,C),this.minWidth=n(E,"min.width",0,C),this.maxWidth=n(E,"max.width",0,C),this.minHeight=n(E,"min.height",0,C),this.maxHeight=n(E,"max.height",0,C),this.snapWidth=n(E,"snap.width",0,C),this.snapHeight=n(E,"snap.height",0,C),this.renderType=n(C,"type",x.AUTO),this.canvas=n(C,"canvas",null),this.context=n(C,"context",null),this.canvasStyle=n(C,"canvasStyle",null),this.customEnvironment=n(C,"customEnvironment",!1),this.sceneConfig=n(C,"scene",null),this.seed=n(C,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=n(C,"title",""),this.gameURL=n(C,"url","https://phaser.io"),this.gameVersion=n(C,"version",""),this.autoFocus=n(C,"autoFocus",!0),this.stableSort=n(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=o.browser.es2019?1:0),o.features.stableSort=this.stableSort,this.domCreateContainer=n(C,"dom.createContainer",!1),this.domPointerEvents=n(C,"dom.pointerEvents","none"),this.inputKeyboard=n(C,"input.keyboard",!0),this.inputKeyboardEventTarget=n(C,"input.keyboard.target",window),this.inputKeyboardCapture=n(C,"input.keyboard.capture",[]),this.inputMouse=n(C,"input.mouse",!0),this.inputMouseEventTarget=n(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(C,"input.touch",o.input.touch),this.inputTouchEventTarget=n(C,"input.touch.target",null),this.inputTouchCapture=n(C,"input.touch.capture",!0),this.inputActivePointers=n(C,"input.activePointers",1),this.inputSmoothFactor=n(C,"input.smoothFactor",0),this.inputWindowEvents=n(C,"input.windowEvents",!0),this.inputGamepad=n(C,"input.gamepad",!1),this.inputGamepadEventTarget=n(C,"input.gamepad.target",window),this.disableContextMenu=n(C,"disableContextMenu",!1),this.audio=n(C,"audio",{}),this.hideBanner=n(C,"banner",null)===!1,this.hidePhaser=n(C,"banner.hidePhaser",!1),this.bannerTextColor=n(C,"banner.text",M),this.bannerBackgroundColor=n(C,"banner.background",P),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(C,"fps",null),this.disablePreFX=n(C,"disablePreFX",!1),this.disablePostFX=n(C,"disablePostFX",!1);var w=n(C,"render",null);this.pipeline=n(w,"pipeline",null,C),this.autoMobilePipeline=n(w,"autoMobilePipeline",!0,C),this.defaultPipeline=n(w,"defaultPipeline",v.MULTI_PIPELINE,C),this.antialias=n(w,"antialias",!0,C),this.antialiasGL=n(w,"antialiasGL",!0,C),this.mipmapFilter=n(w,"mipmapFilter","",C),this.desynchronized=n(w,"desynchronized",!1,C),this.roundPixels=n(w,"roundPixels",!0,C),this.pixelArt=n(w,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(w,"transparent",!1,C),this.clearBeforeRender=n(w,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=n(w,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=n(w,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=n(w,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=n(w,"powerPreference","default",C),this.batchSize=n(w,"batchSize",4096,C),this.maxTextures=n(w,"maxTextures",-1,C),this.maxLights=n(w,"maxLights",10,C);var R=n(C,"backgroundColor",0);this.backgroundColor=p(R),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=n(C,"callbacks.preBoot",c),this.postBoot=n(C,"callbacks.postBoot",c),this.physics=n(C,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(C,"loader.baseURL",""),this.loaderPath=n(C,"loader.path",""),this.loaderMaxParallelDownloads=n(C,"loader.maxParallelDownloads",o.os.android?6:32),this.loaderCrossOrigin=n(C,"loader.crossOrigin",void 0),this.loaderResponseType=n(C,"loader.responseType",""),this.loaderAsync=n(C,"loader.async",!0),this.loaderUser=n(C,"loader.user",""),this.loaderPassword=n(C,"loader.password",""),this.loaderTimeout=n(C,"loader.timeout",0),this.loaderWithCredentials=n(C,"loader.withCredentials",!1),this.loaderImageLoadType=n(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(C,"fx.glow.quality",.1),this.glowFXDistance=n(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=n(C,"plugins",null),L=f.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:u(A)&&(this.installGlobalPlugins=a(A,"global",[]),this.installScenePlugins=a(A,"scene",[]),Array.isArray(A.default)?L=A.default:Array.isArray(A.defaultMerge)&&(L=L.concat(A.defaultMerge)))),this.defaultPlugins=L;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(C,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(C,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});r.exports=g},86054:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20623),x=i(27919),f=i(8054),o=i(89357),a=function(n){var u=n.config;if((u.customEnvironment||u.canvas)&&u.renderType===f.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!u.customEnvironment&&!u.canvas&&u.renderType!==f.HEADLESS)if(u.renderType===f.AUTO&&(u.renderType=o.webGL?f.WEBGL:f.CANVAS),u.renderType===f.WEBGL){if(!o.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(u.renderType===f.CANVAS){if(!o.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+u.renderType);u.antialias||x.disableSmoothing();var c=n.scale.baseSize,l=c.width,v=c.height;if(u.canvas?(n.canvas=u.canvas,n.canvas.width=l,n.canvas.height=v):n.canvas=x.create(n,l,v,u.renderType),u.canvasStyle&&(n.canvas.style=u.canvasStyle),u.antialias||d.setCrisp(n.canvas),u.renderType!==f.HEADLESS){var p,g;p=i(68627),g=i(74797),u.renderType===f.WEBGL?n.renderer=new g(n):(n.renderer=new p(n),n.context=n.renderer.gameContext)}};r.exports=a},96391:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8054),x=function(f){var o=f.config;if(!o.hideBanner){var a="WebGL";o.renderType===d.CANVAS?a="Canvas":o.renderType===d.HEADLESS&&(a="Headless");var n=o.audio,u=f.device.audio,c;if(u.webAudio&&!n.disableWebAudio?c="Web Audio":n.noAudio||!u.webAudio&&!u.audioData?c="No Audio":c="HTML5 Audio",f.device.browser.ie)window.console&&console.log("Phaser v"+d.VERSION+" / https://phaser.io");else{var l="",v=[l];if(Array.isArray(o.bannerBackgroundColor)){var p;o.bannerBackgroundColor.forEach(function(m){l=l.concat("%c "),v.push("background: "+m),p=m}),v[v.length-1]="color: "+o.bannerTextColor+"; background: "+p}else l=l.concat("%c "),v.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);v.push("background: transparent"),o.gameTitle&&(l=l.concat(o.gameTitle),o.gameVersion&&(l=l.concat(" v"+o.gameVersion)),o.hidePhaser||(l=l.concat(" / ")));var g="";o.hidePhaser||(l=l.concat("Phaser v"+d.VERSION+g+" ("+a+" | "+c+")")),l=l.concat(" %c "+o.gameURL),v[0]=l,console.log.apply(console,v)}}};r.exports=x},50127:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),x=i(60848),f=i(24047),o=i(27919),a=i(83419),n=i(69547),u=i(83719),c=i(86054),l=i(45893),v=i(96391),p=i(82264),g=i(57264),m=i(50792),C=i(8443),P=i(7003),M=i(37277),E=i(77332),w=i(76531),R=i(60903),A=i(69442),L=i(17130),F=i(65898),O=i(51085),b=i(14747),I=new a({initialize:function(N){this.config=new n(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new x(this),this.textures=new L(this),this.cache=new f(this),this.registry=new l(this,new m),this.input=new P(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=p,this.scale=new w(this,this.config),this.sound=null,this.sound=b.create(this),this.loop=new F(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,g(this.boot.bind(this))},boot:function(){if(!M.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),u(this),v(this),d(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var B=this.events;B.on(C.HIDDEN,this.onHidden,this),B.on(C.VISIBLE,this.onVisible,this),B.on(C.BLUR,this.onBlur,this),B.on(C.FOCUS,this.onFocus,this)},step:function(B,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var k=this.events;k.emit(C.PRE_STEP,B,N),k.emit(C.STEP,B,N),this.scene.update(B,N),k.emit(C.POST_STEP,B,N);var Y=this.renderer;Y.preRender(),k.emit(C.PRE_RENDER,Y,B,N),this.scene.render(Y),Y.postRender(),k.emit(C.POST_RENDER,Y,B,N)}},headlessStep:function(B,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var k=this.events;k.emit(C.PRE_STEP,B,N),k.emit(C.STEP,B,N),this.scene.update(B,N),k.emit(C.POST_STEP,B,N),this.scene.isProcessing=!1,k.emit(C.PRE_RENDER,null,B,N),k.emit(C.POST_RENDER,null,B,N)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(C.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});r.exports=I},65898:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(35154),f=i(29747),o=i(43092),a=new d({initialize:function(u,c){this.game=u,this.raf=new o,this.started=!1,this.running=!1,this.minFps=x(c,"min",5),this.targetFps=x(c,"target",60),this.fpsLimit=x(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=f,this.forceSetTimeOut=x(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(c,"deltaHistory",10),this.panicMax=x(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=Math.min(this._target,this.deltaHistory[u]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var u=this.deltaIndex,c=this.deltaHistory,l=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=c[u],n=Math.min(n,this._min)),c[u]=n,this.deltaIndex++,this.deltaIndex>=l&&(this.deltaIndex=0);for(var v=0,p=0;p<l;p++)v+=c[p];return v/=l,v},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var u=Math.max(0,n-this.lastTime);this.rawDelta=u,this.time+=this.rawDelta,this.smoothStep&&(u=this.smoothDelta(u)),this.delta+=u,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var u=Math.max(0,n-this.lastTime);this.rawDelta=u,this.time+=this.rawDelta,this.smoothStep&&(u=this.smoothDelta(u)),this.delta=u,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,u),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var u=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+u));var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=u+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});r.exports=a},51085:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8443),x=function(f){var o,a=f.events;if(document.hidden!==void 0)o="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},o=c+"visibilitychange")})}var u=function(c){document.hidden||c.type==="pause"?a.emit(d.HIDDEN):a.emit(d.VISIBLE)};o&&document.addEventListener(o,u,!1),window.onblur=function(){a.emit(d.BLUR)},window.onfocus=function(){a.emit(d.FOCUS)},window.focus&&f.config.autoFocus&&window.focus()};r.exports=x},97217:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="blur"},47548:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},19814:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="contextlost"},68446:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},41700:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="focus"},25432:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="hidden"},65942:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},59211:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},47789:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="poststep"},39066:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},460:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prestep"},16175:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},42331:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},11966:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="step"},32969:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="systemready"},94830:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="visible"},8443:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(5290),x=i(27919),f=i(35154),o=function(a){var n=f(a,"data",[]),u=f(a,"canvas",null),c=f(a,"palette",d),l=f(a,"pixelWidth",1),v=f(a,"pixelHeight",l),p=f(a,"resizeCanvas",!0),g=f(a,"clearCanvas",!0),m=f(a,"preRender",null),C=f(a,"postRender",null),P=Math.floor(Math.abs(n[0].length*l)),M=Math.floor(Math.abs(n.length*v));u||(u=x.create2D(this,P,M),p=!1,g=!1),p&&(u.width=P,u.height=M);var E=u.getContext("2d",{willReadFrequently:!0});g&&E.clearRect(0,0,P,M),m&&m(u,E);for(var w=0;w<n.length;w++)for(var R=n[w],A=0;A<R.length;A++){var L=R[A];L!=="."&&L!==" "&&(E.fillStyle=c[L],E.fillRect(A*l,w*v,l,v))}return C&&C(u,E),u};r.exports=o},15822:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(36316),f=i(80021),o=i(26099),a=new d({Extends:f,initialize:function(u,c,l,v){f.call(this,"CubicBezierCurve"),Array.isArray(u)&&(v=new o(u[6],u[7]),l=new o(u[4],u[5]),c=new o(u[2],u[3]),u=new o(u[0],u[1])),this.p0=u,this.p1=c,this.p2=l,this.p3=v},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,u){u===void 0&&(u=new o);var c=this.p0,l=this.p1,v=this.p2,p=this.p3;return u.set(x(n,c.x,l.x,v.x,p.x),x(n,c.y,l.y,v.y,p.y))},draw:function(n,u){u===void 0&&(u=32);var c=this.getPoints(u);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)n.lineTo(c[l].x,c[l].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(n){var u=n.points,c=new o(u[0],u[1]),l=new o(u[2],u[3]),v=new o(u[4],u[5]),p=new o(u[6],u[7]);return new a(c,l,v,p)},r.exports=a},80021:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(19217),f=i(87841),o=i(26099),a=new d({initialize:function(u){this.type=u,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(n,u){return u===void 0&&(u=32),n.strokePoints(this.getPoints(u))},getBounds:function(n,u){n||(n=new f),u===void 0&&(u=16);var c=this.getLength();u>c&&(u=c/2);var l=Math.max(1,Math.round(c/u));return x(this.getSpacedPoints(l),n)},getDistancePoints:function(n){var u=this.getLength(),c=Math.max(1,u/n);return this.getSpacedPoints(c)},getEndPoint:function(n){return n===void 0&&(n=new o),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u=[],c,l=this.getPoint(0,this._tmpVec2A),v=0;u.push(0);for(var p=1;p<=n;p++)c=this.getPoint(p/n,this._tmpVec2B),v+=c.distance(l),u.push(v),l.copy(c);return this.cacheArcLengths=u,u},getPointAt:function(n,u){var c=this.getUtoTmapping(n);return this.getPoint(c,u)},getPoints:function(n,u,c){c===void 0&&(c=[]),n||(u?n=this.getLength()/u:n=this.defaultDivisions);for(var l=0;l<=n;l++)c.push(this.getPoint(l/n));return c},getRandomPoint:function(n){return n===void 0&&(n=new o),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,u,c){c===void 0&&(c=[]),n||(u?n=this.getLength()/u:n=this.defaultDivisions);for(var l=0;l<=n;l++){var v=this.getUtoTmapping(l/n,null,n);c.push(this.getPoint(v))}return c},getStartPoint:function(n){return n===void 0&&(n=new o),this.getPointAt(0,n)},getTangent:function(n,u){u===void 0&&(u=new o);var c=1e-4,l=n-c,v=n+c;return l<0&&(l=0),v>1&&(v=1),this.getPoint(l,this._tmpVec2A),this.getPoint(v,u),u.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,u){var c=this.getUtoTmapping(n);return this.getTangent(c,u)},getTFromDistance:function(n,u){return n<=0?0:this.getUtoTmapping(0,n,u)},getUtoTmapping:function(n,u,c){var l=this.getLengths(c),v=0,p=l.length,g;u?g=Math.min(u,l[p-1]):g=n*l[p-1];for(var m=0,C=p-1,P;m<=C;)if(v=Math.floor(m+(C-m)/2),P=l[v]-g,P<0)m=v+1;else if(P>0)C=v-1;else{C=v;break}if(v=C,l[v]===g)return v/(p-1);var M=l[v],E=l[v+1],w=E-M,R=(g-M)/w;return(v+R)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});r.exports=a},73825:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(80021),f=i(39506),o=i(35154),a=i(43396),n=i(26099),u=new d({Extends:x,initialize:function(l,v,p,g,m,C,P,M){if(typeof l=="object"){var E=l;l=o(E,"x",0),v=o(E,"y",0),p=o(E,"xRadius",0),g=o(E,"yRadius",p),m=o(E,"startAngle",0),C=o(E,"endAngle",360),P=o(E,"clockwise",!1),M=o(E,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),C===void 0&&(C=360),P===void 0&&(P=!1),M===void 0&&(M=0);x.call(this,"EllipseCurve"),this.p0=new n(l,v),this._xRadius=p,this._yRadius=g,this._startAngle=f(m),this._endAngle=f(C),this._clockwise=P,this._rotation=f(M)},getStartPoint:function(c){return c===void 0&&(c=new n),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,l){l===void 0&&(l=new n);for(var v=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=v;for(;p>v;)p-=v;p<Number.EPSILON&&(g?p=0:p=v),this._clockwise&&!g&&(p===v?p=-v:p=p-v);var m=this._startAngle+c*p,C=this.p0.x+this._xRadius*Math.cos(m),P=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var M=Math.cos(this._rotation),E=Math.sin(this._rotation),w=C-this.p0.x,R=P-this.p0.y;C=w*M-R*E+this.p0.x,P=w*E+R*M+this.p0.y}return l.set(C,P)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return a(this._startAngle)},set:function(c){this._startAngle=f(c)}},endAngle:{get:function(){return a(this._endAngle)},set:function(c){this._endAngle=f(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return a(this._rotation)},set:function(c){this._rotation=f(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});u.fromJSON=function(c){return new u(c)},r.exports=u},33951:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(80021),f=i(19217),o=i(87841),a=i(26099),n=new d({Extends:x,initialize:function(c,l){x.call(this,"LineCurve"),Array.isArray(c)&&(l=new a(c[2],c[3]),c=new a(c[0],c[1])),this.p0=c,this.p1=l,this.arcLengthDivisions=1},getBounds:function(u){return u===void 0&&(u=new o),f([this.p0,this.p1],u)},getStartPoint:function(u){return u===void 0&&(u=new a),u.copy(this.p0)},getResolution:function(u){return u===void 0&&(u=1),u},getPoint:function(u,c){return c===void 0&&(c=new a),u===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(u).add(this.p0),c)},getPointAt:function(u,c){return this.getPoint(u,c)},getTangent:function(u,c){return c===void 0&&(c=new a),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(u,c,l){var v;if(c){var p=this.getLengths(l),g=p[p.length-1],m=Math.min(c,g);v=m/g}else v=u;return v},draw:function(u){return u.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),u},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(u){var c=u.points,l=new a(c[0],c[1]),v=new a(c[2],c[3]);return new n(l,v)},r.exports=n},14744:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(80021),f=i(32112),o=i(26099),a=new d({Extends:x,initialize:function(u,c,l){x.call(this,"QuadraticBezierCurve"),Array.isArray(u)&&(l=new o(u[4],u[5]),c=new o(u[2],u[3]),u=new o(u[0],u[1])),this.p0=u,this.p1=c,this.p2=l},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,u){u===void 0&&(u=new o);var c=this.p0,l=this.p1,v=this.p2;return u.set(f(n,c.x,l.x,v.x),f(n,c.y,l.y,v.y))},draw:function(n,u){u===void 0&&(u=32);var c=this.getPoints(u);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)n.lineTo(c[l].x,c[l].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(n){var u=n.points,c=new o(u[0],u[1]),l=new o(u[2],u[3]),v=new o(u[4],u[5]);return new a(c,l,v)},r.exports=a},42534:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87842),x=i(83419),f=i(80021),o=i(26099),a=new x({Extends:f,initialize:function(u){u===void 0&&(u=[]),f.call(this,"SplineCurve"),this.points=[],this.addPoints(u)},addPoints:function(n){for(var u=0;u<n.length;u++){var c=new o;typeof n[u]=="number"?(c.x=n[u],c.y=n[u+1],u++):Array.isArray(n[u])?(c.x=n[u][0],c.y=n[u][1]):(c.x=n[u].x,c.y=n[u].y),this.points.push(c)}return this},addPoint:function(n,u){var c=new o(n,u);return this.points.push(c),c},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,u){u===void 0&&(u=new o);var c=this.points,l=(c.length-1)*n,v=Math.floor(l),p=l-v,g=c[v===0?v:v-1],m=c[v],C=c[v>c.length-2?c.length-1:v+1],P=c[v>c.length-3?c.length-1:v+2];return u.set(d(p,g.x,m.x,C.x,P.x),d(p,g.y,m.y,C.y,P.y))},toJSON:function(){for(var n=[],u=0;u<this.points.length;u++)n.push(this.points[u].x),n.push(this.points[u].y);return{type:this.type,points:n}}});a.fromJSON=function(n){return new a(n.points)},r.exports=a},25410:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(26099),f=new d({initialize:function(a,n){this.active=!1,this.p0=new x(a,n)},getPoint:function(o,a){return a===void 0&&(a=new x),a.copy(this.p0)},getPointAt:function(o,a){return this.getPoint(o,a)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});r.exports=f},46669:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(46728),f=i(73825),o=i(39429),a=i(33951),n=i(68618),u=i(14744),c=i(87841),l=i(42534),v=i(26099),p=i(36383),g=new d({initialize:function(C,P){C===void 0&&(C=0),P===void 0&&(P=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,P)},add:function(m){return this.curves.push(m),this},circleTo:function(m,C,P){return C===void 0&&(C=!1),this.ellipseTo(m,m,0,360,C,P)},closePath:function(){var m=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return m.equals(C)||this.curves.push(new a(C,m)),this},cubicBezierTo:function(m,C,P,M,E,w){var R=this.getEndPoint(),A,L,F;return m instanceof v?(A=m,L=C,F=P):(A=new v(P,M),L=new v(E,w),F=new v(m,C)),this.add(new x(R,A,L,F))},quadraticBezierTo:function(m,C,P,M){var E=this.getEndPoint(),w,R;return m instanceof v?(w=m,R=C):(w=new v(P,M),R=new v(m,C)),this.add(new u(E,w,R))},draw:function(m,C){for(var P=0;P<this.curves.length;P++){var M=this.curves[P];!M.active||M.draw(m,C)}return m},ellipseTo:function(m,C,P,M,E,w){var R=new f(0,0,m,C,P,M,E,w),A=this.getEndPoint(this._tmpVec2A),L=R.getStartPoint(this._tmpVec2B);return A.subtract(L),R.x=A.x,R.y=A.y,this.add(R)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var C=0;C<m.curves.length;C++){var P=m.curves[C];switch(P.type){case"LineCurve":this.add(a.fromJSON(P));break;case"EllipseCurve":this.add(f.fromJSON(P));break;case"SplineCurve":this.add(l.fromJSON(P));break;case"CubicBezierCurve":this.add(x.fromJSON(P));break;case"QuadraticBezierCurve":this.add(u.fromJSON(P));break}}return this},getBounds:function(m,C){m===void 0&&(m=new c),C===void 0&&(C=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var P=new c,M=p.MIN_SAFE_INTEGER,E=p.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var R=this.curves[w];!R.active||(R.getBounds(P,C),m.x=Math.min(m.x,P.x),m.y=Math.min(m.y,P.y),M=Math.max(M,P.right),E=Math.max(E,P.bottom))}return m.right=M,m.bottom=E,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],C=0,P=0;P<this.curves.length;P++)C+=this.curves[P].getLength(),m.push(C);return this.cacheLengths=m,m},getCurveAt:function(m){for(var C=m*this.getLength(),P=this.getCurveLengths(),M=0;M<P.length;){if(P[M]>=C)return this.curves[M];M++}return null},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,C){C===void 0&&(C=new v);for(var P=m*this.getLength(),M=this.getCurveLengths(),E=0;E<M.length;){if(M[E]>=P){var w=M[E]-P,R=this.curves[E],A=R.getLength(),L=A===0?0:1-w/A;return R.getPointAt(L,C)}E++}return null},getPoints:function(m,C){!m&&!C&&(m=this.defaultDivisions);for(var P=[],M,E=0;E<this.curves.length;E++){var w=this.curves[E];if(!!w.active)for(var R=w.getResolution(m),A=w.getPoints(R,C),L=0;L<A.length;L++){var F=A[L];M&&M.equals(F)||(P.push(F),M=F)}}return this.autoClose&&P.length>1&&!P[P.length-1].equals(P[0])&&P.push(P[0]),P},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var C=[],P=0;P<=m;P++)C.push(this.getPoint(P/m));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,C){C===void 0&&(C=new v);for(var P=m*this.getLength(),M=this.getCurveLengths(),E=0;E<M.length;){if(M[E]>=P){var w=M[E]-P,R=this.curves[E],A=R.getLength(),L=A===0?0:1-w/A;return R.getTangentAt(L,C)}E++}return null},lineTo:function(m,C){m instanceof v?this._tmpVec2B.copy(m):typeof m=="object"?this._tmpVec2B.setFromObject(m):this._tmpVec2B.set(m,C);var P=this.getEndPoint(this._tmpVec2A);return this.add(new a([P.x,P.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new l(m))},moveTo:function(m,C){return m instanceof v?this.add(new n(m.x,m.y)):this.add(new n(m,C))},toJSON:function(){for(var m=[],C=0;C<this.curves.length;C++)m.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(m,C){return new g(m,C)}),r.exports=g},45893:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(24882),f=new d({initialize:function(a,n){this.parent=a,this.events=n,n||(this.events=a.events?a.events:a),this.list={},this.values={},this._frozen=!1,!a.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(o){var a=this.list;if(Array.isArray(o)){for(var n=[],u=0;u<o.length;u++)n.push(a[o[u]]);return n}else return a[o]},getAll:function(){var o={};for(var a in this.list)this.list.hasOwnProperty(a)&&(o[a]=this.list[a]);return o},query:function(o){var a={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(o)&&(a[n]=this.list[n]);return a},set:function(o,a){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,a);for(var n in o)this.setValue(n,o[n]);return this},inc:function(o,a){if(this._frozen)return this;a===void 0&&(a=1);var n=this.get(o);return n===void 0&&(n=0),this.set(o,n+a),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,a){if(this._frozen)return this;if(this.has(o))this.values[o]=a;else{var n=this,u=this.list,c=this.events,l=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return u[o]},set:function(v){if(!n._frozen){var p=u[o];u[o]=v,c.emit(x.CHANGE_DATA,l,o,v,p),c.emit(x.CHANGE_DATA_KEY+o,l,v,p)}}}),u[o]=a,c.emit(x.SET_DATA,l,o,a)}return this},each:function(o,a){for(var n=[this.parent,null,void 0],u=1;u<arguments.length;u++)n.push(arguments[u]);for(var c in this.list)n[1]=c,n[2]=this.list[c],o.apply(a,n);return this},merge:function(o,a){a===void 0&&(a=!0);for(var n in o)o.hasOwnProperty(n)&&(a||!a&&!this.has(n))&&this.setValue(n,o[n]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var a=0;a<o.length;a++)this.removeValue(o[a]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var a=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(x.REMOVE_DATA,this.parent,o,a)}return this},pop:function(o){var a=void 0;return!this._frozen&&this.has(o)&&(a=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(x.REMOVE_DATA,this.parent,o,a)),a},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var a in this.list)this.list[a]!==void 0&&o++;return o}}});r.exports=f},63646:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(45893),f=i(37277),o=i(44594),a=new d({Extends:x,initialize:function(u){x.call(this,u,u.sys.events),this.scene=u,this.systems=u.sys,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});f.register("DataManagerPlugin",a,"data"),r.exports=a},10700:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata"},93608:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata-"},60883:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},69780:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedata"},22166:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="setdata"},24882:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84148),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function f(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),a=!!o.canPlayType;try{if(a){var n=function(l,v){var p=o.canPlayType("audio/"+l).replace(/^no$/,"");return Boolean(v?p||o.canPlayType("audio/"+v).replace(/^no$/,""):p)};if(x.ogg=n('ogg; codecs="vorbis"'),x.opus=n('ogg; codecs="opus"',"opus"),x.mp3=n("mpeg"),x.wav=n("wav"),x.m4a=n("x-m4a"),x.aac=n("aac"),x.flac=n("flac","x-flac"),x.webm=n('webm; codecs="vorbis"'),o.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(d.edge)x.dolby=!0;else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var u=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(u===10&&c>=11||u>10)&&(x.dolby=!0)}}}}catch{}return x}r.exports=f()},84148:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function f(){var o=navigator.userAgent;return/Edg\/\d+/.test(o)?(x.edge=!0,x.es2019=!0):/OPR/.test(o)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(o)&&!d.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(o)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(o)&&d.iOS?(x.mobileSafari=!0,x.es2019=!0):/MSIE (\d+\.\d+);/.test(o)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(o)&&!d.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(x.silk=!0),x}r.exports=f()},89289:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function f(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var l=new Image;l.onload=function(){var v=d.create2D(l,6),p=v.getContext("2d",{willReadFrequently:!0});if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(l,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;d.remove(l),x.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},l.src=n+"/wCKxvRF"+u},c.src=n+"AP804Oa6"+u,!1}function o(){var n=d.create2D(this,2),u=n.getContext("2d",{willReadFrequently:!0});u.fillStyle="rgba(10, 20, 30, 0.5)",u.fillRect(0,0,1,1);var c=u.getImageData(0,0,1,1);if(c===null)return!1;u.putImageData(c,1,0);var l=u.getImageData(1,0,1,1),v=l.data[0]===c.data[0]&&l.data[1]===c.data[1]&&l.data[2]===c.data[2]&&l.data[3]===c.data[3];return d.remove(this),v}function a(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=f(),x.supportInverseAlpha=o()),x}r.exports=a()},89357:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),x=i(84148),f=i(27919),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var u=new ArrayBuffer(4),c=new Uint8Array(u),l=new Uint32Array(u);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var u=!1,c=function(){if(window.WebGLRenderingContext)try{var l=f.createWebGL(this),v=l.getContext("webgl")||l.getContext("experimental-webgl"),p=f.create2D(this),g=p.getContext("2d",{willReadFrequently:!0}),m=g.createImageData(1,1);return u=m.data instanceof Uint8ClampedArray,f.remove(l),f.remove(p),!!v}catch{return!1}return!1};return o.webGL=c(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(o.getUserMedia=!1),!d.iOS&&(x.ie||x.firefox||x.chrome)&&(o.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=a()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&u,o}r.exports=n()},91639:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function i(){if(typeof importScripts=="function")return T;var d,x="Fullscreen",f="FullScreen",o=["request"+x,"request"+f,"webkitRequest"+x,"webkitRequest"+f,"msRequest"+x,"msRequest"+f,"mozRequest"+f,"mozRequest"+x];for(d=0;d<o.length;d++)if(document.documentElement[o[d]]){T.available=!0,T.request=o[d];break}var a=["cancel"+f,"exit"+x,"webkitCancel"+f,"webkitExit"+x,"msCancel"+f,"msExit"+x,"mozCancel"+f,"mozExit"+x];if(T.available){for(d=0;d<a.length;d++)if(document[a[d]]){T.cancel=a[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}r.exports=i()},31784:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84148),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function f(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||d.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":d.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}r.exports=f()},25892:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){if(typeof importScripts=="function")return T;var d=navigator.userAgent;/Windows/.test(d)?T.windows=!0:/Mac OS/.test(d)&&!/like Mac OS/.test(d)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(d)?T.android=!0:/Linux/.test(d)?T.linux=!0:/iP[ao]d|iPhone/i.test(d)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=d.toLowerCase().indexOf("iphone")!==-1,T.iPad=d.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(d)||/\bKF[A-Z][A-Z]+/.test(d)||/Silk.*Mobile Safari/.test(d)?T.kindle=!0:/CrOS/.test(d)&&(T.chromeOS=!0),(/Windows Phone/i.test(d)||/IEMobile/i.test(d))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var x=/Silk/.test(d);return(T.windows||T.macOS||T.linux&&!x||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(d)&&/Touch/i.test(d))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(d)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}r.exports=i()},43267:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function f(){if(typeof importScripts=="function")return x;var o=document.createElement("video"),a=!!o.canPlayType,n=/^no$/;try{a&&(o.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(x.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(x.h264=!0,x.mp4=!0),o.canPlayType("video/x-m4v").replace(n,"")&&(x.m4v=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(x.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(x.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(x.hls=!0))}catch{}return o.parentNode&&o.parentNode.removeChild(o),x.getVideoURL=function(u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var l=d(u[c],"url",u[c]);if(l.indexOf("blob:")===0)return{url:l,type:""};var v;if(l.indexOf("data:")===0?v=l.split(",")[0].match(/\/(.*?);/):v=l.match(/\.([a-zA-Z0-9]+)($|\?)/),v=d(u[c],"type",v?v[1]:"").toLowerCase(),x[v])return{url:l,type:v}}return null},x}r.exports=f()},82264:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new Float32Array(20),f=new d({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(o){return this._matrix.set(o),this._dirty=!0,this},reset:function(){var o=this._matrix;return o.fill(0),o[0]=1,o[6]=1,o[12]=1,o[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var o=this._data;return this._dirty&&(o.set(this._matrix),o[4]/=255,o[9]/=255,o[14]/=255,o[19]/=255,this._dirty=!1),o},brightness:function(o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var n=o;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],a)},saturate:function(o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var n=o*2/3+1,u=(n-1)*-.5;return this.multiply([n,u,u,0,0,u,n,u,0,0,u,u,n,0,0,0,0,0,1,0],a)},desaturate:function(o){return o===void 0&&(o=!1),this.saturate(-1,o)},hue:function(o,a){o===void 0&&(o=0),a===void 0&&(a=!1),o=o/180*Math.PI;var n=Math.cos(o),u=Math.sin(o),c=.213,l=.715,v=.072;return this.multiply([c+n*(1-c)+u*-c,l+n*-l+u*-l,v+n*-v+u*(1-v),0,0,c+n*-c+u*.143,l+n*(1-l)+u*.14,v+n*-v+u*-.283,0,0,c+n*-c+u*-(1-c),l+n*-l+u*l,v+n*(1-v)+u*v,0,0,0,0,0,1,0],a)},grayscale:function(o,a){return o===void 0&&(o=1),a===void 0&&(a=!1),this.saturate(-o,a)},blackWhite:function(o){return o===void 0&&(o=!1),this.multiply(f.BLACK_WHITE,o)},contrast:function(o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var n=o+1,u=-.5*(n-1);return this.multiply([n,0,0,0,u,0,n,0,0,u,0,0,n,0,u,0,0,0,1,0],a)},negative:function(o){return o===void 0&&(o=!1),this.multiply(f.NEGATIVE,o)},desaturateLuminance:function(o){return o===void 0&&(o=!1),this.multiply(f.DESATURATE_LUMINANCE,o)},sepia:function(o){return o===void 0&&(o=!1),this.multiply(f.SEPIA,o)},night:function(o,a){return o===void 0&&(o=.1),a===void 0&&(a=!1),this.multiply([o*-2,-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0],a)},lsd:function(o){return o===void 0&&(o=!1),this.multiply(f.LSD,o)},brown:function(o){return o===void 0&&(o=!1),this.multiply(f.BROWN,o)},vintagePinhole:function(o){return o===void 0&&(o=!1),this.multiply(f.VINTAGE,o)},kodachrome:function(o){return o===void 0&&(o=!1),this.multiply(f.KODACHROME,o)},technicolor:function(o){return o===void 0&&(o=!1),this.multiply(f.TECHNICOLOR,o)},polaroid:function(o){return o===void 0&&(o=!1),this.multiply(f.POLAROID,o)},shiftToBGR:function(o){return o===void 0&&(o=!1),this.multiply(f.SHIFT_BGR,o)},multiply:function(o,a){a===void 0&&(a=!1),a||this.reset();var n=this._matrix,u=x;return u.set(n),n.set([u[0]*o[0]+u[1]*o[5]+u[2]*o[10]+u[3]*o[15],u[0]*o[1]+u[1]*o[6]+u[2]*o[11]+u[3]*o[16],u[0]*o[2]+u[1]*o[7]+u[2]*o[12]+u[3]*o[17],u[0]*o[3]+u[1]*o[8]+u[2]*o[13]+u[3]*o[18],u[0]*o[4]+u[1]*o[9]+u[2]*o[14]+u[3]*o[19]+u[4],u[5]*o[0]+u[6]*o[5]+u[7]*o[10]+u[8]*o[15],u[5]*o[1]+u[6]*o[6]+u[7]*o[11]+u[8]*o[16],u[5]*o[2]+u[6]*o[7]+u[7]*o[12]+u[8]*o[17],u[5]*o[3]+u[6]*o[8]+u[7]*o[13]+u[8]*o[18],u[5]*o[4]+u[6]*o[9]+u[7]*o[14]+u[8]*o[19]+u[9],u[10]*o[0]+u[11]*o[5]+u[12]*o[10]+u[13]*o[15],u[10]*o[1]+u[11]*o[6]+u[12]*o[11]+u[13]*o[16],u[10]*o[2]+u[11]*o[7]+u[12]*o[12]+u[13]*o[17],u[10]*o[3]+u[11]*o[8]+u[12]*o[13]+u[13]*o[18],u[10]*o[4]+u[11]*o[9]+u[12]*o[14]+u[13]*o[19]+u[14],u[15]*o[0]+u[16]*o[5]+u[17]*o[10]+u[18]*o[15],u[15]*o[1]+u[16]*o[6]+u[17]*o[11]+u[18]*o[16],u[15]*o[2]+u[16]*o[7]+u[17]*o[12]+u[18]*o[17],u[15]*o[3]+u[16]*o[8]+u[17]*o[13]+u[18]*o[18],u[15]*o[4]+u[16]*o[9]+u[17]*o[14]+u[18]*o[19]+u[19]]),this._dirty=!0,this}});f.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],f.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],f.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],f.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],f.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],f.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],f.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],f.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],f.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],f.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],f.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r.exports=f},51767:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(29747),f=new d({initialize:function(a,n,u){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(a,n,u)},set:function(o,a,n){return o===void 0&&(o=0),a===void 0&&(a=0),n===void 0&&(n=0),this._rgb=[o,a,n],this.onChange(),this},equals:function(o,a,n){var u=this._rgb;return u[0]===o&&u[1]===a&&u[2]===n},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});r.exports=f},60461:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};r.exports=T},54312:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(35893),f=i(86327),o=i(88417),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)+c),f(n,d(u)+l),n};r.exports=a},46768:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(26541),f=i(86327),o=i(385),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)-c),f(n,d(u)+l),n};r.exports=a},35827:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(54380),f=i(86327),o=i(40136),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)+c),f(n,d(u)+l),n};r.exports=a},46871:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66786),x=i(35893),f=i(7702),o=function(a,n,u,c){return u===void 0&&(u=0),c===void 0&&(c=0),d(a,x(n)+u,f(n)+c),a};r.exports=o},5198:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),x=i(26541),f=i(20786),o=i(385),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)-c),f(n,d(u)+l),n};r.exports=a},11879:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),x=[];x[d.BOTTOM_CENTER]=i(54312),x[d.BOTTOM_LEFT]=i(46768),x[d.BOTTOM_RIGHT]=i(35827),x[d.CENTER]=i(46871),x[d.LEFT_CENTER]=i(5198),x[d.RIGHT_CENTER]=i(80503),x[d.TOP_CENTER]=i(89698),x[d.TOP_LEFT]=i(922),x[d.TOP_RIGHT]=i(21373),x[d.LEFT_BOTTOM]=x[d.BOTTOM_LEFT],x[d.LEFT_TOP]=x[d.TOP_LEFT],x[d.RIGHT_BOTTOM]=x[d.BOTTOM_RIGHT],x[d.RIGHT_TOP]=x[d.TOP_RIGHT];var f=function(o,a,n,u,c){return x[n](o,a,u,c)};r.exports=f},80503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),x=i(54380),f=i(20786),o=i(40136),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)+c),f(n,d(u)+l),n};r.exports=a},89698:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35893),x=i(17717),f=i(88417),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,d(u)+c),o(n,x(u)-l),n};r.exports=a},922:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),x=i(17717),f=i(385),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,d(u)-c),o(n,x(u)-l),n};r.exports=a},21373:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),x=i(17717),f=i(40136),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,d(u)+c),o(n,x(u)-l),n};r.exports=a},91660:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),x=i(79291),f={In:i(91660),To:i(16694)};f=x(!1,f,d),r.exports=f},21578:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(35893),f=i(88417),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,x(u)+c),o(n,d(u)+l),n};r.exports=a},10210:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(26541),f=i(385),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,x(u)-c),o(n,d(u)+l),n};r.exports=a},82341:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(54380),f=i(40136),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,x(u)+c),o(n,d(u)+l),n};r.exports=a},87958:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(26541),f=i(86327),o=i(40136),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)-c),f(n,d(u)+l),n};r.exports=a},40080:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),x=i(26541),f=i(20786),o=i(40136),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)-c),f(n,d(u)+l),n};r.exports=a},88466:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),x=i(17717),f=i(40136),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,d(u)-c),o(n,x(u)-l),n};r.exports=a},38829:(r,T,i)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),x=[];x[d.BOTTOM_CENTER]=i(21578),x[d.BOTTOM_LEFT]=i(10210),x[d.BOTTOM_RIGHT]=i(82341),x[d.LEFT_BOTTOM]=i(87958),x[d.LEFT_CENTER]=i(40080),x[d.LEFT_TOP]=i(88466),x[d.RIGHT_BOTTOM]=i(19211),x[d.RIGHT_CENTER]=i(34609),x[d.RIGHT_TOP]=i(48741),x[d.TOP_CENTER]=i(49440),x[d.TOP_LEFT]=i(81288),x[d.TOP_RIGHT]=i(61323);var f=function(o,a,n,u,c){return x[n](o,a,u,c)};r.exports=f},19211:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(54380),f=i(86327),o=i(385),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)+c),f(n,d(u)+l),n};r.exports=a},34609:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),x=i(54380),f=i(20786),o=i(385),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,x(u)+c),f(n,d(u)+l),n};r.exports=a},48741:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),x=i(17717),f=i(385),o=i(66737),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(n,d(u)+c),o(n,x(u)-l),n};r.exports=a},49440:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35893),x=i(17717),f=i(86327),o=i(88417),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,d(u)+c),f(n,x(u)-l),n};r.exports=a},81288:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),x=i(17717),f=i(86327),o=i(385),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,d(u)-c),f(n,x(u)-l),n};r.exports=a},61323:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),x=i(17717),f=i(86327),o=i(40136),a=function(n,u,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(n,d(u)+c),f(n,x(u)-l),n};r.exports=a},16694:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(88417),x=i(20786),f=function(o,a,n){return d(o,a),x(o,n)};r.exports=f},62235:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.y+i.height-i.height*i.originY};r.exports=T},72873:(r,T,i)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),x=i(26541),f=i(54380),o=i(17717),a=i(87841),n=function(u,c){c===void 0&&(c=new a);var l=x(u),v=o(u);return c.x=l,c.y=v,c.width=f(u)-l,c.height=d(u)-v,c};r.exports=n},35893:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x-i.width*i.originX+i.width*.5};r.exports=T},7702:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.y-i.height*i.originY+i.height*.5};r.exports=T},26541:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x-i.width*i.originX};r.exports=T},87431:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.width*i.originX};r.exports=T},46928:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.height*i.originY};r.exports=T},54380:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x+i.width-i.width*i.originX};r.exports=T},17717:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.y-i.height*i.originY};r.exports=T},86327:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.y=d-i.height+i.height*i.originY,i};r.exports=T},88417:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.width*i.originX;return i.x=d+x-i.width*.5,i};r.exports=T},20786:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.height*i.originY;return i.y=d+x-i.height*.5,i};r.exports=T},385:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x=d+i.width*i.originX,i};r.exports=T},40136:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x=d-i.width+i.width*i.originX,i};r.exports=T},66737:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.y=d+i.height*i.originY,i};r.exports=T},58724:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(i){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(x){i.style["image-rendering"]=x}),i.style.msInterpolationMode="nearest-neighbor",i},setBicubic:function(i){return i.style["image-rendering"]="auto",i.style.msInterpolationMode="bicubic",i}};r.exports=T},27919:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8054),x=i(68703),f=[],o=!1,a=function(){var n=function(P,M,E,w,R){M===void 0&&(M=1),E===void 0&&(E=1),w===void 0&&(w=d.CANVAS),R===void 0&&(R=!1);var A,L=l(w);return L===null?(L={parent:P,canvas:document.createElement("canvas"),type:w},w===d.CANVAS&&f.push(L),A=L.canvas):(L.parent=P,A=L.canvas),R&&(L.parent=A),A.width=M,A.height=E,o&&w===d.CANVAS&&x.disable(A.getContext("2d",{willReadFrequently:!1})),A},u=function(P,M,E){return n(P,M,E,d.CANVAS)},c=function(P,M,E){return n(P,M,E,d.WEBGL)},l=function(P){if(P===void 0&&(P=d.CANVAS),P===d.WEBGL)return null;for(var M=0;M<f.length;M++){var E=f[M];if(!E.parent&&E.type===P)return E}return null},v=function(P){var M=P instanceof HTMLCanvasElement;f.forEach(function(E){(M&&E.canvas===P||!M&&E.parent===P)&&(E.parent=null,E.canvas.width=1,E.canvas.height=1)})},p=function(){var P=0;return f.forEach(function(M){M.parent&&P++}),P},g=function(){return f.length-p()},m=function(){o=!0},C=function(){o=!1};return{create2D:u,create:n,createWebGL:c,disableSmoothing:m,enableSmoothing:C,first:l,free:g,pool:f,remove:v,total:p}};r.exports=a()},68703:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",i=function(){var d=function(a){for(var n=["i","webkitI","msI","mozI","oI"],u=0;u<n.length;u++){var c=n[u]+"mageSmoothingEnabled";if(c in a)return c}return null},x=function(a){return T===""&&(T=d(a)),T&&(a[T]=!0),a},f=function(a){return T===""&&(T=d(a)),T&&(a[T]=!1),a},o=function(a){return T!==null?a[T]:null};return{disable:f,enable:x,getPrefix:d,isEnabled:o}};r.exports=i()},65208:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d="none"),i.style.msTouchAction=d,i.style["ms-touch-action"]=d,i.style["touch-action"]=d,i};r.exports=T},91610:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(f){i.style[f+"user-select"]=d}),i.style["-webkit-touch-callout"]=d,i.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",i};r.exports=T},26253:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(37589),f=i(1e3),o=i(7537),a=i(87837),n=new d({initialize:function(c,l,v,p){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,l,v,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(u,c,l,v,p){return v===void 0&&(v=255),p===void 0&&(p=!0),this._locked=!0,this.red=u,this.green=c,this.blue=l,this.alpha=v,this._locked=!1,this.update(p)},setGLTo:function(u,c,l,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=u,this.greenGL=c,this.blueGL=l,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(u){return this._locked=!0,this.red=u.r,this.green=u.g,this.blue=u.b,u.hasOwnProperty("a")&&(this.alpha=u.a),this._locked=!1,this.update(!0)},setFromHSV:function(u,c,l){return o(u,c,l,this)},update:function(u){if(u===void 0&&(u=!1),this._locked)return this;var c=this.r,l=this.g,v=this.b,p=this.a;return this._color=x(c,l,v),this._color32=f(c,l,v,p),this._rgba="rgba("+c+","+l+","+v+","+p/255+")",u&&a(c,l,v,this),this},updateHSV:function(){var u=this.r,c=this.g,l=this.b;return a(u,c,l,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(u){return this.setTo(u,u,u)},random:function(u,c){u===void 0&&(u=0),c===void 0&&(c=255);var l=Math.floor(u+Math.random()*(c-u)),v=Math.floor(u+Math.random()*(c-u)),p=Math.floor(u+Math.random()*(c-u));return this.setTo(l,v,p)},randomGray:function(u,c){u===void 0&&(u=0),c===void 0&&(c=255);var l=Math.floor(u+Math.random()*(c-u));return this.setTo(l,l,l)},saturate:function(u){return this.s+=u/100,this},desaturate:function(u){return this.s-=u/100,this},lighten:function(u){return this.v+=u/100,this},darken:function(u){return this.v-=u/100,this},brighten:function(u){var c=this.r,l=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(u/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(u/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(u/100)))),this.setTo(c,l,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(u){this.gl[0]=Math.min(Math.abs(u),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(u){this.gl[1]=Math.min(Math.abs(u),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(u){this.gl[2]=Math.min(Math.abs(u),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(u){this.gl[3]=Math.min(Math.abs(u),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(u){u=Math.floor(Math.abs(u)),this.r=Math.min(u,255),this.gl[0]=u/255,this.update(!0)}},green:{get:function(){return this.g},set:function(u){u=Math.floor(Math.abs(u)),this.g=Math.min(u,255),this.gl[1]=u/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(u){u=Math.floor(Math.abs(u)),this.b=Math.min(u,255),this.gl[2]=u/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(u){u=Math.floor(Math.abs(u)),this.a=Math.min(u,255),this.gl[3]=u/255,this.update()}},h:{get:function(){return this._h},set:function(u){this._h=u,o(u,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(u){this._s=u,o(this._h,u,this._v,this)}},v:{get:function(){return this._v},set:function(u){this._v=u,o(this._h,this._s,u,this)}}});r.exports=n},92728:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589),x=function(f){f===void 0&&(f=1024);var o=[],a=255,n,u=255,c=0,l=0;for(n=0;n<=a;n++)o.push({r:u,g:n,b:l,color:d(u,n,l)});for(c=255,n=a;n>=0;n--)o.push({r:n,g:c,b:l,color:d(n,c,l)});for(u=0,n=0;n<=a;n++,c--)o.push({r:u,g:c,b:n,color:d(u,c,n)});for(c=0,l=255,n=0;n<=a;n++,l--,u++)o.push({r:u,g:c,b:l,color:d(u,c,l)});if(f===1024)return o;var v=[],p=0,g=1024/f;for(n=0;n<f;n++)v.push(o[Math.floor(p)]),p+=g;return v};r.exports=x},91588:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d={r:i>>16&255,g:i>>8&255,b:i&255,a:255};return i>16777215&&(d.a=i>>>24),d};r.exports=T},62957:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=i.toString(16);return d.length===1?"0"+d:d};r.exports=T},37589:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i<<16|d<<8|x};r.exports=T},1e3:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return f<<24|i<<16|d<<8|x};r.exports=T},62183:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),x=i(89528),f=function(o,a,n){var u=n,c=n,l=n;if(a!==0){var v=n<.5?n*(1+a):n+a-n*a,p=2*n-v;u=x(p,v,o+1/3),c=x(p,v,o),l=x(p,v,o-1/3)}var g=new d;return g.setGLTo(u,c,l,1)};r.exports=f},27939:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7537),x=function(f,o){f===void 0&&(f=1),o===void 0&&(o=1);for(var a=[],n=0;n<=359;n++)a.push(d(n/359,f,o));return a};r.exports=x},7537:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589);function x(o,a,n,u){var c=(o+a*6)%6,l=Math.min(c,4-c,1);return Math.round(255*(u-u*n*Math.max(0,l)))}var f=function(o,a,n,u){a===void 0&&(a=1),n===void 0&&(n=1);var c=x(5,o,a,n),l=x(3,o,a,n),v=x(1,o,a,n);return u?u.setTo?u.setTo(c,l,v,u.alpha,!0):(u.r=c,u.g=l,u.b=v,u.color=d(c,l,v),u):{r:c,g:l,b:v,color:d(c,l,v)}};r.exports=f},70238:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),x=function(f){var o=new d;f=f.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,v,p,g){return v+v+p+p+g+g});var a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);if(a){var n=parseInt(a[1],16),u=parseInt(a[2],16),c=parseInt(a[3],16);o.setTo(n,u,c)}return o};r.exports=x},89528:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?i+(d-i)*6*x:x<.5?d:x<.6666666666666666?i+(d-i)*(.6666666666666666-x)*6:i};r.exports=T},30100:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),x=i(90664),f=function(o){var a=x(o);return new d(a.r,a.g,a.b,a.a)};r.exports=f},90664:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i>16777215?{a:i>>>24,r:i>>16&255,g:i>>8&255,b:i&255}:{a:255,r:i>>16&255,g:i>>8&255,b:i&255}};r.exports=T},13699:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28915),x=function(a,n,u,c,l,v,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:d(a,c,m),g:d(n,l,m),b:d(u,v,m)}},f=function(a,n,u,c){return u===void 0&&(u=100),c===void 0&&(c=0),x(a.r,a.g,a.b,n.r,n.g,n.b,u,c)},o=function(a,n,u,c,l,v){return l===void 0&&(l=100),v===void 0&&(v=0),x(a.r,a.g,a.b,n,u,c,l,v)};r.exports={RGBWithRGB:x,ColorWithRGB:o,ColorWithColor:f}},68957:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),x=function(f){return new d(f.r,f.g,f.b,f.a)};r.exports=x},87388:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),x=function(f){var o=new d,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(f.toLowerCase());if(a){var n=parseInt(a[1],10),u=parseInt(a[2],10),c=parseInt(a[3],10),l=a[4]!==void 0?parseFloat(a[4]):1;o.setTo(n,u,c,l*255)}return o};r.exports=x},87837:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){f===void 0&&(f={h:0,s:0,v:0}),i/=255,d/=255,x/=255;var o=Math.min(i,d,x),a=Math.max(i,d,x),n=a-o,u=0,c=a===0?0:n/a,l=a;return a!==o&&(a===i?u=(d-x)/n+(d<x?6:0):a===d?u=(x-i)/n+2:a===x&&(u=(i-d)/n+4),u/=6),f.hasOwnProperty("_h")?(f._h=u,f._s=c,f._v=l):(f.h=u,f.s=c,f.v=l),f};r.exports=T},75723:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62957),x=function(f,o,a,n,u){return n===void 0&&(n=255),u===void 0&&(u="#"),u==="#"?"#"+((1<<24)+(f<<16)+(o<<8)+a).toString(16).slice(1,7):"0x"+d(n)+d(f)+d(o)+d(a)};r.exports=x},85386:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),x=i(40987),f=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=255),new x(d(o,a),d(o,a),d(o,a))};r.exports=f},80333:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70238),x=i(30100),f=i(68957),o=i(87388),a=function(n){var u=typeof n;switch(u){case"string":return n.substr(0,3).toLowerCase()==="rgb"?o(n):d(n);case"number":return x(n);case"object":return f(n)}};r.exports=a},3956:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987);d.ColorSpectrum=i(92728),d.ColorToRGBA=i(91588),d.ComponentToHex=i(62957),d.GetColor=i(37589),d.GetColor32=i(1e3),d.HexStringToColor=i(70238),d.HSLToColor=i(62183),d.HSVColorWheel=i(27939),d.HSVToRGB=i(7537),d.HueToComponent=i(89528),d.IntegerToColor=i(30100),d.IntegerToRGB=i(90664),d.Interpolate=i(13699),d.ObjectToColor=i(68957),d.RandomRGB=i(85386),d.RGBStringToColor=i(87388),d.RGBToHSV=i(87837),d.RGBToString=i(75723),d.ValueToColor=i(80333),r.exports=d},27460:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(39429),f=new d({initialize:function(a,n,u,c,l,v){n||(n=a.sys.make.image({x:u,y:c,key:l,frame:v,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,a,n){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,n)},postRenderWebGL:function(o,a,n){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,a,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(o,a,n,u,c){return new f(this.scene,o,a,n,u,c)}),r.exports=f},80661:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a){this.geometryMask=a,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(f){return this.geometryMask=f,this},setInvertAlpha:function(f){return f===void 0&&(f=!0),this.invertAlpha=f,this},preRenderWebGL:function(f,o,a){var n=f.gl;f.flush(),f.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),f.maskCount=0),f.currentCameraMask.mask!==this&&(f.currentMask.mask=this),f.maskStack.push({mask:this,camera:a}),this.applyStencil(f,a,!0),f.maskCount++},applyStencil:function(f,o,a){var n=f.gl,u=this.geometryMask,c=f.maskCount,l=255;n.colorMask(!1,!1,!1,!1),a?(n.stencilFunc(n.EQUAL,c,l),n.stencilOp(n.KEEP,n.KEEP,n.INCR),c++):(n.stencilFunc(n.EQUAL,c+1,l),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=c,u.renderWebGL(f,u,o),f.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,c,l):n.stencilFunc(n.EQUAL,c,l)},postRenderWebGL:function(f){var o=f.gl;f.maskStack.pop(),f.maskCount--,f.flush();var a=f.currentMask;if(f.maskStack.length===0)a.mask=null,o.disable(o.STENCIL_TEST);else{var n=f.maskStack[f.maskStack.length-1];n.mask.applyStencil(f,n.camera,!1),f.currentCameraMask.mask!==n.mask?(a.mask=n.mask,a.camera=n.camera):a.mask=null}},preRenderCanvas:function(f,o,a){var n=this.geometryMask;f.currentContext.save(),n.renderCanvas(f,n,a,null,null,!0),f.currentContext.clip()},postRenderCanvas:function(f){f.currentContext.restore()},destroy:function(){this.geometryMask=null}});r.exports=x},69781:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u){(!a||a==="")&&(a=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),u===void 0&&(u=null),this.key=o,this.fragmentSrc=a,this.vertexSrc=n,this.uniforms=u}});r.exports=x},40366:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x;if(d)typeof d=="string"?x=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(x=d);else if(i.parentElement||d===null)return i;return x||(x=document.body),x.appendChild(i),i};r.exports=T},83719:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),x=function(f){var o=f.config;if(!(!o.parent||!o.domCreateContainer)){var a=document.createElement("div");a.style.cssText=["display: block;","width: "+f.scale.width+"px;","height: "+f.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),f.domContainer=a,d(a,o.parent)}};r.exports=x},57264:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),x=function(f){if(document.readyState==="complete"||document.readyState==="interactive"){f();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),f()};document.body?d.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};r.exports=x},57811:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){if(!i)return window.innerHeight;var d=Math.abs(window.orientation),x={w:0,h:0},f=document.createElement("div");return f.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(f),x.w=d===90?f.offsetHeight:window.innerWidth,x.h=d===90?window.innerWidth:f.offsetHeight,document.documentElement.removeChild(f),f=null,Math.abs(window.orientation)!==90?x.h:x.w};r.exports=T},45818:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13560),x=function(f,o){var a=window.screen,n=a?a.orientation||a.mozOrientation||a.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return d.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return d.ORIENTATION.LANDSCAPE}else return o>f?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE};r.exports=x},74403:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d;return i!==""&&(typeof i=="string"?d=document.getElementById(i):i&&i.nodeType===1&&(d=i)),d||(d=document.body),d};r.exports=T},56836:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d="";try{if(window.DOMParser){var x=new DOMParser;d=x.parseFromString(i,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(i)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};r.exports=T},35846:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){i.parentNode&&i.parentNode.removeChild(i)};r.exports=T},43092:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(29747),f=new d({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var a=this;this.step=function n(u){a.callback(u),a.isRunning&&(a.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){a.isRunning&&(a.timeOutID=window.setTimeout(n,a.delay)),a.callback(window.performance.now())}},start:function(o,a,n){this.isRunning||(this.callback=o,this.isSetTimeOut=a,this.delay=n,this.isRunning=!0,this.timeOutID=a?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});r.exports=f},84902:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)};r.exports=d},47565:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(37277),o=new d({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});f.register("EventEmitter",o,"events"),r.exports=o},93055:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EventEmitter:i(47565)}},20122:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u){u===void 0&&(u=1),x.call(this,f.BARREL,n),this.amount=u}});r.exports=o},32251:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g){c===void 0&&(c=1),l===void 0&&(l=1),v===void 0&&(v=1),p===void 0&&(p=1),g===void 0&&(g=4),x.call(this,f.BLOOM,n),this.steps=g,this.offsetX=c,this.offsetY=l,this.blurStrength=v,this.strength=p,this.glcolor=[1,1,1],u!=null&&(this.color=u)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}}});r.exports=o},9047:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g){u===void 0&&(u=0),c===void 0&&(c=2),l===void 0&&(l=2),v===void 0&&(v=1),g===void 0&&(g=4),x.call(this,f.BLUR,n),this.quality=u,this.x=c,this.y=l,this.steps=g,this.strength=v,this.glcolor=[1,1,1],p!=null&&(this.color=p)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}}});r.exports=o},27885:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g,m){u===void 0&&(u=.5),c===void 0&&(c=1),l===void 0&&(l=.2),v===void 0&&(v=!1),p===void 0&&(p=1),g===void 0&&(g=1),m===void 0&&(m=1),x.call(this,f.BOKEH,n),this.radius=u,this.amount=c,this.contrast=l,this.isTiltShift=v,this.strength=m,this.blurX=p,this.blurY=g}});r.exports=o},12578:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p){u===void 0&&(u=8),v===void 0&&(v=1),p===void 0&&(p=.005),x.call(this,f.CIRCLE,n),this.scale=v,this.feather=p,this.thickness=u,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),l!=null&&(this.backgroundColor=l)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}},backgroundColor:{get:function(){var a=this.glcolor2;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor2;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(a){this.glcolor2[3]=a}}});r.exports=o},15802:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(89422),f=i(14811),o=new d({Extends:x,initialize:function(n){x.call(this),this.type=f.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});r.exports=o},72898:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a){this.type=o,this.gameObject=a,this.active=!0},setActive:function(f){return this.active=f,this},destroy:function(){this.gameObject=null,this.active=!1}});r.exports=x},44553:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l){u===void 0&&(u="__WHITE"),c===void 0&&(c=.005),l===void 0&&(l=.005),x.call(this,f.DISPLACEMENT,n),this.x=c,this.y=l,this.glTexture,this.setTexture(u)},setTexture:function(a){var n=this.gameObject.scene.sys.textures.getFrame(a);return n&&(this.glTexture=n.glTexture),this}});r.exports=o},68531:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v){c===void 0&&(c=4),l===void 0&&(l=0),v===void 0&&(v=!1),x.call(this,f.GLOW,n),this.outerStrength=c,this.innerStrength=l,this.knockout=v,this.glcolor=[1,1,1,1],u!==void 0&&(this.color=u)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}}});r.exports=o},37102:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g,m,C){l===void 0&&(l=.2),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=1),C===void 0&&(C=0),x.call(this,f.GRADIENT,n),this.alpha=l,this.size=C,this.fromX=v,this.fromY=p,this.toX=g,this.toY=m,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],u!=null&&(this.color1=u),c!=null&&(this.color2=c)},color1:{get:function(){var a=this.glcolor1;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var n=this.glcolor1;n[0]=a>>16&255,n[1]=a>>8&255,n[2]=a&255}},color2:{get:function(){var a=this.glcolor2;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var n=this.glcolor2;n[0]=a>>16&255,n[1]=a>>8&255,n[2]=a&255}}});r.exports=o},86886:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u){u===void 0&&(u=1),x.call(this,f.PIXELATE,n),this.amount=u}});r.exports=o},92322:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g,m){u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=.1),v===void 0&&(v=1),g===void 0&&(g=6),m===void 0&&(m=1),x.call(this,f.SHADOW,n),this.x=u,this.y=c,this.decay=l,this.power=v,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=m,p!==void 0&&(this.color=p)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var n=this.glcolor;n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(a&255)/255}}});r.exports=o},39563:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v){u===void 0&&(u=.5),c===void 0&&(c=.5),l===void 0&&(l=3),v===void 0&&(v=!1),x.call(this,f.SHINE,n),this.speed=u,this.lineWidth=c,this.gradient=l,this.reveal=v}});r.exports=o},56448:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v){u===void 0&&(u=.5),c===void 0&&(c=.5),l===void 0&&(l=.5),v===void 0&&(v=.5),x.call(this,f.VIGNETTE,n),this.x=u,this.y=c,this.radius=l,this.strength=v}});r.exports=o},38433:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72898),f=i(14811),o=new d({Extends:x,initialize:function(n,u,c,l,v){u===void 0&&(u=.1),c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=!1),x.call(this,f.WIPE,n),this.progress=0,this.wipeWidth=u,this.direction=c,this.axis=l,this.reveal=v}});r.exports=o},14811:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};r.exports=T},66064:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=i(14811),f={Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)};f=d(!1,f,x),r.exports=f},25305:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(23568),f=function(o,a,n){a.x=x(n,"x",0),a.y=x(n,"y",0),a.depth=x(n,"depth",0),a.flipX=x(n,"flipX",!1),a.flipY=x(n,"flipY",!1);var u=x(n,"scale",null);typeof u=="number"?a.setScale(u):u!==null&&(a.scaleX=x(u,"x",1),a.scaleY=x(u,"y",1));var c=x(n,"scrollFactor",null);typeof c=="number"?a.setScrollFactor(c):c!==null&&(a.scrollFactorX=x(c,"x",1),a.scrollFactorY=x(c,"y",1)),a.rotation=x(n,"rotation",0);var l=x(n,"angle",null);l!==null&&(a.angle=l),a.alpha=x(n,"alpha",1);var v=x(n,"origin",null);if(typeof v=="number")a.setOrigin(v);else if(v!==null){var p=x(v,"x",.5),g=x(v,"y",.5);a.setOrigin(p,g)}a.blendMode=x(n,"blendMode",d.NORMAL),a.visible=x(n,"visible",!0);var m=x(n,"add",!0);return m&&o.sys.displayList.add(a),a.preUpdate&&o.sys.updateList.add(a),a};r.exports=f},13059:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23568),x=function(f,o){var a=d(o,"anims",null);if(a===null)return f;if(typeof a=="string")f.anims.play(a);else if(typeof a=="object"){var n=f.anims,u=d(a,"key",void 0);if(u){var c=d(a,"startFrame",void 0),l=d(a,"delay",0),v=d(a,"repeat",0),p=d(a,"repeatDelay",0),g=d(a,"yoyo",!1),m=d(a,"play",!1),C=d(a,"delayedPlay",0),P={key:u,delay:l,repeat:v,repeatDelay:p,yoyo:g,startFrame:c};m?n.play(P):C>0?n.playAfterDelay(P,C):n.load(P)}}return f};r.exports=x},8050:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(73162),f=i(37277),o=i(51708),a=i(44594),n=i(19186),u=new d({Extends:x,initialize:function(l){x.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.parentContainer&&c.parentContainer.remove(c),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(o.ADDED_TO_SCENE,c,this.scene),this.events.emit(a.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(o.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,l){return c._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list;c.length;)c[0].destroy(!0);this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});f.register("DisplayList",u,"displayList"),r.exports=u},95643:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(53774),f=i(45893),o=i(50792),a=i(51708),n=i(44594),u=new d({Extends:o,initialize:function(l,v){o.call(this),this.scene=l,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new f(this)),this},setData:function(c,l){return this.data||(this.data=new f(this)),this.data.set(c,l),this},incData:function(c,l){return this.data||(this.data=new f(this)),this.data.inc(c,l),this},toggleData:function(c){return this.data||(this.data=new f(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new f(this)),this.data.get(c)},setInteractive:function(c,l,v){return this.scene.sys.input.enable(this,c,l,v),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(c){var l=this.displayList&&this.displayList.active?this.displayList.willRender(c):!0;return!(!l||u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,l=this.parentContainer,v=[];l&&(v.unshift(l.getIndex(c)),c=l,l.parentContainer);)l=l.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),c.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c&&c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,r.exports=u},44603:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(37277),f=i(44594),o=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(a,n){o.prototype.hasOwnProperty(a)||(o.prototype[a]=n)},o.remove=function(a){o.prototype.hasOwnProperty(a)&&delete o.prototype[a]},x.register("GameObjectCreator",o,"make"),r.exports=o},39429:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(37277),f=i(44594),o=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},existing:function(a){return(a.renderCanvas||a.renderWebGL)&&this.displayList.add(a),a.preUpdate&&this.updateList.add(a),a},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(a,n){o.prototype.hasOwnProperty(a)||(o.prototype[a]=n)},o.remove=function(a){o.prototype.hasOwnProperty(a)&&delete o.prototype[a]},x.register("GameObjectFactory",o,"add"),r.exports=o},91296:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),x=new d,f=new d,o=new d,a={camera:x,sprite:f,calc:o},n=function(u,c,l){var v=x,p=f,g=o;return p.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),v.copyFrom(c.matrix),l?(v.multiplyWithOffset(l,-c.scrollX*u.scrollFactorX,-c.scrollY*u.scrollFactorY),p.e=u.x,p.f=u.y):(p.e-=c.scrollX*u.scrollFactorX,p.f-=c.scrollY*u.scrollFactorY),v.multiply(p,g),a};r.exports=n},45027:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(25774),f=i(37277),o=i(44594),a=new d({Extends:x,initialize:function(u){x.call(this),this.checkQueue=!0,this.scene=u,this.systems=u.sys,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(o.PRE_UPDATE,this.update,this),n.on(o.UPDATE,this.sceneUpdate,this),n.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,u){for(var c=this._active,l=c.length,v=0;v<l;v++){var p=c[v];p.active&&p.preUpdate.call(p,n,u)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var u=this.systems.events;u.off(o.PRE_UPDATE,this.update,this),u.off(o.UPDATE,this.sceneUpdate,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});f.register("UpdateList",a,"updateList"),r.exports=a},3217:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a,n,u,c,l,v,p,g,m,C){var P=x.x-d.displayOriginX+o,M=x.y-d.displayOriginY+a,E=P+x.w,w=M+x.h,R=n.getXRound(P,M,u),A=n.getYRound(P,M,u),L=n.getXRound(P,w,u),F=n.getYRound(P,w,u),O=n.getXRound(E,w,u),b=n.getYRound(E,w,u),I=n.getXRound(E,M,u),B=n.getYRound(E,M,u);i.batchQuad(d,R,A,L,F,O,b,I,B,f.u0,f.v0,f.u1,f.v1,c,l,v,p,g,m,C)};r.exports=T},53048:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){if(x===void 0&&(x=!1),f===void 0)return f={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},f;var o=i.text,a=o.length,n=i.maxWidth,u=i.wordWrapCharCode,c=Number.MAX_VALUE,l=Number.MAX_VALUE,v=0,p=0,g=i.fontData.chars,m=i.fontData.lineHeight,C=i.letterSpacing,P=i.lineSpacing,M=0,E=0,w=0,R=null,A=i._align,L=0,F=0,O=i.fontSize/i.fontData.size,b=O*i.scaleX,I=O*i.scaleY,B=null,N=0,k=[],Y=Number.MAX_VALUE,H=0,z=0,X=0,D,G=[],V=[],W=null;if(n>0){for(D=0;D<a;D++){if(w=o.charCodeAt(D),w===10){W!==null&&(G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I,cr:!0}),W=null),M=0,E+=m+P,B=null;continue}if(R=g[w],!!R){if(B!==null)var U=R.kerning[N];w===u?W!==null&&(G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I,cr:!1}),W=null):(W===null&&(W={word:"",i:D,x:M,y:E,w:0,h:m,cr:!1}),W.word=W.word.concat(o[D]),W.w+=R.xOffset+R.xAdvance+(U!==void 0?U:0)),M+=R.xAdvance+C,B=R,N=w}}W!==null&&G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I,cr:!1}),M=0,E=0,B=null,N=0;var $,K=0,Z=[];for(D=0;D<G.length;D++){var J=G[D],Q=J.x,j=J.x+J.w;if($){var _=Q-($.x+$.w);K=Q-(_+$.w),$=null}var q=Q-K,st=j-K;q>n||st>n?(Z.push(J.i-1),J.cr?(Z.push(J.i+J.word.length),K=0,$=null):$=J):J.cr&&(Z.push(J.i+J.word.length),K=0,$=null)}var ht=function(Ft,ee,oe){return Ft.substr(0,ee)+oe+Ft.substr(ee+1)};for(D=Z.length-1;D>=0;D--)o=ht(o,Z[D],`
`);f.wrappedText=o,a=o.length,G=[],W=null}var lt=0;for(D=0;D<a;D++){if(w=o.charCodeAt(D),w===10){W!==null&&(G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I}),W=null),M=0,E+=m+P,B=null,k[z]=X,X>H&&(H=X),X<Y&&(Y=X),z++,X=0;continue}if(R=g[w],!!R){if(L=M,F=E,B!==null){var ot=R.kerning[N];L+=ot!==void 0?ot:0}c>L&&(c=L),l>F&&(l=F);var tt=L+R.xAdvance,at=F+m;v<tt&&(v=tt),p<at&&(p=at);var nt=R.xOffset+R.xAdvance+(ot!==void 0?ot:0);w===u?W!==null&&(G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I}),W=null):(W===null&&(W={word:"",i:lt,x:M,y:E,w:0,h:m}),W.word=W.word.concat(o[D]),W.w+=nt),V.push({i:lt,idx:D,char:o[D],code:w,x:(R.xOffset+L)*O,y:(R.yOffset+E)*O,w:R.width*O,h:R.height*O,t:E*O,r:tt*O,b:m*O,line:z,glyph:R}),M+=R.xAdvance+C+(ot!==void 0?ot:0),B=R,N=w,X=tt*O,lt++}}if(W!==null&&G.push({word:W.word,i:W.i,x:W.x*b,y:W.y*I,w:W.w*b,h:W.h*I}),k[z]=X,X>H&&(H=X),X<Y&&(Y=X),A>0)for(var vt=0;vt<V.length;vt++){var mt=V[vt];if(A===1){var Bt=(H-k[mt.line])/2;mt.x+=Bt,mt.r+=Bt}else if(A===2){var Dt=H-k[mt.line];mt.x+=Dt,mt.r+=Dt}}var Pt=f.local,Ct=f.global,Ut=f.lines;return Pt.x=c*O,Pt.y=l*O,Pt.width=v*O,Pt.height=p*O,Ct.x=i.x-i._displayOriginX+c*b,Ct.y=i.y-i._displayOriginY+l*I,Ct.width=v*b,Ct.height=p*I,Ut.shortest=Y,Ut.longest=H,Ut.lengths=k,d&&(Pt.x=Math.ceil(Pt.x),Pt.y=Math.ceil(Pt.y),Pt.width=Math.ceil(Pt.width),Pt.height=Math.ceil(Pt.height),Ct.x=Math.ceil(Ct.x),Ct.y=Math.ceil(Ct.y),Ct.width=Math.ceil(Ct.width),Ct.height=Math.ceil(Ct.height),Ut.shortest=Math.ceil(Y),Ut.longest=Math.ceil(H)),x&&(i._displayOriginX=i.originX*Pt.width,i._displayOriginY=i.originY*Pt.height,Ct.x=i.x-i._displayOriginX*i.scaleX,Ct.y=i.y-i._displayOriginY*i.scaleY,d&&(Ct.x=Math.ceil(Ct.x),Ct.y=Math.ceil(Ct.y))),f.words=G,f.characters=V,f.lines.height=m,f.scale=O,f.scaleX=i.scaleX,f.scaleY=i.scaleY,f};r.exports=T},61327:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21859),x=function(f,o,a,n,u,c,l){var v=f.sys.textures.get(a),p=v.get(n),g=f.sys.cache.xml.get(u);if(p&&g){var m=d(g,p,c,l,v);return f.sys.cache.bitmapFont.add(o,{data:m,texture:a,frame:n,fromAtlas:!0}),!0}else return!1};r.exports=x},6925:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),x=function(f,o){var a=o.width,n=o.height,u=Math.floor(a/2),c=Math.floor(n/2),l=d(o,"chars","");if(l!==""){var v=d(o,"image",""),p=f.sys.textures.getFrame(v),g=p.cutX,m=p.cutY,C=p.source.width,P=p.source.height,M=d(o,"offset.x",0),E=d(o,"offset.y",0),w=d(o,"spacing.x",0),R=d(o,"spacing.y",0),A=d(o,"lineSpacing",0),L=d(o,"charsPerRow",null);L===null&&(L=C/a,L>l.length&&(L=l.length));for(var F=M,O=E,b={retroFont:!0,font:v,size:a,lineHeight:n+A,chars:{}},I=0,B=0;B<l.length;B++){var N=l.charCodeAt(B),k=(g+F)/C,Y=(m+O)/P,H=(g+F+a)/C,z=(m+O+n)/P;b.chars[N]={x:F,y:O,width:a,height:n,centerX:u,centerY:c,xOffset:0,yOffset:0,xAdvance:a,data:{},kerning:{},u0:k,v0:Y,u1:H,v1:z},I++,I===L?(I=0,F=M,O+=n+R):F+=a+w}var X={data:b,frame:null,texture:v};return X}};r.exports=x},21859:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(d,x){return parseInt(d.getAttribute(x),10)}var i=function(d,x,f,o,a){f===void 0&&(f=0),o===void 0&&(o=0);var n=x.cutX,u=x.cutY,c=x.source.width,l=x.source.height,v=x.sourceIndex,p={},g=d.getElementsByTagName("info")[0],m=d.getElementsByTagName("common")[0];p.font=g.getAttribute("face"),p.size=T(g,"size"),p.lineHeight=T(m,"lineHeight")+o,p.chars={};var C=d.getElementsByTagName("char"),P=x!==void 0&&x.trimmed;if(P)var M=x.height,E=x.width;for(var w=0;w<C.length;w++){var R=C[w],A=T(R,"id"),L=String.fromCharCode(A),F=T(R,"x"),O=T(R,"y"),b=T(R,"width"),I=T(R,"height");P&&(F<E&&(E=F),O<M&&(M=O)),P&&M!==0&&E!==0&&(F-=x.x,O-=x.y);var B=(n+F)/c,N=(u+O)/l,k=(n+F+b)/c,Y=(u+O+I)/l;if(p.chars[A]={x:F,y:O,width:b,height:I,centerX:Math.floor(b/2),centerY:Math.floor(I/2),xOffset:T(R,"xoffset"),yOffset:T(R,"yoffset"),xAdvance:T(R,"xadvance")+f,data:{},kerning:{},u0:B,v0:N,u1:k,v1:Y},a&&b!==0&&I!==0){var H=a.add(L,v,F,O,b,I);H&&H.setUVs(b,I,B,N,k,Y)}}var z=d.getElementsByTagName("kerning");for(w=0;w<z.length;w++){var X=z[w],D=T(X,"first"),G=T(X,"second"),V=T(X,"amount");p.chars[G].kerning[D]=V}return p};r.exports=i},196:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87662),x=i(79291),f={Parse:i(6925)};f=x(!1,f,d),r.exports=f},87662:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};r.exports=T},2638:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),x=i(83419),f=i(12310),o=new x({Extends:d,Mixins:[f],initialize:function(n,u,c,l,v,p,g){d.call(this,n,u,c,l,v,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(a,n){return this.cropWidth=a,this.cropHeight=n,this},setDisplayCallback:function(a){return this.displayCallback=a,this},setScrollX:function(a){return this.scrollX=a,this},setScrollY:function(a){return this.scrollY=a,this}});r.exports=o},86741:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20926),x=function(f,o,a,n){var u=o._text,c=u.length,l=f.currentContext;if(!(c===0||!d(f,l,o,a,n))){a.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.displayCallback,g=o.callbackData,m=o.fontData.chars,C=o.fontData.lineHeight,P=o._letterSpacing,M=0,E=0,w=0,R=null,A=0,L=0,F=0,O=0,b=0,I=0,B=null,N=0,k=o.frame.source.image,Y=v.cutX,H=v.cutY,z=0,X=0,D=o._fontSize/o.fontData.size,G=o._align,V=0,W=0;o.getTextBounds(!1);var U=o._bounds.lines;G===1?W=(U.longest-U.lengths[0])/2:G===2&&(W=U.longest-U.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);var $=a.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(l.beginPath(),l.rect(0,0,o.cropWidth,o.cropHeight),l.clip());for(var K=0;K<c;K++){if(X=D,z=0,w=u.charCodeAt(K),w===10){V++,G===1?W=(U.longest-U.lengths[V])/2:G===2&&(W=U.longest-U.lengths[V]),M=0,E+=C,B=null;continue}if(R=m[w],!!R){if(A=Y+R.x,L=H+R.y,F=R.width,O=R.height,b=R.xOffset+M-o.scrollX,I=R.yOffset+E-o.scrollY,B!==null){var Z=R.kerning[N];b+=Z!==void 0?Z:0}if(p){g.index=K,g.charCode=w,g.x=b,g.y=I,g.scale=X,g.rotation=z,g.data=R.data;var J=p(g);b=J.x,I=J.y,X=J.scale,z=J.rotation}b*=X,I*=X,b+=W,M+=R.xAdvance+P+(Z!==void 0?Z:0),B=R,N=w,!(F===0||O===0||w===32)&&($&&(b=Math.round(b),I=Math.round(I)),l.save(),l.translate(b,I),l.rotate(z),l.scale(X,X),l.drawImage(k,A,L,F,O,0,0,F,O),l.restore())}}l.restore()}};r.exports=x},11164:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2638),x=i(25305),f=i(44603),o=i(23568);f.register("dynamicBitmapText",function(a,n){a===void 0&&(a={});var u=o(a,"font",""),c=o(a,"text",""),l=o(a,"size",!1),v=new d(this.scene,0,0,u,c,l);return n!==void 0&&(a.add=n),x(this.scene,v,a),v})},72566:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2638),x=i(39429);x.register("dynamicBitmapText",function(f,o,a,n,u){return this.displayList.add(new d(this.scene,f,o,a,n,u))})},12310:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(73482),f=i(86741),r.exports={renderWebGL:x,renderCanvas:f}},73482:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(61340),f=i(70554),o=new x,a=function(n,u,c,l){var v=u.text,p=v.length;if(p!==0){c.addToRenderList(u);var g=n.pipelines.set(u.pipeline,u),m=d(u,c,l);n.pipelines.preBatch(u);var C=m.sprite,P=m.calc,M=o,E=u.cropWidth>0||u.cropHeight>0;E&&(g.flush(),n.pushScissor(P.tx,P.ty,u.cropWidth*P.scaleX,u.cropHeight*P.scaleY));var w=u.frame,R=w.glTexture,A=u.tintFill,L=f.getTintAppendFloatAlpha(u.tintTopLeft,c.alpha*u._alphaTL),F=f.getTintAppendFloatAlpha(u.tintTopRight,c.alpha*u._alphaTR),O=f.getTintAppendFloatAlpha(u.tintBottomLeft,c.alpha*u._alphaBL),b=f.getTintAppendFloatAlpha(u.tintBottomRight,c.alpha*u._alphaBR),I=g.setGameObject(u),B=0,N=0,k=0,Y=0,H=u.letterSpacing,z,X=0,D=0,G,V=u.scrollX,W=u.scrollY,U=u.fontData,$=U.chars,K=U.lineHeight,Z=u.fontSize/U.size,J=0,Q=u._align,j=0,_=0,q=u.getTextBounds(!1);u.maxWidth>0&&(v=q.wrappedText,p=v.length);var st=u._bounds.lines;Q===1?_=(st.longest-st.lengths[0])/2:Q===2&&(_=st.longest-st.lengths[0]);for(var ht=c.roundPixels,lt=u.displayCallback,ot=u.callbackData,tt=0;tt<p;tt++){if(k=v.charCodeAt(tt),k===10){j++,Q===1?_=(st.longest-st.lengths[j])/2:Q===2&&(_=st.longest-st.lengths[j]),B=0,N+=K,G=null;continue}if(z=$[k],!!z){X=z.width,D=z.height;var at=z.xOffset+B-V,nt=z.yOffset+N-W;if(G!==null){var vt=z.kerning[Y];at+=vt!==void 0?vt:0}if(B+=z.xAdvance+H,G=z,Y=k,!(X===0||D===0||k===32)){if(Z=u.fontSize/u.fontData.size,J=0,lt){ot.color=0,ot.tint.topLeft=L,ot.tint.topRight=F,ot.tint.bottomLeft=O,ot.tint.bottomRight=b,ot.index=tt,ot.charCode=k,ot.x=at,ot.y=nt,ot.scale=Z,ot.rotation=J,ot.data=z.data;var mt=lt(ot);at=mt.x,nt=mt.y,Z=mt.scale,J=mt.rotation,mt.color?(L=mt.color,F=mt.color,O=mt.color,b=mt.color):(L=mt.tint.topLeft,F=mt.tint.topRight,O=mt.tint.bottomLeft,b=mt.tint.bottomRight),L=f.getTintAppendFloatAlpha(L,c.alpha*u._alphaTL),F=f.getTintAppendFloatAlpha(F,c.alpha*u._alphaTR),O=f.getTintAppendFloatAlpha(O,c.alpha*u._alphaBL),b=f.getTintAppendFloatAlpha(b,c.alpha*u._alphaBR)}at*=Z,nt*=Z,at-=u.displayOriginX,nt-=u.displayOriginY,at+=_,M.applyITRS(at,nt,J,Z,Z),P.multiply(M,C);var Bt=z.u0,Dt=z.v0,Pt=z.u1,Ct=z.v1,Ut=X,Ft=D,ee=C.e,oe=C.f,Ie=Ft*C.c+C.e,Es=Ft*C.d+C.f,Ms=Ut*C.a+Ft*C.c+C.e,ws=Ut*C.b+Ft*C.d+C.f,Rs=Ut*C.a+C.e,As=Ut*C.b+C.f;ht&&(ee=Math.round(ee),oe=Math.round(oe),Ie=Math.round(Ie),Es=Math.round(Es),Ms=Math.round(Ms),ws=Math.round(ws),Rs=Math.round(Rs),As=Math.round(As)),g.shouldFlush(6)&&(g.flush(),I=g.setGameObject(u)),g.batchQuad(u,ee,oe,Ie,Es,Ms,ws,Rs,As,Bt,Dt,Pt,Ct,L,F,O,b,A,R,I)}}}E&&(g.flush(),n.popScissor()),n.pipelines.postBatch(u)}};r.exports=a},22186:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(45319),f=i(31401),o=i(95643),a=i(53048),n=i(61327),u=i(21859),c=i(87841),l=i(18658),v=new d({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Texture,f.Tint,f.Transform,f.Visible,l],initialize:function(g,m,C,P,M,E,w){M===void 0&&(M=""),w===void 0&&(w=0),o.call(this,g,"BitmapText"),this.font=P;var R=this.scene.sys.cache.bitmapFont.get(P);R||console.warn("Invalid BitmapText key: "+P),this.fontData=R.data,this._text="",this._fontSize=E||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(m,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(M)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setLineSpacing:function(p){return p===void 0&&(p=0),this.lineSpacing=p,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,C){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=C,this},setCharacterTint:function(p,g,m,C,P,M,E){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),C===void 0&&(C=-1),P===void 0&&(P=C,M=C,E=C);var w=this.text.length;g===-1&&(g=w),p<0&&(p=w+p),p=x(p,0,w-1);for(var R=x(p+g,p,w),A=this.charColors,L=p;L<R;L++){var F=A[L];if(C===-1)A[L]=null;else{var O=m?1:0;F?(F.tintEffect=O,F.tintTL=C,F.tintTR=P,F.tintBL=M,F.tintBR=E):A[L]={tintEffect:O,tintTL:C,tintTR:P,tintBL:M,tintBR:E}}}return this},setWordTint:function(p,g,m,C,P,M,E){g===void 0&&(g=1);for(var w=this.getTextBounds(),R=w.words,A=typeof p=="number",L=0,F=0;F<R.length;F++){var O=R[F];if((A&&F===p||!A&&O.word===p)&&(this.setCharacterTint(O.i,O.word.length,m,C,P,M,E),L++,L===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(a(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var C=this.getLocalPoint(p,g,null,m),P=this.getTextBounds(),M=P.characters,E=new c,w=0;w<M.length;w++){var R=M[w];if(E.setTo(R.x,R.t,R.r-R.x,R.b),E.contains(C.x,C.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align);var C=this.scene.sys.cache.bitmapFont.get(p);return C&&(this.font=p,this.fontData=C.data,this._fontSize=g,this._align=m,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),a(this,!1,!0,this._bounds)),this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(p){this._lineSpacing=p,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var p=f.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=n,v.ParseXMLBitmapFont=u,r.exports=v},37289:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20926),x=function(f,o,a,n){var u=o._text,c=u.length,l=f.currentContext;if(!(c===0||!d(f,l,o,a,n))){a.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.fontData.chars,g=o.fontData.lineHeight,m=o._letterSpacing,C=o._lineSpacing,P=0,M=0,E=0,w=null,R=0,A=0,L=0,F=0,O=0,b=0,I=null,B=0,N=v.source.image,k=v.cutX,Y=v.cutY,H=o._fontSize/o.fontData.size,z=o._align,X=0,D=0,G=o.getTextBounds(!1);o.maxWidth>0&&(u=G.wrappedText,c=u.length);var V=o._bounds.lines;z===1?D=(V.longest-V.lengths[0])/2:z===2&&(D=V.longest-V.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);for(var W=a.roundPixels,U=0;U<c;U++){if(E=u.charCodeAt(U),E===10){X++,z===1?D=(V.longest-V.lengths[X])/2:z===2&&(D=V.longest-V.lengths[X]),P=0,M+=g+C,I=null;continue}if(w=p[E],!!w){if(R=k+w.x,A=Y+w.y,L=w.width,F=w.height,O=w.xOffset+P,b=w.yOffset+M,I!==null){var $=w.kerning[B];O+=$!==void 0?$:0}O*=H,b*=H,O+=D,P+=w.xAdvance+m+($!==void 0?$:0),I=w,B=E,!(L===0||F===0||E===32)&&(W&&(O=Math.round(O),b=Math.round(b)),l.save(),l.translate(O,b),l.scale(H,H),l.drawImage(N,R,A,L,F,0,0,L,F),l.restore())}}l.restore()}};r.exports=x},57336:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),x=i(25305),f=i(44603),o=i(23568),a=i(35154);f.register("bitmapText",function(n,u){n===void 0&&(n={});var c=a(n,"font",""),l=o(n,"text",""),v=o(n,"size",!1),p=a(n,"align",0),g=new d(this.scene,0,0,c,l,v,p);return u!==void 0&&(n.add=u),x(this.scene,g,n),g})},34914:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),x=i(39429);x.register("bitmapText",function(f,o,a,n,u,c){return this.displayList.add(new d(this.scene,f,o,a,n,u,c))})},18658:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(33590),f=i(37289),r.exports={renderWebGL:x,renderCanvas:f}},33590:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3217),x=i(91296),f=i(70554),o=function(a,n,u,c){var l=n._text,v=l.length;if(v!==0){u.addToRenderList(n);var p=a.pipelines.set(n.pipeline,n),g=x(n,u,c).calc;a.pipelines.preBatch(n);var m=u.roundPixels,C=u.alpha,P=n.charColors,M=n.tintFill,E=f.getTintAppendFloatAlpha,w=E(n.tintTopLeft,C*n._alphaTL),R=E(n.tintTopRight,C*n._alphaTR),A=E(n.tintBottomLeft,C*n._alphaBL),L=E(n.tintBottomRight,C*n._alphaBR),F=n.frame.glTexture,O=p.setGameObject(n),b=n.getTextBounds(!1),I,B,N,k=b.characters,Y=n.dropShadowX,H=n.dropShadowY,z=Y!==0||H!==0;if(z){var X=n.dropShadowColor,D=n.dropShadowAlpha,G=E(X,C*D*n._alphaTL),V=E(X,C*D*n._alphaTR),W=E(X,C*D*n._alphaBL),U=E(X,C*D*n._alphaBR);for(I=0;I<k.length;I++)B=k[I],N=B.glyph,!(B.code===32||N.width===0||N.height===0)&&d(p,n,B,N,Y,H,g,m,G,V,W,U,1,F,O)}for(I=0;I<k.length;I++)if(B=k[I],N=B.glyph,!(B.code===32||N.width===0||N.height===0))if(p.shouldFlush(6)&&(p.flush(),O=p.setGameObject(n)),P[B.i]){var $=P[B.i],K=$.tintEffect,Z=E($.tintTL,C*n._alphaTL),J=E($.tintTR,C*n._alphaTR),Q=E($.tintBL,C*n._alphaBL),j=E($.tintBR,C*n._alphaBR);d(p,n,B,N,0,0,g,m,Z,J,Q,j,K,F,O)}else d(p,n,B,N,0,0,g,m,w,R,A,L,M,F,O);a.pipelines.postBatch(n)}};r.exports=o},6107:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(48011),x=i(46590),f=i(83419),o=i(31401),a=i(4327),n=i(95643),u=i(73162),c=new f({Extends:n,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,d],initialize:function(v,p,g,m,C){n.call(this,v,"Blitter"),this.setTexture(m,C),this.setPosition(p,g),this.initPipeline(),this.initPostPipeline(),this.children=new u,this.renderList=[],this.dirty=!1},create:function(l,v,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof a||(p=this.texture.get(p));var C=new x(this,l,v,p,g);return this.children.addAt(C,m,!1),this.dirty=!0,C},createFromCallback:function(l,v,p,g){for(var m=this.createMultiple(v,p,g),C=0;C<m.length;C++){var P=m[C];l.call(this,P,C)}return m},createMultiple:function(l,v,p){v===void 0&&(v=this.frame.name),p===void 0&&(p=!0),Array.isArray(v)||(v=[v]);var g=[],m=this;return v.forEach(function(C){for(var P=0;P<l;P++)g.push(m.create(0,0,C,p))}),g},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});r.exports=c},72396:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=d.getRenderList();if(o.length!==0){var a=i.currentContext,n=x.alpha*d.alpha;if(n!==0){x.addToRenderList(d),a.globalCompositeOperation=i.blendModes[d.blendMode],a.imageSmoothingEnabled=!d.frame.source.scaleMode;var u=d.x-x.scrollX*d.scrollFactorX,c=d.y-x.scrollY*d.scrollFactorY;a.save(),f&&f.copyToContext(a);for(var l=x.roundPixels,v=0;v<o.length;v++){var p=o[v],g=p.flipX||p.flipY,m=p.frame,C=m.canvasData,P=m.x,M=m.y,E=1,w=1,R=p.alpha*n;R!==0&&(a.globalAlpha=R,g?(p.flipX&&(E=-1,P-=C.width),p.flipY&&(w=-1,M-=C.height),C.width>0&&C.height>0&&(a.save(),a.translate(p.x+u,p.y+c),a.scale(E,w),a.drawImage(m.source.image,C.x,C.y,C.width,C.height,P,M,C.width,C.height),a.restore())):(l&&(P=Math.round(P),M=Math.round(M)),C.width>0&&C.height>0&&a.drawImage(m.source.image,C.x,C.y,C.width,C.height,P+p.x+u,M+p.y+c,C.width,C.height)))}a.restore()}}};r.exports=T},9403:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6107),x=i(25305),f=i(44603),o=i(23568);f.register("blitter",function(a,n){a===void 0&&(a={});var u=o(a,"key",null),c=o(a,"frame",null),l=new d(this.scene,0,0,u,c);return n!==void 0&&(a.add=n),x(this.scene,l,a),l})},12709:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6107),x=i(39429);x.register("blitter",function(f,o,a,n){return this.displayList.add(new d(this.scene,f,o,a,n))})},48011:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(99485),f=i(72396),r.exports={renderWebGL:x,renderCanvas:f}},99485:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),x=i(70554),f=new d,o=function(a,n,u,c){var l=n.getRenderList(),v=u.alpha*n.alpha;if(!(l.length===0||v===0)){u.addToRenderList(n);var p=a.pipelines.set(this.pipeline,n),g=u.scrollX*n.scrollFactorX,m=u.scrollY*n.scrollFactorY,C=f.copyFrom(u.matrix);c&&(C.multiplyWithOffset(c,-g,-m),g=0,m=0);var P=n.x-g,M=n.y-m,E=-1,w=!1;a.pipelines.preBatch(n);for(var R=0;R<l.length;R++){var A=l[R],L=A.frame,F=A.alpha*v;if(F!==0){var O=L.width,b=L.height,I=P+A.x+L.x,B=M+A.y+L.y;A.flipX&&(O*=-1,I+=L.width),A.flipY&&(b*=-1,B+=L.height);var N=C.setQuad(I,B,I+O,B+b),k=x.getTintAppendFloatAlpha(A.tint,F);if(L.sourceIndex!==E){var Y=p.setGameObject(n,L);E=L.sourceIndex}p.batchQuad(n,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],L.u0,L.v0,L.u1,L.v1,k,k,k,k,w,L.glTexture,Y)&&(E=-1)}}a.pipelines.postBatch(n)}};r.exports=o},46590:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(4327),f=new d({initialize:function(a,n,u,c,l){this.parent=a,this.x=n,this.y=u,this.frame=c,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof x&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,a,n){return this.x=o,this.y=a,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(o,a){return this.x=o,this.y=a,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,a){return this.flipX=o,this.flipY=a,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});r.exports=f},16005:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=2,f={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,a,n,u){return o===void 0&&(o=1),a===void 0?this.alpha=o:(this._alphaTL=d(o,0,1),this._alphaTR=d(a,0,1),this._alphaBL=d(n,0,1),this._alphaBR=d(u,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var a=d(o,0,1);this._alpha=a,this._alphaTL=a,this._alphaTR=a,this._alphaBL=a,this._alphaBR=a,a===0?this.renderFlags&=~x:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var a=d(o,0,1);this._alphaTL=a,a!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var a=d(o,0,1);this._alphaTR=a,a!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var a=d(o,0,1);this._alphaBL=a,a!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var a=d(o,0,1);this._alphaBR=a,a!==0&&(this.renderFlags|=x)}}};r.exports=f},88509:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=2,f={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var a=d(o,0,1);this._alpha=a,a===0?this.renderFlags&=~x:this.renderFlags|=x}}};r.exports=f},90065:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x={_blendMode:d.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(f){typeof f=="string"&&(f=d[f]),f|=0,f>=-1&&(this._blendMode=f)}},setBlendMode:function(f){return this.blendMode=f,this}};r.exports=x},94215:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}},setSize:function(i,d){return this.width=i,this.height=d,this},setDisplaySize:function(i,d){return this.displayWidth=i,this.displayHeight=d,this}};r.exports=T},61683:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(i,d,x,f){if(i===void 0)this.isCropped=!1;else if(this.frame){if(typeof i=="number")this.frame.setCropUVs(this._crop,i,d,x,f,this.flipX,this.flipY);else{var o=i;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=T},89272:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_depth:0,depth:{get:function(){return this._depth},set:function(i){this.displayList&&this.displayList.queueDepthSort(),this._depth=i}},setDepth:function(i){return i===void 0&&(i=0),this.depth=i,this}};r.exports=T},47059:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(66064),f=i(19133),o=new d({initialize:function(n,u){this.gameObject=n,this.isPost=u,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(a){return a===void 0&&(a=0),this.padding=a,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(a){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,a!==void 0&&(this.padding=a),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var a=this.list,n=0;n<a.length;n++)a[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(a){var n;if(this.isPost){var u=this.gameObject.getPostPipeline(String(a.type));for(Array.isArray(u)||(u=[u]),n=0;n<u.length;n++){var c=u[n];if(c.controller===a){this.gameObject.removePostPipeline(c),a.destroy();break}}}else{var l=this.list;for(n=0;n<l.length;n++)l[n]===a&&(f(l,n),a.destroy())}return this.gameObject},disable:function(a){return a===void 0&&(a=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,a&&this.clear(),this.gameObject},add:function(a,n){if(this.isPost){var u=String(a.type);this.gameObject.setPostPipeline(u,n);var c=this.gameObject.getPostPipeline(u);if(c)return Array.isArray(c)&&(c=c.pop()),c.controller=a,a}else return this.enabled||this.enable(),this.list.push(a),a},addGlow:function(a,n,u,c,l,v){return this.add(new x.Glow(this.gameObject,a,n,u,c),{quality:l,distance:v})},addShadow:function(a,n,u,c,l,v,p){return this.add(new x.Shadow(this.gameObject,a,n,u,c,l,v,p))},addPixelate:function(a){return this.add(new x.Pixelate(this.gameObject,a))},addVignette:function(a,n,u,c){return this.add(new x.Vignette(this.gameObject,a,n,u,c))},addShine:function(a,n,u,c){return this.add(new x.Shine(this.gameObject,a,n,u,c))},addBlur:function(a,n,u,c,l,v){return this.add(new x.Blur(this.gameObject,a,n,u,c,l,v))},addGradient:function(a,n,u,c,l,v,p,g){return this.add(new x.Gradient(this.gameObject,a,n,u,c,l,v,p,g))},addBloom:function(a,n,u,c,l,v){return this.add(new x.Bloom(this.gameObject,a,n,u,c,l,v))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(a,n,u,c,l){return this.add(new x.Circle(this.gameObject,a,n,u,c,l))},addBarrel:function(a){return this.add(new x.Barrel(this.gameObject,a))},addDisplacement:function(a,n,u){return this.add(new x.Displacement(this.gameObject,a,n,u))},addWipe:function(a,n,u){return this.add(new x.Wipe(this.gameObject,a,n,u))},addReveal:function(a,n,u){return this.add(new x.Wipe(this.gameObject,a,n,u,!0))},addBokeh:function(a,n,u){return this.add(new x.Bokeh(this.gameObject,a,n,u))},addTiltShift:function(a,n,u,c,l,v){return this.add(new x.Bokeh(this.gameObject,a,n,u,!0,c,l,v))},destroy:function(){this.clear(),this.gameObject=null}});r.exports=o},54434:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(i){return this.flipX=i,this},setFlipY:function(i){return this.flipY=i,this},setFlip:function(i,d){return this.flipX=i,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};r.exports=T},8004:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=i(11520),f=i(26099),o={prepareBoundsOutput:function(a,n){if(n===void 0&&(n=!1),this.rotation!==0&&x(a,this.x,this.y,this.rotation),n&&this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();u.transformPoint(a.x,a.y,a)}return a},getCenter:function(a,n){return a===void 0&&(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,n)},getTopLeft:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,n)},getTopCenter:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,n)},getTopRight:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,n)},getLeftCenter:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,n)},getRightCenter:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,n)},getBottomLeft:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,n)},getBottomCenter:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,n)},getBottomRight:function(a,n){return a||(a=new f),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,n)},getBounds:function(a){a===void 0&&(a=new d);var n,u,c,l,v,p,g,m;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(a),C.transformPoint(a.x,a.y,a),n=a.x,u=a.y,this.getTopRight(a),C.transformPoint(a.x,a.y,a),c=a.x,l=a.y,this.getBottomLeft(a),C.transformPoint(a.x,a.y,a),v=a.x,p=a.y,this.getBottomRight(a),C.transformPoint(a.x,a.y,a),g=a.x,m=a.y}else this.getTopLeft(a),n=a.x,u=a.y,this.getTopRight(a),c=a.x,l=a.y,this.getBottomLeft(a),v=a.x,p=a.y,this.getBottomRight(a),g=a.x,m=a.y;return a.x=Math.min(n,c,v,g),a.y=Math.min(u,l,p,m),a.width=Math.max(n,c,v,g)-a.x,a.height=Math.max(u,l,p,m)-a.y,a}};r.exports=o},8573:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6858),x=i(80661),f={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o,a,n,u,c){return o===void 0&&(this.texture||this.shader||this.geom)&&(o=this),new d(this.scene,o,a,n,u,c)},createGeometryMask:function(o){return o===void 0&&(this.type==="Graphics"||this.geom)&&(o=this),new x(this.scene,o)}};r.exports=f},27387:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(i){this._displayOriginX=i,this.originX=i/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(i){this._displayOriginY=i,this.originY=i/this.height}},setOrigin:function(i,d){return i===void 0&&(i=.5),d===void 0&&(d=i),this.originX=i,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(i,d){return i===void 0&&(i=0),d===void 0&&(d=i),this.displayOriginX=i,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};r.exports=T},37640:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39506),x=i(57355),f=i(35154),o=i(86353),a=i(26099),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(u,c){c===void 0&&(c=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=u,c&&this.startFollow(c),this},setRotateToPath:function(u,c){return c===void 0&&(c=0),this.rotateToPath=u,this.pathRotationOffset=c,this},isFollowing:function(){var u=this.pathTween;return u&&u.isPlaying()},startFollow:function(u,c){u===void 0&&(u={}),c===void 0&&(c=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof u=="number"&&(u={duration:u}),u.from=f(u,"from",0),u.to=f(u,"to",1);var v=x(u,"positionOnPath",!1);this.rotateToPath=x(u,"rotateToPath",!1),this.pathRotationOffset=f(u,"rotationOffset",0);var p=f(u,"startAt",c);if(p&&(u.onStart=function(m){var C=m.data[0];C.progress=p,C.elapsed=C.duration*p;var P=C.ease(C.progress);C.current=C.start+(C.end-C.start)*P,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),u.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(u),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+d(this.pathRotationOffset)}return this.pathConfig=u,this},pauseFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.pause(),this},resumeFollow:function(){var u=this.pathTween;return u&&u.isPaused()&&u.resume(),this},stopFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this},pathUpdate:function(){var u=this.pathTween;if(u&&u.data){var c=u.data[0],l=this.pathDelta,v=this.pathVector;if(l.copy(v).negate(),c.state===o.COMPLETE){this.path.getPoint(c.end,v),l.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==o.PLAYING_FORWARD&&c.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(u.getValue(),v),l.add(v),v.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(v.x,v.y);var m=this.x-p,C=this.y-g;if(m===0&&C===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,m)+d(this.pathRotationOffset))}}};r.exports=n},72699:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(f){this.pipelineData={};var o=this.scene.sys.renderer;if(!o)return!1;var a=o.pipelines;if(a){f===void 0&&(f=a.default);var n=a.get(f);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(f,o,a){var n=this.scene.sys.renderer;if(!n)return this;var u=n.pipelines;if(u){var c=u.get(f);c&&(this.pipeline=c),o&&(this.pipelineData=a?d(o):o)}return this},setPipelineData:function(f,o){var a=this.pipelineData;return o===void 0?delete a[f]:a[f]=o,this},resetPipeline:function(f){return f===void 0&&(f=!1),this.pipeline=this.defaultPipeline,f&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};r.exports=x},17581:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),x=i(47059),f=i(19133),o={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(a){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),a&&(this.preFX=new x(this,!1))},setPostPipeline:function(a,n,u){var c=this.scene.sys.renderer;if(!c)return this;var l=c.pipelines;if(l){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var p=l.getPostPipeline(a[v],this,n);p&&this.postPipelines.push(p)}n&&(this.postPipelineData=u?d(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(a,n){var u=this.postPipelineData;return n===void 0?delete u[a]:u[a]=n,this},getPostPipeline:function(a){for(var n=typeof a=="string",u=this.postPipelines,c=[],l=0;l<u.length;l++){var v=u[l];(n&&v.name===a||!n&&v instanceof a)&&c.push(v)}return c.length===1?c[0]:c},resetPostPipeline:function(a){a===void 0&&(a=!1);for(var n=this.postPipelines,u=0;u<n.length;u++)n[u].destroy();this.postPipelines=[],this.hasPostPipeline=!1,a&&(this.postPipelineData={})},removePostPipeline:function(a){for(var n=typeof a=="string",u=this.postPipelines,c=u.length-1;c>=0;c--){var l=u[c];(n&&l.name===a||!n&&l===a)&&(l.destroy(),f(u,c))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};r.exports=o},80227:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(i,d){return d===void 0&&(d=i),this.scrollFactorX=i,this.scrollFactorY=d,this}};r.exports=T},16736:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(i){this.scaleX=i/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(i){this.scaleY=i/this.frame.realHeight}},setSizeToFrame:function(i){i||(i=this.frame),this.width=i.realWidth,this.height=i.realHeight;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setSize:function(i,d){return this.width=i,this.height=d,this},setDisplaySize:function(i,d){return this.displayWidth=i,this.displayHeight=d,this}};r.exports=T},37726:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4327),x=8,f={texture:null,frame:null,isCropped:!1,setTexture:function(o,a,n,u){return this.texture=this.scene.sys.textures.get(o),this.setFrame(a,n,u)},setFrame:function(o,a,n){return a===void 0&&(a=!0),n===void 0&&(n=!0),o instanceof d?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};r.exports=f},79812:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4327),x=8,f={texture:null,frame:null,isCropped:!1,setCrop:function(o,a,n,u){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,a,n,u,this.flipX,this.flipY);else{var c=o;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,a){return this.texture=this.scene.sys.textures.get(o),this.setFrame(a)},setFrame:function(o,a,n){return a===void 0&&(a=!0),n===void 0&&(n=!0),o instanceof d?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=f},27472:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(i,d,x,f){return i===void 0&&(i=16777215),d===void 0&&(d=i,x=i,f=i),this.tintTopLeft=i,this.tintTopRight=d,this.tintBottomLeft=x,this.tintBottomRight=f,this.tintFill=!1,this},setTintFill:function(i,d,x,f){return this.setTint(i,d,x,f),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(i){this.setTint(i,i,i,i)}},isTinted:{get:function(){var i=16777215;return this.tintFill||this.tintTopLeft!==i||this.tintTopRight!==i||this.tintBottomLeft!==i||this.tintBottomRight!==i}}};r.exports=T},53774:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d={name:i.name,type:i.type,x:i.x,y:i.y,depth:i.depth,scale:{x:i.scaleX,y:i.scaleY},origin:{x:i.originX,y:i.originY},flipX:i.flipX,flipY:i.flipY,rotation:i.rotation,alpha:i.alpha,visible:i.visible,blendMode:i.blendMode,textureKey:"",frameKey:"",data:{}};return i.texture&&(d.textureKey=i.texture.key,d.frameKey=i.frame.name),d};r.exports=T},16901:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(61340),f=i(85955),o=i(86554),a=i(30954),n=i(26099),u=4,c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~u:this._scaleY!==0&&(this.renderFlags|=u)}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~u:this._scaleX!==0&&(this.renderFlags|=u)}},angle:{get:function(){return a(this._rotation*d.RAD_TO_DEG)},set:function(l){this.rotation=a(l)*d.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=o(l)}},setPosition:function(l,v,p,g){return l===void 0&&(l=0),v===void 0&&(v=l),p===void 0&&(p=0),g===void 0&&(g=0),this.x=l,this.y=v,this.z=p,this.w=g,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,v,p,g){return l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*p,this.y=v+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,v){return l===void 0&&(l=1),v===void 0&&(v=l),this.scaleX=l,this.scaleY=v,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new x),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,v){l===void 0&&(l=new x);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(l);for(v||(v=new x),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)v.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),v.multiply(l,l),p=p.parentContainer;return l},getLocalPoint:function(l,v,p,g){p||(p=new n),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,C=g.scrollY,P=l+m*this.scrollFactorX-m,M=v+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(P,M,p):f(P,M,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var l=0,v=this.parentContainer;v;)l+=v.rotation,v=v.parentContainer;return l}};r.exports=c},61340:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(36383),f=i(26099),o=new d({initialize:function(n,u,c,l,v,p){n===void 0&&(n=1),u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=1),v===void 0&&(v=0),p===void 0&&(p=0),this.matrix=new Float32Array([n,u,c,l,v,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(a){this.matrix[0]=a}},b:{get:function(){return this.matrix[1]},set:function(a){this.matrix[1]=a}},c:{get:function(){return this.matrix[2]},set:function(a){this.matrix[2]=a}},d:{get:function(){return this.matrix[3]},set:function(a){this.matrix[3]=a}},e:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},f:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},tx:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},ty:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var a=this.matrix,n=a[0],u=a[1],c=a[2],l=a[3];return n||u?u>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):c||l?x.TAU-(l>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var a=this.matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,this},translate:function(a,n){var u=this.matrix;return u[4]=u[0]*a+u[2]*n+u[4],u[5]=u[1]*a+u[3]*n+u[5],this},scale:function(a,n){var u=this.matrix;return u[0]*=a,u[1]*=a,u[2]*=n,u[3]*=n,this},rotate:function(a){var n=Math.sin(a),u=Math.cos(a),c=this.matrix,l=c[0],v=c[1],p=c[2],g=c[3];return c[0]=l*u+p*n,c[1]=v*u+g*n,c[2]=l*-n+p*u,c[3]=v*-n+g*u,this},multiply:function(a,n){var u=this.matrix,c=a.matrix,l=u[0],v=u[1],p=u[2],g=u[3],m=u[4],C=u[5],P=c[0],M=c[1],E=c[2],w=c[3],R=c[4],A=c[5],L=n===void 0?u:n.matrix;return L[0]=P*l+M*p,L[1]=P*v+M*g,L[2]=E*l+w*p,L[3]=E*v+w*g,L[4]=R*l+A*p+m,L[5]=R*v+A*g+C,L},multiplyWithOffset:function(a,n,u){var c=this.matrix,l=a.matrix,v=c[0],p=c[1],g=c[2],m=c[3],C=c[4],P=c[5],M=n*v+u*g+C,E=n*p+u*m+P,w=l[0],R=l[1],A=l[2],L=l[3],F=l[4],O=l[5];return c[0]=w*v+R*g,c[1]=w*p+R*m,c[2]=A*v+L*g,c[3]=A*p+L*m,c[4]=F*v+O*g+M,c[5]=F*p+O*m+E,this},transform:function(a,n,u,c,l,v){var p=this.matrix,g=p[0],m=p[1],C=p[2],P=p[3],M=p[4],E=p[5];return p[0]=a*g+n*C,p[1]=a*m+n*P,p[2]=u*g+c*C,p[3]=u*m+c*P,p[4]=l*g+v*C+M,p[5]=l*m+v*P+E,this},transformPoint:function(a,n,u){u===void 0&&(u={x:0,y:0});var c=this.matrix,l=c[0],v=c[1],p=c[2],g=c[3],m=c[4],C=c[5];return u.x=a*l+n*p+m,u.y=a*v+n*g+C,u},invert:function(){var a=this.matrix,n=a[0],u=a[1],c=a[2],l=a[3],v=a[4],p=a[5],g=n*l-u*c;return a[0]=l/g,a[1]=-u/g,a[2]=-c/g,a[3]=n/g,a[4]=(c*p-l*v)/g,a[5]=-(n*p-u*v)/g,this},copyFrom:function(a){var n=this.matrix;return n[0]=a.a,n[1]=a.b,n[2]=a.c,n[3]=a.d,n[4]=a.e,n[5]=a.f,this},copyFromArray:function(a){var n=this.matrix;return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],this},copyToContext:function(a){var n=this.matrix;return a.transform(n[0],n[1],n[2],n[3],n[4],n[5]),a},setToContext:function(a){return a.setTransform(this),a},copyToArray:function(a){var n=this.matrix;return a===void 0?a=[n[0],n[1],n[2],n[3],n[4],n[5]]:(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5]),a},setTransform:function(a,n,u,c,l,v){var p=this.matrix;return p[0]=a,p[1]=n,p[2]=u,p[3]=c,p[4]=l,p[5]=v,this},decomposeMatrix:function(){var a=this.decomposedMatrix,n=this.matrix,u=n[0],c=n[1],l=n[2],v=n[3],p=u*v-c*l;if(a.translateX=n[4],a.translateY=n[5],u||c){var g=Math.sqrt(u*u+c*c);a.rotation=c>0?Math.acos(u/g):-Math.acos(u/g),a.scaleX=g,a.scaleY=p/g}else if(l||v){var m=Math.sqrt(l*l+v*v);a.rotation=Math.PI*.5-(v>0?Math.acos(-l/m):-Math.acos(l/m)),a.scaleX=p/m,a.scaleY=m}else a.rotation=0,a.scaleX=0,a.scaleY=0;return a},applyITRS:function(a,n,u,c,l){var v=this.matrix,p=Math.sin(u),g=Math.cos(u);return v[4]=a,v[5]=n,v[0]=g*c,v[1]=p*c,v[2]=-p*l,v[3]=g*l,this},applyInverse:function(a,n,u){u===void 0&&(u=new f);var c=this.matrix,l=c[0],v=c[1],p=c[2],g=c[3],m=c[4],C=c[5],P=1/(l*g+p*-v);return u.x=g*P*a+-p*P*n+(C*p-m*g)*P,u.y=l*P*n+-v*P*a+(-C*l+m*v)*P,u},setQuad:function(a,n,u,c,l,v){l===void 0&&(l=!1),v===void 0&&(v=this.quad);var p=this.matrix,g=p[0],m=p[1],C=p[2],P=p[3],M=p[4],E=p[5];return l?(v[0]=Math.round(a*g+n*C+M),v[1]=Math.round(a*m+n*P+E),v[2]=Math.round(a*g+c*C+M),v[3]=Math.round(a*m+c*P+E),v[4]=Math.round(u*g+c*C+M),v[5]=Math.round(u*m+c*P+E),v[6]=Math.round(u*g+n*C+M),v[7]=Math.round(u*m+n*P+E)):(v[0]=a*g+n*C+M,v[1]=a*m+n*P+E,v[2]=a*g+c*C+M,v[3]=a*m+c*P+E,v[4]=u*g+c*C+M,v[5]=u*m+c*P+E,v[6]=u*g+n*C+M,v[7]=u*m+n*P+E),v},getX:function(a,n){return a*this.a+n*this.c+this.e},getY:function(a,n){return a*this.b+n*this.d+this.f},getXRound:function(a,n,u){var c=this.getX(a,n);return u&&(c=Math.round(c)),c},getYRound:function(a,n,u){var c=this.getY(a,n);return u&&(c=Math.round(c)),c},getCSSMatrix:function(){var a=this.matrix;return"matrix("+a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});r.exports=o},59715:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,i={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(d){return this.visible=d,this}};r.exports=i},31401:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37105),x=i(10312),f=i(83419),o=i(31401),a=i(51708),n=i(95643),u=i(87841),c=i(29959),l=i(36899),v=i(26099),p=new f({Extends:n,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.PostPipeline,o.Transform,o.Visible,c],initialize:function(m,C,P,M){n.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,P),this.setBlendMode(x.SKIP_CHECK),M&&this.add(M)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new u),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),C=m.transformPoint(this.x,this.y);g.setTo(C.x,C.y,0,0)}if(this.list.length>0){var P=this.list,M=new u,E=!1;g.setEmpty();for(var w=0;w<P.length;w++){var R=P[w];R.getBounds&&(R.getBounds(M),E?l(M,g,g):(g.setTo(M.x,M.y,M.width,M.height),E=!0))}}return g},addHandler:function(g){g.once(a.DESTROY,this.onChildDestroyed,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.parentContainer=this,g.removeFromDisplayList(),g.addedToScene())},removeHandler:function(g){g.off(a.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer=null,g.removedFromScene(),g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(g,m):(m.x=g.x,m.y=g.y);var C=this.tempTransformMatrix;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return d.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return d.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(C,P){return C[g]-P[g]}),d.StableSort(this.list,m),this):this},getByName:function(g){return d.GetFirst(this.list,"name",g)},getRandom:function(g,m){return d.GetRandom(this.list,g,m)},getFirst:function(g,m,C,P){return d.GetFirst(this.list,g,m,C,P)},getAll:function(g,m,C,P){return d.GetAll(this.list,g,m,C,P)},count:function(g,m,C,P){return d.CountAllMatching(this.list,g,m,C,P)},swap:function(g,m){return d.Swap(this.list,g,m),this},moveTo:function(g,m){return d.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return d.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return d.MoveBelow(this.list,g,m),this},remove:function(g,m){var C=d.Remove(this.list,g,this.removeHandler,this);if(m&&C){Array.isArray(C)||(C=[C]);for(var P=0;P<C.length;P++)C[P].destroy()}return this},removeAt:function(g,m){var C=d.RemoveAt(this.list,g,this.removeHandler,this);return m&&C&&C.destroy(),this},removeBetween:function(g,m,C){var P=d.RemoveBetween(this.list,g,m,this.removeHandler,this);if(C)for(var M=0;M<P.length;M++)P[M].destroy();return this},removeAll:function(g){var m=this.list;if(g){for(var C=0;C<m.length;C++)m[C]&&m[C].scene&&(m[C].off(a.DESTROY,this.onChildDestroyed,this),m[C].destroy());this.list=[]}else d.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(g){return d.BringToTop(this.list,g),this},sendToBack:function(g){return d.SendToBack(this.list,g),this},moveUp:function(g){return d.MoveUp(this.list,g),this},moveDown:function(g){return d.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(g,m,C){var P=d.Replace(this.list,g,m);return P&&(this.addHandler(m),this.removeHandler(g),C&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,C,P){return d.SetAll(this.list,g,m,C,P),this},each:function(g,m){var C=[null],P,M=this.list.slice(),E=M.length;for(P=2;P<arguments.length;P++)C.push(arguments[P]);for(P=0;P<E;P++)C[0]=M[P],g.apply(m,C);return this},iterate:function(g,m){var C=[null],P;for(P=2;P<arguments.length;P++)C.push(arguments[P]);for(P=0;P<this.list.length;P++)C[0]=this.list[P],g.apply(m,C);return this},setScrollFactor:function(g,m,C){return m===void 0&&(m=g),C===void 0&&(C=!1),this.scrollFactorX=g,this.scrollFactorY=m,C&&(d.SetAll(this.list,"scrollFactorX",g),d.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]},onChildDestroyed:function(g){d.Remove(this.list,g),this.exclusive&&(g.parentContainer=null,g.removedFromScene())}});r.exports=p},53584:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d);var o=d.list;if(o.length!==0){var a=d.localTransform;f?(a.loadIdentity(),a.multiply(f),a.translate(d.x,d.y),a.rotate(d.rotation),a.scale(d.scaleX,d.scaleY)):a.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var n=d.blendMode!==-1;n||i.setBlendMode(0);var u=d._alpha,c=d.scrollFactorX,l=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(i,null,x);for(var v=0;v<o.length;v++){var p=o[v];if(!!p.willRender(x)){var g=p.alpha,m=p.scrollFactorX,C=p.scrollFactorY;!n&&p.blendMode!==i.currentBlendMode&&i.setBlendMode(p.blendMode),p.setScrollFactor(m*c,C*l),p.setAlpha(g*u),p.renderCanvas(i,p,x,a),p.setAlpha(g),p.setScrollFactor(m,C)}}d.mask&&d.mask.postRenderCanvas(i)}};r.exports=T},77143:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(31559),f=i(44603),o=i(23568),a=i(95540);f.register("container",function(n,u){n===void 0&&(n={});var c=o(n,"x",0),l=o(n,"y",0),v=a(n,"children",null),p=new x(this.scene,c,l,v);return u!==void 0&&(n.add=u),d(this.scene,p,n),p})},24961:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31559),x=i(39429);x.register("container",function(f,o,a){return this.displayList.add(new d(this.scene,f,o,a))})},29959:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(72249),f=i(53584),r.exports={renderWebGL:x,renderCanvas:f}},72249:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d);var o=d.list,a=o.length;if(a!==0){var n=d.localTransform;f?(n.loadIdentity(),n.multiply(f),n.translate(d.x,d.y),n.rotate(d.rotation),n.scale(d.scaleX,d.scaleY)):n.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),i.pipelines.preBatch(d);var u=d.blendMode!==-1;u||i.setBlendMode(0);for(var c=d.alpha,l=d.scrollFactorX,v=d.scrollFactorY,p=0;p<a;p++){var g=o[p];if(!!g.willRender(x)){var m,C,P,M;if(g.alphaTopLeft!==void 0)m=g.alphaTopLeft,C=g.alphaTopRight,P=g.alphaBottomLeft,M=g.alphaBottomRight;else{var E=g.alpha;m=E,C=E,P=E,M=E}var w=g.scrollFactorX,R=g.scrollFactorY;!u&&g.blendMode!==i.currentBlendMode&&i.setBlendMode(g.blendMode);var A=g.mask;A&&A.preRenderWebGL(i,g,x);var L=g.type;L!==i.currentType&&(i.newType=!0,i.currentType=L),i.nextTypeMatch=p<a-1?o[p+1].type===i.currentType:!1,g.setScrollFactor(w*l,R*v),g.setAlpha(m*c,C*c,P*c,M*c),g.renderWebGL(i,g,x,n,d),g.setAlpha(m,C,P,M),g.setScrollFactor(w,R),A&&A.postRenderWebGL(i,x),i.newType=!1}}i.pipelines.postBatch(d)}};r.exports=T},47407:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(441),o=i(95643),a=i(41212),n=i(35846),u=i(44594),c=i(61369),l=new d({Extends:o,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,f],initialize:function(p,g,m,C,P,M){o.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),P,M):this.createElement(C,P,M):C&&this.setElement(C,P,M),p.sys.events.on(u.SLEEP,this.handleSceneEvent,this),p.sys.events.on(u.WAKE,this.handleSceneEvent,this),p.sys.events.on(u.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(v){var p=this.node,g=p.style;p&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,p){return v===void 0&&(v=0),p===void 0&&(p=v),this.skewX=v,this.skewY=p,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.addEventListener(v[p],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.removeEventListener(v[p],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,p,g){return this.setElement(document.createElement(v),p,g)},setElement:function(v,p,g){this.removeElement();var m;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,p&&a(p))for(var C in p)m.style[C]=p[C];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(v,p){var g=this.cache.get(v);return g&&this.createFromHTML(g,p),this},createFromHTML:function(v,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var v=this.node,p=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(v,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][v]===p)return g[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preRender:function(){var v=this.parentContainer,p=this.node;p&&v&&!v.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(u.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(u.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(u.PRE_RENDER,this.preRender,this)}});r.exports=l},49381:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(47407),x=i(95643),f=i(61340),o=new f,a=new f,n=new f,u=function(c,l,v,p){if(!!l.node){var g=l.node.style,m=l.scene.sys.settings;if(!g||!m.visible||x.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&v.id||l.parentContainer&&!l.parentContainer.willRender()){g.display="none";return}var C=l.parentContainer,P=v.alpha*l.alpha;C&&(P*=C.alpha);var M=o,E=a,w=n,R=0,A=0,L="0%",F="0%";p?(R=l.width*l.scaleX*l.originX,A=l.height*l.scaleY*l.originY,E.applyITRS(l.x-R,l.y-A,l.rotation,l.scaleX,l.scaleY),M.copyFrom(v.matrix),M.multiplyWithOffset(p,-v.scrollX*l.scrollFactorX,-v.scrollY*l.scrollFactorY),E.e=l.x-R,E.f=l.y-A,M.multiply(E,w)):(R=l.width*l.originX,A=l.height*l.originY,E.applyITRS(l.x-R,l.y-A,l.rotation,l.scaleX,l.scaleY),M.copyFrom(v.matrix),L=100*l.originX+"%",F=100*l.originY+"%",E.e-=v.scrollX*l.scrollFactorX,E.f-=v.scrollY*l.scrollFactorY,M.multiply(E,w)),l.transformOnly||(g.display="block",g.opacity=P,g.zIndex=l._depth,g.pointerEvents=l.pointerEvents,g.mixBlendMode=d[l._blendMode]),g.transform=w.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",g.transformOrigin=L+" "+F}};r.exports=u},2611:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3069),x=i(39429);x.register("dom",function(f,o,a,n,u){var c=new d(this.scene,f,o,a,n,u);return this.displayList.add(c),c})},441:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(49381),f=i(49381),r.exports={renderWebGL:x,renderCanvas:f}},62980:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"},41337:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},44947:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"},49358:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},35163:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="created"},97249:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="error"},19483:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="locked"},56059:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},26772:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="metadata"},64437:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="playing"},83411:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"},75780:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeked"},67799:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeking"},63500:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stalled"},55541:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},53208:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="textureready"},4992:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"},12:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unsupported"},51708:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(64993),a=new d({Extends:f,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,o],initialize:function(u){f.call(this,u,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});r.exports=a},70217:()=>{},56315:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42421),x=i(39429);x.register("extern",function(){var f=new d(this.scene);return this.displayList.add(f),f})},64993:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(80287),f=i(70217),r.exports={renderWebGL:x,renderCanvas:f}},80287:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=function(f,o,a,n){f.pipelines.clear();var u=d(o,a,n).calc;o.render.call(o,f,a,u),f.pipelines.rebind()};r.exports=x},85592:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71911),x=i(83419),f=i(85592),o=i(31401),a=i(8497),n=i(95643),u=i(95540),c=i(35154),l=i(36383),v=i(84503),p=new x({Extends:n,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,v],initialize:function(m,C){var P=c(C,"x",0),M=c(C,"y",0);n.call(this,m,"Graphics"),this.setPosition(P,M),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(C)},setDefaultStyles:function(g){return c(g,"lineStyle",null)&&(this.defaultStrokeWidth=c(g,"lineStyle.width",1),this.defaultStrokeColor=c(g,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(g,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(g,"fillStyle",null)&&(this.defaultFillColor=c(g,"fillStyle.color",16777215),this.defaultFillAlpha=c(g,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(g,m,C){return C===void 0&&(C=1),this.commandBuffer.push(f.LINE_STYLE,g,m,C),this._lineWidth=g,this},fillStyle:function(g,m){return m===void 0&&(m=1),this.commandBuffer.push(f.FILL_STYLE,g,m),this},fillGradientStyle:function(g,m,C,P,M,E,w,R){return M===void 0&&(M=1),E===void 0&&(E=M),w===void 0&&(w=M),R===void 0&&(R=M),this.commandBuffer.push(f.GRADIENT_FILL_STYLE,M,E,w,R,g,m,C,P),this},lineGradientStyle:function(g,m,C,P,M,E){return E===void 0&&(E=1),this.commandBuffer.push(f.GRADIENT_LINE_STYLE,g,E,m,C,P,M),this},beginPath:function(){return this.commandBuffer.push(f.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(f.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(f.FILL_PATH),this},fill:function(){return this.commandBuffer.push(f.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(f.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(f.STROKE_PATH),this},fillCircleShape:function(g){return this.fillCircle(g.x,g.y,g.radius)},strokeCircleShape:function(g){return this.strokeCircle(g.x,g.y,g.radius)},fillCircle:function(g,m,C){return this.beginPath(),this.arc(g,m,C,0,l.PI2),this.fillPath(),this},strokeCircle:function(g,m,C){return this.beginPath(),this.arc(g,m,C,0,l.PI2),this.strokePath(),this},fillRectShape:function(g){return this.fillRect(g.x,g.y,g.width,g.height)},strokeRectShape:function(g){return this.strokeRect(g.x,g.y,g.width,g.height)},fillRect:function(g,m,C,P){return this.commandBuffer.push(f.FILL_RECT,g,m,C,P),this},strokeRect:function(g,m,C,P){var M=this._lineWidth/2,E=g-M,w=g+M;return this.beginPath(),this.moveTo(g,m),this.lineTo(g,m+P),this.strokePath(),this.beginPath(),this.moveTo(g+C,m),this.lineTo(g+C,m+P),this.strokePath(),this.beginPath(),this.moveTo(E,m),this.lineTo(w+C,m),this.strokePath(),this.beginPath(),this.moveTo(E,m+P),this.lineTo(w+C,m+P),this.strokePath(),this},fillRoundedRect:function(g,m,C,P,M){M===void 0&&(M=20);var E=M,w=M,R=M,A=M;typeof M!="number"&&(E=u(M,"tl",20),w=u(M,"tr",20),R=u(M,"bl",20),A=u(M,"br",20));var L=E>=0,F=w>=0,O=R>=0,b=A>=0;return E=Math.abs(E),w=Math.abs(w),R=Math.abs(R),A=Math.abs(A),this.beginPath(),this.moveTo(g+E,m),this.lineTo(g+C-w,m),F?this.arc(g+C-w,m+w,w,-l.TAU,0):this.arc(g+C,m,w,Math.PI,l.TAU,!0),this.lineTo(g+C,m+P-A),b?this.arc(g+C-A,m+P-A,A,0,l.TAU):this.arc(g+C,m+P,A,-l.TAU,Math.PI,!0),this.lineTo(g+R,m+P),O?this.arc(g+R,m+P-R,R,l.TAU,Math.PI):this.arc(g,m+P,R,0,-l.TAU,!0),this.lineTo(g,m+E),L?this.arc(g+E,m+E,E,-Math.PI,-l.TAU):this.arc(g,m,E,l.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(g,m,C,P,M){M===void 0&&(M=20);var E=M,w=M,R=M,A=M,L=Math.min(C,P)/2;typeof M!="number"&&(E=u(M,"tl",20),w=u(M,"tr",20),R=u(M,"bl",20),A=u(M,"br",20));var F=E>=0,O=w>=0,b=R>=0,I=A>=0;return E=Math.min(Math.abs(E),L),w=Math.min(Math.abs(w),L),R=Math.min(Math.abs(R),L),A=Math.min(Math.abs(A),L),this.beginPath(),this.moveTo(g+E,m),this.lineTo(g+C-w,m),this.moveTo(g+C-w,m),O?this.arc(g+C-w,m+w,w,-l.TAU,0):this.arc(g+C,m,w,Math.PI,l.TAU,!0),this.lineTo(g+C,m+P-A),this.moveTo(g+C,m+P-A),I?this.arc(g+C-A,m+P-A,A,0,l.TAU):this.arc(g+C,m+P,A,-l.TAU,Math.PI,!0),this.lineTo(g+R,m+P),this.moveTo(g+R,m+P),b?this.arc(g+R,m+P-R,R,l.TAU,Math.PI):this.arc(g,m+P,R,0,-l.TAU,!0),this.lineTo(g,m+E),this.moveTo(g,m+E),F?this.arc(g+E,m+E,E,-Math.PI,-l.TAU):this.arc(g,m,E,l.TAU,0,!0),this.strokePath(),this},fillPointShape:function(g,m){return this.fillPoint(g.x,g.y,m)},fillPoint:function(g,m,C){return!C||C<1?C=1:(g-=C/2,m-=C/2),this.commandBuffer.push(f.FILL_RECT,g,m,C,C),this},fillTriangleShape:function(g){return this.fillTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},strokeTriangleShape:function(g){return this.strokeTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},fillTriangle:function(g,m,C,P,M,E){return this.commandBuffer.push(f.FILL_TRIANGLE,g,m,C,P,M,E),this},strokeTriangle:function(g,m,C,P,M,E){return this.commandBuffer.push(f.STROKE_TRIANGLE,g,m,C,P,M,E),this},strokeLineShape:function(g){return this.lineBetween(g.x1,g.y1,g.x2,g.y2)},lineBetween:function(g,m,C,P){return this.beginPath(),this.moveTo(g,m),this.lineTo(C,P),this.strokePath(),this},lineTo:function(g,m){return this.commandBuffer.push(f.LINE_TO,g,m),this},moveTo:function(g,m){return this.commandBuffer.push(f.MOVE_TO,g,m),this},strokePoints:function(g,m,C,P){m===void 0&&(m=!1),C===void 0&&(C=!1),P===void 0&&(P=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var M=1;M<P;M++)this.lineTo(g[M].x,g[M].y);return m&&this.lineTo(g[0].x,g[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(g,m,C,P){m===void 0&&(m=!1),C===void 0&&(C=!1),P===void 0&&(P=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var M=1;M<P;M++)this.lineTo(g[M].x,g[M].y);return m&&this.lineTo(g[0].x,g[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(g,m){m===void 0&&(m=32);var C=g.getPoints(m);return this.strokePoints(C,!0)},strokeEllipse:function(g,m,C,P,M){M===void 0&&(M=32);var E=new a(g,m,C,P),w=E.getPoints(M);return this.strokePoints(w,!0)},fillEllipseShape:function(g,m){m===void 0&&(m=32);var C=g.getPoints(m);return this.fillPoints(C,!0)},fillEllipse:function(g,m,C,P,M){M===void 0&&(M=32);var E=new a(g,m,C,P),w=E.getPoints(M);return this.fillPoints(w,!0)},arc:function(g,m,C,P,M,E,w){return E===void 0&&(E=!1),w===void 0&&(w=0),this.commandBuffer.push(f.ARC,g,m,C,P,M,E,w),this},slice:function(g,m,C,P,M,E,w){return E===void 0&&(E=!1),w===void 0&&(w=0),this.commandBuffer.push(f.BEGIN_PATH),this.commandBuffer.push(f.MOVE_TO,g,m),this.commandBuffer.push(f.ARC,g,m,C,P,M,E,w),this.commandBuffer.push(f.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(f.SAVE),this},restore:function(){return this.commandBuffer.push(f.RESTORE),this},translateCanvas:function(g,m){return this.commandBuffer.push(f.TRANSLATE,g,m),this},scaleCanvas:function(g,m){return this.commandBuffer.push(f.SCALE,g,m),this},rotateCanvas:function(g){return this.commandBuffer.push(f.ROTATE,g),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(g,m,C){var P=this.scene.sys,M=P.game.renderer;m===void 0&&(m=P.scale.width),C===void 0&&(C=P.scale.height),p.TargetCamera.setScene(this.scene),p.TargetCamera.setViewport(0,0,m,C),p.TargetCamera.scrollX=this.x,p.TargetCamera.scrollY=this.y;var E,w,R={willReadFrequently:!0};if(typeof g=="string")if(P.textures.exists(g)){E=P.textures.get(g);var A=E.getSourceImage();A instanceof HTMLCanvasElement&&(w=A.getContext("2d",R))}else E=P.textures.createCanvas(g,m,C),w=E.getSourceImage().getContext("2d",R);else g instanceof HTMLCanvasElement&&(w=g.getContext("2d",R));return w&&(this.renderCanvas(M,this,p.TargetCamera,null,w,!1),E&&E.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});p.TargetCamera=new d,r.exports=p},32768:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85592),x=i(20926),f=function(o,a,n,u,c,l){var v=a.commandBuffer,p=v.length,g=c||o.currentContext;if(!(p===0||!x(o,g,a,n,u))){n.addToRenderList(a);var m=1,C=1,P=0,M=0,E=1,w=0,R=0,A=0;g.beginPath();for(var L=0;L<p;++L){var F=v[L];switch(F){case d.ARC:g.arc(v[L+1],v[L+2],v[L+3],v[L+4],v[L+5],v[L+6]),L+=7;break;case d.LINE_STYLE:E=v[L+1],P=v[L+2],m=v[L+3],w=(P&16711680)>>>16,R=(P&65280)>>>8,A=P&255,g.strokeStyle="rgba("+w+","+R+","+A+","+m+")",g.lineWidth=E,L+=3;break;case d.FILL_STYLE:M=v[L+1],C=v[L+2],w=(M&16711680)>>>16,R=(M&65280)>>>8,A=M&255,g.fillStyle="rgba("+w+","+R+","+A+","+C+")",L+=2;break;case d.BEGIN_PATH:g.beginPath();break;case d.CLOSE_PATH:g.closePath();break;case d.FILL_PATH:l||g.fill();break;case d.STROKE_PATH:l||g.stroke();break;case d.FILL_RECT:l?g.rect(v[L+1],v[L+2],v[L+3],v[L+4]):g.fillRect(v[L+1],v[L+2],v[L+3],v[L+4]),L+=4;break;case d.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[L+1],v[L+2]),g.lineTo(v[L+3],v[L+4]),g.lineTo(v[L+5],v[L+6]),g.closePath(),l||g.fill(),L+=6;break;case d.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[L+1],v[L+2]),g.lineTo(v[L+3],v[L+4]),g.lineTo(v[L+5],v[L+6]),g.closePath(),l||g.stroke(),L+=6;break;case d.LINE_TO:g.lineTo(v[L+1],v[L+2]),L+=2;break;case d.MOVE_TO:g.moveTo(v[L+1],v[L+2]),L+=2;break;case d.LINE_FX_TO:g.lineTo(v[L+1],v[L+2]),L+=5;break;case d.MOVE_FX_TO:g.moveTo(v[L+1],v[L+2]),L+=5;break;case d.SAVE:g.save();break;case d.RESTORE:g.restore();break;case d.TRANSLATE:g.translate(v[L+1],v[L+2]),L+=2;break;case d.SCALE:g.scale(v[L+1],v[L+2]),L+=2;break;case d.ROTATE:g.rotate(v[L+1]),L+=1;break;case d.GRADIENT_FILL_STYLE:L+=5;break;case d.GRADIENT_LINE_STYLE:L+=6;break}}g.restore()}};r.exports=f},87079:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),x=i(43831);d.register("graphics",function(f,o){f===void 0&&(f={}),o!==void 0&&(f.add=o);var a=new x(this.scene,f);return f.add&&this.scene.sys.displayList.add(a),a})},1201:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43831),x=i(39429);x.register("graphics",function(f){return this.displayList.add(new d(this.scene,f))})},84503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(77545),f=i(32768),f=i(32768),r.exports={renderWebGL:x,renderCanvas:f}},77545:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85592),x=i(91296),f=i(61340),o=i(70554),a=function(v,p,g){this.x=v,this.y=p,this.width=g},n=function(v,p,g){this.points=[],this.pointsLength=1,this.points[0]=new a(v,p,g)},u=[],c=new f,l=function(v,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var C=v.pipelines.set(p.pipeline,p);v.pipelines.preBatch(p);for(var P=x(p,g,m).calc,M=c.loadIdentity(),E=p.commandBuffer,w=g.alpha*p.alpha,R=1,A=C.fillTint,L=C.strokeTint,F=0,O=0,b=0,I=.01,B=Math.PI*2,N,k=[],Y=0,H=!0,z=null,X=o.getTintAppendFloatAlpha,D=0;D<E.length;D++)switch(N=E[D],N){case d.BEGIN_PATH:{k.length=0,z=null,H=!0;break}case d.CLOSE_PATH:{H=!1,z&&z.points.length&&z.points.push(z.points[0]);break}case d.FILL_PATH:{for(Y=0;Y<k.length;Y++)C.batchFillPath(k[Y].points,M,P);break}case d.STROKE_PATH:{for(Y=0;Y<k.length;Y++)C.batchStrokePath(k[Y].points,R,H,M,P);break}case d.LINE_STYLE:{R=E[++D];var G=E[++D],V=E[++D]*w,W=X(G,V);L.TL=W,L.TR=W,L.BL=W,L.BR=W;break}case d.FILL_STYLE:{var U=E[++D],$=E[++D]*w,K=X(U,$);A.TL=K,A.TR=K,A.BL=K,A.BR=K;break}case d.GRADIENT_FILL_STYLE:{var Z=E[++D]*w,J=E[++D]*w,Q=E[++D]*w,j=E[++D]*w;A.TL=X(E[++D],Z),A.TR=X(E[++D],J),A.BL=X(E[++D],Q),A.BR=X(E[++D],j);break}case d.GRADIENT_LINE_STYLE:{R=E[++D];var _=E[++D]*w;L.TL=X(E[++D],_),L.TR=X(E[++D],_),L.BL=X(E[++D],_),L.BR=X(E[++D],_);break}case d.ARC:{var q=0,st=E[++D],ht=E[++D],lt=E[++D],ot=E[++D],tt=E[++D],at=E[++D],nt=E[++D];for(tt-=ot,at?tt<-B?tt=-B:tt>0&&(tt=-B+tt%B):tt>B?tt=B:tt<0&&(tt=B+tt%B),z===null&&(z=new n(st+Math.cos(ot)*lt,ht+Math.sin(ot)*lt,R),k.push(z),q+=I);q<1+nt;)b=tt*q+ot,F=st+Math.cos(b)*lt,O=ht+Math.sin(b)*lt,z.points.push(new a(F,O,R)),q+=I;b=tt+ot,F=st+Math.cos(b)*lt,O=ht+Math.sin(b)*lt,z.points.push(new a(F,O,R));break}case d.FILL_RECT:{C.batchFillRect(E[++D],E[++D],E[++D],E[++D],M,P);break}case d.FILL_TRIANGLE:{C.batchFillTriangle(E[++D],E[++D],E[++D],E[++D],E[++D],E[++D],M,P);break}case d.STROKE_TRIANGLE:{C.batchStrokeTriangle(E[++D],E[++D],E[++D],E[++D],E[++D],E[++D],R,M,P);break}case d.LINE_TO:{z!==null?z.points.push(new a(E[++D],E[++D],R)):(z=new n(E[++D],E[++D],R),k.push(z));break}case d.MOVE_TO:{z=new n(E[++D],E[++D],R),k.push(z);break}case d.SAVE:{u.push(M.copyToArray());break}case d.RESTORE:{M.copyFromArray(u.pop());break}case d.TRANSLATE:{st=E[++D],ht=E[++D],M.translate(st,ht);break}case d.SCALE:{st=E[++D],ht=E[++D],M.scale(st,ht);break}case d.ROTATE:{M.rotate(E[++D]);break}}v.pipelines.postBatch(p)}};r.exports=l},26479:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61061),x=i(83419),f=i(51708),o=i(50792),a=i(46710),n=i(95540),u=i(35154),c=i(97022),l=i(41212),v=i(88492),p=i(35072),g=i(68287),m=new x({Extends:o,initialize:function(P,M,E){o.call(this),E?M&&!Array.isArray(M)&&(M=[M]):Array.isArray(M)?l(M[0])&&(E=M,M=null):l(M)&&(E=M,M=null),this.scene=P,this.children=new p,this.isParent=!0,this.type="Group",this.classType=n(E,"classType",g),this.name=n(E,"name",""),this.active=n(E,"active",!0),this.maxSize=n(E,"maxSize",-1),this.defaultKey=n(E,"defaultKey",null),this.defaultFrame=n(E,"defaultFrame",null),this.runChildUpdate=n(E,"runChildUpdate",!1),this.createCallback=n(E,"createCallback",null),this.removeCallback=n(E,"removeCallback",null),this.createMultipleCallback=n(E,"createMultipleCallback",null),this.internalCreateCallback=n(E,"internalCreateCallback",null),this.internalRemoveCallback=n(E,"internalRemoveCallback",null),M&&this.addMultiple(M),E&&this.createMultiple(E),this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,P,M,E,w,R){if(C===void 0&&(C=0),P===void 0&&(P=0),M===void 0&&(M=this.defaultKey),E===void 0&&(E=this.defaultFrame),w===void 0&&(w=!0),R===void 0&&(R=!0),this.isFull())return null;var A=new this.classType(this.scene,C,P,M,E);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=w,A.setActive(R),this.add(A),A},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var P=[];if(C[0].key)for(var M=0;M<C.length;M++){var E=this.createFromConfig(C[M]);P=P.concat(E)}return P},createFromConfig:function(C){if(this.isFull())return[];this.classType=n(C,"classType",this.classType);var P=n(C,"key",void 0),M=n(C,"frame",null),E=n(C,"visible",!0),w=n(C,"active",!0),R=[];if(P===void 0)return R;Array.isArray(P)||(P=[P]),Array.isArray(M)||(M=[M]);var A=n(C,"repeat",0),L=n(C,"randomKey",!1),F=n(C,"randomFrame",!1),O=n(C,"yoyo",!1),b=n(C,"quantity",!1),I=n(C,"frameQuantity",1),B=n(C,"max",0),N=v(P,M,{max:B,qty:b||I,random:L,randomB:F,repeat:A,yoyo:O});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback),C.internalCreateCallback&&(this.internalCreateCallback=C.internalCreateCallback),C.internalRemoveCallback&&(this.internalRemoveCallback=C.internalRemoveCallback);for(var k=0;k<N.length;k++){var Y=this.create(0,0,N[k].a,N[k].b,E,w);if(!Y)break;R.push(Y)}if(c(C,"setXY")){var H=u(C,"setXY.x",0),z=u(C,"setXY.y",0),X=u(C,"setXY.stepX",0),D=u(C,"setXY.stepY",0);d.SetXY(R,H,z,X,D)}if(c(C,"setRotation")){var G=u(C,"setRotation.value",0),V=u(C,"setRotation.step",0);d.SetRotation(R,G,V)}if(c(C,"setScale")){var W=u(C,"setScale.x",1),U=u(C,"setScale.y",W),$=u(C,"setScale.stepX",0),K=u(C,"setScale.stepY",0);d.SetScale(R,W,U,$,K)}if(c(C,"setOrigin")){var Z=u(C,"setOrigin.x",.5),J=u(C,"setOrigin.y",Z),Q=u(C,"setOrigin.stepX",0),j=u(C,"setOrigin.stepY",0);d.SetOrigin(R,Z,J,Q,j)}if(c(C,"setAlpha")){var _=u(C,"setAlpha.value",1),q=u(C,"setAlpha.step",0);d.SetAlpha(R,_,q)}if(c(C,"setDepth")){var st=u(C,"setDepth.value",0),ht=u(C,"setDepth.step",0);d.SetDepth(R,st,ht)}if(c(C,"setScrollFactor")){var lt=u(C,"setScrollFactor.x",1),ot=u(C,"setScrollFactor.y",lt),tt=u(C,"setScrollFactor.stepX",0),at=u(C,"setScrollFactor.stepY",0);d.SetScrollFactor(R,lt,ot,tt,at)}var nt=n(C,"hitArea",null),vt=n(C,"hitAreaCallback",null);nt&&d.SetHitArea(R,nt,vt);var mt=n(C,"gridAlign",!1);return mt&&d.GridAlign(R,mt),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(C,P){if(!(!this.runChildUpdate||this.children.size===0))for(var M=this.children.entries.slice(),E=0;E<M.length;E++){var w=M[E];w.active&&w.update(C,P)}},add:function(C,P){return P===void 0&&(P=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),P&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(f.DESTROY,this.remove,this),this)},addMultiple:function(C,P){if(P===void 0&&(P=!1),Array.isArray(C))for(var M=0;M<C.length;M++)this.add(C[M],P);return this},remove:function(C,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(f.DESTROY,this.remove,this),M?C.destroy():P&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,P){C===void 0&&(C=!1),P===void 0&&(P=!1);for(var M=this.children,E=0;E<M.size;E++){var w=M.entries[E];w.off(f.DESTROY,this.remove,this),P?w.destroy():C&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,P,M,E){return a(this.children.entries,C,P,M,E)},getFirst:function(C,P,M,E,w,R,A){return this.getHandler(!0,1,C,P,M,E,w,R,A)},getFirstNth:function(C,P,M,E,w,R,A,L){return this.getHandler(!0,C,P,M,E,w,R,A,L)},getLast:function(C,P,M,E,w,R,A){return this.getHandler(!1,1,C,P,M,E,w,R,A)},getLastNth:function(C,P,M,E,w,R,A,L){return this.getHandler(!1,C,P,M,E,w,R,A,L)},getHandler:function(C,P,M,E,w,R,A,L,F){M===void 0&&(M=!1),E===void 0&&(E=!1);var O,b,I=0,B=this.children.entries;if(C)for(b=0;b<B.length;b++)if(O=B[b],O.active===M){if(I++,I===P)break}else O=null;else for(b=B.length-1;b>=0;b--)if(O=B[b],O.active===M){if(I++,I===P)break}else O=null;return O?(typeof w=="number"&&(O.x=w),typeof R=="number"&&(O.y=R),O):E?this.create(w,R,A,L,F):null},get:function(C,P,M,E,w){return this.getFirst(!1,!0,C,P,M,E,w)},getFirstAlive:function(C,P,M,E,w,R){return this.getFirst(!0,C,P,M,E,w,R)},getFirstDead:function(C,P,M,E,w,R){return this.getFirst(!1,C,P,M,E,w,R)},playAnimation:function(C,P){return d.PlayAnimation(this.children.entries,C,P),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var P=0,M=0;M<this.children.size;M++)this.children.entries[M].active===C&&P++;return P},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),P=this.maxSize===-1?999999999999:this.maxSize;return P-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,P,M,E,w){return d.PropertyValueSet(this.children.entries,C,P,M,E,w),this},propertyValueInc:function(C,P,M,E,w){return d.PropertyValueInc(this.children.entries,C,P,M,E,w),this},setX:function(C,P){return d.SetX(this.children.entries,C,P),this},setY:function(C,P){return d.SetY(this.children.entries,C,P),this},setXY:function(C,P,M,E){return d.SetXY(this.children.entries,C,P,M,E),this},incX:function(C,P){return d.IncX(this.children.entries,C,P),this},incY:function(C,P){return d.IncY(this.children.entries,C,P),this},incXY:function(C,P,M,E){return d.IncXY(this.children.entries,C,P,M,E),this},shiftPosition:function(C,P,M){return d.ShiftPosition(this.children.entries,C,P,M),this},angle:function(C,P){return d.Angle(this.children.entries,C,P),this},rotate:function(C,P){return d.Rotate(this.children.entries,C,P),this},rotateAround:function(C,P){return d.RotateAround(this.children.entries,C,P),this},rotateAroundDistance:function(C,P,M){return d.RotateAroundDistance(this.children.entries,C,P,M),this},setAlpha:function(C,P){return d.SetAlpha(this.children.entries,C,P),this},setTint:function(C,P,M,E){return d.SetTint(this.children.entries,C,P,M,E),this},setOrigin:function(C,P,M,E){return d.SetOrigin(this.children.entries,C,P,M,E),this},scaleX:function(C,P){return d.ScaleX(this.children.entries,C,P),this},scaleY:function(C,P){return d.ScaleY(this.children.entries,C,P),this},scaleXY:function(C,P,M,E){return d.ScaleXY(this.children.entries,C,P,M,E),this},setDepth:function(C,P){return d.SetDepth(this.children.entries,C,P),this},setBlendMode:function(C){return d.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,P){return d.SetHitArea(this.children.entries,C,P),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,P,M){return d.SetVisible(this.children.entries,C,P,M),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(C,P){C===void 0&&(C=!1),P===void 0&&(P=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(f.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(P,C),this.scene=void 0,this.children=void 0)}});r.exports=m},94975:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),x=i(26479);d.register("group",function(f){return new x(this.scene,null,f)})},3385:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26479),x=i(39429);x.register("group",function(f,o){return this.updateList.add(new d(this.scene,f,o))})},88571:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(59819),a=new d({Extends:f,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,o],initialize:function(u,c,l,v,p){f.call(this,u,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setPosition(c,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=a},40652:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d),i.batchSprite(d,d.frame,x,f)};r.exports=T},82459:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(88571);x.register("image",function(a,n){a===void 0&&(a={});var u=f(a,"key",null),c=f(a,"frame",null),l=new o(this.scene,0,0,u,c);return n!==void 0&&(a.add=n),d(this.scene,l,a),l})},2117:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(88571),x=i(39429);x.register("image",function(f,o,a,n){return this.displayList.add(new d(this.scene,f,o,a,n))})},59819:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(99517),f=i(40652),r.exports={renderWebGL:x,renderCanvas:f}},99517:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d),this.pipeline.batchSprite(d,x,f)};r.exports=T},77856:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};d.Shader=i(20071),d.Mesh=i(4703),d.NineSlice=i(28103),d.PointLight=i(80321),d.Plane=i(33663),d.Factories.Shader=i(74177),d.Factories.Mesh=i(9225),d.Factories.NineSlice=i(47521),d.Factories.PointLight=i(71255),d.Factories.Plane=i(30985),d.Creators.Shader=i(54935),d.Creators.Mesh=i(20527),d.Creators.NineSlice=i(28279),d.Creators.PointLight=i(39829),d.Creators.Plane=i(56015),d.Light=i(41432),d.LightsManager=i(61356),d.LightsPlugin=i(88992),r.exports=d},93595:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(83419),f=i(31401),o=i(53774),a=i(45893),n=i(50792),u=i(51708),c=i(73162),l=i(33963),v=i(44594),p=i(19186),g=new x({Extends:c,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.PostPipeline,f.Visible,n,l],initialize:function(C,P){c.call(this,C),n.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),P&&this.add(P),C.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(m,C){return this.data||(this.data=new a(this)),this.data.set(m,C),this},incData:function(m,C){return this.data||(this.data=new a(this)),this.data.inc(m,C),this},toggleData:function(m){return this.data||(this.data=new a(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new a(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,C=this.parentContainer,P=[];C&&(P.unshift(C.getIndex(m)),m=C,C.parentContainer);)C=C.parentContainer;return P.unshift(this.displayList.getIndex(m)),P},addChildCallback:function(m){var C=m.displayList;C&&C!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(u.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(u.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,C){return m._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),m.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(m){if(!(!this.scene||this.ignoreDestroy)){this.emit(u.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(m);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});r.exports=g},2956:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=d.list;if(f.length!==0){d.depthSort();var o=d.blendMode!==-1;o||i.setBlendMode(0);var a=d._alpha;d.mask&&d.mask.preRenderCanvas(i,null,x);for(var n=0;n<f.length;n++){var u=f[n];if(!!u.willRender(x)){var c=u.alpha;!o&&u.blendMode!==i.currentBlendMode&&i.setBlendMode(u.blendMode),u.setAlpha(c*a),u.renderCanvas(i,u,x),u.setAlpha(c)}}d.mask&&d.mask.postRenderCanvas(i)}};r.exports=T},25179:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(93595),f=i(44603),o=i(23568);f.register("layer",function(a,n){a===void 0&&(a={});var u=o(a,"children",null),c=new x(this.scene,u);return n!==void 0&&(a.add=n),d(this.scene,c,a),c})},20005:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(93595),x=i(39429);x.register("layer",function(f){return this.displayList.add(new d(this.scene,f))})},33963:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(15869),f=i(2956),r.exports={renderWebGL:x,renderCanvas:f}},15869:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=d.list,o=f.length;if(o!==0){d.depthSort(),i.pipelines.preBatch(d);var a=d.blendMode!==-1;a||i.setBlendMode(0);for(var n=d.alpha,u=0;u<o;u++){var c=f[u];if(!!c.willRender(x)){var l,v,p,g;if(c.alphaTopLeft!==void 0)l=c.alphaTopLeft,v=c.alphaTopRight,p=c.alphaBottomLeft,g=c.alphaBottomRight;else{var m=c.alpha;l=m,v=m,p=m,g=m}!a&&c.blendMode!==i.currentBlendMode&&i.setBlendMode(c.blendMode);var C=c.mask;C&&C.preRenderWebGL(i,c,x);var P=c.type;P!==i.currentType&&(i.newType=!0,i.currentType=P),i.nextTypeMatch=u<o-1?f[u+1].type===i.currentType:!1,c.setAlpha(l*n,v*n,p*n,g*n),c.renderWebGL(i,c,x),c.setAlpha(l,v,p,g),C&&C.postRenderWebGL(i,x),i.newType=!1}}i.pipelines.postBatch(d)}};r.exports=T},41432:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),x=i(83419),f=i(31401),o=i(51767),a=i(70554),n=new x({Extends:d,Mixins:[f.Origin,f.ScrollFactor,f.Visible],initialize:function(c,l,v,p,g,m,C){d.call(this,c,l,v),this.color=new o(p,g,m),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(v)},displayWidth:{get:function(){return this.diameter},set:function(u){this.diameter=u}},displayHeight:{get:function(){return this.diameter},set:function(u){this.diameter=u}},width:{get:function(){return this.diameter},set:function(u){this.diameter=u}},height:{get:function(){return this.diameter},set:function(u){this.diameter=u}},willRender:function(u){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setColor:function(u){var c=a.getFloatsFromUintRGB(u);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(u){return this.intensity=u,this},setRadius:function(u){return this.radius=u,this}});n.RENDER_MASK=15,r.exports=n},61356:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81491),x=i(83419),f=i(20339),o=i(41432),a=i(80321),n=i(51767),u=i(19133),c=i(19186),l=i(70554),v=new x({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,C,P,M){return this.systems.displayList.add(new a(this.scene,p,g,m,C,P,M))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,C=[],P=0;P<g.length;P++){var M=g[P];M.willRender(p)&&d(M,m)&&C.push({light:M,distance:f(M.x,M.y,m.centerX,m.centerY)})}return C.length>this.maxLights&&(c(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=l.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,C,P){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),C===void 0&&(C=16777215),P===void 0&&(P=1);var M=l.getFloatsFromUintRGB(C),E=new o(p,g,m,M[0],M[1],M[2],P);return this.lights.push(E),E},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&u(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});r.exports=v},88992:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(61356),f=i(37277),o=i(44594),a=new d({Extends:x,initialize:function(u){this.scene=u,this.systems=u.sys,u.sys.settings.isBooted||u.sys.events.once(o.BOOT,this.boot,this),x.call(this)},boot:function(){var n=this.systems.events;n.on(o.SHUTDOWN,this.shutdown,this),n.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});f.register("LightsPlugin",a,"lights"),r.exports=a},4703:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(39506),o=i(83997),a=i(95643),n=i(34684),u=i(92515),c=i(91296),l=i(37867),v=i(29807),p=i(43396),g=i(19186),m=i(25836),C=i(39318),P=new d({Extends:a,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,v],initialize:function(E,w,R,A,L,F,O,b,I,B,N,k){w===void 0&&(w=0),R===void 0&&(R=0),A===void 0&&(A="__WHITE"),a.call(this,E,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new m,this.modelScale=new m(1,1,1),this.modelRotation=new m,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new m,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Y=E.sys.renderer;this.setPosition(w,R),this.setTexture(A,L),this.setSize(Y.width,Y.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Y.width,Y.height),F&&this.addVertices(F,O,b,I,B,N,k)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(M){return this.viewPosition.addScale(m.LEFT,M),this.dirtyCache[10]=1,this},panY:function(M){return this.viewPosition.y+=m.DOWN.y*M,this.dirtyCache[10]=1,this},panZ:function(M){return this.viewPosition.z+=M,this.dirtyCache[10]=1,this},setPerspective:function(M,E,w,R,A){return w===void 0&&(w=45),R===void 0&&(R=.01),A===void 0&&(A=1e3),this.fov=w,this.projectionMatrix.perspective(f(w),M/E,R,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(M,E,w,R){return M===void 0&&(M=this.scene.sys.renderer.getAspectRatio()),E===void 0&&(E=1),w===void 0&&(w=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-M,M,-E,E,w,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(M){M.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(M,E,w,R,A,L,F,O,b){var I=this.scene.sys.cache.obj.get(M),B;return I&&(B=n(I,this,E,w,R,A,L,F,O,b)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",M),this},sortByDepth:function(M,E){return M.depth-E.depth},depthSort:function(){return g(this.faces,this.sortByDepth),this},addVertex:function(M,E,w,R,A,L,F){var O=new C(M,E,w,R,A,L,F);return this.vertices.push(O),O},addFace:function(M,E,w){var R=new o(M,E,w);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(M,E,w,R,A,L,F){var O=u(M,E,w,R,A,L,F);return O?(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(M){return this.faces[M]},hasFaceAt:function(M,E,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=c(this,w).calc,A=this.faces,L=0;L<A.length;L++){var F=A[L];if(F.contains(M,E,R))return!0}return!1},getFaceAt:function(M,E,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=c(this,w).calc,A=this.faces,L=[],F=0;F<A.length;F++){var O=A[F];O.contains(M,E,R)&&L.push(O)}return g(L,this.sortByDepth)},setDebug:function(M,E){return this.debugGraphic=M,!M&&!E?this.debugCallback=null:E?this.debugCallback=E:this.debugCallback=this.renderDebug,this},isDirty:function(){var M=this.modelPosition,E=this.modelRotation,w=this.modelScale,R=this.dirtyCache,A=M.x,L=M.y,F=M.z,O=E.x,b=E.y,I=E.z,B=w.x,N=w.y,k=w.z,Y=this.getFaceCount(),H=R[0],z=R[1],X=R[2],D=R[3],G=R[4],V=R[5],W=R[6],U=R[7],$=R[8],K=R[9];return R[0]=A,R[1]=L,R[2]=F,R[3]=O,R[4]=b,R[5]=I,R[6]=B,R[7]=N,R[8]=k,R[9]=Y,H!==A||z!==L||X!==F||D!==O||G!==b||V!==I||W!==B||U!==N||$!==k||K!==Y},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var M=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!M[10]&&!this.isDirty())){var E=this.width,w=this.height,R=this.viewMatrix,A=this.viewPosition;M[10]&&(R.identity(),R.translate(A),R.invert(),M[10]=0);var L=this.transformMatrix;L.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=A.z,O=this.faces,b=0;b<O.length;b++)O[b].transformCoordinatesLocal(L,E,w,F);this.depthSort()}},renderDebug:function(M,E){for(var w=M.debugGraphic,R=0;R<E.length;R++){var A=E[R],L=A.vertex1.tx,F=A.vertex1.ty,O=A.vertex2.tx,b=A.vertex2.ty,I=A.vertex3.tx,B=A.vertex3.ty;w.strokeTriangle(L,F,O,b,I,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(M){M===void 0&&(M={});var E=function(w,R,A){for(var L=this.faces,F=0;F<L.length;F++){var O=L[F];if(O.contains(R,A))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,M,E),this},setTint:function(M){M===void 0&&(M=16777215);for(var E=this.vertices,w=0;w<E.length;w++)E[w].color=M;return this},uvScroll:function(M,E){for(var w=this.faces,R=0;R<w.length;R++)w[R].scrollUV(M,E);return this},uvScale:function(M,E){for(var w=this.faces,R=0;R<w.length;R++)w[R].scaleUV(M,E);return this},tint:{set:function(M){this.setTint(M)}},rotateX:{get:function(){return p(this.modelRotation.x)},set:function(M){this.modelRotation.x=f(M)}},rotateY:{get:function(){return p(this.modelRotation.y)},set:function(M){this.modelRotation.y=f(M)}},rotateZ:{get:function(){return p(this.modelRotation.z)},set:function(M){this.modelRotation.z=f(M)}}});r.exports=P},36488:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};r.exports=T},20527:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(35154),a=i(4703);x.register("mesh",function(n,u){n===void 0&&(n={});var c=f(n,"key",null),l=f(n,"frame",null),v=o(n,"vertices",[]),p=o(n,"uvs",[]),g=o(n,"indicies",[]),m=o(n,"containsZ",!1),C=o(n,"normals",[]),P=o(n,"colors",16777215),M=o(n,"alphas",1),E=new a(this.scene,0,0,c,l,v,p,g,m,C,P,M);return u!==void 0&&(n.add=u),d(this.scene,E,n),E})},9225:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4703),x=i(39429);x.register("mesh",function(f,o,a,n,u,c,l,v,p,g,m){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l,v,p,g,m))})},29807:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(48833),f=i(36488),r.exports={renderWebGL:x,renderCanvas:f}},48833:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=function(f,o,a,n){var u=o.faces,c=u.length;if(c!==0){a.addToRenderList(o);var l=f.pipelines.set(o.pipeline,o),v=d(o,a,n).calc;f.pipelines.preBatch(o);for(var p=l.setGameObject(o),g=l.vertexViewF32,m=l.vertexViewU32,C=l.vertexCount*l.currentShader.vertexComponentCount-1,P=o.tintFill,M=[],E=o.debugCallback,w=v.a,R=v.b,A=v.c,L=v.d,F=v.e,O=v.f,b=o.viewPosition.z,I=o.hideCCW,B=a.roundPixels,N=a.alpha*o.alpha,k=0,Y=0;Y<c;Y++){var H=u[Y];!H.isInView(a,I,b,N,w,R,A,L,F,O,B)||(l.shouldFlush(3)&&(l.flush(),p=l.setGameObject(o),C=0),C=H.load(g,m,C,p,P),k++,l.vertexCount+=3,l.currentBatch.count=l.vertexCount-l.currentBatch.start,E&&M.push(H))}o.totalFrame+=k,E&&E.call(o,o,M),f.pipelines.postBatch(o)}};r.exports=x},28103:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(78023),a=i(39318),n=new d({Extends:f,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,o],initialize:function(c,l,v,p,g,m,C,P,M,E,w){f.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=c.textures.getFrame(p,g);this.is3Slice=!E&&!w,R.scale9&&(this.is3Slice=R.is3Slice);for(var A=this.is3Slice?18:54,L=0;L<A;L++)this.vertices.push(new a);this.setPosition(l,v),this.setTexture(p,g),this.setSlices(m,C,P,M,E,w,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(u,c,l,v,p,g,m){l===void 0&&(l=10),v===void 0&&(v=10),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=!1);var C=this.frame,P=!1;if(this.is3Slice&&m&&p!==0&&g!==0&&(P=!0),P)console.warn("Cannot change 9 slice to 3 slice");else{if(C.scale9&&!m){var M=C.data.scale9Borders,E=M.x,w=M.y;l=E,v=C.width-M.w-E,p=w,g=C.height-M.h-w,u===void 0&&(u=C.width),c===void 0&&(c=C.height)}else u===void 0&&(u=256),c===void 0&&(c=256);this._width=u,this._height=c,this.leftWidth=l,this.rightWidth=v,this.topHeight=p,this.bottomHeight=g,this.is3Slice&&(c=C.height,this._height=c,this.topHeight=c,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var u=this.leftWidth,c=this.rightWidth,l=this.topHeight,v=this.bottomHeight,p=this.frame.width,g=this.frame.height;this.updateQuadUVs(0,0,0,u/p,l/g),this.updateQuadUVs(6,u/p,0,1-c/p,l/g),this.updateQuadUVs(12,1-c/p,0,1,l/g),this.is3Slice||(this.updateQuadUVs(18,0,l/g,u/p,1-v/g),this.updateQuadUVs(24,u/p,l/g,1-c/p,1-v/g),this.updateQuadUVs(30,1-c/p,l/g,1,1-v/g),this.updateQuadUVs(36,0,1-v/g,u/p,1),this.updateQuadUVs(42,u/p,1-v/g,1-c/p,1),this.updateQuadUVs(48,1-c/p,1-v/g,1,1))},updateVertices:function(){var u=this.leftWidth,c=this.rightWidth,l=this.topHeight,v=this.bottomHeight,p=this.width,g=this.height;this.updateQuad(0,-.5,.5,-.5+u/p,.5-l/g),this.updateQuad(6,-.5+u/p,.5,.5-c/p,.5-l/g),this.updateQuad(12,.5-c/p,.5,.5,.5-l/g),this.is3Slice||(this.updateQuad(18,-.5,.5-l/g,-.5+u/p,-.5+v/g),this.updateQuad(24,-.5+u/p,.5-l/g,.5-c/p,-.5+v/g),this.updateQuad(30,.5-c/p,.5-l/g,.5,-.5+v/g),this.updateQuad(36,-.5,-.5+v/g,-.5+u/p,-.5),this.updateQuad(42,-.5+u/p,-.5+v/g,.5-c/p,-.5),this.updateQuad(48,.5-c/p,-.5+v/g,.5,-.5))},updateQuad:function(u,c,l,v,p){var g=this.width,m=this.height,C=this.originX,P=this.originY,M=this.vertices;M[u+0].resize(c,l,g,m,C,P),M[u+1].resize(c,p,g,m,C,P),M[u+2].resize(v,l,g,m,C,P),M[u+3].resize(c,p,g,m,C,P),M[u+4].resize(v,p,g,m,C,P),M[u+5].resize(v,l,g,m,C,P)},updateQuadUVs:function(u,c,l,v,p){var g=this.vertices,m=this.frame,C=m.u0,P=m.v0,M=m.u1,E=m.v1;if(C!==0||M!==1){var w=M-C;c=C+c*w,v=C+v*w}if(P!==0||E!==1){var R=E-P;l=P+l*R,p=P+p*R}g[u+0].setUVs(c,l),g[u+1].setUVs(c,p),g[u+2].setUVs(v,l),g[u+3].setUVs(c,p),g[u+4].setUVs(v,p),g[u+5].setUVs(v,l)},clearTint:function(){return this.setTint(16777215),this},setTint:function(u){return u===void 0&&(u=16777215),this.tint=u,this.tintFill=!1,this},setTintFill:function(u){return this.setTint(u),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(u){this._width=Math.max(u,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(u){this.is3Slice||(this._height=Math.max(u,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(u){this.scaleX=u/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(u){this.scaleY=u/this.height}},setSize:function(u,c){this.width=u,this.height=c,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=this.width,l.hitArea.height=this.height),this},setDisplaySize:function(u,c){return this.displayWidth=u,this.displayHeight=c,this},originX:{get:function(){return this._originX},set:function(u){this._originX=u,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(u){this._originY=u,this.updateVertices()}},setOrigin:function(u,c){return u===void 0&&(u=.5),c===void 0&&(c=u),this._originX=u,this._originY=c,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var u=this.frame.height;this._height=u,this.topHeight=u,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});r.exports=n},28279:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(35154),a=i(28103);x.register("nineslice",function(n,u){n===void 0&&(n={});var c=f(n,"key",null),l=f(n,"frame",null),v=o(n,"width",256),p=o(n,"height",256),g=o(n,"leftWidth",10),m=o(n,"rightWidth",10),C=o(n,"topHeight",0),P=o(n,"bottomHeight",0),M=new a(this.scene,0,0,c,l,v,p,g,m,C,P);return u!==void 0&&(n.add=u),d(this.scene,M,n),M})},47521:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28103),x=i(39429);x.register("nineslice",function(f,o,a,n,u,c,l,v,p,g){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l,v,p,g))})},78023:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(52230),r.exports={renderWebGL:x,renderCanvas:f}},52230:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){var c=a.vertices,l=c.length;if(l!==0){n.addToRenderList(a);var v=o.pipelines.set(a.pipeline,a),p=d(a,n,u,!1).calc;o.pipelines.preBatch(a);var g=v.setGameObject(a),m=v.vertexViewF32,C=v.vertexViewU32,P=v.vertexCount*v.currentShader.vertexComponentCount-1,M=n.roundPixels,E=a.tintFill,w=n.alpha*a.alpha,R=x.getTintAppendFloatAlpha(a.tint,w),A=v.vertexAvailable(),L=-1;A<l&&(L=A);for(var F=0;F<l;F++){var O=c[F];F===L&&(v.flush(),g=v.setGameObject(a),P=0),m[++P]=p.getXRound(O.vx,O.vy,M),m[++P]=p.getYRound(O.vx,O.vy,M),m[++P]=O.u,m[++P]=O.v,m[++P]=g,m[++P]=E,C[++P]=R,v.vertexCount++,v.currentBatch.count=v.vertexCount-v.currentBatch.start}o.pipelines.postBatch(a)}};r.exports=f},76472:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(44777),f=i(37589),o=i(6113),a=i(91389),n=i(90664),u=new d({Extends:x,initialize:function(l){x.call(this,l,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var c=this.propertyValue,l=c,v=this.defaultEmit,p=this.defaultUpdate;if(this.method===9){this.start=c[0],this.ease=o("Linear"),this.interpolation=a("linear"),v=this.easedValueEmit,p=this.easeValueUpdate,l=c[0],this.active=!0;for(var g=0;g<c.length;g++){var m=n(c[g]);this.r.push(m.r),this.g.push(m.g),this.b.push(m.b)}}return this.onEmit=v,this.onUpdate=p,this.current=l,this},setEase:function(c){this.easeName=c,this.ease=o(c)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(c,l,v){var p=this.ease(v),g=this.interpolation(this.r,p),m=this.interpolation(this.g,p),C=this.interpolation(this.b,p),P=f(g,m,C);return this.current=P,P}});r.exports=u},44777:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),x=i(45319),f=i(83419),o=i(99472),a=i(6113),n=i(95540),u=i(91389),c=i(77720),l=i(15994),v=new f({initialize:function(g,m,C){C===void 0&&(C=!1),this.propertyKey=g,this.propertyValue=m,this.defaultValue=m,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(p,g){p===void 0&&(p={}),g&&(this.propertyKey=g),this.propertyValue=n(p,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(p){var g;switch(this.method){case 1:case 3:case 8:g=p;break;case 2:this.propertyValue.indexOf(p)>=0&&(g=p);break;case 4:var m=(this.end-this.start)/this.steps;g=c(p,m),this.counter=g;break;case 5:case 6:case 7:g=x(p,this.start,this.end);break;case 9:g=this.start[0];break}return this.current=g,this},getMethod:function(){var p=this.propertyValue;if(p===null)return 0;var g=typeof p;if(g==="number")return 1;if(Array.isArray(p))return 2;if(g==="function")return 3;if(g==="object"){if(this.hasBoth(p,"start","end"))return this.has(p,"steps")?4:5;if(this.hasBoth(p,"min","max"))return 6;if(this.has(p,"random"))return 7;if(this.hasEither(p,"onEmit","onUpdate"))return 8;if(this.hasEither(p,"values","interpolation"))return 9}return 0},setMethods:function(){var p=this.propertyValue,g=p,m=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:m=this.staticValueEmit;break;case 2:m=this.randomStaticValueEmit,g=p[0];break;case 3:this._onEmit=p,m=this.proxyEmit;break;case 4:this.start=p.start,this.end=p.end,this.steps=p.steps,this.counter=this.start,this.yoyo=this.has(p,"yoyo")?p.yoyo:!1,this.direction=0,m=this.steppedEmit,g=this.start;break;case 5:this.start=p.start,this.end=p.end;var P=this.has(p,"ease")?p.ease:"Linear";this.ease=a(P,p.easeParams),m=this.has(p,"random")&&p.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,g=this.start;break;case 6:this.start=p.min,this.end=p.max,m=this.has(p,"int")&&p.int?this.randomRangedIntEmit:this.randomRangedValueEmit,g=this.start;break;case 7:var M=p.random;Array.isArray(M)&&(this.start=M[0],this.end=M[1]),m=this.randomRangedIntEmit,g=this.start;break;case 8:this._onEmit=this.has(p,"onEmit")?p.onEmit:this.defaultEmit,this._onUpdate=this.has(p,"onUpdate")?p.onUpdate:this.defaultUpdate,m=this.proxyEmit,C=this.proxyUpdate;break;case 9:this.start=p.values;var E=this.has(p,"ease")?p.ease:"Linear";this.ease=a(E,p.easeParams),this.interpolation=u(p.interpolation),m=this.easedValueEmit,C=this.easeValueUpdate,g=this.start[0];break}return this.onEmit=m,this.onUpdate=C,this.current=g,this},has:function(p,g){return p.hasOwnProperty(g)},hasBoth:function(p,g,m){return p.hasOwnProperty(g)&&p.hasOwnProperty(m)},hasEither:function(p,g,m){return p.hasOwnProperty(g)||p.hasOwnProperty(m)},defaultEmit:function(p,g,m){return m},defaultUpdate:function(p,g,m,C){return C},proxyEmit:function(p,g,m){var C=this._onEmit(p,g,m);return this.current=C,C},proxyUpdate:function(p,g,m,C){var P=this._onUpdate(p,g,m,C);return this.current=P,P},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var p=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[p],this.current},randomRangedValueEmit:function(p,g){var m=o(this.start,this.end);return p&&p.data[g]&&(p.data[g].min=m,p.data[g].max=this.end),this.current=m,m},randomRangedIntEmit:function(p,g){var m=d(this.start,this.end);return p&&p.data[g]&&(p.data[g].min=m,p.data[g].max=this.end),this.current=m,m},steppedEmit:function(){var p=this.counter,g=p,m=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(g+=m,g>=this.end&&(C=g-this.end,g=this.end-C,this.direction=1)):(g-=m,g<=this.start&&(C=this.start-g,g=this.start+C,this.direction=0)),this.counter=g}else this.counter=l(g+m,this.start,this.end);return this.current=p,p},easedValueEmit:function(p,g){if(p&&p.data[g]){var m=p.data[g];m.min=this.start,m.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(p,g,m){var C=p.data[g],P,M=this.ease(m);return this.interpolation?P=this.interpolation(this.start,M):P=(C.max-C.min)*M+C.min,this.current=P,P},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});r.exports=v},24502:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(20286),o=new d({Extends:f,initialize:function(n,u,c,l,v){if(typeof n=="object"){var p=n;n=x(p,"x",0),u=x(p,"y",0),c=x(p,"power",0),l=x(p,"epsilon",100),v=x(p,"gravity",50)}else n===void 0&&(n=0),u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=100),v===void 0&&(v=50);f.call(this,n,u,!0),this._gravity=v,this._power=c*v,this._epsilon=l*l},update:function(a,n){var u=this.x-a.x,c=this.y-a.y,l=u*u+c*c;if(l!==0){var v=Math.sqrt(l);l<this._epsilon&&(l=this._epsilon);var p=this._power*n/(l*v)*100;a.velocityX+=u*p,a.velocityY+=c*p}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var n=this.power;this._gravity=a,this.power=n}}});r.exports=o},56480:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),x=i(45319),f=i(83419),o=i(39506),a=i(87841),n=i(11520),u=i(26099),c=new f({initialize:function(v){this.emitter=v,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new u,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=v.scene,this.anims=new d(this),this.bounds=new a},emit:function(l,v,p,g,m,C){return this.emitter.emit(l,v,p,g,m,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(l,v){l===void 0&&(l=0),v===void 0&&(v=0),this.x=l,this.y=v},fire:function(l,v){var p=this.emitter,g=p.ops,m=p.getAnim();if(m?this.anims.play(m):(this.frame=p.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(p.getEmitZone(this),l===void 0?this.x+=g.x.onEmit(this,"x"):g.x.steps>0?this.x+=l+g.x.onEmit(this,"x"):this.x+=l,v===void 0?this.y+=g.y.onEmit(this,"y"):g.y.steps>0?this.y+=v+g.y.onEmit(this,"y"):this.y+=v,this.life=g.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=g.delay.onEmit(this,"delay"),this.holdCurrent=g.hold.onEmit(this,"hold"),this.scaleX=g.scaleX.onEmit(this,"scaleX"),this.scaleY=g.scaleY.active?g.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=g.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),p.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&p.getDeathZone(this))return this.lifeCurrent=0,!1;var C=g.speedX.onEmit(this,"speedX"),P=g.speedY.active?g.speedY.onEmit(this,"speedY"):C;if(p.radial){var M=o(g.angle.onEmit(this,"angle"));this.velocityX=Math.cos(M)*Math.abs(C),this.velocityY=Math.sin(M)*Math.abs(P)}else if(p.moveTo){var E=g.moveToX.onEmit(this,"moveToX"),w=g.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(E-this.x)/R,this.velocityY=(w-this.y)/R}else this.velocityX=C,this.velocityY=P;return p.acceleration&&(this.accelerationX=g.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=g.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=g.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=g.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=g.bounce.onEmit(this,"bounce"),this.alpha=g.alpha.onEmit(this,"alpha"),g.color.active?this.tint=g.color.onEmit(this,"tint"):this.tint=g.tint.onEmit(this,"tint"),!0},update:function(l,v,p){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=l,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=l,!1;this.anims.update(0,l);var g=this.emitter,m=g.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=m.x.onUpdate(this,"x",C,this.x),this.y=m.y.onUpdate(this,"y",C,this.y),g.moveTo){var P=m.moveToX.onUpdate(this,"moveToX",C,g.moveToX),M=m.moveToY.onUpdate(this,"moveToY",C,g.moveToY),E=this.lifeCurrent/1e3;this.velocityX=(P-this.x)/E,this.velocityY=(M-this.y)/E}return this.computeVelocity(g,l,v,p,C),this.scaleX=m.scaleX.onUpdate(this,"scaleX",C,this.scaleX),m.scaleY.active?this.scaleY=m.scaleY.onUpdate(this,"scaleY",C,this.scaleY):this.scaleY=this.scaleX,this.angle=m.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=o(this.angle),g.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x(m.alpha.onUpdate(this,"alpha",C,this.alpha),0,1),m.color.active?this.tint=m.color.onUpdate(this,"color",C,this.tint):this.tint=m.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(l,v,p,g,m){var C=l.ops,P=this.velocityX,M=this.velocityY,E=C.accelerationX.onUpdate(this,"accelerationX",m,this.accelerationX),w=C.accelerationY.onUpdate(this,"accelerationY",m,this.accelerationY),R=C.maxVelocityX.onUpdate(this,"maxVelocityX",m,this.maxVelocityX),A=C.maxVelocityY.onUpdate(this,"maxVelocityY",m,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",m,this.bounce),P+=l.gravityX*p+E*p,M+=l.gravityY*p+w*p,P=x(P,-R,R),M=x(M,-A,A),this.velocityX=P,this.velocityY=M,this.x+=P*p,this.y+=M*p,l.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var L=0;L<g.length;L++){var F=g[L];F.active&&F.update(this,v,p,m)}},setSizeToFrame:function(){},getBounds:function(l){l===void 0&&(l=this.emitter.getWorldTransformMatrix());var v=Math.abs(l.scaleX)*this.scaleX,p=Math.abs(l.scaleY)*this.scaleY,g=this.x,m=this.y,C=this.rotation,P=this.frame.width*v/2,M=this.frame.height*p/2,E=this.bounds,w=new u(g-P,m-M),R=new u(g+P,m-M),A=new u(g-P,m+M),L=new u(g+P,m+M);return C!==0&&(n(w,g,m,C),n(R,g,m,C),n(A,g,m,C),n(L,g,m,C)),l.transformPoint(w.x,w.y,w),l.transformPoint(R.x,R.y,R),l.transformPoint(A.x,A.y,A),l.transformPoint(L.x,L.y,L),E.x=Math.min(w.x,R.x,A.x,L.x),E.y=Math.min(w.y,R.y,A.y,L.y),E.width=Math.max(w.x,R.x,A.x,L.x)-E.x,E.height=Math.max(w.y,R.y,A.y,L.y)-E.y,E},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});r.exports=c},69601:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(20286),f=i(87841),o=new d({Extends:x,initialize:function(n,u,c,l,v,p,g,m){v===void 0&&(v=!0),p===void 0&&(p=!0),g===void 0&&(g=!0),m===void 0&&(m=!0),x.call(this,n,u,!0),this.bounds=new f(n,u,c,l),this.collideLeft=v,this.collideRight=p,this.collideTop=g,this.collideBottom=m},update:function(a){var n=this.bounds,u=-a.bounce,c=a.worldPosition;c.x<n.x&&this.collideLeft?(a.x+=n.x-c.x,a.velocityX*=u):c.x>n.right&&this.collideRight&&(a.x-=c.x-n.right,a.velocityX*=u),c.y<n.y&&this.collideTop?(a.y+=n.y-c.y,a.velocityY*=u):c.y>n.bottom&&this.collideBottom&&(a.y-=c.y-n.bottom,a.velocityY*=u)}});r.exports=o},31600:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(53774),o=i(43459),a=i(26388),n=i(19909),u=i(76472),c=i(44777),l=i(20696),v=i(95643),p=i(95540),g=i(26546),m=i(24502),C=i(1985),P=i(97022),M=i(86091),E=i(73162),w=i(20074),R=i(56480),A=i(68875),L=i(87841),F=i(59996),O=i(72905),b=i(90668),I=i(19186),B=i(61340),N=i(26099),k=i(15994),Y=i(69601),H=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],z=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],X=new d({Extends:v,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,b],initialize:function(G,V,W,U,$){v.call(this,G,"ParticleEmitter"),this.particleClass=R,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new u("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new N,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(V,W),this.setTexture(U),$&&this.setConfig($)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(D){if(!D)return this;var G=0,V="",W=this.ops;for(G=0;G<z.length;G++)V=z[G],W[V].loadConfig(D);for(G=0;G<H.length;G++)V=H[G],P(D,V)&&(this[V]=p(D,V));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,P(D,"speed")&&(W.speedX.loadConfig(D,"speed"),W.speedY.active=!1),(C(D,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),P(D,"scale")&&(W.scaleX.loadConfig(D,"scale"),W.scaleY.active=!1),P(D,"callbackScope")){var U=p(D,"callbackScope",null);this.emitCallbackScope=U,this.deathCallbackScope=U}if(P(D,"emitZone")&&this.addEmitZone(D.emitZone),P(D,"deathZone")&&this.addDeathZone(D.deathZone),P(D,"bounds")){var $=this.addParticleBounds(D.bounds);$.collideLeft=p(D,"collideLeft",!0),$.collideRight=p(D,"collideRight",!0),$.collideTop=p(D,"collideTop",!0),$.collideBottom=p(D,"collideBottom",!0)}return P(D,"followOffset")&&this.followOffset.setFromObject(p(D,"followOffset",0)),P(D,"texture")&&this.setTexture(D.texture),P(D,"frame")?this.setEmitterFrame(D.frame):P(D,"anim")&&this.setAnim(D.anim),P(D,"reserve")&&this.reserve(D.reserve),P(D,"advance")&&this.fastForward(D.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(l.START,this),this},toJSON:function(){var D=f(this),G=0,V="";for(G=0;G<H.length;G++)V=H[G],D[V]=this[V];var W=this.ops;for(G=0;G<z.length;G++)V=z[G],W[V]&&(D[V]=W[V].toJSON());return W.speedY.active||(delete D.speedX,D.speed=W.speedX.toJSON()),this.scaleX===this.scaleY&&(delete D.scaleX,delete D.scaleY,D.scale=W.scaleX.toJSON()),D},resetCounters:function(D,G){var V=this.counters;V.fill(0),V[0]=D,G&&(V[5]=1)},startFollow:function(D,G,V,W){return G===void 0&&(G=0),V===void 0&&(V=0),W===void 0&&(W=!1),this.follow=D,this.followOffset.set(G,V),this.trackVisible=W,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var D=this.frames,G=D.length,V;return G===1?V=D[0]:this.randomFrame?V=g(D):(V=D[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===G&&(this.currentFrame=0))),this.texture.get(V)},setEmitterFrame:function(D,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomFrame=G,this.frameQuantity=V,this.currentFrame=0;var W=typeof D;if(this.frames.length=0,Array.isArray(D))this.frames=this.frames.concat(D);else if(W==="string"||W==="number")this.frames.push(D);else if(W==="object"){var U=D;D=p(U,"frames",null),D&&(this.frames=this.frames.concat(D));var $=p(U,"cycle",!1);this.randomFrame=!$,this.frameQuantity=p(U,"quantity",V)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var D=this.anims,G=D.length;if(G===0)return null;if(G===1)return D[0];if(this.randomAnim)return g(D);var V=D[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=k(this.currentAnim+1,0,G)),V},setAnim:function(D,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomAnim=G,this.animQuantity=V,this.currentAnim=0;var W=typeof D;if(this.anims.length=0,Array.isArray(D))this.anims=this.anims.concat(D);else if(W==="string")this.anims.push(D);else if(W==="object"){var U=D;D=p(U,"anims",null),D&&(this.anims=this.anims.concat(D));var $=p(U,"cycle",!1);this.randomAnim=!$,this.animQuantity=p(U,"quantity",V)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(D){return D===void 0&&(D=!0),this.radial=D,this},addParticleBounds:function(D,G,V,W,U,$,K,Z){if(typeof D=="object"){var J=D;D=J.x,G=J.y,V=P(J,"w")?J.w:J.width,W=P(J,"h")?J.h:J.height}return this.addParticleProcessor(new Y(D,G,V,W,U,$,K,Z))},setParticleSpeed:function(D,G){return G===void 0&&(G=D),this.ops.speedX.onChange(D),D===G?this.ops.speedY.active=!1:this.ops.speedY.onChange(G),this.radial=!0,this},setParticleScale:function(D,G){return D===void 0&&(D=1),G===void 0&&(G=D),this.ops.scaleX.onChange(D),this.ops.scaleY.onChange(G),this},setParticleGravity:function(D,G){return this.gravityX=D,this.gravityY=G,this},setParticleAlpha:function(D){return this.ops.alpha.onChange(D),this},setParticleTint:function(D){return this.ops.tint.onChange(D),this},setEmitterAngle:function(D){return this.ops.angle.onChange(D),this},setParticleLifespan:function(D){return this.ops.lifespan.onChange(D),this},setQuantity:function(D){return this.quantity=D,this},setFrequency:function(D,G){return this.frequency=D,this.flowCounter=D>0?D:0,G&&(this.quantity=G),this},addDeathZone:function(D){Array.isArray(D)||(D=[D]);for(var G,V=[],W=0;W<D.length;W++)if(G=D[W],G instanceof a)V.push(G);else if(typeof G.contains=="function")G=new a(G,!0),V.push(G);else{var U=p(G,"type","onEnter"),$=p(G,"source",null);if($&&typeof $.contains=="function"){var K=U==="onEnter";G=new a($,K),V.push(G)}}return this.deathZones=this.deathZones.concat(V),V},removeDeathZone:function(D){return O(this.deathZones,D),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(D){Array.isArray(D)||(D=[D]);for(var G,V=[],W=0;W<D.length;W++)if(G=D[W],G instanceof A||G instanceof n)V.push(G);else{var U=p(G,"source",null);if(U){var $=p(G,"type","random");if($==="random"&&typeof U.getRandomPoint=="function")G=new A(U),V.push(G);else if($==="edge"&&typeof U.getPoints=="function"){var K=p(G,"quantity",1),Z=p(G,"stepRate",0),J=p(G,"yoyo",!1),Q=p(G,"seamless",!0),j=p(G,"total",-1);G=new n(U,K,Z,J,Q,j),V.push(G)}}}return this.emitZones=this.emitZones.concat(V),V},removeEmitZone:function(D){return O(this.emitZones,D),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(D){var G=this.emitZones,V=G.length;if(V!==0){var W=G[this.zoneIndex];W.getPoint(D),W.total>-1&&(this.zoneTotal++,this.zoneTotal===W.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===V&&(this.zoneIndex=0)))}},getDeathZone:function(D){for(var G=this.deathZones,V=0;V<G.length;V++){var W=G[V];if(W.willKill(D))return this.emit(l.DEATH_ZONE,this,D,W),!0}return!1},setEmitZone:function(D){var G;return isFinite(D)?G=D:G=this.emitZones.indexOf(D),G>=0&&(this.zoneIndex=G),this},addParticleProcessor:function(D){return this.processors.exists(D)||(D.emitter&&D.emitter.removeParticleProcessor(D),this.processors.add(D),D.emitter=this),D},removeParticleProcessor:function(D){return this.processors.exists(D)&&(this.processors.remove(D,!0),D.emitter=null),D},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(D){return this.addParticleProcessor(new m(D))},reserve:function(D){var G=this.dead;if(this.maxParticles>0){var V=this.getParticleCount();V+D>this.maxParticles&&(D=this.maxParticles-(V+D))}for(var W=0;W<D;W++)G.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(D,G){return D===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof D=="function"&&(this.emitCallback=D,G&&(this.emitCallbackScope=G)),this},onParticleDeath:function(D,G){return D===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof D=="function"&&(this.deathCallback=D,G&&(this.deathCallbackScope=G)),this},killAll:function(){for(var D=this.dead,G=this.alive;G.length>0;)D.push(G.pop());return this},forEachAlive:function(D,G){for(var V=this.alive,W=V.length,U=0;U<W;U++)D.call(G,V[U],this);return this},forEachDead:function(D,G){for(var V=this.dead,W=V.length,U=0;U<W;U++)D.call(G,V[U],this);return this},start:function(D,G){return D===void 0&&(D=0),this.emitting||(D>0&&this.fastForward(D),this.emitting=!0,this.resetCounters(this.frequency,!0),G!==void 0&&(this.duration=Math.abs(G)),this.emit(l.START,this)),this},stop:function(D){return D===void 0&&(D=!1),this.emitting&&(this.emitting=!1,D&&this.killAll(),this.emit(l.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(D,G){return D===void 0&&(D=""),G===void 0&&(G=this.true),this.sortProperty=D,this.sortOrderAsc=G,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(D){return this.sortProperty!==""?D=this.depthSortCallback:D=null,this.sortCallback=D,this},depthSort:function(){return I(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(D,G){var V=this.sortProperty;return this.sortOrderAsc?D[V]-G[V]:G[V]-D[V]},flow:function(D,G,V){return G===void 0&&(G=1),this.emitting=!1,this.frequency=D,this.quantity=G,V!==void 0&&(this.stopAfter=V),this.start()},explode:function(D,G,V){this.frequency=-1,this.resetCounters(-1,!0);var W=this.emitParticle(D,G,V);return this.emit(l.EXPLODE,this,W),W},emitParticleAt:function(D,G,V){return this.emitParticle(V,D,G)},emitParticle:function(D,G,V){if(!this.atLimit()){D===void 0&&(D=this.ops.quantity.onEmit());for(var W=this.dead,U=this.stopAfter,$=this.follow?this.follow.x+this.followOffset.x:G,K=this.follow?this.follow.y+this.followOffset.y:V,Z=0;Z<D;Z++){var J=W.pop();if(J||(J=new this.particleClass(this)),J.fire($,K)?(this.particleBringToTop?this.alive.push(J):this.alive.unshift(J),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,J,this)):this.dead.push(J),U>0&&(this.stopCounter++,this.stopCounter>=U)||this.atLimit())break}return J}},fastForward:function(D,G){G===void 0&&(G=1e3/60);var V=0;for(this.skipping=!0;V<Math.abs(D);)this.preUpdate(0,G),V+=G;return this.skipping=!1,this},preUpdate:function(D,G){G*=this.timeScale;var V=G/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var W=this.getProcessors(),U=this.alive,$=this.dead,K=0,Z=[],J=U.length;for(K=0;K<J;K++){var Q=U[K];Q.update(G,V,W)&&Z.push({index:K,particle:Q})}if(J=Z.length,J>0){var j=this.deathCallback,_=this.deathCallbackScope;for(K=J-1;K>=0;K--){var q=Z[K];U.splice(q.index,1),$.push(q.particle),j&&j.call(_,q.particle),q.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&U.length===0&&(this.completeFlag=0,this.emit(l.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=G;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=G,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(D){for(var G=this.getWorldTransformMatrix(),V=this.alive,W=V.length,U=[],$=0;$<W;$++){var K=V[$];F(D,K.getBounds(G))&&U.push(K)}return U},getBounds:function(D,G,V,W){D===void 0&&(D=0),G===void 0&&(G=0),V===void 0&&(V=1e3/60),W===void 0&&(W=new L);var U=this.getWorldTransformMatrix(),$,K,Z=this.alive,J=!1;if(W.setTo(0,0,0,0),G>0){var Q=0;for(this.skipping=!0;Q<Math.abs(G);){for(this.preUpdate(0,V),$=0;$<Z.length;$++)K=Z[$].getBounds(U),J?w(W,K):(J=!0,o(K,W));Q+=V}this.skipping=!1}else for($=0;$<Z.length;$++)K=Z[$].getBounds(U),J?w(W,K):(J=!0,o(K,W));return D>0&&M(W,D,D),W},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(D){this.ops.x.onChange(D)}},particleY:{get:function(){return this.ops.y.current},set:function(D){this.ops.y.onChange(D)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(D){this.ops.accelerationX.onChange(D)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(D){this.ops.accelerationY.onChange(D)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(D){this.ops.maxVelocityX.onChange(D)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(D){this.ops.maxVelocityY.onChange(D)}},speed:{get:function(){return this.ops.speedX.current},set:function(D){this.ops.speedX.onChange(D),this.ops.speedY.onChange(D)}},speedX:{get:function(){return this.ops.speedX.current},set:function(D){this.ops.speedX.onChange(D)}},speedY:{get:function(){return this.ops.speedY.current},set:function(D){this.ops.speedY.onChange(D)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(D){this.ops.moveToX.onChange(D)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(D){this.ops.moveToY.onChange(D)}},bounce:{get:function(){return this.ops.bounce.current},set:function(D){this.ops.bounce.onChange(D)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(D){this.ops.scaleX.onChange(D)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(D){this.ops.scaleY.onChange(D)}},particleColor:{get:function(){return this.ops.color.current},set:function(D){this.ops.color.onChange(D)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(D){this.ops.color.setEase(D)}},particleTint:{get:function(){return this.ops.tint.current},set:function(D){this.ops.tint.onChange(D)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(D){this.ops.alpha.onChange(D)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(D){this.ops.lifespan.onChange(D)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(D){this.ops.angle.onChange(D)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(D){this.ops.rotate.onChange(D)}},quantity:{get:function(){return this.ops.quantity.current},set:function(D){this.ops.quantity.onChange(D)}},delay:{get:function(){return this.ops.delay.current},set:function(D){this.ops.delay.onChange(D)}},hold:{get:function(){return this.ops.hold.current},set:function(D){this.ops.hold.onChange(D)}},flowCounter:{get:function(){return this.counters[0]},set:function(D){this.counters[0]=D}},frameCounter:{get:function(){return this.counters[1]},set:function(D){this.counters[1]=D}},animCounter:{get:function(){return this.counters[2]},set:function(D){this.counters[2]=D}},elapsed:{get:function(){return this.counters[3]},set:function(D){this.counters[3]=D}},stopCounter:{get:function(){return this.counters[4]},set:function(D){this.counters[4]=D}},completeFlag:{get:function(){return this.counters[5]},set:function(D){this.counters[5]=D}},zoneIndex:{get:function(){return this.counters[6]},set:function(D){this.counters[6]=D}},zoneTotal:{get:function(){return this.counters[7]},set:function(D){this.counters[7]=D}},currentFrame:{get:function(){return this.counters[8]},set:function(D){this.counters[8]=D}},currentAnim:{get:function(){return this.counters[9]},set:function(D){this.counters[9]=D}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var D,G=this.ops;for(D=0;D<z.length;D++){var V=z[D];G[V].destroy()}for(D=0;D<this.alive.length;D++)this.alive[D].destroy();for(D=0;D<this.dead.length;D++)this.dead[D].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});r.exports=X},9871:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(59996),x=i(61340),f=new x,o=new x,a=new x,n=new x,u=function(c,l,v,p){var g=f,m=o,C=a,P=n;p?(P.loadIdentity(),P.multiply(p),P.translate(l.x,l.y),P.rotate(l.rotation),P.scale(l.scaleX,l.scaleY)):P.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var M=c.currentContext,E=v.roundPixels,w=v.alpha,R=l.alpha,A=l.alive,L=A.length,F=l.viewBounds;if(!(!l.visible||L===0||F&&!d(F,v.worldView))){l.sortCallback&&l.depthSort(),v.addToRenderList(l);var O=l.scrollFactorX,b=l.scrollFactorY;M.save(),M.globalCompositeOperation=c.blendModes[l.blendMode];for(var I=0;I<L;I++){var B=A[I],N=B.alpha*R*w;if(!(N<=0||B.scaleX===0||B.scaleY===0)){C.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),g.copyFrom(v.matrix),g.multiplyWithOffset(P,-v.scrollX*O,-v.scrollY*b),C.e=B.x,C.f=B.y,g.multiply(C,m);var k=B.frame,Y=k.canvasData;if(Y.width>0&&Y.height>0){var H=-k.halfWidth,z=-k.halfHeight;M.globalAlpha=N,M.save(),m.setToContext(M),E&&(H=Math.round(H),z=Math.round(z)),M.imageSmoothingEnabled=!k.source.scaleMode,M.drawImage(k.source.image,Y.x,Y.y,Y.width,Y.height,H,z,Y.width,Y.height),M.restore()}}}M.restore()}};r.exports=u},92730:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(95540),a=i(31600);x.register("particles",function(n,u){n===void 0&&(n={});var c=f(n,"key",null),l=o(n,"config",null),v=new a(this.scene,0,0,c);return u!==void 0&&(n.add=u),d(this.scene,v,n),l&&v.setConfig(l),v})},676:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(31600);d.register("particles",function(f,o,a,n){return f!==void 0&&typeof f=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,f,o,a,n))})},90668:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(21188),f=i(9871),r.exports={renderWebGL:x,renderCanvas:f}},21188:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(59996),x=i(61340),f=i(70554),o=new x,a=new x,n=new x,u=new x,c=function(l,v,p,g){var m=l.pipelines.set(v.pipeline),C=o,P=a,M=n,E=u;g?(E.loadIdentity(),E.multiply(g),E.translate(v.x,v.y),E.rotate(v.rotation),E.scale(v.scaleX,v.scaleY)):E.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);var w=f.getTintAppendFloatAlpha,R=p.alpha,A=v.alpha;l.pipelines.preBatch(v);var L=v.alive,F=L.length,O=v.viewBounds;if(!(F===0||O&&!d(O,p.worldView))){v.sortCallback&&v.depthSort(),p.addToRenderList(v),C.copyFrom(p.matrix),C.multiplyWithOffset(E,-p.scrollX*v.scrollFactorX,-p.scrollY*v.scrollFactorY),l.setBlendMode(v.blendMode),v.mask&&(v.mask.preRenderWebGL(l,v,p),l.pipelines.set(v.pipeline));for(var b=v.tintFill,I,B,N=0;N<F;N++){var k=L[N],Y=k.alpha*A*R;if(!(Y<=0||k.scaleX===0||k.scaleY===0)){M.applyITRS(k.x,k.y,k.rotation,k.scaleX,k.scaleY),M.e=k.x,M.f=k.y,C.multiply(M,P);var H=k.frame;H.glTexture!==B&&(B=H.glTexture,I=m.setGameObject(v,H));var z=-H.halfWidth,X=-H.halfHeight,D=P.setQuad(z,X,z+H.width,X+H.height),G=w(k.tint,Y);m.shouldFlush(6)&&(m.flush(),I=m.setGameObject(v,H)),m.batchQuad(v,D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],H.u0,H.v0,H.u1,H.v1,G,G,G,G,b,B,I)}}v.mask&&v.mask.postRenderWebGL(l,p),l.pipelines.postBatch(v)}};r.exports=c},20286:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n){o===void 0&&(o=0),a===void 0&&(a=0),n===void 0&&(n=!0),this.emitter,this.x=o,this.y=a,this.active=n},update:function(){},destroy:function(){this.emitter=null}});r.exports=x},9774:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},812:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="deathzone"},30522:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="explode"},96695:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},18677:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},20696:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a){this.source=o,this.killOnEnter=a},willKill:function(f){var o=f.worldPosition,a=this.source.contains(o.x,o.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});r.exports=x},19909:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u,c,l){u===void 0&&(u=!1),c===void 0&&(c=!0),l===void 0&&(l=-1),this.source=o,this.points=[],this.quantity=a,this.stepRate=n,this.yoyo=u,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.total=l,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var f=this.points[0],o=this.points[this.points.length-1];f.x===o.x&&f.y===o.y&&this.points.pop()}var a=this._length;return this._length=this.points.length,this._length<a&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(f){return this.source=f,this.updateSource()},getPoint:function(f){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(f.x=o.x,f.y=o.y)}});r.exports=x},68875:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(26099),f=new d({initialize:function(a){this.source=a,this._tempVec=new x,this.total=-1},getPoint:function(o){var a=this._tempVec;this.source.getRandomPoint(a),o.x=a.x,o.y=a.y}});r.exports=f},21024:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(68287),o=new d({Extends:f,Mixins:[x.PathFollower],initialize:function(n,u,c,l,v,p){f.call(this,n,c,l,v,p),this.path=u},preUpdate:function(a,n){this.anims.update(a,n),this.pathUpdate(a)}});r.exports=o},90145:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(1159);d.register("follower",function(f,o,a,n,u){var c=new x(this.scene,f,o,a,n,u);return this.displayList.add(c),this.updateList.add(c),c})},33663:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),x=i(83419),f=i(48803),o=i(90664),a=i(4703),n=i(45650),u=new x({Extends:a,initialize:function(l,v,p,g,m,C,P,M){g||(g="__DEFAULT"),a.call(this,l,v,p,g,m),this.type="Plane",this.anims=new d(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,P,M),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(c,l,v){c===void 0&&(c=8),l===void 0&&(l=8),v===void 0&&(v=!1);var p=!1;return v&&(p=!0),this.gridWidth=c,this.gridHeight=l,this.isTiled=v,this.clear(),f({mesh:this,widthSegments:c,heightSegments:l,isOrtho:!1,tile:v,flipY:p}),this},setSizeToFrame:function(c){c===void 0&&(c=!0);var l=this.frame;if(this.setPerspective(this.width/l.width,this.height/l.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!c)return this;var v=this.gridWidth,p=this.gridHeight,g=this.vertices,m=l.u0,C=l.u1,P=l.v0,M=l.v1,E,w,R=0;if(this.isTiled)for(P=l.v1,M=l.v0,w=0;w<p;w++)for(E=0;E<v;E++)g[R++].setUVs(m,M),g[R++].setUVs(m,P),g[R++].setUVs(C,M),g[R++].setUVs(m,P),g[R++].setUVs(C,P),g[R++].setUVs(C,M);else{var A=v+1,L=p+1,F=C-m,O=M-P,b=[];for(w=0;w<L;w++)for(E=0;E<A;E++){var I=m+F*(E/v),B=P+O*(w/p);b.push(I,B)}for(w=0;w<p;w++)for(E=0;E<v;E++){var N=(E+A*w)*2,k=(E+A*(w+1))*2,Y=(E+1+A*(w+1))*2,H=(E+1+A*w)*2;g[R++].setUVs(b[N],b[N+1]),g[R++].setUVs(b[k],b[k+1]),g[R++].setUVs(b[H],b[H+1]),g[R++].setUVs(b[k],b[k+1]),g[R++].setUVs(b[Y],b[Y+1]),g[R++].setUVs(b[H],b[H+1])}}return this},setViewHeight:function(c){c===void 0&&(c=this.frame.height);var l=this.fov*(Math.PI/180);this.viewPosition.z=this.height/c/Math.tan(l/2),this.dirtyCache[10]=1},createCheckerboard:function(c,l,v,p,g){c===void 0&&(c=16777215),l===void 0&&(l=255),v===void 0&&(v=255),p===void 0&&(p=255),g===void 0&&(g=128);for(var m=o(c),C=o(l),P=[],M=0;M<16;M++)for(var E=0;E<16;E++)M<8&&E<8||M>7&&E>7?P.push(m.r,m.g,m.b,v):P.push(C.r,C.g,C.b,p);var w=this.scene.sys.textures.addUint8Array(n(),new Uint8Array(P),16,16);return this.removeCheckerboard(),this.setTexture(w),this.setSizeToFrame(),this.setViewHeight(g),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(c,l){return this.anims.play(c,l)},playReverse:function(c,l){return this.anims.playReverse(c,l)},playAfterDelay:function(c,l){return this.anims.playAfterDelay(c,l)},playAfterRepeat:function(c,l){return this.anims.playAfterRepeat(c,l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},preUpdate:function(c,l){a.prototype.preUpdate.call(this,c,l),this.anims.update(c,l)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});r.exports=u},56015:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(13059),f=i(44603),o=i(23568),a=i(35154),n=i(33663);f.register("plane",function(u,c){u===void 0&&(u={});var l=o(u,"key",null),v=o(u,"frame",null),p=a(u,"width",8),g=a(u,"height",8),m=a(u,"tile",!1),C=new n(this.scene,0,0,l,v,p,g,m);c!==void 0&&(u.add=c);var P=a(u,"checkerboard",null);if(P){var M=a(P,"color1",16777215),E=a(P,"color2",255),w=a(P,"alpha1",255),R=a(P,"alpha2",255),A=a(P,"height",128);C.createCheckerboard(M,E,w,R,A)}return d(this.scene,C,u),x(C,u),C})},30985:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33663),x=i(39429);x.register("plane",function(f,o,a,n,u,c,l){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l))})},80321:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(30100),a=i(36060),n=i(67277),u=new d({Extends:f,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,n],initialize:function(l,v,p,g,m,C,P){g===void 0&&(g=16777215),m===void 0&&(m=128),C===void 0&&(C=1),P===void 0&&(P=.1),f.call(this,l,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(v,p),this.color=o(g),this.intensity=C,this.attenuation=P,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});r.exports=u},39829:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(80321);x.register("pointlight",function(a,n){a===void 0&&(a={});var u=f(a,"color",16777215),c=f(a,"radius",128),l=f(a,"intensity",1),v=f(a,"attenuation",.1),p=new o(this.scene,0,0,u,c,l,v);return n!==void 0&&(a.add=n),d(this.scene,p,a),p})},71255:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(80321);d.register("pointlight",function(f,o,a,n,u,c){return this.displayList.add(new x(this.scene,f,o,a,n,u,c))})},67277:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(57787),r.exports={renderWebGL:x,renderCanvas:f}},57787:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=function(f,o,a,n){a.addToRenderList(o);var u=f.pipelines.set(o.pipeline),c=d(o,a,n).calc,l=o.width,v=o.height,p=-o._radius,g=-o._radius,m=p+l,C=g+v,P=c.getX(0,0),M=c.getY(0,0),E=c.getX(p,g),w=c.getY(p,g),R=c.getX(p,C),A=c.getY(p,C),L=c.getX(m,C),F=c.getY(m,C),O=c.getX(m,g),b=c.getY(m,g);f.pipelines.preBatch(o),u.batchPointLight(o,a,E,w,R,A,L,F,O,b,P,M),f.pipelines.postBatch(o)};r.exports=x},591:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(81320),f=i(88571),o=new d({Extends:f,initialize:function(n,u,c,l,v){u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=32),v===void 0&&(v=32);var p=new x(n.sys.textures,"",l,v);f.call(this,n,u,c,p),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(a,n){this.width=a,this.height=n,this.texture.setSize(a,n),this.updateDisplayOrigin();var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=a,u.hitArea.height=n),this},resize:function(a,n){return this.setSize(a,n),this},saveTexture:function(a){var n=this.texture;return n.key=a,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(a,n,u,c,l,v){return this.texture.fill(a,n,u,c,l,v),this},clear:function(){return this.texture.clear(),this},stamp:function(a,n,u,c,l){return this.texture.stamp(a,n,u,c,l),this},erase:function(a,n,u){return this.texture.erase(a,n,u),this},draw:function(a,n,u,c,l){return this.texture.draw(a,n,u,c,l),this},drawFrame:function(a,n,u,c,l,v){return this.texture.drawFrame(a,n,u,c,l,v),this},repeat:function(a,n,u,c,l,v,p,g,m){return this.texture.repeat(a,n,u,c,l,v,p,g,m),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(a,n,u,c,l){return this.texture.batchDraw(a,n,u,c,l),this},batchDrawFrame:function(a,n,u,c,l,v){return this.texture.batchDrawFrame(a,n,u,c,l,v),this},endDraw:function(a){return this.texture.endDraw(a),this},snapshotArea:function(a,n,u,c,l,v,p){return this.texture.snapshotArea(a,n,u,c,l,v,p),this},snapshot:function(a,n,u){return this.snapshotArea(0,0,this.width,this.height,a,n,u)},snapshotPixel:function(a,n,u){return this.snapshotArea(a,n,1,1,u,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});r.exports=o},34495:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(591);x.register("renderTexture",function(a,n){a===void 0&&(a={});var u=f(a,"x",0),c=f(a,"y",0),l=f(a,"width",32),v=f(a,"height",32),p=new o(this.scene,u,c,l,v);return n!==void 0&&(a.add=n),d(this.scene,p,a),p})},60505:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(591);d.register("renderTexture",function(f,o,a,n){return this.displayList.add(new x(this.scene,f,o,a,n))})},77757:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),x=i(83419),f=i(31401),o=i(95643),a=i(36060),n=i(38745),u=i(26099),c=new x({Extends:o,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Flip,f.Mask,f.Pipeline,f.PostPipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,n],initialize:function(v,p,g,m,C,P,M,E,w){m===void 0&&(m="__DEFAULT"),P===void 0&&(P=2),M===void 0&&(M=!0),o.call(this,v,"Rope"),this.anims=new d(this),this.points=P,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=M,this._flipX=!1,this._flipY=!1,this._perp=new u,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,C),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(P)&&this.resizeArrays(P.length),this.setPoints(P,E,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,v){var p=this.anims.currentFrame;this.anims.update(l,v),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(l,v,p){return this.anims.play(l,v,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,v,p){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,v,p))},setVertical:function(l,v,p){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,v,p)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,v){var p=this.points.length;if(p<1)return this;var g=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&v===void 0&&(l=[l]);var m,C=0;if(v!==void 0)for(m=0;m<p;m++)C=m*2,g[C]=l,g[C+1]=v;else if(l.length===p)for(m=0;m<p;m++)C=m*2,g[C]=l[m],g[C+1]=l[m];else{var P=l[0];for(m=0;m<p;m++)C=m*2,l.length>C&&(P=l[C]),g[C]=P,l.length>C+1&&(P=l[C+1]),g[C+1]=P}return this},setColors:function(l){var v=this.points.length;if(v<1)return this;var p=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var g,m=0;if(l.length===v)for(g=0;g<v;g++)m=g*2,p[m]=l[g],p[m+1]=l[g];else{var C=l[0];for(g=0;g<v;g++)m=g*2,l.length>m&&(C=l[m]),p[m]=C,l.length>m+1&&(C=l[m+1]),p[m+1]=C}return this},setPoints:function(l,v,p){if(l===void 0&&(l=2),typeof l=="number"){var g=l;g<2&&(g=2),l=[];var m,C,P;if(this.horizontal)for(P=-this.frame.halfWidth,C=this.frame.width/(g-1),m=0;m<g;m++)l.push({x:P+m*C,y:0});else for(P=-this.frame.halfHeight,C=this.frame.height/(g-1),m=0;m<g;m++)l.push({x:0,y:P+m*C})}var M=l.length,E=this.points.length;return M<1?(console.warn("Rope: Not enough points given"),this):(M===1&&(l.unshift({x:0,y:0}),M++),E!==M&&this.resizeArrays(M),this.dirty=!0,this.points=l,this.updateUVs(),v!=null&&this.setColors(v),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var l=this.uv,v=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,C=this.frame.v1,P=(m-p)/(v-1),M=(C-g)/(v-1),E=0;E<v;E++){var w=E*4,R,A,L,F;this.horizontal?(this._flipX?(R=m-E*P,L=m-E*P):(R=p+E*P,L=p+E*P),this._flipY?(A=C,F=g):(A=g,F=C)):(this._flipX?(R=p,L=m):(R=m,L=p),this._flipY?(A=C-E*M,F=C-E*M):(A=g+E*M,F=g+E*M)),l[w+0]=R,l[w+1]=A,l[w+2]=L,l[w+3]=F}return this},resizeArrays:function(l){var v=this.colors,p=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),v=new Uint32Array(l*2),p=new Float32Array(l*2);for(var g=0;g<l*2;g++)v[g]=16777215,p[g]=1;return this.colors=v,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var l=this._perp,v=this.points,p=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var m,C=v[0],P=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,M=0;M<g;M++){var E=v[M],w=M*4;M<g-1?m=v[M+1]:m=E,l.x=m.y-C.y,l.y=-(m.x-C.x);var R=l.length();l.x/=R,l.y/=R,l.x*=P,l.y*=P,p[w]=E.x+l.x,p[w+1]=E.y+l.y,p[w+2]=E.x-l.x,p[w+3]=E.y-l.y,C=E}return this}},setDebug:function(l,v){return this.debugGraphic=l,!l&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,v,p){var g=l.debugGraphic,m=p[0],C=p[1],P=p[2],M=p[3];g.lineBetween(m,C,P,M);for(var E=4;E<v;E+=4){var w=p[E+0],R=p[E+1],A=p[E+2],L=p[E+3];g.lineBetween(m,C,w,R),g.lineBetween(P,M,A,L),g.lineBetween(P,M,w,R),g.lineBetween(w,R,A,L),m=w,C=R,P=A,M=L}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});r.exports=c},95262:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};r.exports=T},26209:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(35154),a=i(77757);x.register("rope",function(n,u){n===void 0&&(n={});var c=f(n,"key",null),l=f(n,"frame",null),v=f(n,"horizontal",!0),p=o(n,"points",void 0),g=o(n,"colors",void 0),m=o(n,"alphas",void 0),C=new a(this.scene,0,0,c,l,p,v,g,m);return u!==void 0&&(n.add=u),d(this.scene,C,n),C})},96819:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(77757),x=i(39429);x.register("rope",function(f,o,a,n,u,c,l,v){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l,v))})},38745:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(20439),f=i(95262),r.exports={renderWebGL:x,renderCanvas:f}},20439:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){n.addToRenderList(a);var c=o.pipelines.set(a.pipeline,a),l=d(a,n,u).calc,v=a.vertices,p=a.uv,g=a.colors,m=a.alphas,C=a.alpha,P=x.getTintAppendFloatAlpha,M=n.roundPixels,E=v.length,w=Math.floor(E*.5);c.flush(),o.pipelines.preBatch(a);var R=c.setGameObject(a),A=c.vertexViewF32,L=c.vertexViewU32,F=c.vertexCount*c.currentShader.vertexComponentCount-1,O=0,b=a.tintFill;a.dirty&&a.updateVertices();for(var I=a.debugCallback,B=[],N=0;N<E;N+=2){var k=v[N+0],Y=v[N+1],H=k*l.a+Y*l.c+l.e,z=k*l.b+Y*l.d+l.f;M&&(H=Math.round(H),z=Math.round(z)),A[++F]=H,A[++F]=z,A[++F]=p[N+0],A[++F]=p[N+1],A[++F]=R,A[++F]=b,L[++F]=P(g[O],n.alpha*(m[O]*C)),O++,I&&(B[N+0]=H,B[N+1]=z)}I&&I.call(a,a,E,B),c.vertexCount+=w,c.currentBatch.count=c.vertexCount-c.currentBatch.start,o.pipelines.postBatch(a)};r.exports=f},20071:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(95540),a=i(79291),n=i(61622),u=i(25479),c=i(61340),l=i(95428),v=i(92503),p=new d({Extends:f,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,u],initialize:function(m,C,P,M,E,w,R,A){P===void 0&&(P=0),M===void 0&&(M=0),E===void 0&&(E=128),w===void 0&&(w=128),f.call(this,m,"Shader"),this.blendMode=-1,this.shader;var L=m.sys.renderer;this.renderer=L,this.gl=L.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=L.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=L.width,this._rendererHeight=L.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(P,M),this.setSize(E,w),this.setOrigin(.5,.5),this.setShader(C,R,A),this.renderer.on(v.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(g){return this.renderToTexture?!0:!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&g.id)},setRenderToTexture:function(g,m){if(!this.renderToTexture){var C=this.width,P=this.height,M=this.renderer;this.glTexture=M.createTextureFromSource(null,C,P,0),this.framebuffer=M.createFramebuffer(C,P,this.glTexture,!1),this._rendererWidth=C,this._rendererHeight=P,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),g&&(this.texture=this.scene.sys.textures.addGLTexture(g,this.glTexture))}return this.shader&&(M.pipelines.clear(),this.load(),this.flush(),M.pipelines.rebind()),this},setShader:function(g,m,C){if(this.renderer.contextLost)return this._deferSetShader={key:g,textures:m,textureData:C},this;if(m===void 0&&(m=[]),typeof g=="string"){var P=this.scene.sys.cache.shader;if(!P.has(g))return console.warn("Shader missing: "+g),this;this.shader=P.get(g)}else this.shader=g;var M=this.gl,E=this.renderer;this.program&&E.deleteProgram(this.program);var w=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);M.uniformMatrix4fv(M.getUniformLocation(w.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),M.uniformMatrix4fv(M.getUniformLocation(w.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),M.uniform2f(M.getUniformLocation(w.webGLProgram,"uResolution"),this.width,this.height),this.program=w;var R=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[R.getFullYear(),R.getMonth(),R.getDate(),R.getHours()*60*60+R.getMinutes()*60+R.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var L=0;L<4;L++)m[L]&&this.setSampler2D("iChannel"+L,m[L],L,C);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(g){return this.pointer=g,this},projOrtho:function(g,m,C,P){if(this.renderer.contextLost){this._deferProjOrtho={left:g,right:m,bottom:C,top:P};return}var M=-1e3,E=1e3,w=1/(g-m),R=1/(C-P),A=1/(M-E),L=this.projectionMatrix;L[0]=-2*w,L[5]=-2*R,L[10]=2*A,L[12]=(g+m)*w,L[13]=(P+C)*R,L[14]=(E+M)*A;var F=this.program,O=this.gl,b=this.renderer;b.setProgram(F),O.uniformMatrix4fv(O.getUniformLocation(F.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=m,this._rendererHeight=C},initUniforms:function(){var g=this.renderer.glFuncMap,m=this.program;this._textureCount=0;for(var C in this.uniforms){var P=this.uniforms[C],M=P.type,E=g[M];P.uniformLocation=this.renderer.createUniformLocation(m,C),M!=="sampler2D"&&(P.glMatrix=E.matrix,P.glValueLength=E.length,P.glFunc=E.func)}},setSampler2DBuffer:function(g,m,C,P,M,E){M===void 0&&(M=0),E===void 0&&(E={});var w=this.uniforms[g];return w.value=m,E.width=C,E.height=P,w.textureData=E,this._textureCount=M,this.initSampler2D(w),this},setSampler2D:function(g,m,C,P){C===void 0&&(C=0);var M=this.scene.sys.textures;if(M.exists(m)){var E=M.getFrame(m);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(g,E.glTexture,E.width,E.height,C,P);var w=this.uniforms[g],R=E.source;w.textureKey=m,w.source=R.image,w.value=E.glTexture,R.isGLTexture&&(P||(P={}),P.width=R.width,P.height=R.height),P&&(w.textureData=P),this._textureCount=C,this.initSampler2D(w)}return this},setUniform:function(g,m){return n(this.uniforms,g,m),this},getUniform:function(g){return o(this.uniforms,g,null)},setChannel0:function(g,m){return this.setSampler2D("iChannel0",g,0,m)},setChannel1:function(g,m){return this.setSampler2D("iChannel1",g,1,m)},setChannel2:function(g,m){return this.setSampler2D("iChannel2",g,2,m)},setChannel3:function(g,m){return this.setSampler2D("iChannel3",g,3,m)},initSampler2D:function(g){if(!!g.value){var m=g.textureData;if(m&&!g.value.isRenderTexture){var C=this.gl,P=g.value,M=C[o(m,"magFilter","linear").toUpperCase()],E=C[o(m,"minFilter","linear").toUpperCase()],w=C[o(m,"wrapS","repeat").toUpperCase()],R=C[o(m,"wrapT","repeat").toUpperCase()],A=C[o(m,"format","rgba").toUpperCase()],L=o(m,"flipY",!1),F=o(m,"width",P.width),O=o(m,"height",P.height),b=o(m,"source",P.pixels);m.repeat&&(w=C.REPEAT,R=C.REPEAT),m.width&&(b=null),P.update(b,F,O,L,w,R,E,M,A)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var g=this.gl,m=this.uniforms,C,P,M,E,w,R=0;for(var A in m)C=m[A],M=C.glFunc,P=C.glValueLength,E=C.uniformLocation,w=C.value,w!==null&&(P===1?C.glMatrix?M.call(g,E.webGLUniformLocation,C.transpose,w):M.call(g,E.webGLUniformLocation,w):P===2?M.call(g,E.webGLUniformLocation,w.x,w.y):P===3?M.call(g,E.webGLUniformLocation,w.x,w.y,w.z):P===4?M.call(g,E.webGLUniformLocation,w.x,w.y,w.z,w.w):C.type==="sampler2D"&&(g.activeTexture(g.TEXTURE0+R),g.bindTexture(g.TEXTURE_2D,w.webGLTexture),g.uniform1i(E.webGLUniformLocation,R),R++))},load:function(g){var m=this.gl,C=this.width,P=this.height,M=this.renderer,E=this.program,w=this.viewMatrix;if(!this.renderToTexture){var R=-this._displayOriginX,A=-this._displayOriginY;w[0]=g[0],w[1]=g[1],w[4]=g[2],w[5]=g[3],w[8]=g[4],w[9]=g[5],w[12]=w[0]*R+w[4]*A,w[13]=w[1]*R+w[5]*A}m.useProgram(E.webGLProgram),m.uniformMatrix4fv(m.getUniformLocation(E.webGLProgram,"uViewMatrix"),!1,w),m.uniformMatrix4fv(m.getUniformLocation(E.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),m.uniform2f(m.getUniformLocation(E.webGLProgram,"uResolution"),this.width,this.height);var L=this.uniforms,F=L.resolution;F.value.x=C,F.value.y=P,L.time.value=M.game.loop.getDuration();var O=this.pointer;if(O){var b=L.mouse,I=O.x/C,B=1-O.y/P;b.value.x=I.toFixed(2),b.value.y=B.toFixed(2)}this.syncUniforms()},flush:function(){var g=this.width,m=this.height,C=this.program,P=this.gl,M=this.vertexBuffer,E=this.renderer,w=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT)),P.bindBuffer(P.ARRAY_BUFFER,M.webGLBuffer);var R=P.getAttribLocation(C.webGLProgram,"inPosition");R!==-1&&(P.enableVertexAttribArray(R),P.vertexAttribPointer(R,2,P.FLOAT,!1,w,0));var A=this.vertexViewF32;A[3]=m,A[4]=g,A[5]=m,A[8]=g,A[9]=m,A[10]=g;var L=6;P.bufferSubData(P.ARRAY_BUFFER,0,this.bytes.subarray(0,L*w)),P.drawArrays(P.TRIANGLES,0,L),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var g=this._deferSetShader.key,m=this._deferSetShader.textures,C=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(g,m,C)}if(this._deferProjOrtho!==null){var P=this._deferProjOrtho.left,M=this._deferProjOrtho.right,E=this._deferProjOrtho.bottom,w=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(P,M,E,w)}},preDestroy:function(){var g=this.renderer;g.off(v.RESTORE_WEBGL,this.onContextRestored,this),g.deleteProgram(this.program),g.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(g.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),l(this.uniforms,function(m){g.deleteUniformLocation(m.uniformLocation),m.uniformLocation=null})}});r.exports=p},80464:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};r.exports=T},54935:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(20071);x.register("shader",function(a,n){a===void 0&&(a={});var u=f(a,"key",null),c=f(a,"x",0),l=f(a,"y",0),v=f(a,"width",128),p=f(a,"height",128),g=new o(this.scene,u,c,l,v,p);return n!==void 0&&(a.add=n),d(this.scene,g,a),g})},74177:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20071),x=i(39429);x.register("shader",function(f,o,a,n,u,c,l){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l))})},25479:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(19257),f=i(80464),r.exports={renderWebGL:x,renderCanvas:f}},19257:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=function(f,o,a,n){if(!!o.shader){if(a.addToRenderList(o),f.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var u=d(o,a,n).calc;(f.width!==o._rendererWidth||f.height!==o._rendererHeight)&&o.projOrtho(0,f.width,f.height,0),o.load(u.matrix),o.flush()}f.pipelines.rebind()}};r.exports=x},10441:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),x=function(f,o,a,n,u,c){for(var l=d.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*n),v=a.pathData,p=a.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,C=p[g+1]*2,P=p[g+2]*2,M=v[m+0]-u,E=v[m+1]-c,w=v[C+0]-u,R=v[C+1]-c,A=v[P+0]-u,L=v[P+1]-c,F=o.getX(M,E),O=o.getY(M,E),b=o.getX(w,R),I=o.getY(w,R),B=o.getX(A,L),N=o.getY(A,L);f.batchTri(a,F,O,b,I,B,N,0,0,1,1,l,l,l,2)}};r.exports=x},65960:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=x||d.fillColor,a=f||d.fillAlpha,n=(o&16711680)>>>16,u=(o&65280)>>>8,c=o&255;i.fillStyle="rgba("+n+","+u+","+c+","+a+")"};r.exports=T},75177:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=x||d.strokeColor,a=f||d.strokeAlpha,n=(o&16711680)>>>16,u=(o&65280)>>>8,c=o&255;i.strokeStyle="rgba("+n+","+u+","+c+","+a+")",i.lineWidth=d.lineWidth};r.exports=T},17803:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(95643),o=i(23031),a=new d({Extends:f,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(u,c,l){c===void 0&&(c="Shape"),f.call(this,u,c),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,u){return u===void 0&&(u=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=u,this.isFilled=!0),this},setStrokeStyle:function(n,u,c){return c===void 0&&(c=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=u,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,u){return this.width=n,this.height=u,this},setDisplaySize:function(n,u){return this.displayWidth=n,this.displayHeight=u,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});r.exports=a},34682:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),x=function(f,o,a,n,u){var c=f.strokeTint,l=d.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*a);c.TL=l,c.TR=l,c.BL=l,c.BR=l;var v=o.pathData,p=v.length-1,g=o.lineWidth,m=g/2,C=v[0]-n,P=v[1]-u;o.closePath||(p-=2);for(var M=2;M<p;M+=2){var E=v[M]-n,w=v[M+1]-u;f.batchLine(C,P,E,w,m,m,g,M-2,o.closePath?M===p-1:!1),C=E,P=w}};r.exports=x},23629:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13609),x=i(83419),f=i(39506),o=i(94811),a=i(96503),n=i(36383),u=i(17803),c=new x({Extends:u,Mixins:[d],initialize:function(v,p,g,m,C,P,M,E,w){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),C===void 0&&(C=0),P===void 0&&(P=360),M===void 0&&(M=!1),u.call(this,v,"Arc",new a(0,0,m)),this._startAngle=C,this._endAngle=P,this._anticlockwise=M,this._iterations=.01,this.setPosition(p,g);var R=this.geom.radius*2;this.setSize(R,R),E!==void 0&&this.setFillStyle(E,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var v=l*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,v){return this._startAngle=l,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(l,v){return this._endAngle=l,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var l=this._iterations,v=l,p=this.geom.radius,g=f(this._startAngle),m=f(this._endAngle),C=this._anticlockwise,P=p,M=p;m-=g,C?m<-n.PI2?m=-n.PI2:m>0&&(m=-n.PI2+m%n.PI2):m>n.PI2?m=n.PI2:m<0&&(m=n.PI2+m%n.PI2);for(var E=[P+Math.cos(g)*p,M+Math.sin(g)*p],w;v<1;)w=m*v+g,E.push(P+Math.cos(w)*p,M+Math.sin(w)*p),v+=l;return w=m+g,E.push(P+Math.cos(w)*p,M+Math.sin(w)*p),E.push(P+Math.cos(g)*p,M+Math.sin(g)*p),this.pathIndexes=o(E),this.pathData=E,this}});r.exports=c},42542:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39506),x=i(65960),f=i(75177),o=i(20926),a=function(n,u,c,l){c.addToRenderList(u);var v=n.currentContext;if(o(n,v,u,c,l)){var p=u.radius;v.beginPath(),v.arc(p-u.originX*(p*2),p-u.originY*(p*2),p,d(u._startAngle),d(u._endAngle),u.anticlockwise),u.closePath&&v.closePath(),u.isFilled&&(x(v,u),v.fill()),u.isStroked&&(f(v,u),v.stroke()),v.restore()}};r.exports=a},42563:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23629),x=i(39429);x.register("arc",function(f,o,a,n,u,c,l,v){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l,v))}),x.register("circle",function(f,o,a,n,u){return this.displayList.add(new d(this.scene,f,o,a,0,360,!1,n,u))})},13609:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(41447),f=i(42542),r.exports={renderWebGL:x,renderCanvas:f}},41447:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(10441),f=i(34682),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=d(n,u,c),p=l.calcMatrix.copyFrom(v.calc),g=n._displayOriginX,m=n._displayOriginY,C=u.alpha*n.alpha;a.pipelines.preBatch(n),n.isFilled&&x(l,p,n,C,g,m),n.isStroked&&f(l,n,C,g,m),a.pipelines.postBatch(n)};r.exports=o},89:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(33141),f=i(94811),o=i(87841),a=i(17803),n=new d({Extends:a,Mixins:[x],initialize:function(c,l,v,p,g,m){l===void 0&&(l=0),v===void 0&&(v=0),a.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(l,v),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){var u=this._curveBounds,c=this._smoothness;this.geom.getBounds(u,c),this.setSize(u.width,u.height),this.updateDisplayOrigin();for(var l=[],v=this.geom.getPoints(c),p=0;p<v.length;p++)l.push(v[p].x,v[p].y);return l.push(v[0].x,v[0].y),this.pathIndexes=f(l),this.pathData=l,this}});r.exports=n},3170:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX+n._curveBounds.x,p=n._displayOriginY+n._curveBounds.y,g=n.pathData,m=g.length-1,C=g[0]-v,P=g[1]-p;l.beginPath(),l.moveTo(C,P),n.closePath||(m-=2);for(var M=2;M<m;M+=2){var E=g[M]-v,w=g[M+1]-p;l.lineTo(E,w)}n.closePath&&l.closePath(),n.isFilled&&(d(l,n),l.fill()),n.isStroked&&(x(l,n),l.stroke()),l.restore()}};r.exports=o},40511:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(89);d.register("curve",function(f,o,a,n,u){return this.displayList.add(new x(this.scene,f,o,a,n,u))})},33141:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(53987),f=i(3170),r.exports={renderWebGL:x,renderCanvas:f}},53987:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),x=i(91296),f=i(34682),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=x(n,u,c),p=l.calcMatrix.copyFrom(v.calc),g=n._displayOriginX+n._curveBounds.x,m=n._displayOriginY+n._curveBounds.y,C=u.alpha*n.alpha;a.pipelines.preBatch(n),n.isFilled&&d(l,p,n,C,g,m),n.isStroked&&f(l,n,C,g,m),a.pipelines.postBatch(n)};r.exports=o},19921:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(94811),f=i(54205),o=i(8497),a=i(17803),n=new d({Extends:a,Mixins:[f],initialize:function(c,l,v,p,g,m,C){l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=128),a.call(this,c,"Ellipse",new o(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(l,v),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSize:function(u,c){return this.width=u,this.height=c,this.geom.setPosition(u/2,c/2),this.geom.setSize(u,c),this.updateData()},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){for(var u=[],c=this.geom.getPoints(this._smoothness),l=0;l<c.length;l++)u.push(c[l].x,c[l].y);return u.push(c[0].x,c[0].y),this.pathIndexes=x(u),this.pathData=u,this}});r.exports=n},7930:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX,p=n._displayOriginY,g=n.pathData,m=g.length-1,C=g[0]-v,P=g[1]-p;l.beginPath(),l.moveTo(C,P),n.closePath||(m-=2);for(var M=2;M<m;M+=2){var E=g[M]-v,w=g[M+1]-p;l.lineTo(E,w)}l.closePath(),n.isFilled&&(d(l,n),l.fill()),n.isStroked&&(x(l,n),l.stroke()),l.restore()}};r.exports=o},1543:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19921),x=i(39429);x.register("ellipse",function(f,o,a,n,u,c){return this.displayList.add(new d(this.scene,f,o,a,n,u,c))})},54205:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(19467),f=i(7930),r.exports={renderWebGL:x,renderCanvas:f}},19467:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),x=i(91296),f=i(34682),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=x(n,u,c),p=l.calcMatrix.copyFrom(v.calc),g=n._displayOriginX,m=n._displayOriginY,C=u.alpha*n.alpha;a.pipelines.preBatch(n),n.isFilled&&d(l,p,n,C,g,m),n.isStroked&&f(l,n,C,g,m),a.pipelines.postBatch(n)};r.exports=o},30479:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(17803),f=i(26015),o=new d({Extends:x,Mixins:[f],initialize:function(n,u,c,l,v,p,g,m,C,P,M){u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=128),v===void 0&&(v=128),p===void 0&&(p=32),g===void 0&&(g=32),x.call(this,n,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(u,c),this.setSize(l,v),this.setFillStyle(m,C),P!==void 0&&this.setOutlineStyle(P,M),this.updateDisplayOrigin()},setFillStyle:function(a,n){return n===void 0&&(n=1),a===void 0?this.showCells=!1:(this.fillColor=a,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(a,n){return n===void 0&&(n=1),a===void 0?this.showAltCells=!1:(this.altFillColor=a,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(a,n){return n===void 0&&(n=1),a===void 0?this.showOutline=!1:(this.outlineFillColor=a,this.outlineFillAlpha=n,this.showOutline=!0),this}});r.exports=o},49912:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=-n._displayOriginX,p=-n._displayOriginY,g=u.alpha*n.alpha,m=n.width,C=n.height,P=n.cellWidth,M=n.cellHeight,E=Math.ceil(m/P),w=Math.ceil(C/M),R=P,A=M,L=P-(E*P-m),F=M-(w*M-C),O=n.showCells,b=n.showAltCells,I=n.showOutline,B=0,N=0,k=0,Y=0,H=0;if(I&&(R--,A--,L===P&&L--,F===M&&F--),O&&n.fillAlpha>0)for(d(l,n),N=0;N<w;N++)for(b&&(k=N%2),B=0;B<E;B++){if(b&&k){k=0;continue}k++,Y=B<E-1?R:L,H=N<w-1?A:F,l.fillRect(v+B*P,p+N*M,Y,H)}if(b&&n.altFillAlpha>0)for(d(l,n,n.altFillColor,n.altFillAlpha*g),N=0;N<w;N++)for(b&&(k=N%2),B=0;B<E;B++){if(b&&!k){k=1;continue}k=0,Y=B<E-1?R:L,H=N<w-1?A:F,l.fillRect(v+B*P,p+N*M,Y,H)}if(I&&n.outlineFillAlpha>0){for(x(l,n,n.outlineFillColor,n.outlineFillAlpha*g),B=1;B<E;B++){var z=B*P;l.beginPath(),l.moveTo(z+v,p),l.lineTo(z+v,C+p),l.stroke()}for(N=1;N<w;N++){var X=N*M;l.beginPath(),l.moveTo(v,X+p),l.lineTo(v+m,X+p),l.stroke()}}l.restore()}};r.exports=o},34137:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(30479);d.register("grid",function(f,o,a,n,u,c,l,v,p,g){return this.displayList.add(new x(this.scene,f,o,a,n,u,c,l,v,p,g))})},26015:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(46161),f=i(49912),r.exports={renderWebGL:x,renderCanvas:f}},46161:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){n.addToRenderList(a);var c=o.pipelines.set(a.pipeline),l=d(a,n,u),v=c.calcMatrix.copyFrom(l.calc);v.translate(-a._displayOriginX,-a._displayOriginY);var p=n.alpha*a.alpha,g=a.width,m=a.height,C=a.cellWidth,P=a.cellHeight,M=Math.ceil(g/C),E=Math.ceil(m/P),w=C,R=P,A=C-(M*C-g),L=P-(E*P-m),F,O,b=a.showCells,I=a.showAltCells,B=a.showOutline,N=0,k=0,Y=0,H=0,z=0;if(B&&(w--,R--,A===C&&A--,L===P&&L--),o.pipelines.preBatch(a),b&&a.fillAlpha>0)for(F=c.fillTint,O=x.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*p),F.TL=O,F.TR=O,F.BL=O,F.BR=O,k=0;k<E;k++)for(I&&(Y=k%2),N=0;N<M;N++){if(I&&Y){Y=0;continue}Y++,H=N<M-1?w:A,z=k<E-1?R:L,c.batchFillRect(N*C,k*P,H,z)}if(I&&a.altFillAlpha>0)for(F=c.fillTint,O=x.getTintAppendFloatAlpha(a.altFillColor,a.altFillAlpha*p),F.TL=O,F.TR=O,F.BL=O,F.BR=O,k=0;k<E;k++)for(I&&(Y=k%2),N=0;N<M;N++){if(I&&!Y){Y=1;continue}Y=0,H=N<M-1?w:A,z=k<E-1?R:L,c.batchFillRect(N*C,k*P,H,z)}if(B&&a.outlineFillAlpha>0){var X=c.strokeTint,D=x.getTintAppendFloatAlpha(a.outlineFillColor,a.outlineFillAlpha*p);for(X.TL=D,X.TR=D,X.BL=D,X.BR=D,N=1;N<M;N++){var G=N*C;c.batchLine(G,0,G,m,1,1,1,0,!1)}for(k=1;k<E;k++){var V=k*P;c.batchLine(0,V,g,V,1,1,1,0,!1)}}o.pipelines.postBatch(a)};r.exports=f},61475:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99651),x=i(83419),f=i(17803),o=new x({Extends:f,Mixins:[d],initialize:function(n,u,c,l,v,p,g,m){u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=48),v===void 0&&(v=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),f.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(u,c),this.setSize(l,v),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setFaces:function(a,n,u){return a===void 0&&(a=!0),n===void 0&&(n=!0),u===void 0&&(u=!0),this.showTop=a,this.showLeft=n,this.showRight=u,this},setFillStyle:function(a,n,u){return this.fillTop=a,this.fillLeft=n,this.fillRight=u,this.isFilled=!0,this}});r.exports=o},11508:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(20926),f=function(o,a,n,u){n.addToRenderList(a);var c=o.currentContext;if(x(o,c,a,n,u)&&a.isFilled){var l=a.width,v=a.height,p=l/2,g=l/a.projection;a.showTop&&(d(c,a,a.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-v),c.fill()),a.showLeft&&(d(c,a,a.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(-p,-v),c.lineTo(-p,0),c.fill()),a.showRight&&(d(c,a,a.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(p,-v),c.lineTo(p,0),c.fill()),c.restore()}};r.exports=f},3933:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(61475);d.register("isobox",function(f,o,a,n,u,c,l){return this.displayList.add(new x(this.scene,f,o,a,n,u,c,l))})},99651:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(68149),f=i(11508),r.exports={renderWebGL:x,renderCanvas:f}},68149:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){n.addToRenderList(a);var c=o.pipelines.set(a.pipeline),l=d(a,n,u),v=c.calcMatrix.copyFrom(l.calc),p=a.width,g=a.height,m=p/2,C=p/a.projection,P=n.alpha*a.alpha;if(!!a.isFilled){var M,E,w,R,A,L,F,O,b;o.pipelines.preBatch(a),a.showTop&&(M=x.getTintAppendFloatAlpha(a.fillTop,P),E=v.getX(-m,-g),w=v.getY(-m,-g),R=v.getX(0,-C-g),A=v.getY(0,-C-g),L=v.getX(m,-g),F=v.getY(m,-g),O=v.getX(0,C-g),b=v.getY(0,C-g),c.batchQuad(a,E,w,R,A,L,F,O,b,0,0,1,1,M,M,M,M,2)),a.showLeft&&(M=x.getTintAppendFloatAlpha(a.fillLeft,P),E=v.getX(-m,0),w=v.getY(-m,0),R=v.getX(0,C),A=v.getY(0,C),L=v.getX(0,C-g),F=v.getY(0,C-g),O=v.getX(-m,-g),b=v.getY(-m,-g),c.batchQuad(a,E,w,R,A,L,F,O,b,0,0,1,1,M,M,M,M,2)),a.showRight&&(M=x.getTintAppendFloatAlpha(a.fillRight,P),E=v.getX(m,0),w=v.getY(m,0),R=v.getX(0,C),A=v.getY(0,C),L=v.getX(0,C-g),F=v.getY(0,C-g),O=v.getX(m,-g),b=v.getY(m,-g),c.batchQuad(a,E,w,R,A,L,F,O,b,0,0,1,1,M,M,M,M,2)),o.pipelines.postBatch(a)}};r.exports=f},16933:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(60561),f=i(17803),o=new d({Extends:f,Mixins:[x],initialize:function(n,u,c,l,v,p,g,m,C){u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=48),v===void 0&&(v=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),C===void 0&&(C=13421772),f.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(u,c),this.setSize(l,v),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setReversed:function(a){return this.isReversed=a,this},setFaces:function(a,n,u){return a===void 0&&(a=!0),n===void 0&&(n=!0),u===void 0&&(u=!0),this.showTop=a,this.showLeft=n,this.showRight=u,this},setFillStyle:function(a,n,u){return this.fillTop=a,this.fillLeft=n,this.fillRight=u,this.isFilled=!0,this}});r.exports=o},79590:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(20926),f=function(o,a,n,u){n.addToRenderList(a);var c=o.currentContext;if(x(o,c,a,n,u)&&a.isFilled){var l=a.width,v=a.height,p=l/2,g=l/a.projection,m=a.isReversed;a.showTop&&m&&(d(c,a,a.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(0,g-v),c.fill()),a.showLeft&&(d(c,a,a.fillLeft),c.beginPath(),m?(c.moveTo(-p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),a.showRight&&(d(c,a,a.fillRight),c.beginPath(),m?(c.moveTo(p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),c.restore()}};r.exports=f},49803:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(16933);d.register("isotriangle",function(f,o,a,n,u,c,l,v){return this.displayList.add(new x(this.scene,f,o,a,n,u,c,l,v))})},60561:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(51503),f=i(79590),r.exports={renderWebGL:x,renderCanvas:f}},51503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){n.addToRenderList(a);var c=o.pipelines.set(a.pipeline),l=d(a,n,u),v=c.calcMatrix.copyFrom(l.calc),p=a.width,g=a.height,m=p/2,C=p/a.projection,P=a.isReversed,M=n.alpha*a.alpha;if(!!a.isFilled){o.pipelines.preBatch(a);var E,w,R,A,L,F,O;if(a.showTop&&P){E=x.getTintAppendFloatAlpha(a.fillTop,M),w=v.getX(-m,-g),R=v.getY(-m,-g),A=v.getX(0,-C-g),L=v.getY(0,-C-g),F=v.getX(m,-g),O=v.getY(m,-g);var b=v.getX(0,C-g),I=v.getY(0,C-g);c.batchQuad(a,w,R,A,L,F,O,b,I,0,0,1,1,E,E,E,E,2)}a.showLeft&&(E=x.getTintAppendFloatAlpha(a.fillLeft,M),P?(w=v.getX(-m,-g),R=v.getY(-m,-g),A=v.getX(0,C),L=v.getY(0,C),F=v.getX(0,C-g),O=v.getY(0,C-g)):(w=v.getX(-m,0),R=v.getY(-m,0),A=v.getX(0,C),L=v.getY(0,C),F=v.getX(0,C-g),O=v.getY(0,C-g)),c.batchTri(a,w,R,A,L,F,O,0,0,1,1,E,E,E,2)),a.showRight&&(E=x.getTintAppendFloatAlpha(a.fillRight,M),P?(w=v.getX(m,-g),R=v.getY(m,-g),A=v.getX(0,C),L=v.getY(0,C),F=v.getX(0,C-g),O=v.getY(0,C-g)):(w=v.getX(m,0),R=v.getY(m,0),A=v.getX(0,C),L=v.getY(0,C),F=v.getX(0,C-g),O=v.getY(0,C-g)),c.batchTri(a,w,R,A,L,F,O,0,0,1,1,E,E,E,2)),o.pipelines.postBatch(a)}};r.exports=f},57847:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(17803),f=i(23031),o=i(36823),a=new d({Extends:x,Mixins:[o],initialize:function(u,c,l,v,p,g,m,C,P){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),x.call(this,u,"Line",new f(v,p,g,m));var M=Math.max(1,this.geom.right-this.geom.left),E=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,l),this.setSize(M,E),C!==void 0&&this.setStrokeStyle(1,C,P),this.updateDisplayOrigin()},setLineWidth:function(n,u){return u===void 0&&(u=n),this._startWidth=n,this._endWidth=u,this.lineWidth=n,this},setTo:function(n,u,c,l){return this.geom.setTo(n,u,c,l),this}});r.exports=a},17440:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(75177),x=i(20926),f=function(o,a,n,u){n.addToRenderList(a);var c=o.currentContext;if(x(o,c,a,n,u)){var l=a._displayOriginX,v=a._displayOriginY;a.isStroked&&(d(c,a),c.beginPath(),c.moveTo(a.geom.x1-l,a.geom.y1-v),c.lineTo(a.geom.x2-l,a.geom.y2-v),c.stroke()),c.restore()}};r.exports=f},2481:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(57847);d.register("line",function(f,o,a,n,u,c,l,v){return this.displayList.add(new x(this.scene,f,o,a,n,u,c,l,v))})},36823:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(77385),f=i(17440),r.exports={renderWebGL:x,renderCanvas:f}},77385:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(70554),f=function(o,a,n,u){n.addToRenderList(a);var c=o.pipelines.set(a.pipeline),l=d(a,n,u);c.calcMatrix.copyFrom(l.calc);var v=a._displayOriginX,p=a._displayOriginY,g=n.alpha*a.alpha;if(o.pipelines.preBatch(a),a.isStroked){var m=c.strokeTint,C=x.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*g);m.TL=C,m.TR=C,m.BL=C,m.BR=C,c.batchLine(a.geom.x1-v,a.geom.y1-p,a.geom.x2-v,a.geom.y2-p,a._startWidth/2,a._endWidth/2,1,0,!1,l.sprite,l.camera)}o.pipelines.postBatch(a)};r.exports=f},24949:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90273),x=i(83419),f=i(94811),o=i(13829),a=i(25717),n=i(17803),u=i(5469),c=new x({Extends:n,Mixins:[d],initialize:function(v,p,g,m,C,P){p===void 0&&(p=0),g===void 0&&(g=0),n.call(this,v,"Polygon",new a(m));var M=o(this.geom);this.setPosition(p,g),this.setSize(M.width,M.height),C!==void 0&&this.setFillStyle(C,P),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var v=0;v<l;v++)u(this.geom);return this.updateData()},setTo:function(l){this.geom.setTo(l);var v=o(this.geom);return this.setSize(v.width,v.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var l=[],v=this.geom.points,p=0;p<v.length;p++)l.push(v[p].x,v[p].y);return l.push(v[0].x,v[0].y),this.pathIndexes=f(l),this.pathData=l,this}});r.exports=c},38710:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX,p=n._displayOriginY,g=n.pathData,m=g.length-1,C=g[0]-v,P=g[1]-p;l.beginPath(),l.moveTo(C,P),n.closePath||(m-=2);for(var M=2;M<m;M+=2){var E=g[M]-v,w=g[M+1]-p;l.lineTo(E,w)}n.closePath&&l.closePath(),n.isFilled&&(d(l,n),l.fill()),n.isStroked&&(x(l,n),l.stroke()),l.restore()}};r.exports=o},64827:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(24949);d.register("polygon",function(f,o,a,n,u){return this.displayList.add(new x(this.scene,f,o,a,n,u))})},90273:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(73695),f=i(38710),r.exports={renderWebGL:x,renderCanvas:f}},73695:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),x=i(91296),f=i(34682),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=x(n,u,c),p=l.calcMatrix.copyFrom(v.calc),g=n._displayOriginX,m=n._displayOriginY,C=u.alpha*n.alpha;a.pipelines.preBatch(n),n.isFilled&&d(l,p,n,C,g,m),n.isStroked&&f(l,n,C,g,m),a.pipelines.postBatch(n)};r.exports=o},74561:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(87841),f=i(17803),o=i(95597),a=new d({Extends:f,Mixins:[o],initialize:function(u,c,l,v,p,g,m){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=128),p===void 0&&(p=128),f.call(this,u,"Rectangle",new x(0,0,v,p)),this.setPosition(c,l),this.setSize(v,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,u){this.width=n,this.height=u,this.geom.setSize(n,u),this.updateData(),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=n,c.hitArea.height=u),this},updateData:function(){var n=[],u=this.geom,c=this._tempLine;return u.getLineA(c),n.push(c.x1,c.y1,c.x2,c.y2),u.getLineB(c),n.push(c.x2,c.y2),u.getLineC(c),n.push(c.x2,c.y2),u.getLineD(c),n.push(c.x2,c.y2),this.pathData=n,this}});r.exports=a},48682:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX,p=n._displayOriginY;n.isFilled&&(d(l,n),l.fillRect(-v,-p,n.width,n.height)),n.isStroked&&(x(l,n),l.beginPath(),l.rect(-v,-p,n.width,n.height),l.stroke()),l.restore()}};r.exports=o},87959:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(74561);d.register("rectangle",function(f,o,a,n,u,c){return this.displayList.add(new x(this.scene,f,o,a,n,u,c))})},95597:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(52059),f=i(48682),r.exports={renderWebGL:x,renderCanvas:f}},52059:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(34682),f=i(70554),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=d(n,u,c);l.calcMatrix.copyFrom(v.calc);var p=n._displayOriginX,g=n._displayOriginY,m=u.alpha*n.alpha;if(a.pipelines.preBatch(n),n.isFilled){var C=l.fillTint,P=f.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);C.TL=P,C.TR=P,C.BL=P,C.BR=P,l.batchFillRect(-p,-g,n.width,n.height)}n.isStroked&&x(l,n,m,p,g),a.pipelines.postBatch(n)};r.exports=o},55911:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81991),x=i(83419),f=i(94811),o=i(17803),a=new x({Extends:o,Mixins:[d],initialize:function(u,c,l,v,p,g,m,C){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=5),p===void 0&&(p=32),g===void 0&&(g=64),o.call(this,u,"Star",null),this._points=v,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,l),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],u=this._points,c=this._innerRadius,l=this._outerRadius,v=Math.PI/2*3,p=Math.PI/u,g=l,m=l;n.push(g,m+-l);for(var C=0;C<u;C++)n.push(g+Math.cos(v)*l,m+Math.sin(v)*l),v+=p,n.push(g+Math.cos(v)*c,m+Math.sin(v)*c),v+=p;return n.push(g,m+-l),this.pathIndexes=f(n),this.pathData=n,this}});r.exports=a},64272:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX,p=n._displayOriginY,g=n.pathData,m=g.length-1,C=g[0]-v,P=g[1]-p;l.beginPath(),l.moveTo(C,P),n.closePath||(m-=2);for(var M=2;M<m;M+=2){var E=g[M]-v,w=g[M+1]-p;l.lineTo(E,w)}l.closePath(),n.isFilled&&(d(l,n),l.fill()),n.isStroked&&(x(l,n),l.stroke()),l.restore()}};r.exports=o},93697:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55911),x=i(39429);x.register("star",function(f,o,a,n,u,c,l){return this.displayList.add(new d(this.scene,f,o,a,n,u,c,l))})},81991:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(57017),f=i(64272),r.exports={renderWebGL:x,renderCanvas:f}},57017:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),x=i(91296),f=i(34682),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=x(n,u,c),p=l.calcMatrix.copyFrom(v.calc),g=n._displayOriginX,m=n._displayOriginY,C=u.alpha*n.alpha;a.pipelines.preBatch(n),n.isFilled&&d(l,p,n,C,g,m),n.isStroked&&f(l,n,C,g,m),a.pipelines.postBatch(n)};r.exports=o},36931:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(17803),f=i(16483),o=i(96195),a=new d({Extends:x,Mixins:[o],initialize:function(u,c,l,v,p,g,m,C,P,M,E){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),C===void 0&&(C=128),P===void 0&&(P=128),x.call(this,u,"Triangle",new f(v,p,g,m,C,P));var w=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(c,l),this.setSize(w,R),M!==void 0&&this.setFillStyle(M,E),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,u,c,l,v,p){return this.geom.setTo(n,u,c,l,v,p),this.updateData()},updateData:function(){var n=[],u=this.geom,c=this._tempLine;return u.getLineA(c),n.push(c.x1,c.y1,c.x2,c.y2),u.getLineB(c),n.push(c.x2,c.y2),u.getLineC(c),n.push(c.x2,c.y2),this.pathData=n,this}});r.exports=a},85172:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),x=i(75177),f=i(20926),o=function(a,n,u,c){u.addToRenderList(n);var l=a.currentContext;if(f(a,l,n,u,c)){var v=n._displayOriginX,p=n._displayOriginY,g=n.geom.x1-v,m=n.geom.y1-p,C=n.geom.x2-v,P=n.geom.y2-p,M=n.geom.x3-v,E=n.geom.y3-p;l.beginPath(),l.moveTo(g,m),l.lineTo(C,P),l.lineTo(M,E),l.closePath(),n.isFilled&&(d(l,n),l.fill()),n.isStroked&&(x(l,n),l.stroke()),l.restore()}};r.exports=o},45245:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(36931);d.register("triangle",function(f,o,a,n,u,c,l,v,p,g){return this.displayList.add(new x(this.scene,f,o,a,n,u,c,l,v,p,g))})},96195:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(83253),f=i(85172),r.exports={renderWebGL:x,renderCanvas:f}},83253:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=i(34682),f=i(70554),o=function(a,n,u,c){u.addToRenderList(n);var l=a.pipelines.set(n.pipeline),v=d(n,u,c);l.calcMatrix.copyFrom(v.calc);var p=n._displayOriginX,g=n._displayOriginY,m=u.alpha*n.alpha;if(a.pipelines.preBatch(n),n.isFilled){var C=l.fillTint,P=f.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);C.TL=P,C.TR=P,C.BL=P,C.BR=P;var M=n.geom.x1-p,E=n.geom.y1-g,w=n.geom.x2-p,R=n.geom.y2-g,A=n.geom.x3-p,L=n.geom.y3-g;l.batchFillTriangle(M,E,w,R,A,L,v.sprite,v.camera)}n.isStroked&&x(l,n,m,p,g),a.pipelines.postBatch(n)};r.exports=o},68287:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),x=i(83419),f=i(31401),o=i(95643),a=i(92751),n=new x({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,a],initialize:function(c,l,v,p,g){o.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(p,g),this.setPosition(l,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,c){this.anims.update(u,c)},play:function(u,c){return this.anims.play(u,c)},playReverse:function(u,c){return this.anims.playReverse(u,c)},playAfterDelay:function(u,c){return this.anims.playAfterDelay(u,c)},playAfterRepeat:function(u,c){return this.anims.playAfterRepeat(u,c)},chain:function(u){return this.anims.chain(u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},toJSON:function(){return f.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});r.exports=n},76552:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d),i.batchSprite(d,d.frame,x,f)};r.exports=T},15567:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(13059),f=i(44603),o=i(23568),a=i(68287);f.register("sprite",function(n,u){n===void 0&&(n={});var c=o(n,"key",null),l=o(n,"frame",null),v=new a(this.scene,0,0,c,l);return u!==void 0&&(n.add=u),d(this.scene,v,n),x(v,n),v})},46409:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(68287);d.register("sprite",function(f,o,a,n){return this.displayList.add(new x(this.scene,f,o,a,n))})},92751:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(9409),f=i(76552),r.exports={renderWebGL:x,renderCanvas:f}},9409:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x.addToRenderList(d),d.pipeline.batchSprite(d,x,f)};r.exports=T},14220:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=i.canvas,o=i.context,a=i.style,n=[],u=0,c=x.length;a.maxLines>0&&a.maxLines<x.length&&(c=a.maxLines),a.syncFont(f,o);for(var l=0;l<c;l++){var v=a.strokeThickness;v+=o.measureText(x[l]).width,x[l].length>1&&(v+=i.letterSpacing*(x[l].length-1)),a.wordWrap&&(v-=o.measureText(" ").width),n[l]=Math.ceil(v),u=Math.max(u,n[l])}var p=d.fontSize+a.strokeThickness,g=p*c,m=i.lineSpacing;return c>1&&(g+=m*(c-1)),{width:u,height:g,lines:c,lineWidths:n,lineSpacing:m,lineHeight:p}};r.exports=T},79557:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=function(f){var o=d.create(this),a=o.getContext("2d",{willReadFrequently:!0});f.syncFont(o,a);var n=a.measureText(f.testString);if("actualBoundingBoxAscent"in n){var u=n.actualBoundingBoxAscent,c=n.actualBoundingBoxDescent;return d.remove(o),{ascent:u,descent:c,fontSize:u+c}}var l=Math.ceil(n.width*f.baselineX),v=l,p=2*v;v=v*f.baselineY|0,o.width=l,o.height=p,a.fillStyle="#f00",a.fillRect(0,0,l,p),a.font=f._font,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(f.testString,0,v);var g={ascent:0,descent:0,fontSize:0},m=a.getImageData(0,0,l,p);if(!m)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,d.remove(o),g;var C=m.data,P=C.length,M=l*4,E,w,R=0,A=!1;for(E=0;E<v;E++){for(w=0;w<M;w+=4)if(C[R+w]!==255){A=!0;break}if(!A)R+=M;else break}for(g.ascent=v-E,R=P-M,A=!1,E=p;E>v;E--){for(w=0;w<M;w+=4)if(C[R+w]!==255){A=!0;break}if(!A)R-=M;else break}return g.descent=E-v,g.fontSize=g.ascent+g.descent,d.remove(o),g};r.exports=x},50171:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),x=i(27919),f=i(83419),o=i(31401),a=i(95643),n=i(14220),u=i(35154),c=i(35846),l=i(61771),v=i(35762),p=i(45650),g=new f({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,l],initialize:function(C,P,M,E,w){P===void 0&&(P=0),M===void 0&&(M=0),a.call(this,C,"Text"),this.renderer=C.sys.renderer,this.setPosition(P,M),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context,this.style=new v(this,w),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=p(),this.texture=C.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(E),w&&w.padding&&this.setPadding(w.padding),w&&w.lineSpacing&&this.setLineSpacing(w.lineSpacing)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var C=this.style;if(C.wordWrapCallback){var P=C.wordWrapCallback.call(C.wordWrapCallbackScope,m,this);return Array.isArray(P)&&(P=P.join(`
`)),P}else return C.wordWrapWidth?C.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,C,P){for(var M="",E=m.replace(/ +/gi," ").split(this.splitRegExp),w=E.length,R=0;R<w;R++){var A=E[R],L="";A=A.replace(/^ *|\s*$/gi,"");var F=C.measureText(A).width;if(F<P){M+=A+`
`;continue}for(var O=P,b=A.split(" "),I=0;I<b.length;I++){var B=b[I],N=B+" ",k=C.measureText(N).width;if(k>O){if(I===0){for(var Y=N;Y.length&&(Y=Y.slice(0,-1),k=C.measureText(Y).width,!(k<=O)););if(!Y.length)throw new Error("wordWrapWidth < a single character");var H=B.substr(Y.length);b[I]=H,L+=Y}var z=b[I].length?I:I+1,X=b.slice(z).join(" ").replace(/[ \n]*$/gi,"");E.splice(R+1,0,X),w=E.length;break}else L+=N,O-=k}M+=L.replace(/[ \n]*$/gi,"")+`
`}return M=M.replace(/[\s|\n]*$/gi,""),M},basicWordWrap:function(m,C,P){for(var M="",E=m.split(this.splitRegExp),w=E.length-1,R=C.measureText(" ").width,A=0;A<=w;A++){for(var L=P,F=E[A].split(" "),O=F.length-1,b=0;b<=O;b++){var I=F[b],B=C.measureText(I).width,N=B;b<O&&(N+=R),N>L&&b>0&&(M+=`
`,L=P),M+=I,b<O?(M+=" ",L-=N):L-=B}A<w&&(M+=`
`)}return M},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var C=this.runWordWrap(m);return C.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},appendText:function(m,C){C===void 0&&(C=!0),!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m=m.toString();var P=this._text.concat(C?`
`+m:m);return P!==this._text&&(this._text=P,this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,C){return this.style.setFixedSize(m,C)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,C){return this.style.setStroke(m,C)},setShadow:function(m,C,P,M,E,w){return this.style.setShadow(m,C,P,M,E,w)},setShadowOffset:function(m,C){return this.style.setShadowOffset(m,C)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,C){return this.style.setWordWrapWidth(m,C)},setWordWrapCallback:function(m,C){return this.style.setWordWrapCallback(m,C)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setLetterSpacing:function(m){return this.letterSpacing=m,this.updateText()},setPadding:function(m,C,P,M){if(typeof m=="object"){var E=m,w=u(E,"x",null);w!==null?(m=w,P=w):(m=u(E,"left",0),P=u(E,"right",m));var R=u(E,"y",null);R!==null?(C=R,M=R):(C=u(E,"top",0),M=u(E,"bottom",C))}else m===void 0&&(m=0),C===void 0&&(C=m),P===void 0&&(P=m),M===void 0&&(M=C);return this.padding.left=m,this.padding.top=C,this.padding.right=P,this.padding.bottom=M,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},setRTL:function(m){m===void 0&&(m=!0);var C=this.style;return C.rtl===m?this:(C.rtl=m,m?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),C.align==="left"?C.align="right":C.align==="right"&&(C.align="left"),this)},updateText:function(){var m=this.canvas,C=this.context,P=this.style,M=P.resolution,E=P.metrics;P.syncFont(m,C);var w=this._text;(P.wordWrapWidth||P.wordWrapCallback)&&(w=this.runWordWrap(this._text));var R=w.split(this.splitRegExp),A=n(this,E,R),L=this.padding,F;P.fixedWidth===0?(this.width=A.width+L.left+L.right,F=A.width):(this.width=P.fixedWidth,F=this.width-L.left-L.right,F<A.width&&(F=A.width)),P.fixedHeight===0?this.height=A.height+L.top+L.bottom:this.height=P.fixedHeight;var O=this.width,b=this.height;this.updateDisplayOrigin(),O*=M,b*=M,O=Math.max(O,1),b=Math.max(b,1),m.width!==O||m.height!==b?(m.width=O,m.height=b,this.frame.setSize(O,b),P.syncFont(m,C),P.rtl&&(C.direction="rtl")):C.clearRect(0,0,O,b),C.save(),C.scale(M,M),P.backgroundColor&&(C.fillStyle=P.backgroundColor,C.fillRect(0,0,O,b)),P.syncStyle(m,C),C.translate(L.left,L.top);for(var I,B,N=0;N<A.lines;N++){if(I=P.strokeThickness/2,B=P.strokeThickness/2+N*A.lineHeight+E.ascent,N>0&&(B+=A.lineSpacing*N),P.rtl)I=O-I-L.left-L.right;else if(P.align==="right")I+=F-A.lineWidths[N];else if(P.align==="center")I+=(F-A.lineWidths[N])/2;else if(P.align==="justify"){var k=.85;if(A.lineWidths[N]/A.width>=k){var Y=A.width-A.lineWidths[N],H=C.measureText(" ").width,z=R[N].trim(),X=z.split(" ");Y+=(R[N].length-z.length)*H;for(var D=Math.floor(Y/H),G=0;D>0;)X[G]+=" ",G=(G+1)%(X.length-1||1),--D;R[N]=X.join(" ")}}if(this.autoRound&&(I=Math.round(I),B=Math.round(B)),P.strokeThickness&&(P.syncShadow(C,P.shadowStroke),C.strokeText(R[N],I,B)),P.color){P.syncShadow(C,P.shadowFill);var V=this.letterSpacing;if(V!==0)for(var W=0,U=R[N].split(""),$=0;$<U.length;$++)C.fillText(U[$],I+W,B),W+=C.measureText(U[$]).width+V;else C.fillText(R[N],I,B)}}C.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0));var K=this.input;return K&&!K.customHitArea&&(K.hitArea.width=this.width,K.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=o.ToJSON(this),C={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=C,m},preDestroy:function(){c(this.canvas),x.remove(this.canvas);var m=this.texture;m&&m.destroy()}});r.exports=g},79724:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d.width===0||d.height===0||(x.addToRenderList(d),i.batchSprite(d,d.frame,x,f))};r.exports=T},71259:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(50171);x.register("text",function(a,n){a===void 0&&(a={});var u=f(a,"text",""),c=f(a,"style",null),l=f(a,"padding",null);l!==null&&(c.padding=l);var v=new o(this.scene,0,0,u,c);return n!==void 0&&(a.add=n),d(this.scene,v,a),v.autoRound=f(a,"autoRound",!0),v.resolution=f(a,"resolution",1),v})},68005:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(50171),x=i(39429);x.register("text",function(f,o,a,n){return this.displayList.add(new d(this.scene,f,o,a,n))})},61771:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(34397),f=i(79724),r.exports={renderWebGL:x,renderCanvas:f}},35762:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23568),f=i(35154),o=i(79557),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new d({initialize:function(c,l){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0)},setStyle:function(u,c,l){c===void 0&&(c=!0),l===void 0&&(l=!1),u&&u.hasOwnProperty("fontSize")&&typeof u.fontSize=="number"&&(u.fontSize=u.fontSize.toString()+"px");for(var v in a){var p=l?a[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=f(u,a[v][0],p):this[v]=x(u,a[v][0],p)}var g=f(u,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=f(u,"fill",null);m!==null&&(this.color=m);var C=f(u,"metrics",!1);return C?this.metrics={ascent:f(C,"ascent",0),descent:f(C,"descent",0),fontSize:f(C,"fontSize",0)}:(c||!this.metrics)&&(this.metrics=o(this)),c?this.parent.updateText():this.parent},syncFont:function(u,c){c.font=this._font},syncStyle:function(u,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(u,c){c?(u.shadowOffsetX=this.shadowOffsetX,u.shadowOffsetY=this.shadowOffsetY,u.shadowColor=this.shadowColor,u.shadowBlur=this.shadowBlur):(u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowColor=0,u.shadowBlur=0)},update:function(u){return u&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(u,c){c===void 0&&(c=!0);var l=u,v="",p="";if(typeof u!="string")l=f(u,"fontFamily","Courier"),v=f(u,"fontSize","16px"),p=f(u,"fontStyle","");else{var g=u.split(" "),m=0;p=g.length>2?g[m++]:"",v=g[m++]||"16px",l=g[m++]||"Courier"}return(l!==this.fontFamily||v!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=v,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(u){return this.fontFamily!==u&&(this.fontFamily=u,this.update(!0)),this.parent},setFontStyle:function(u){return this.fontStyle!==u&&(this.fontStyle=u,this.update(!0)),this.parent},setFontSize:function(u){return typeof u=="number"&&(u=u.toString()+"px"),this.fontSize!==u&&(this.fontSize=u,this.update(!0)),this.parent},setTestString:function(u){return this.testString=u,this.update(!0)},setFixedSize:function(u,c){return this.fixedWidth=u,this.fixedHeight=c,u&&(this.parent.width=u),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(u){return this.backgroundColor=u,this.update(!1)},setFill:function(u){return this.color=u,this.update(!1)},setColor:function(u){return this.color=u,this.update(!1)},setResolution:function(u){return this.resolution=u,this.update(!1)},setStroke:function(u,c){return c===void 0&&(c=this.strokeThickness),u===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==u||this.strokeThickness!==c)&&(this.stroke=u,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(u,c,l,v,p,g){return u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l="#000"),v===void 0&&(v=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=u,this.shadowOffsetY=c,this.shadowColor=l,this.shadowBlur=v,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(u,c){return u===void 0&&(u=0),c===void 0&&(c=u),this.shadowOffsetX=u,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(u){return u===void 0&&(u="#000"),this.shadowColor=u,this.update(!1)},setShadowBlur:function(u){return u===void 0&&(u=0),this.shadowBlur=u,this.update(!1)},setShadowStroke:function(u){return this.shadowStroke=u,this.update(!1)},setShadowFill:function(u){return this.shadowFill=u,this.update(!1)},setWordWrapWidth:function(u,c){return c===void 0&&(c=!1),this.wordWrapWidth=u,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(u,c){return c===void 0&&(c=null),this.wordWrapCallback=u,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(u){return u===void 0&&(u="left"),this.align=u,this.update(!1)},setMaxLines:function(u){return u===void 0&&(u=0),this.maxLines=u,this.update(!1)},getTextMetrics:function(){var u=this.metrics;return{ascent:u.ascent,descent:u.descent,fontSize:u.fontSize}},toJSON:function(){var u={};for(var c in a)u[c]=this[c];return u.metrics=this.getTextMetrics(),u},destroy:function(){this.parent=void 0}});r.exports=n},34397:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),x=function(f,o,a,n){if(!(o.width===0||o.height===0)){a.addToRenderList(o);var u=o.frame,c=u.width,l=u.height,v=d.getTintAppendFloatAlpha,p=f.pipelines.set(o.pipeline,o),g=p.setTexture2D(u.glTexture,o);p.batchTexture(o,u.glTexture,c,l,o.x,o.y,c/o.style.resolution,l/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,c,l,v(o.tintTopLeft,a.alpha*o._alphaTL),v(o.tintTopRight,a.alpha*o._alphaTR),v(o.tintBottomLeft,a.alpha*o._alphaBL),v(o.tintBottomRight,a.alpha*o._alphaBR),o.tintFill,0,0,a,n,!1,g)}};r.exports=x},20839:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=i(83419),f=i(31401),o=i(95643),a=i(98439),n=i(68703),u=i(56295),c=i(45650),l=i(26099),v=8,p=new x({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Crop,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Tint,f.Transform,f.Visible,u],initialize:function(m,C,P,M,E,w,R){var A=m.sys.renderer;o.call(this,m,"TileSprite");var L=m.sys.textures.get(w),F=L.get(R);F.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),L=m.sys.textures.get("__MISSING"),F=L.get()),L.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),L=m.sys.textures.get("__MISSING"),F=L.get()),!M||!E?(M=F.width,E=F.height):(M=Math.floor(M),E=Math.floor(E)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=A,this.canvas=d.create(this,M,E),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=L,this.displayFrame=F,this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=a(F.width),this.potHeight=a(F.height),this.fillCanvas=d.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(C,P),this.setSize(M,E),this.setFrame(R),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=a(m.width),this.potHeight=a(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,C=this.fillCanvas,P=this.potWidth,M=this.potHeight;(!this.renderer||!this.renderer.gl)&&(P=g.cutWidth,M=g.cutHeight),m.clearRect(0,0,P,M),C.width=P,C.height=M,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,P,M),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(C,this.fillPattern):this.fillPattern=m.createPattern(C,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||n.disable(m);var C=this._tileScale.x,P=this._tileScale.y,M=this._tilePosition.x,E=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(C,P),m.translate(-M,-E),m.fillStyle=this.fillPattern,m.fillRect(M,E,this.width/C,this.height/P),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),d.remove(this.canvas),d.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var g=this.texture;g&&g.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});r.exports=p},46992:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d.updateCanvas(),x.addToRenderList(d),i.batchSprite(d,d.frame,x,f)};r.exports=T},14167:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(20839);x.register("tileSprite",function(a,n){a===void 0&&(a={});var u=f(a,"x",0),c=f(a,"y",0),l=f(a,"width",512),v=f(a,"height",512),p=f(a,"key",""),g=f(a,"frame",""),m=new o(this.scene,u,c,l,v,p,g);return n!==void 0&&(a.add=n),d(this.scene,m,a),m})},91681:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20839),x=i(39429);x.register("tileSprite",function(f,o,a,n,u,c){return this.displayList.add(new d(this.scene,f,o,a,n,u,c))})},56295:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(18553),f=i(46992),r.exports={renderWebGL:x,renderCanvas:f}},18553:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),x=function(f,o,a,n){o.updateCanvas();var u=o.width,c=o.height;if(!(u===0||c===0)){a.addToRenderList(o);var l=d.getTintAppendFloatAlpha,v=f.pipelines.set(o.pipeline,o),p=v.setTexture2D(o.fillPattern,o);v.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,u,c,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*u,o.originY*c,0,0,u,c,l(o.tintTopLeft,a.alpha*o._alphaTL),l(o.tintTopRight,a.alpha*o._alphaTR),l(o.tintBottomLeft,a.alpha*o._alphaBL),l(o.tintBottomRight,a.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,a,n,!1,p)}};r.exports=x},18471:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(31401),o=i(51708),a=i(8443),n=i(95643),u=i(36383),c=i(14463),l=i(45650),v=i(10247),p=new x({Extends:n,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.TextureCrop,f.Tint,f.Transform,f.Visible,v],initialize:function(m,C,P,M){n.call(this,m,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=l(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var E=m.sys.game;this._device=E.device.video,this.setPosition(C,P),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),E.events.on(a.PAUSE,this.globalPause,this),E.events.on(a.RESUME,this.globalResume,this);var w=m.sys.sound;w&&w.on(c.GLOBAL_MUTE,this.globalMute,this),M&&this.load(M)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(g){var m=this.scene.sys.cache.video.get(g);return m?(this.cacheKey=g,this.loadHandler(m.url,m.noAudio,m.crossOrigin)):console.warn("No video in cache for key: "+g),this},changeSource:function(g,m,C,P,M){m===void 0&&(m=!0),C===void 0&&(C=!1),this.cacheKey!==g&&(this.load(g),m&&this.play(C,P,M))},getVideoKey:function(){return this.cacheKey},loadURL:function(g,m,C){m===void 0&&(m=!1);var P=this._device.getVideoURL(g);return P?(this.cacheKey="",this.loadHandler(P.url,m,C)):console.warn("No supported video format found for "+g),this},loadMediaStream:function(g,m,C){return this.loadHandler(null,m,C,g)},loadHandler:function(g,m,C,P){m||(m=!1);var M=this.video;if(M?(this.removeLoadEventHandlers(),this.stop()):(M=document.createElement("video"),M.controls=!1,M.setAttribute("playsinline","playsinline"),M.setAttribute("preload","auto"),M.setAttribute("disablePictureInPicture","true")),m?(M.muted=!0,M.defaultMuted=!0,M.setAttribute("autoplay","autoplay")):(M.muted=!1,M.defaultMuted=!1,M.removeAttribute("autoplay")),C?M.setAttribute("crossorigin",C):M.removeAttribute("crossorigin"),P)if("srcObject"in M)try{M.srcObject=P}catch(w){if(w.name!=="TypeError")throw w;M.src=URL.createObjectURL(P)}else M.src=URL.createObjectURL(P);else M.src=g;this.retry=0,this.video=M,this._playCalled=!1,M.load(),this.addLoadEventHandlers();var E=this.scene.sys.textures.get(this._key);return this.setTexture(E),this},requestVideoFrame:function(g,m){var C=this.video;if(!!C){var P=m.width,M=m.height,E=this.videoTexture,w=this.videoTextureSource,R=!E||w.source!==C;R?(this._codePaused=C.paused,this._codeMuted=C.muted,E?(w.source=C,w.width=P,w.height=M,E.get().setSize(P,M)):(E=this.scene.sys.textures.create(this._key,C,P,M),E.add("__BASE",0,0,0,P,M),this.setTexture(E),this.videoTexture=E,this.videoTextureSource=E.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(o.VIDEO_TEXTURE,this,E)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=m;var A=m.mediaTime;R&&(this._lastUpdate=A,this.emit(o.VIDEO_CREATED,this,P,M),this.frameReady||(this.frameReady=!0,this.emit(o.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(o.VIDEO_LOOP,this)):(this.stop(!1),this.emit(o.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(o.VIDEO_LOOP,this),this._lastUpdate=A,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(g,m,C){m===void 0&&(m=-1),C===void 0&&(C=u.MAX_SAFE_INTEGER);var P=this.video;return!P||this.isPlaying()?(P||console.warn("Video not loaded"),this):(g===void 0&&(g=P.loop),P.loop=g,this._markerIn=m,this._markerOut=C,this._playingMarker=m>-1&&C>m&&C<u.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=P.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var g=this.video;g&&(g.addEventListener("error",this._loadCallbackHandler),g.addEventListener("abort",this._loadCallbackHandler),g.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var g=this.video;g&&(g.removeEventListener("error",this._loadCallbackHandler),g.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var g=this.video;if(g){var m=this._callbacks;for(var C in m)g.addEventListener(C,m[C])}},removeEventHandlers:function(){var g=this.video;if(g){var m=this._callbacks;for(var C in m)g.removeEventListener(C,m[C])}},createPlayPromise:function(g){g===void 0&&(g=!0);var m=this.video,C=m.play();if(C!==void 0){var P=this.playSuccess.bind(this),M=this.playError.bind(this);if(!g){var E=this;M=function(){E.failedPlayAttempts++}}C.then(P).catch(M)}else m.addEventListener("playing",this._callbacks.legacy),g||this.failedPlayAttempts++},addMarker:function(g,m,C){return!isNaN(m)&&m>=0&&!isNaN(C)&&C>m&&(this.markers[g]=[m,C]),this},playMarker:function(g,m){var C=this.markers[g];return C&&this.play(m,C[0],C[1]),this},removeMarker:function(g){return delete this.markers[g],this},snapshot:function(g,m){return g===void 0&&(g=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,g,m)},snapshotArea:function(g,m,C,P,M,E){g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=this.width),P===void 0&&(P=this.height),M===void 0&&(M=C),E===void 0&&(E=P);var w=this.video,R=this.snapshotTexture;return R?(R.setSize(M,E),w&&R.context.drawImage(w,g,m,C,P,0,0,M,E)):(R=this.scene.sys.textures.createCanvas(l(),M,E),this.snapshotTexture=R,w&&R.context.drawImage(w,g,m,C,P,0,0,M,E)),R.update()},saveSnapshotTexture:function(g){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,g):this.snapshotTexture=this.scene.sys.textures.createCanvas(g,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(!!this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(o.VIDEO_UNLOCKED,this));var g=this.scene.sys.sound;g&&g.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(g){var m=g.name;m==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(o.VIDEO_LOCKED,this)):m==="NotSupportedError"?(this.stop(!1),this.emit(o.VIDEO_UNSUPPORTED,this,g)):(this.stop(!1),this.emit(o.VIDEO_ERROR,this,g))},legacyPlayHandler:function(){var g=this.video;g&&(this.playSuccess(),g.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(o.VIDEO_PLAYING,this)},loadErrorHandler:function(g){this.stop(!1),this.emit(o.VIDEO_ERROR,this,g)},metadataHandler:function(g){this.emit(o.VIDEO_METADATA,this,g)},setSizeToFrame:function(g){g||(g=this.frame),this.width=g.realWidth,this.height=g.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=this.width,m.hitArea.height=this.height),this},stalledHandler:function(g){this.isStalled=!0,this.emit(o.VIDEO_STALLED,this,g)},completeHandler:function(){this._playCalled=!1,this.emit(o.VIDEO_COMPLETE,this)},preUpdate:function(g,m){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=m,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(g){var m=this.video;if(m){var C=m.duration;if(C!==1/0&&!isNaN(C)){var P=C*g;this.setCurrentTime(P)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(g){var m=this.video;if(m){if(typeof g=="string"){var C=g[0],P=parseFloat(g.substr(1));C==="+"?g=m.currentTime+P:C==="-"&&(g=m.currentTime-P)}m.currentTime=g}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(o.VIDEO_SEEKED,this)},getProgress:function(){var g=this.video;if(g){var m=g.duration;if(m!==1/0&&!isNaN(m))return g.currentTime/m}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(g){g===void 0&&(g=!0),this._codeMuted=g;var m=this.video;return m&&(m.muted=this._systemMuted?!0:g),this},isMuted:function(){return this._codeMuted},globalMute:function(g,m){this._systemMuted=m;var C=this.video;C&&(C.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(g){g===void 0&&(g=!0);var m=this.video;return this._codePaused=g,m&&!m.ended&&(g?m.paused||(this.removeEventHandlers(),m.pause()):g||(this._playCalled?m.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(g){return g===void 0&&(g=1),this.video&&(this.video.volume=d(g,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(g){return this.video&&(this.video.playbackRate=g),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(g){return g===void 0&&(g=!0),this.video&&(this.video.loop=g),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(g,m){return m===void 0&&(m=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,g),this.videoTextureSource.setFlipY(m)),this._key=g,this.flipY=m,!!this.videoTexture},stop:function(g){g===void 0&&(g=!0);var m=this.video;return m&&(this.removeEventHandlers(),m.cancelVideoFrameCallback(this._rfvCallbackId),m.pause()),this.retry=0,this._playCalled=!1,g&&this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var g=this.video;if(!!g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("autoplay"),g.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var g=this.scene.sys.game.events;g.off(a.PAUSE,this.globalPause,this),g.off(a.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(c.GLOBAL_MUTE,this.globalMute,this)}});r.exports=p},58352:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d.videoTexture&&(x.addToRenderList(d),i.batchSprite(d,d.frame,x,f))};r.exports=T},11511:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),x=i(44603),f=i(23568),o=i(18471);x.register("video",function(a,n){a===void 0&&(a={});var u=f(a,"key",null),c=new o(this.scene,0,0,u);return n!==void 0&&(a.add=n),d(this.scene,c,a),c})},89025:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(18471),x=i(39429);x.register("video",function(f,o,a){return this.displayList.add(new d(this.scene,f,o,a))})},10247:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(29849),f=i(58352),r.exports={renderWebGL:x,renderCanvas:f}},29849:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d.videoTexture&&(x.addToRenderList(d),d.pipeline.batchSprite(d,x,f))};r.exports=T},41481:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(96503),f=i(87902),o=i(83419),a=i(31401),n=i(95643),u=i(87841),c=i(37303),l=new o({Extends:n,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(p,g,m,C,P){C===void 0&&(C=1),P===void 0&&(P=C),n.call(this,p,"Zone"),this.setPosition(g,m),this.width=C,this.height=P,this.blendMode=d.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,p,g){g===void 0&&(g=!0),this.width=v,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=p),this},setDisplaySize:function(v,p){return this.displayWidth=v,this.displayHeight=p,this},setCircleDropZone:function(v){return this.setDropZone(new x(0,0,v),f)},setRectangleDropZone:function(v,p){return this.setDropZone(new u(0,0,v,p),c)},setDropZone:function(v,p){return this.input||this.setInteractive(v,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,p,g){g.addToRenderList(p)},renderWebGL:function(v,p,g){g.addToRenderList(p)}});r.exports=l},95261:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),x=i(23568),f=i(41481);d.register("zone",function(o){var a=x(o,"x",0),n=x(o,"y",0),u=x(o,"width",1),c=x(o,"height",u);return new f(this.scene,a,n,u,c)})},84175:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41481),x=i(39429);x.register("zone",function(f,o,a,n){return this.displayList.add(new d(this.scene,f,o,a,n))})},95166:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.radius>0?Math.PI*i.radius*i.radius:0};r.exports=T},96503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(87902),f=i(26241),o=i(79124),a=i(23777),n=i(28176),u=new d({initialize:function(l,v,p){l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),this.type=a.CIRCLE,this.x=l,this.y=v,this._radius=p,this._diameter=p*2},contains:function(c,l){return x(this,c,l)},getPoint:function(c,l){return f(this,c,l)},getPoints:function(c,l,v){return o(this,c,l,v)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,l,v){return this.x=c,this.y=l,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});r.exports=u},71562:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return 2*(Math.PI*i.radius)};r.exports=T},92110:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a){return a===void 0&&(a=new d),a.x=f.x+f.radius*Math.cos(o),a.y=f.y+f.radius*Math.sin(o),a};r.exports=x},42250:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),x=function(f){return new d(f.x,f.y,f.radius)};r.exports=x},87902:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(i.radius>0&&d>=i.left&&d<=i.right&&x>=i.top&&x<=i.bottom){var f=(i.x-d)*(i.x-d),o=(i.y-x)*(i.y-x);return f+o<=i.radius*i.radius}else return!1};r.exports=T},5698:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),x=function(f,o){return d(f,o.x,o.y)};r.exports=x},70588:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),x=function(f,o){return d(f,o.x,o.y)&&d(f,o.right,o.y)&&d(f,o.x,o.bottom)&&d(f,o.right,o.bottom)};r.exports=x},26394:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x,i.y,i.radius)};r.exports=T},76278:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x===d.x&&i.y===d.y&&i.radius===d.radius};r.exports=T},2074:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o){return o===void 0&&(o=new d),o.x=f.left,o.y=f.top,o.width=f.diameter,o.height=f.diameter,o};r.exports=x},26241:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(92110),x=i(62945),f=i(36383),o=i(2141),a=function(n,u,c){c===void 0&&(c=new o);var l=x(u,0,f.PI2);return d(n,l,c)};r.exports=a},79124:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71562),x=i(92110),f=i(62945),o=i(36383),a=function(n,u,c,l){l===void 0&&(l=[]),!u&&c>0&&(u=d(n)/c);for(var v=0;v<u;v++){var p=f(v/u,0,o.PI2);l.push(x(n,p))}return l};r.exports=a},50884:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x+=d,i.y+=x,i};r.exports=T},39212:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x+=d.x,i.y+=d.y,i};r.exports=T},28176:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){o===void 0&&(o=new d);var a=2*Math.PI*Math.random(),n=Math.random()+Math.random(),u=n>1?2-n:n,c=u*Math.cos(a),l=u*Math.sin(a);return o.x=f.x+c*f.radius,o.y=f.y+l*f.radius,o};r.exports=x},88911:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503);d.Area=i(95166),d.Circumference=i(71562),d.CircumferencePoint=i(92110),d.Clone=i(42250),d.Contains=i(87902),d.ContainsPoint=i(5698),d.ContainsRect=i(70588),d.CopyFrom=i(26394),d.Equals=i(76278),d.GetBounds=i(2074),d.GetPoint=i(26241),d.GetPoints=i(79124),d.Offset=i(50884),d.OffsetPoint=i(39212),d.Random=i(28176),r.exports=d},23777:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};r.exports=T},78874:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.isEmpty()?0:i.getMajorRadius()*i.getMinorRadius()*Math.PI};r.exports=T},92990:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=i.width/2,x=i.height/2,f=Math.pow(d-x,2)/Math.pow(d+x,2);return Math.PI*(d+x)*(1+3*f/(10+Math.sqrt(4-3*f)))};r.exports=T},79522:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a){a===void 0&&(a=new d);var n=f.width/2,u=f.height/2;return a.x=f.x+n*Math.cos(o),a.y=f.y+u*Math.sin(o),a};r.exports=x},58102:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8497),x=function(f){return new d(f.x,f.y,f.width,f.height)};r.exports=x},81154:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(i.width<=0||i.height<=0)return!1;var f=(d-i.x)/i.width,o=(x-i.y)/i.height;return f*=f,o*=o,f+o<.25};r.exports=T},46662:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81154),x=function(f,o){return d(f,o.x,o.y)};r.exports=x},1632:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81154),x=function(f,o){return d(f,o.x,o.y)&&d(f,o.right,o.y)&&d(f,o.x,o.bottom)&&d(f,o.right,o.bottom)};r.exports=x},65534:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x,i.y,i.width,i.height)};r.exports=T},8497:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(81154),f=i(90549),o=i(48320),a=i(23777),n=i(24820),u=new d({initialize:function(l,v,p,g){l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.ELLIPSE,this.x=l,this.y=v,this.width=p,this.height=g},contains:function(c,l){return x(this,c,l)},getPoint:function(c,l){return f(this,c,l)},getPoints:function(c,l,v){return o(this,c,l,v)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,l,v,p){return this.x=c,this.y=l,this.width=v,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},setSize:function(c,l){return l===void 0&&(l=c),this.width=c,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});r.exports=u},36146:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x===d.x&&i.y===d.y&&i.width===d.width&&i.height===d.height};r.exports=T},23694:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o){return o===void 0&&(o=new d),o.x=f.left,o.y=f.top,o.width=f.width,o.height=f.height,o};r.exports=x},90549:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79522),x=i(62945),f=i(36383),o=i(2141),a=function(n,u,c){c===void 0&&(c=new o);var l=x(u,0,f.PI2);return d(n,l,c)};r.exports=a},48320:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(92990),x=i(79522),f=i(62945),o=i(36383),a=function(n,u,c,l){l===void 0&&(l=[]),!u&&c>0&&(u=d(n)/c);for(var v=0;v<u;v++){var p=f(v/u,0,o.PI2);l.push(x(n,p))}return l};r.exports=a},73424:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x+=d,i.y+=x,i};r.exports=T},44808:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x+=d.x,i.y+=d.y,i};r.exports=T},24820:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){o===void 0&&(o=new d);var a=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return o.x=f.x+n*Math.cos(a)*f.width/2,o.y=f.y+n*Math.sin(a)*f.height/2,o};r.exports=x},49203:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8497);d.Area=i(78874),d.Circumference=i(92990),d.CircumferencePoint=i(79522),d.Clone=i(58102),d.Contains=i(81154),d.ContainsPoint=i(46662),d.ContainsRect=i(1632),d.CopyFrom=i(65534),d.Equals=i(36146),d.GetBounds=i(23694),d.GetPoint=i(90549),d.GetPoints=i(48320),d.Offset=i(73424),d.OffsetPoint=i(44808),d.Random=i(24820),r.exports=d},55738:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23777),x=i(79291),f={Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)};f=x(!1,f,d),r.exports=f},2044:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20339),x=function(f,o){return d(f.x,f.y,o.x,o.y)<=f.radius+o.radius};r.exports=x},81491:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=d.width/2,f=d.height/2,o=Math.abs(i.x-d.x-x),a=Math.abs(i.y-d.y-f),n=x+i.radius,u=f+i.radius;if(o>n||a>u)return!1;if(o<=x||a<=f)return!0;var c=o-x,l=a-f,v=c*c,p=l*l,g=i.radius*i.radius;return v+p<=g};r.exports=T},63376:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(2044),f=function(o,a,n){if(n===void 0&&(n=[]),x(o,a)){var u=o.x,c=o.y,l=o.radius,v=a.x,p=a.y,g=a.radius,m,C,P,M,E;if(c===p)E=(g*g-l*l-v*v+u*u)/(2*(u-v)),m=1,C=-2*p,P=v*v+E*E-2*v*E+p*p-g*g,M=C*C-4*m*P,M===0?n.push(new d(E,-C/(2*m))):M>0&&(n.push(new d(E,(-C+Math.sqrt(M))/(2*m))),n.push(new d(E,(-C-Math.sqrt(M))/(2*m))));else{var w=(u-v)/(c-p),R=(g*g-l*l-v*v+u*u-p*p+c*c)/(2*(c-p));m=w*w+1,C=2*c*w-2*R*w-2*u,P=u*u+c*c+R*R-l*l-2*c*R,M=C*C-4*m*P,M===0?(E=-C/(2*m),n.push(new d(E,R-E*w))):M>0&&(E=(-C+Math.sqrt(M))/(2*m),n.push(new d(E,R-E*w)),E=(-C-Math.sqrt(M))/(2*m),n.push(new d(E,R-E*w)))}}return n};r.exports=f},97439:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4042),x=i(81491),f=function(o,a,n){if(n===void 0&&(n=[]),x(o,a)){var u=a.getLineA(),c=a.getLineB(),l=a.getLineC(),v=a.getLineD();d(u,o,n),d(c,o,n),d(l,o,n),d(v,o,n)}return n};r.exports=f},4042:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(80462),f=function(o,a,n){if(n===void 0&&(n=[]),x(o,a)){var u=o.x1,c=o.y1,l=o.x2,v=o.y2,p=a.x,g=a.y,m=a.radius,C=l-u,P=v-c,M=u-p,E=c-g,w=C*C+P*P,R=2*(C*M+P*E),A=M*M+E*E-m*m,L=R*R-4*w*A,F,O;if(L===0){var b=-R/(2*w);F=u+b*C,O=c+b*P,b>=0&&b<=1&&n.push(new d(F,O))}else if(L>0){var I=(-R-Math.sqrt(L))/(2*w);F=u+I*C,O=c+I*P,I>=0&&I<=1&&n.push(new d(F,O));var B=(-R+Math.sqrt(L))/(2*w);F=u+B*C,O=c+B*P,B>=0&&B<=1&&n.push(new d(F,O))}}return n};r.exports=f},36100:(r,T,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),x=function(f,o,a,n){a===void 0&&(a=!1);var u=f.x1,c=f.y1,l=f.x2,v=f.y2,p=o.x1,g=o.y1,m=o.x2,C=o.y2,P=l-u,M=v-c,E=m-p,w=C-g,R=P*w-M*E;if(R===0)return null;var A,L,F;if(a){if(A=(P*(g-c)+M*(u-p))/(E*M-w*P),L=(p+E*A-u)/P,L<0||A<0||A>1)return null;F=L}else{if(A=((p-u)*w-(g-c)*E)/R,L=((c-g)*P-(u-p)*M)/R,A<0||A>1||L<0||L>1)return null;F=A}return n===void 0&&(n=new d),n.set(u+P*F,c+M*F,F)};r.exports=x},3073:(r,T,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36100),x=i(23031),f=i(25836),o=new x,a=new f,n=function(u,c,l,v){l===void 0&&(l=!1),v===void 0&&(v=new f);var p=!1;v.set(),a.set();for(var g=c[c.length-1],m=0;m<c.length;m++){var C=c[m];o.setTo(g.x,g.y,C.x,C.y),g=C,d(u,o,l,a)&&(!p||a.z<v.z)&&(v.copy(a),p=!0)}return p?v:null};r.exports=n},56362:(r,T,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),x=i(61369),f=i(3073),o=new d,a=function(n,u,c,l){l===void 0&&(l=new x),Array.isArray(u)||(u=[u]);var v=!1;l.set(),o.set();for(var p=0;p<u.length;p++)f(n,u[p].points,c,o)&&(!v||o.z<l.z)&&(l.set(o.x,o.y,o.z,p),v=!0);return v?l:null};r.exports=a},60646:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(76112),f=i(92773),o=function(a,n,u){if(u===void 0&&(u=[]),f(a,n))for(var c=n.getLineA(),l=n.getLineB(),v=n.getLineC(),p=n.getLineD(),g=[new d,new d,new d,new d],m=[x(c,a,g[0]),x(l,a,g[1]),x(v,a,g[2]),x(p,a,g[3])],C=0;C<4;C++)m[C]&&u.push(g[C]);return u};r.exports=o},71147:(r,T,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61369),x=i(56362),f=i(23031),o=new f;function a(c,l,v,p,g){var m=Math.cos(c),C=Math.sin(c);o.setTo(l,v,l+m,v+C);var P=x(o,p,!0);P&&g.push(new d(P.x,P.y,c,P.w))}function n(c,l){return c.z-l.z}var u=function(c,l,v){Array.isArray(v)||(v=[v]);for(var p=[],g=[],m=0;m<v.length;m++)for(var C=v[m].points,P=0;P<C.length;P++){var M=Math.atan2(C[P].y-l,C[P].x-c);g.indexOf(M)===-1&&(a(M,c,l,v,p),a(M-1e-5,c,l,v,p),a(M+1e-5,c,l,v,p),g.push(M))}return p.sort(n)};r.exports=u},68389:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=i(59996),f=function(o,a,n){return n===void 0&&(n=new d),x(o,a)&&(n.x=Math.max(o.x,a.x),n.y=Math.max(o.y,a.y),n.width=Math.min(o.right,a.right)-n.x,n.height=Math.min(o.bottom,a.bottom)-n.y),n};r.exports=f},52784:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60646),x=i(59996),f=function(o,a,n){if(n===void 0&&(n=[]),x(o,a)){var u=o.getLineA(),c=o.getLineB(),l=o.getLineC(),v=o.getLineD();d(u,a,n),d(c,a,n),d(l,a,n),d(v,a,n)}return n};r.exports=f},26341:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89265),x=i(60646),f=function(o,a,n){if(n===void 0&&(n=[]),d(o,a)){var u=a.getLineA(),c=a.getLineB(),l=a.getLineC();x(u,o,n),x(c,o,n),x(l,o,n)}return n};r.exports=f},38720:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4042),x=i(67636),f=function(o,a,n){if(n===void 0&&(n=[]),x(o,a)){var u=o.getLineA(),c=o.getLineB(),l=o.getLineC();d(u,a,n),d(c,a,n),d(l,a,n)}return n};r.exports=f},13882:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(2822),f=i(76112),o=function(a,n,u){if(u===void 0&&(u=[]),x(a,n))for(var c=a.getLineA(),l=a.getLineB(),v=a.getLineC(),p=[new d,new d,new d],g=[f(c,n,p[0]),f(l,n,p[1]),f(v,n,p[2])],m=0;m<3;m++)g[m]&&u.push(p[m]);return u};r.exports=o},75636:(r,T,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82944),x=i(13882),f=function(o,a,n){if(n===void 0&&(n=[]),d(o,a)){var u=a.getLineA(),c=a.getLineB(),l=a.getLineC();x(o,u,n),x(o,c,n),x(o,l,n)}return n};r.exports=f},80462:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),x=i(2141),f=new x,o=function(a,n,u){if(u===void 0&&(u=f),d(n,a.x1,a.y1))return u.x=a.x1,u.y=a.y1,!0;if(d(n,a.x2,a.y2))return u.x=a.x2,u.y=a.y2,!0;var c=a.x2-a.x1,l=a.y2-a.y1,v=n.x-a.x1,p=n.y-a.y1,g=c*c+l*l,m=c,C=l;if(g>0){var P=(v*c+p*l)/g;m*=P,C*=P}u.x=a.x1+m,u.y=a.y1+C;var M=m*m+C*C;return M<=g&&m*c+C*l>=0&&d(n,u.x,u.y)};r.exports=o},76112:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=i.x1,o=i.y1,a=i.x2,n=i.y2,u=d.x1,c=d.y1,l=d.x2,v=d.y2;if(f===a&&o===n||u===l&&c===v)return!1;var p=(v-c)*(a-f)-(l-u)*(n-o);if(p===0)return!1;var g=((l-u)*(o-c)-(v-c)*(f-u))/p,m=((a-f)*(o-c)-(n-o)*(f-u))/p;return g<0||g>1||m<0||m>1?!1:(x&&(x.x=f+g*(a-f),x.y=o+g*(n-o)),!0)};r.exports=T},92773:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.x1,f=i.y1,o=i.x2,a=i.y2,n=d.x,u=d.y,c=d.right,l=d.bottom,v=0;if(x>=n&&x<=c&&f>=u&&f<=l||o>=n&&o<=c&&a>=u&&a<=l)return!0;if(x<n&&o>=n){if(v=f+(a-f)*(n-x)/(o-x),v>u&&v<=l)return!0}else if(x>c&&o<=c&&(v=f+(a-f)*(c-x)/(o-x),v>=u&&v<=l))return!0;if(f<u&&a>=u){if(v=x+(o-x)*(u-f)/(a-f),v>=n&&v<=c)return!0}else if(f>l&&a<=l&&(v=x+(o-x)*(l-f)/(a-f),v>=n&&v<=c))return!0;return!1};r.exports=T},16204:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){x===void 0&&(x=1);var f=d.x1,o=d.y1,a=d.x2,n=d.y2,u=i.x,c=i.y,l=(a-f)*(a-f)+(n-o)*(n-o);if(l===0)return!1;var v=((u-f)*(a-f)+(c-o)*(n-o))/l;if(v<0)return Math.sqrt((f-u)*(f-u)+(o-c)*(o-c))<=x;if(v>=0&&v<=1){var p=((o-c)*(a-f)-(f-u)*(n-o))/l;return Math.abs(p)*Math.sqrt(l)<=x}else return Math.sqrt((a-u)*(a-u)+(n-c)*(n-c))<=x};r.exports=T},14199:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16204),x=function(f,o){if(!d(f,o))return!1;var a=Math.min(o.x1,o.x2),n=Math.max(o.x1,o.x2),u=Math.min(o.y1,o.y2),c=Math.max(o.y1,o.y2);return f.x>=a&&f.x<=n&&f.y>=u&&f.y<=c};r.exports=x},59996:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.width<=0||i.height<=0||d.width<=0||d.height<=0?!1:!(i.right<d.x||i.bottom<d.y||i.x>d.right||i.y>d.bottom)};r.exports=T},89265:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(76112),x=i(37303),f=i(48653),o=i(77493),a=function(n,u){if(u.left>n.right||u.right<n.left||u.top>n.bottom||u.bottom<n.top)return!1;var c=u.getLineA(),l=u.getLineB(),v=u.getLineC();if(x(n,c.x1,c.y1)||x(n,c.x2,c.y2)||x(n,l.x1,l.y1)||x(n,l.x2,l.y2)||x(n,v.x1,v.y1)||x(n,v.x2,v.y2))return!0;var p=n.getLineA(),g=n.getLineB(),m=n.getLineC(),C=n.getLineD();if(d(c,p)||d(c,g)||d(c,m)||d(c,C)||d(l,p)||d(l,g)||d(l,m)||d(l,C)||d(v,p)||d(v,g)||d(v,m)||d(v,C))return!0;var P=o(n),M=f(u,P,!0);return M.length>0};r.exports=a},84411:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a){return a===void 0&&(a=0),!(d>i.right+a||x<i.left-a||f>i.bottom+a||o<i.top-a)};r.exports=T},67636:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80462),x=i(10690),f=function(o,a){return o.left>a.right||o.right<a.left||o.top>a.bottom||o.bottom<a.top?!1:!!(x(o,a.x,a.y)||d(o.getLineA(),a)||d(o.getLineB(),a)||d(o.getLineC(),a))};r.exports=f},2822:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(76112),x=function(f,o){return!!(f.contains(o.x1,o.y1)||f.contains(o.x2,o.y2)||d(f.getLineA(),o)||d(f.getLineB(),o)||d(f.getLineC(),o))};r.exports=x},82944:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(48653),x=i(71694),f=i(76112),o=function(a,n){if(a.left>n.right||a.right<n.left||a.top>n.bottom||a.bottom<n.top)return!1;var u=a.getLineA(),c=a.getLineB(),l=a.getLineC(),v=n.getLineA(),p=n.getLineB(),g=n.getLineC();if(f(u,v)||f(u,p)||f(u,g)||f(c,v)||f(c,p)||f(c,g)||f(l,v)||f(l,p)||f(l,g))return!0;var m=x(a),C=d(n,m,!0);return C.length>0||(m=x(n),C=d(a,m,!0),C.length>0)};r.exports=o},91865:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.atan2(i.y2-i.y1,i.x2-i.x1)};r.exports=T},84993:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){d===void 0&&(d=1),x===void 0&&(x=[]);var f=Math.round(i.x1),o=Math.round(i.y1),a=Math.round(i.x2),n=Math.round(i.y2),u=Math.abs(a-f),c=Math.abs(n-o),l=f<a?1:-1,v=o<n?1:-1,p=u-c;x.push({x:f,y:o});for(var g=1;!(f===a&&o===n);){var m=p<<1;m>-c&&(p-=c,f+=l),m<u&&(p+=u,o+=v),g%d===0&&x.push({x:f,y:o}),g++}return x};r.exports=T},36469:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=d-(i.x1+i.x2)/2,o=x-(i.y1+i.y2)/2;return i.x1+=f,i.y1+=o,i.x2+=f,i.y2+=o,i};r.exports=T},31116:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23031),x=function(f){return new d(f.x1,f.y1,f.x2,f.y2)};r.exports=x},59944:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x1,i.y1,i.x2,i.y2)};r.exports=T},59220:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x1===d.x1&&i.y1===d.y1&&i.x2===d.x2&&i.y2===d.y2};r.exports=T},78177:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=function(f,o,a){a===void 0&&(a=o);var n=d(f),u=f.x2-f.x1,c=f.y2-f.y1;return o&&(f.x1=f.x1-u/n*o,f.y1=f.y1-c/n*o),a&&(f.x2=f.x2+u/n*a,f.y2=f.y2+c/n*a),f};r.exports=x},26708:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(52816),x=i(6113),f=i(2141),o=function(a,n,u,c,l){c===void 0&&(c=0),l===void 0&&(l=[]);var v=[],p=a.x1,g=a.y1,m=a.x2-p,C=a.y2-g,P=x(n,l),M,E,w=u-1;for(M=0;M<w;M++)E=P(M/w),v.push(new f(p+m*E,g+C*E));if(E=P(1),v.push(new f(p+m*E,g+C*E)),c>0){var R=v[0],A=[R];for(M=1;M<v.length-1;M++){var L=v[M];d(R,L)>=c&&(A.push(L),R=L)}var F=v[v.length-1];return d(R,F)<c&&A.pop(),A.push(F),A}else return v};r.exports=o},32125:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.x=(f.x1+f.x2)/2,o.y=(f.y1+f.y2)/2,o};r.exports=x},99569:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a){a===void 0&&(a=new d);var n=f.x1,u=f.y1,c=f.x2,l=f.y2,v=(c-n)*(c-n)+(l-u)*(l-u);if(v===0)return a;var p=((o.x-n)*(c-n)+(o.y-u)*(l-u))/v;return a.x=n+p*(c-n),a.y=u+p*(l-u),a};r.exports=x},34638:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(91938),f=i(2141),o=function(a,n){n===void 0&&(n=new f);var u=x(a)-d.TAU;return n.x=Math.cos(u),n.y=Math.sin(u),n};r.exports=o},13151:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a){return a===void 0&&(a=new d),a.x=f.x1+(f.x2-f.x1)*o,a.y=f.y1+(f.y2-f.y1)*o,a};r.exports=x},15258:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=i(2141),f=function(o,a,n,u){u===void 0&&(u=[]),!a&&n>0&&(a=d(o)/n);for(var c=o.x1,l=o.y1,v=o.x2,p=o.y2,g=0;g<a;g++){var m=g/a,C=c+(v-c)*m,P=l+(p-l)*m;u.push(new x(C,P))}return u};r.exports=f},26408:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.x1,f=i.y1,o=i.x2,a=i.y2,n=(o-x)*(o-x)+(a-f)*(a-f);if(n===0)return!1;var u=((f-d.y)*(o-x)-(x-d.x)*(a-f))/n;return Math.abs(u)*Math.sqrt(n)};r.exports=T},98770:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.abs(i.y1-i.y2)};r.exports=T},35001:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.sqrt((i.x2-i.x1)*(i.x2-i.x1)+(i.y2-i.y1)*(i.y2-i.y1))};r.exports=T},23031:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(13151),f=i(15258),o=i(23777),a=i(65822),n=i(26099),u=new d({initialize:function(l,v,p,g){l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=o.LINE,this.x1=l,this.y1=v,this.x2=p,this.y2=g},getPoint:function(c,l){return x(this,c,l)},getPoints:function(c,l,v){return f(this,c,l,v)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,l,v,p){return c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=c,this.y1=l,this.x2=v,this.y2=p,this},setFromObjects:function(c,l){return this.x1=c.x,this.y1=c.y,this.x2=l.x,this.y2=l.y,this},getPointA:function(c){return c===void 0&&(c=new n),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new n),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});r.exports=u},64795:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(15994),f=i(91938),o=function(a){var n=f(a)-d.TAU;return x(n,-Math.PI,Math.PI)};r.exports=o},52616:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(91938),f=function(o){return Math.cos(x(o)-d.TAU)};r.exports=f},87231:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(91938),f=function(o){return Math.sin(x(o)-d.TAU)};r.exports=f},89662:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x1+=d,i.y1+=x,i.x2+=d,i.y2+=x,i};r.exports=T},71165:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return-((i.x2-i.x1)/(i.y2-i.y1))};r.exports=T},65822:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){o===void 0&&(o=new d);var a=Math.random();return o.x=f.x1+a*(f.x2-f.x1),o.y=f.y1+a*(f.y2-f.y1),o};r.exports=x},69777:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91938),x=i(64795),f=function(o,a){return 2*x(a)-Math.PI-d(o)};r.exports=f},39706:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64400),x=function(f,o){var a=(f.x1+f.x2)/2,n=(f.y1+f.y2)/2;return d(f,a,n,o)};r.exports=x},82585:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64400),x=function(f,o,a){return d(f,o.x,o.y,a)};r.exports=x},64400:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=Math.cos(f),a=Math.sin(f),n=i.x1-d,u=i.y1-x;return i.x1=n*o-u*a+d,i.y1=n*a+u*o+x,n=i.x2-d,u=i.y2-x,i.x2=n*o-u*a+d,i.y2=n*a+u*o+x,i};r.exports=T},62377:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){return i.x1=d,i.y1=x,i.x2=d+Math.cos(f)*o,i.y2=x+Math.sin(f)*o,i};r.exports=T},71366:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i.y2-i.y1)/(i.x2-i.x1)};r.exports=T},10809:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.abs(i.x1-i.x2)};r.exports=T},2529:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23031);d.Angle=i(91938),d.BresenhamPoints=i(84993),d.CenterOn=i(36469),d.Clone=i(31116),d.CopyFrom=i(59944),d.Equals=i(59220),d.Extend=i(78177),d.GetEasedPoints=i(26708),d.GetMidPoint=i(32125),d.GetNearestPoint=i(99569),d.GetNormal=i(34638),d.GetPoint=i(13151),d.GetPoints=i(15258),d.GetShortestDistance=i(26408),d.Height=i(98770),d.Length=i(35001),d.NormalAngle=i(64795),d.NormalX=i(52616),d.NormalY=i(87231),d.Offset=i(89662),d.PerpSlope=i(71165),d.Random=i(65822),d.ReflectAngle=i(69777),d.Rotate=i(39706),d.RotateAroundPoint=i(82585),d.RotateAroundXY=i(64400),d.SetToAngle=i(62377),d.Slope=i(71366),d.Width=i(10809),r.exports=d},83997:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(87841),f=i(26099);function o(n,u,c,l){var v=n-c,p=u-l,g=v*v+p*p;return Math.sqrt(g)}var a=new d({initialize:function(u,c,l){this.vertex1=u,this.vertex2=c,this.vertex3=l,this.bounds=new x,this._inCenter=new f},getInCenter:function(n){n===void 0&&(n=!0);var u=this.vertex1,c=this.vertex2,l=this.vertex3,v,p,g,m,C,P;n?(v=u.x,p=u.y,g=c.x,m=c.y,C=l.x,P=l.y):(v=u.vx,p=u.vy,g=c.vx,m=c.vy,C=l.vx,P=l.vy);var M=o(C,P,g,m),E=o(v,p,C,P),w=o(g,m,v,p),R=M+E+w;return this._inCenter.set((v*M+g*E+C*w)/R,(p*M+m*E+P*w)/R)},contains:function(n,u,c){var l=this.vertex1,v=this.vertex2,p=this.vertex3,g=l.vx,m=l.vy,C=v.vx,P=v.vy,M=p.vx,E=p.vy;if(c){var w=c.a,R=c.b,A=c.c,L=c.d,F=c.e,O=c.f;g=l.vx*w+l.vy*A+F,m=l.vx*R+l.vy*L+O,C=v.vx*w+v.vy*A+F,P=v.vx*R+v.vy*L+O,M=p.vx*w+p.vy*A+F,E=p.vx*R+p.vy*L+O}var b=M-g,I=E-m,B=C-g,N=P-m,k=n-g,Y=u-m,H=b*b+I*I,z=b*B+I*N,X=b*k+I*Y,D=B*B+N*N,G=B*k+N*Y,V=H*D-z*z,W=V===0?0:1/V,U=(D*X-z*G)*W,$=(H*G-z*X)*W;return U>=0&&$>=0&&U+$<1},isCounterClockwise:function(n){var u=this.vertex1,c=this.vertex2,l=this.vertex3,v=(c.vx-u.vx)*(l.vy-u.vy)-(c.vy-u.vy)*(l.vx-u.vx);return n<=0?v>=0:v<0},load:function(n,u,c,l,v){return c=this.vertex1.load(n,u,c,l,v),c=this.vertex2.load(n,u,c,l,v),c=this.vertex3.load(n,u,c,l,v),c},transformCoordinatesLocal:function(n,u,c,l){return this.vertex1.transformCoordinatesLocal(n,u,c,l),this.vertex2.transformCoordinatesLocal(n,u,c,l),this.vertex3.transformCoordinatesLocal(n,u,c,l),this},updateBounds:function(){var n=this.vertex1,u=this.vertex2,c=this.vertex3,l=this.bounds;return l.x=Math.min(n.vx,u.vx,c.vx),l.y=Math.min(n.vy,u.vy,c.vy),l.width=Math.max(n.vx,u.vx,c.vx)-l.x,l.height=Math.max(n.vy,u.vy,c.vy)-l.y,this},isInView:function(n,u,c,l,v,p,g,m,C,P,M){this.update(l,v,p,g,m,C,P,M);var E=this.vertex1,w=this.vertex2,R=this.vertex3;if(E.ta<=0&&w.ta<=0&&R.ta<=0||u&&!this.isCounterClockwise(c))return!1;var A=this.bounds;A.x=Math.min(E.tx,w.tx,R.tx),A.y=Math.min(E.ty,w.ty,R.ty),A.width=Math.max(E.tx,w.tx,R.tx)-A.x,A.height=Math.max(E.ty,w.ty,R.ty)-A.y;var L=n.x+n.width,F=n.y+n.height;return A.width<=0||A.height<=0||n.width<=0||n.height<=0?!1:!(A.right<n.x||A.bottom<n.y||A.x>L||A.y>F)},scrollUV:function(n,u){return this.vertex1.scrollUV(n,u),this.vertex2.scrollUV(n,u),this.vertex3.scrollUV(n,u),this},scaleUV:function(n,u){return this.vertex1.scaleUV(n,u),this.vertex2.scaleUV(n,u),this.vertex3.scaleUV(n,u),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,u,c,l,v,p,g,m){return this.vertex1.update(u,c,l,v,p,g,m,n),this.vertex2.update(u,c,l,v,p,g,m,n),this.vertex3.update(u,c,l,v,p,g,m,n),this},translate:function(n,u){u===void 0&&(u=0);var c=this.vertex1,l=this.vertex2,v=this.vertex3;return c.x+=n,c.y+=u,l.x+=n,l.y+=u,v.x+=n,v.y+=u,this},x:{get:function(){return this.getInCenter().x},set:function(n){var u=this.getInCenter();this.translate(n-u.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var u=this.getInCenter();this.translate(0,n-u.y)}},alpha:{get:function(){var n=this.vertex1,u=this.vertex2,c=this.vertex3;return(n.alpha+u.alpha+c.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,u=this.vertex2,c=this.vertex3;return(n.vz+u.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});r.exports=a},48803:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),x=i(95540),f=i(37867),o=i(25836),a=i(39318),n=new o,u=new o,c=new f,l=function(v){var p=x(v,"mesh"),g=x(v,"texture",null),m=x(v,"frame"),C=x(v,"width",1),P=x(v,"height",C),M=x(v,"widthSegments",1),E=x(v,"heightSegments",M),w=x(v,"x",0),R=x(v,"y",0),A=x(v,"z",0),L=x(v,"rotateX",0),F=x(v,"rotateY",0),O=x(v,"rotateZ",0),b=x(v,"zIsUp",!0),I=x(v,"isOrtho",p?p.dirtyCache[11]:!1),B=x(v,"colors",[16777215]),N=x(v,"alphas",[1]),k=x(v,"tile",!1),Y=x(v,"flipY",!1),H=x(v,"width",null),z={faces:[],verts:[]};n.set(w,R,A),u.set(L,F,O),c.fromRotationXYTranslation(u,n,b);var X;if(!g&&p)g=p.texture,m||(X=p.frame);else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else if(!g)return z;X||(X=g.get(m)),!H&&I&&g&&p&&(C=X.width/p.height,P=X.height/p.height);var D=C/2,G=P/2,V=Math.floor(M),W=Math.floor(E),U=V+1,$=W+1,K=C/V,Z=P/W,J=[],Q=[],j,_,q=0,st=1,ht=0,lt=1;X&&(q=X.u0,st=X.u1,Y?(ht=X.v1,lt=X.v0):(ht=X.v0,lt=X.v1));var ot=st-q,tt=lt-ht;for(_=0;_<$;_++){var at=_*Z-G;for(j=0;j<U;j++){var nt=j*K-D;Q.push(nt,-at);var vt=q+ot*(j/V),mt=ht+tt*(_/W);J.push(vt,mt)}}Array.isArray(B)||(B=[B]),Array.isArray(N)||(N=[N]);var Bt=0,Dt=0;for(_=0;_<W;_++)for(j=0;j<V;j++){var Pt=(j+U*_)*2,Ct=(j+U*(_+1))*2,Ut=(j+1+U*(_+1))*2,Ft=(j+1+U*_)*2,ee=B[Dt],oe=N[Bt],Ie=new a(Q[Pt],Q[Pt+1],0,J[Pt],J[Pt+1],ee,oe).transformMat4(c),Es=new a(Q[Ct],Q[Ct+1],0,J[Ct],J[Ct+1],ee,oe).transformMat4(c),Ms=new a(Q[Ft],Q[Ft+1],0,J[Ft],J[Ft+1],ee,oe).transformMat4(c),ws=new a(Q[Ct],Q[Ct+1],0,J[Ct],J[Ct+1],ee,oe).transformMat4(c),Rs=new a(Q[Ut],Q[Ut+1],0,J[Ut],J[Ut+1],ee,oe).transformMat4(c),As=new a(Q[Ft],Q[Ft+1],0,J[Ft],J[Ft+1],ee,oe).transformMat4(c);k&&(Ie.setUVs(q,lt),Es.setUVs(q,ht),Ms.setUVs(st,lt),ws.setUVs(q,ht),Rs.setUVs(st,ht),As.setUVs(st,lt)),Dt++,Dt===B.length&&(Dt=0),Bt++,Bt===N.length&&(Bt=0),z.verts.push(Ie,Es,Ms,ws,Rs,As),z.faces.push(new d(Ie,Es,Ms),new d(ws,Rs,As))}return p&&(p.faces=p.faces.concat(z.faces),p.vertices=p.vertices.concat(z.verts)),z};r.exports=l},34684:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),x=i(37867),f=i(25836),o=i(39318),a=new f,n=new f,u=new x,c=function(l,v,p,g,m,C,P,M,E,w){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=0),P===void 0&&(P=0),M===void 0&&(M=0),E===void 0&&(E=0),w===void 0&&(w=!0);var R={faces:[],verts:[]},A=l.materials;a.set(g,m,C),n.set(P,M,E),u.fromRotationXYTranslation(n,a,w);for(var L=0;L<l.models.length;L++)for(var F=l.models[L],O=F.vertices,b=F.textureCoords,I=F.faces,B=0;B<I.length;B++){var N=I[B],k=N.vertices[0],Y=N.vertices[1],H=N.vertices[2],z=O[k.vertexIndex],X=O[Y.vertexIndex],D=O[H.vertexIndex],G=k.textureCoordsIndex,V=Y.textureCoordsIndex,W=H.textureCoordsIndex,U=G===-1?{u:0,v:1}:b[G],$=V===-1?{u:0,v:0}:b[V],K=W===-1?{u:1,v:1}:b[W],Z=16777215;N.material!==""&&A[N.material]&&(Z=A[N.material]);var J=new o(z.x*p,z.y*p,z.z*p,U.u,U.v,Z).transformMat4(u),Q=new o(X.x*p,X.y*p,X.z*p,$.u,$.v,Z).transformMat4(u),j=new o(D.x*p,D.y*p,D.z*p,K.u,K.v,Z).transformMat4(u);R.verts.push(J,Q,j),R.faces.push(new d(J,Q,j))}return v&&(v.faces=v.faces.concat(R.faces),v.vertices=v.vertices.concat(R.verts)),R};r.exports=c},92515:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),x=i(39318),f=function(o,a,n,u,c,l,v,p){if(u===void 0&&(u=!1),l===void 0&&(l=16777215),v===void 0&&(v=1),p===void 0&&(p=!1),o.length!==a.length&&!u){console.warn("GenerateVerts: vertices and uvs count not equal");return}var g={faces:[],vertices:[]},m,C,P,M,E,w,R,A,L,F,O,b=u?3:2,I=Array.isArray(l),B=Array.isArray(v);if(Array.isArray(n)&&n.length>0)for(m=0;m<n.length;m++){var N=n[m],k=n[m]*2,Y=n[m]*b;C=o[Y],P=o[Y+1],M=u?o[Y+2]:0,E=a[k],w=a[k+1],p&&(w=1-w),R=I?l[N]:l,A=B?v[N]:v,L=0,F=0,O=0,c&&(L=c[Y],F=c[Y+1],O=u?c[Y+2]:0),g.vertices.push(new x(C,P,M,E,w,R,A,L,F,O))}else{var H=0,z=0;for(m=0;m<o.length;m+=b)C=o[m],P=o[m+1],M=u?o[m+2]:0,E=a[H],w=a[H+1],R=I?l[z]:l,A=B?v[z]:v,L=0,F=0,O=0,c&&(L=c[m],F=c[m+1],O=u?c[m+2]:0),g.vertices.push(new x(C,P,M,E,w,R,A,L,F,O)),H+=2,z++}for(m=0;m<g.vertices.length;m+=3){var X=g.vertices[m],D=g.vertices[m+1],G=g.vertices[m+2];g.faces.push(new d(X,D,G))}return g};r.exports=f},85048:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,i="untitled",d="",x="";function f(C){var P=C.indexOf("#");return P>-1?C.substring(0,P):C}function o(C){return C.models.length===0&&C.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),d="",C.models[C.models.length-1]}function a(C,P){var M=C.length>=2?C[1]:i;P.models.push({faces:[],name:M,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function n(C){C.length===2&&(d=C[1])}function u(C,P){var M=C.length,E=M>=2?parseFloat(C[1]):0,w=M>=3?parseFloat(C[2]):0,R=M>=4?parseFloat(C[3]):0;o(P).vertices.push({x:E,y:w,z:R})}function c(C,P){var M=C.length,E=M>=2?parseFloat(C[1]):0,w=M>=3?parseFloat(C[2]):0,R=M>=4?parseFloat(C[3]):0;isNaN(E)&&(E=0),isNaN(w)&&(w=0),isNaN(R)&&(R=0),T&&(w=1-w),o(P).textureCoords.push({u:E,v:w,w:R})}function l(C,P){var M=C.length,E=M>=2?parseFloat(C[1]):0,w=M>=3?parseFloat(C[2]):0,R=M>=4?parseFloat(C[3]):0;o(P).vertexNormals.push({x:E,y:w,z:R})}function v(C,P){var M=C.length-1;if(!(M<3)){for(var E={group:d,material:x,vertices:[]},w=0;w<M;w++){var R=C[w+1],A=R.split("/"),L=A.length;if(!(L<1||L>3)){var F=0,O=0,b=0;F=parseInt(A[0],10),L>1&&A[1]!==""&&(O=parseInt(A[1],10)),L>2&&(b=parseInt(A[2],10)),F!==0&&(F<0&&(F=o(P).vertices.length+1+F),O-=1,F-=1,b-=1,E.vertices.push({textureCoordsIndex:O,vertexIndex:F,vertexNormalIndex:b}))}}o(P).faces.push(E)}}function p(C,P){C.length>=2&&P.materialLibraries.push(C[1])}function g(C){C.length>=2&&(x=C[1])}var m=function(C,P){P===void 0&&(P=!0),T=P;var M={materials:{},materialLibraries:[],models:[]};d="",x="";for(var E=C.split(`
`),w=0;w<E.length;w++){var R=f(E[w]),A=R.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":a(A,M);break;case"g":n(A);break;case"v":u(A,M);break;case"vt":c(A,M);break;case"vn":l(A,M);break;case"f":v(A,M);break;case"mtllib":p(A,M);break;case"usemtl":g(A);break}}return M};r.exports=m},61485:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589),x=function(f){for(var o={},a=f.split(`
`),n="",u=0;u<a.length;u++){var c=a[u].trim();if(!(c.indexOf("#")===0||c==="")){var l=c.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{n=l[1];break}case"kd":{var v=Math.floor(l[1]*255),p=l.length>=2?Math.floor(l[2]*255):v,g=l.length>=3?Math.floor(l[3]*255):v;o[n]=d(v,p,g);break}}}}return o};r.exports=x},92570:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o,a;if(x===void 0&&f===void 0){var n=i.getInCenter();o=n.x,a=n.y}var u=Math.cos(d),c=Math.sin(d),l=i.vertex1,v=i.vertex2,p=i.vertex3,g=l.x-o,m=l.y-a;l.set(g*u-m*c+o,g*c+m*u+a),g=v.x-o,m=v.y-a,v.set(g*u-m*c+o,g*c+m*u+a),g=p.x-o,m=p.y-a,p.set(g*u-m*c+o,g*c+m*u+a)};r.exports=T},39318:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(70554),f=i(25836),o=new d({Extends:f,initialize:function(n,u,c,l,v,p,g,m,C,P){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),C===void 0&&(C=0),P===void 0&&(P=0),f.call(this,n,u,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=C,this.nz=P,this.u=l,this.v=v,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=l,this.tv=v},setUVs:function(a,n){return this.u=a,this.v=n,this.tu=a,this.tv=n,this},scrollUV:function(a,n){return this.tu+=a,this.tv+=n,this},scaleUV:function(a,n){return this.tu=this.u*a,this.tv=this.v*n,this},transformCoordinatesLocal:function(a,n,u,c){var l=this.x,v=this.y,p=this.z,g=a.val,m=l*g[0]+v*g[4]+p*g[8]+g[12],C=l*g[1]+v*g[5]+p*g[9]+g[13],P=l*g[2]+v*g[6]+p*g[10]+g[14],M=l*g[3]+v*g[7]+p*g[11]+g[15];this.vx=m/M*n,this.vy=-(C/M)*u,c<=0?this.vz=P/M:this.vz=-(P/M)},resize:function(a,n,u,c,l,v){return this.x=a,this.y=n,this.vx=this.x*u,this.vy=-this.y*c,this.vz=0,l<.5?this.vx+=u*(.5-l):l>.5&&(this.vx-=u*(l-.5)),v<.5?this.vy+=c*(.5-v):v>.5&&(this.vy-=c*(v-.5)),this},update:function(a,n,u,c,l,v,p,g){var m=this.vx*a+this.vy*u+l,C=this.vx*n+this.vy*c+v;return p&&(m=Math.round(m),C=Math.round(C)),this.tx=m,this.ty=C,this.ta=this.alpha*g,this},load:function(a,n,u,c,l){return a[++u]=this.tx,a[++u]=this.ty,a[++u]=this.tu,a[++u]=this.tv,a[++u]=c,a[++u]=l,n[++u]=x.getTintAppendFloatAlpha(this.color,this.ta),u}});r.exports=o},73090:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)};r.exports=d},96550:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.setTo(Math.ceil(i.x),Math.ceil(i.y))};r.exports=T},99706:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f){return new d(f.x,f.y)};r.exports=x},68010:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x,i.y)};r.exports=T},27814:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x===d.x&&i.y===d.y};r.exports=T},73565:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.setTo(Math.floor(i.x),Math.floor(i.y))};r.exports=T},87555:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){if(o===void 0&&(o=new d),!Array.isArray(f))throw new Error("GetCentroid points argument must be an array");var a=f.length;if(a<1)throw new Error("GetCentroid points array must not be empty");if(a===1)o.x=f[0].x,o.y=f[0].y;else{for(var n=0;n<a;n++)o.x+=f[n].x,o.y+=f[n].y;o.x/=a,o.y/=a}return o};r.exports=x},28793:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)};r.exports=T},44405:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x*i.x+i.y*i.y};r.exports=T},20873:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o){o===void 0&&(o=new d);for(var a=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=0;l<f.length;l++){var v=f[l];v.x>a&&(a=v.x),v.x<n&&(n=v.x),v.y>u&&(u=v.y),v.y<c&&(c=v.y)}return o.x=n,o.y=c,o.width=a-n,o.height=u-c,o};r.exports=x},26152:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a,n){return a===void 0&&(a=0),n===void 0&&(n=new d),n.x=f.x+(o.x-f.x)*a,n.y=f.y+(o.y-f.y)*a,n};r.exports=x},55767:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.setTo(i.y,i.x)};r.exports=T},79432:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.setTo(-f.x,-f.y)};r.exports=x},2141:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23777),f=new d({initialize:function(a,n){a===void 0&&(a=0),n===void 0&&(n=a),this.type=x.POINT,this.x=a,this.y=n},setTo:function(o,a){return o===void 0&&(o=0),a===void 0&&(a=o),this.x=o,this.y=a,this}});r.exports=f},72930:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(44405),f=function(o,a,n){n===void 0&&(n=new d);var u=o.x*a.x+o.y*a.y,c=u/x(a);return c!==0&&(n.x=c*a.x,n.y=c*a.y),n};r.exports=f},62880:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o,a){a===void 0&&(a=new d);var n=f.x*o.x+f.y*o.y;return n!==0&&(a.x=n*o.x,a.y=n*o.y),a};r.exports=x},15093:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28793),x=function(f,o){if(f.x!==0||f.y!==0){var a=d(f);f.x/=a,f.y/=a}return f.x*=o,f.y*=o,f};r.exports=x},43711:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141);d.Ceil=i(96550),d.Clone=i(99706),d.CopyFrom=i(68010),d.Equals=i(27814),d.Floor=i(73565),d.GetCentroid=i(87555),d.GetMagnitude=i(28793),d.GetMagnitudeSq=i(44405),d.GetRectangleFromPoints=i(20873),d.Interpolate=i(26152),d.Invert=i(55767),d.Negative=i(79432),d.Project=i(72930),d.ProjectUnit=i(62880),d.SetMagnitude=i(15093),r.exports=d},12306:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25717),x=function(f){return new d(f.points)};r.exports=x},63814:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){for(var f=!1,o=-1,a=i.points.length-1;++o<i.points.length;a=o){var n=i.points[o].x,u=i.points[o].y,c=i.points[a].x,l=i.points[a].y;(u<=x&&x<l||l<=x&&x<u)&&d<(c-n)*(x-u)/(l-u)+n&&(f=!f)}return f};r.exports=T},99338:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63814),x=function(f,o){return d(f,o.x,o.y)};r.exports=x},94811:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(z,X,D){D=D||2;var G=X&&X.length,V=G?X[0]*D:z.length,W=i(z,0,V,D,!0),U=[];if(!W||W.next===W.prev)return U;var $,K,Z,J,Q,j,_;if(G&&(W=u(z,X,W,D)),z.length>80*D){$=Z=z[0],K=J=z[1];for(var q=D;q<V;q+=D)Q=z[q],j=z[q+1],Q<$&&($=Q),j<K&&(K=j),Q>Z&&(Z=Q),j>J&&(J=j);_=Math.max(Z-$,J-K),_=_!==0?32767/_:0}return x(W,U,D,$,K,_,0),U}function i(z,X,D,G,V){var W,U;if(V===H(z,X,D,G)>0)for(W=X;W<D;W+=G)U=N(W,z[W],z[W+1],U);else for(W=D-G;W>=X;W-=G)U=N(W,z[W],z[W+1],U);return U&&R(U,U.next)&&(k(U),U=U.next),U}function d(z,X){if(!z)return z;X||(X=z);var D=z,G;do if(G=!1,!D.steiner&&(R(D,D.next)||w(D.prev,D,D.next)===0)){if(k(D),D=X=D.prev,D===D.next)break;G=!0}else D=D.next;while(G||D!==X);return X}function x(z,X,D,G,V,W,U){if(!!z){!U&&W&&g(z,G,V,W);for(var $=z,K,Z;z.prev!==z.next;){if(K=z.prev,Z=z.next,W?o(z,G,V,W):f(z)){X.push(K.i/D|0),X.push(z.i/D|0),X.push(Z.i/D|0),k(z),z=Z.next,$=Z.next;continue}if(z=Z,z===$){U?U===1?(z=a(d(z),X,D),x(z,X,D,G,V,W,2)):U===2&&n(z,X,D,G,V,W):x(d(z),X,D,G,V,W,1);break}}}}function f(z){var X=z.prev,D=z,G=z.next;if(w(X,D,G)>=0)return!1;for(var V=X.x,W=D.x,U=G.x,$=X.y,K=D.y,Z=G.y,J=V<W?V<U?V:U:W<U?W:U,Q=$<K?$<Z?$:Z:K<Z?K:Z,j=V>W?V>U?V:U:W>U?W:U,_=$>K?$>Z?$:Z:K>Z?K:Z,q=G.next;q!==X;){if(q.x>=J&&q.x<=j&&q.y>=Q&&q.y<=_&&M(V,$,W,K,U,Z,q.x,q.y)&&w(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function o(z,X,D,G){var V=z.prev,W=z,U=z.next;if(w(V,W,U)>=0)return!1;for(var $=V.x,K=W.x,Z=U.x,J=V.y,Q=W.y,j=U.y,_=$<K?$<Z?$:Z:K<Z?K:Z,q=J<Q?J<j?J:j:Q<j?Q:j,st=$>K?$>Z?$:Z:K>Z?K:Z,ht=J>Q?J>j?J:j:Q>j?Q:j,lt=C(_,q,X,D,G),ot=C(st,ht,X,D,G),tt=z.prevZ,at=z.nextZ;tt&&tt.z>=lt&&at&&at.z<=ot;){if(tt.x>=_&&tt.x<=st&&tt.y>=q&&tt.y<=ht&&tt!==V&&tt!==U&&M($,J,K,Q,Z,j,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,at.x>=_&&at.x<=st&&at.y>=q&&at.y<=ht&&at!==V&&at!==U&&M($,J,K,Q,Z,j,at.x,at.y)&&w(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;tt&&tt.z>=lt;){if(tt.x>=_&&tt.x<=st&&tt.y>=q&&tt.y<=ht&&tt!==V&&tt!==U&&M($,J,K,Q,Z,j,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;at&&at.z<=ot;){if(at.x>=_&&at.x<=st&&at.y>=q&&at.y<=ht&&at!==V&&at!==U&&M($,J,K,Q,Z,j,at.x,at.y)&&w(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function a(z,X,D){var G=z;do{var V=G.prev,W=G.next.next;!R(V,W)&&A(V,G,G.next,W)&&b(V,W)&&b(W,V)&&(X.push(V.i/D|0),X.push(G.i/D|0),X.push(W.i/D|0),k(G),k(G.next),G=z=W),G=G.next}while(G!==z);return d(G)}function n(z,X,D,G,V,W){var U=z;do{for(var $=U.next.next;$!==U.prev;){if(U.i!==$.i&&E(U,$)){var K=B(U,$);U=d(U,U.next),K=d(K,K.next),x(U,X,D,G,V,W,0),x(K,X,D,G,V,W,0);return}$=$.next}U=U.next}while(U!==z)}function u(z,X,D,G){var V=[],W,U,$,K,Z;for(W=0,U=X.length;W<U;W++)$=X[W]*G,K=W<U-1?X[W+1]*G:z.length,Z=i(z,$,K,G,!1),Z===Z.next&&(Z.steiner=!0),V.push(P(Z));for(V.sort(c),W=0;W<V.length;W++)D=l(V[W],D);return D}function c(z,X){return z.x-X.x}function l(z,X){var D=v(z,X);if(!D)return X;var G=B(D,z);return d(G,G.next),d(D,D.next)}function v(z,X){var D=X,G=z.x,V=z.y,W=-1/0,U;do{if(V<=D.y&&V>=D.next.y&&D.next.y!==D.y){var $=D.x+(V-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if($<=G&&$>W&&(W=$,U=D.x<D.next.x?D:D.next,$===G))return U}D=D.next}while(D!==X);if(!U)return null;var K=U,Z=U.x,J=U.y,Q=1/0,j;D=U;do G>=D.x&&D.x>=Z&&G!==D.x&&M(V<J?G:W,V,Z,J,V<J?W:G,V,D.x,D.y)&&(j=Math.abs(V-D.y)/(G-D.x),b(D,z)&&(j<Q||j===Q&&(D.x>U.x||D.x===U.x&&p(U,D)))&&(U=D,Q=j)),D=D.next;while(D!==K);return U}function p(z,X){return w(z.prev,z,X.prev)<0&&w(X.next,z,z.next)<0}function g(z,X,D,G){var V=z;do V.z===0&&(V.z=C(V.x,V.y,X,D,G)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==z);V.prevZ.nextZ=null,V.prevZ=null,m(V)}function m(z){var X,D,G,V,W,U,$,K,Z=1;do{for(D=z,z=null,W=null,U=0;D;){for(U++,G=D,$=0,X=0;X<Z&&($++,G=G.nextZ,!!G);X++);for(K=Z;$>0||K>0&&G;)$!==0&&(K===0||!G||D.z<=G.z)?(V=D,D=D.nextZ,$--):(V=G,G=G.nextZ,K--),W?W.nextZ=V:z=V,V.prevZ=W,W=V;D=G}W.nextZ=null,Z*=2}while(U>1);return z}function C(z,X,D,G,V){return z=(z-D)*V|0,X=(X-G)*V|0,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,X=(X|X<<8)&16711935,X=(X|X<<4)&252645135,X=(X|X<<2)&858993459,X=(X|X<<1)&1431655765,z|X<<1}function P(z){var X=z,D=z;do(X.x<D.x||X.x===D.x&&X.y<D.y)&&(D=X),X=X.next;while(X!==z);return D}function M(z,X,D,G,V,W,U,$){return(V-U)*(X-$)>=(z-U)*(W-$)&&(z-U)*(G-$)>=(D-U)*(X-$)&&(D-U)*(W-$)>=(V-U)*(G-$)}function E(z,X){return z.next.i!==X.i&&z.prev.i!==X.i&&!O(z,X)&&(b(z,X)&&b(X,z)&&I(z,X)&&(w(z.prev,z,X.prev)||w(z,X.prev,X))||R(z,X)&&w(z.prev,z,z.next)>0&&w(X.prev,X,X.next)>0)}function w(z,X,D){return(X.y-z.y)*(D.x-X.x)-(X.x-z.x)*(D.y-X.y)}function R(z,X){return z.x===X.x&&z.y===X.y}function A(z,X,D,G){var V=F(w(z,X,D)),W=F(w(z,X,G)),U=F(w(D,G,z)),$=F(w(D,G,X));return!!(V!==W&&U!==$||V===0&&L(z,D,X)||W===0&&L(z,G,X)||U===0&&L(D,z,G)||$===0&&L(D,X,G))}function L(z,X,D){return X.x<=Math.max(z.x,D.x)&&X.x>=Math.min(z.x,D.x)&&X.y<=Math.max(z.y,D.y)&&X.y>=Math.min(z.y,D.y)}function F(z){return z>0?1:z<0?-1:0}function O(z,X){var D=z;do{if(D.i!==z.i&&D.next.i!==z.i&&D.i!==X.i&&D.next.i!==X.i&&A(D,D.next,z,X))return!0;D=D.next}while(D!==z);return!1}function b(z,X){return w(z.prev,z,z.next)<0?w(z,X,z.next)>=0&&w(z,z.prev,X)>=0:w(z,X,z.prev)<0||w(z,z.next,X)<0}function I(z,X){var D=z,G=!1,V=(z.x+X.x)/2,W=(z.y+X.y)/2;do D.y>W!=D.next.y>W&&D.next.y!==D.y&&V<(D.next.x-D.x)*(W-D.y)/(D.next.y-D.y)+D.x&&(G=!G),D=D.next;while(D!==z);return G}function B(z,X){var D=new Y(z.i,z.x,z.y),G=new Y(X.i,X.x,X.y),V=z.next,W=X.prev;return z.next=X,X.prev=z,D.next=V,V.prev=D,G.next=D,D.prev=G,W.next=G,G.prev=W,G}function N(z,X,D,G){var V=new Y(z,X,D);return G?(V.next=G.next,V.prev=G,G.next.prev=V,G.next=V):(V.prev=V,V.next=V),V}function k(z){z.next.prev=z.prev,z.prev.next=z.next,z.prevZ&&(z.prevZ.nextZ=z.nextZ),z.nextZ&&(z.nextZ.prevZ=z.prevZ)}function Y(z,X,D){this.i=z,this.x=X,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(z,X,D,G){var V=X&&X.length,W=V?X[0]*D:z.length,U=Math.abs(H(z,0,W,D));if(V)for(var $=0,K=X.length;$<K;$++){var Z=X[$]*D,J=$<K-1?X[$+1]*D:z.length;U-=Math.abs(H(z,Z,J,D))}var Q=0;for($=0;$<G.length;$+=3){var j=G[$]*D,_=G[$+1]*D,q=G[$+2]*D;Q+=Math.abs((z[j]-z[q])*(z[_+1]-z[j+1])-(z[j]-z[_])*(z[q+1]-z[j+1]))}return U===0&&Q===0?0:Math.abs((Q-U)/U)};function H(z,X,D,G){for(var V=0,W=X,U=D-G;W<D;W+=G)V+=(z[U]-z[W])*(z[W+1]+z[U+1]),U=W;return V}T.flatten=function(z){for(var X=z[0][0].length,D={vertices:[],holes:[],dimensions:X},G=0,V=0;V<z.length;V++){for(var W=0;W<z[V].length;W++)for(var U=0;U<X;U++)D.vertices.push(z[V][W][U]);V>0&&(G+=z[V-1].length,D.holes.push(G))}return D},r.exports=T},13829:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o){o===void 0&&(o=new d);for(var a=1/0,n=1/0,u=-a,c=-n,l,v=0;v<f.points.length;v++)l=f.points[v],a=Math.min(a,l.x),n=Math.min(n,l.y),u=Math.max(u,l.x),c=Math.max(c,l.y);return o.x=a,o.y=n,o.width=u-a,o.height=c-n,o};r.exports=x},26173:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=[]);for(var x=0;x<i.points.length;x++)d.push(i.points[x].x),d.push(i.points[x].y);return d};r.exports=T},9564:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=i(23031),f=i(30052),o=function(a,n,u,c){c===void 0&&(c=[]);var l=a.points,v=f(a);!n&&u>0&&(n=v/u);for(var p=0;p<n;p++)for(var g=v*(p/n),m=0,C=0;C<l.length;C++){var P=l[C],M=l[(C+1)%l.length],E=new x(P.x,P.y,M.x,M.y),w=d(E);if(g<m||g>m+w){m+=w;continue}var R=E.getPoint((g-m)/w);c.push(R);break}return c};r.exports=o},30052:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=i(23031),f=function(o){for(var a=o.points,n=0,u=0;u<a.length;u++){var c=a[u],l=a[(u+1)%a.length],v=new x(c.x,c.y,l.x,l.y);n+=d(v)}return n};r.exports=f},25717:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(63814),f=i(9564),o=i(23777),a=new d({initialize:function(u){this.type=o.POLYGON,this.area=0,this.points=[],u&&this.setTo(u)},contains:function(n,u){return x(this,n,u)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var u,c=0;c<n.length;c++)u={x:0,y:0},typeof n[c]=="number"||typeof n[c]=="string"?(u.x=parseFloat(n[c]),u.y=parseFloat(n[c+1]),c++):Array.isArray(n[c])?(u.x=n[c][0],u.y=n[c][1]):(u.x=n[c].x,u.y=n[c].y),this.points.push(u);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,u,c,l=0;l<this.points.length-1;l++)u=this.points[l],c=this.points[l+1],n+=(c.x-u.x)*(u.y+c.y);return u=this.points[0],c=this.points[this.points.length-1],n+=(u.x-c.x)*(c.y+u.y),this.area=-n*.5,this.area},getPoints:function(n,u,c){return f(this,n,u,c)}});r.exports=a},8133:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.points.reverse(),i};r.exports=T},29524:r=>{function T(a,n){var u=a.x-n.x,c=a.y-n.y;return u*u+c*c}function i(a,n,u){var c=n.x,l=n.y,v=u.x-c,p=u.y-l;if(v!==0||p!==0){var g=((a.x-c)*v+(a.y-l)*p)/(v*v+p*p);g>1?(c=u.x,l=u.y):g>0&&(c+=v*g,l+=p*g)}return v=a.x-c,p=a.y-l,v*v+p*p}function d(a,n){for(var u=a[0],c=[u],l,v=1,p=a.length;v<p;v++)l=a[v],T(l,u)>n&&(c.push(l),u=l);return u!==l&&c.push(l),c}function x(a,n,u,c,l){for(var v=c,p,g=n+1;g<u;g++){var m=i(a[g],a[n],a[u]);m>v&&(p=g,v=m)}v>c&&(p-n>1&&x(a,n,p,c,l),l.push(a[p]),u-p>1&&x(a,p,u,c,l))}function f(a,n){var u=a.length-1,c=[a[0]];return x(a,0,u,n,c),c.push(a[u]),c}var o=function(a,n,u){n===void 0&&(n=1),u===void 0&&(u=!1);var c=a.points;if(c.length>2){var l=n*n;u||(c=d(c,l)),a.setTo(f(c,l))}return a};r.exports=o},5469:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(d,x){return d[0]=x[0],d[1]=x[1],d},i=function(d){var x,f=[],o=d.points;for(x=0;x<o.length;x++)f.push([o[x].x,o[x].y]);var a=[];for(f.length>0&&a.push(T([0,0],f[0])),x=0;x<f.length-1;x++){var n=f[x],u=f[x+1],c=n[0],l=n[1],v=u[0],p=u[1];a.push([.85*c+.15*v,.85*l+.15*p]),a.push([.15*c+.85*v,.15*l+.85*p])}return f.length>1&&a.push(T([0,0],f[f.length-1])),d.setTo(a)};r.exports=i},24709:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){for(var f=i.points,o=0;o<f.length;o++)f[o].x+=d,f[o].y+=x;return i};r.exports=T},58423:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25717);d.Clone=i(12306),d.Contains=i(63814),d.ContainsPoint=i(99338),d.Earcut=i(94811),d.GetAABB=i(13829),d.GetNumberArray=i(26173),d.GetPoints=i(9564),d.Perimeter=i(30052),d.Reverse=i(8133),d.Simplify=i(29524),d.Smooth=i(5469),d.Translate=i(24709),r.exports=d},62224:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.width*i.height};r.exports=T},98615:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i};r.exports=T},31688:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i};r.exports=T},67502:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x=d-i.width/2,i.y=x-i.height/2,i};r.exports=T},65085:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f){return new d(f.x,f.y,f.width,f.height)};r.exports=x},37303:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.width<=0||i.height<=0?!1:i.x<=d&&i.x+i.width>=d&&i.y<=x&&i.y+i.height>=x};r.exports=T},96553:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37303),x=function(f,o){return d(f,o.x,o.y)};r.exports=x},70273:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.width*d.height>i.width*i.height?!1:d.x>i.x&&d.x<i.right&&d.right>i.x&&d.right<i.right&&d.y>i.y&&d.y<i.bottom&&d.bottom>i.y&&d.bottom<i.bottom};r.exports=T},43459:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x,i.y,i.width,i.height)};r.exports=T},77493:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=[]),d.push({x:i.x,y:i.y}),d.push({x:i.right,y:i.y}),d.push({x:i.right,y:i.bottom}),d.push({x:i.x,y:i.bottom}),d};r.exports=T},9219:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x===d.x&&i.y===d.y&&i.width===d.width&&i.height===d.height};r.exports=T},53751:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8249),x=function(f,o){var a=d(f);return a<d(o)?f.setSize(o.height*a,o.height):f.setSize(o.width,o.width/a),f.setPosition(o.centerX-f.width/2,o.centerY-f.height/2)};r.exports=x},16088:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8249),x=function(f,o){var a=d(f);return a>d(o)?f.setSize(o.height*a,o.height):f.setSize(o.width,o.width/a),f.setPosition(o.centerX-f.width/2,o.centerY-f.height/2)};r.exports=x},80774:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i};r.exports=T},83859:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i.width=Math.floor(i.width),i.height=Math.floor(i.height),i};r.exports=T},19217:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=i(36383),f=function(o,a){if(a===void 0&&(a=new d),o.length===0)return a;for(var n=Number.MAX_VALUE,u=Number.MAX_VALUE,c=x.MIN_SAFE_INTEGER,l=x.MIN_SAFE_INTEGER,v,p,g,m=0;m<o.length;m++)v=o[m],Array.isArray(v)?(p=v[0],g=v[1]):(p=v.x,g=v.y),n=Math.min(n,p),u=Math.min(u,g),c=Math.max(c,p),l=Math.max(l,g);return a.x=n,a.y=u,a.width=c-n,a.height=l-u,a};r.exports=f},9477:(r,T,i)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o,a,n,u){return u===void 0&&(u=new d),u.setTo(Math.min(f,a),Math.min(o,n),Math.abs(f-a),Math.abs(o-n))};r.exports=x},8249:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.height===0?NaN:i.width/i.height};r.exports=T},27165:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.x=f.centerX,o.y=f.centerY,o};r.exports=x},20812:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13019),x=i(2141),f=function(o,a,n){if(n===void 0&&(n=new x),a<=0||a>=1)return n.x=o.x,n.y=o.y,n;var u=d(o)*a;return a>.5?(u-=o.width+o.height,u<=o.width?(n.x=o.right-u,n.y=o.bottom):(n.x=o.x,n.y=o.bottom-(u-o.width))):u<=o.width?(n.x=o.x+u,n.y=o.y):(n.x=o.right,n.y=o.y+(u-o.width)),n};r.exports=f},34819:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20812),x=i(13019),f=function(o,a,n,u){u===void 0&&(u=[]),!a&&n>0&&(a=x(o)/n);for(var c=0;c<a;c++){var l=c/a;u.push(d(o,l))}return u};r.exports=f},51313:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.x=f.width,o.y=f.height,o};r.exports=x},86091:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(67502),x=function(f,o,a){var n=f.centerX,u=f.centerY;return f.setSize(f.width+o*2,f.height+a*2),d(f,n,u)};r.exports=x},53951:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=i(59996),f=function(o,a,n){return n===void 0&&(n=new d),x(o,a)?(n.x=Math.max(o.x,a.x),n.y=Math.max(o.y,a.y),n.width=Math.min(o.right,a.right)-n.x,n.height=Math.min(o.bottom,a.bottom)-n.y):n.setEmpty(),n};r.exports=f},14649:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13019),x=i(2141),f=function(o,a,n,u){if(u===void 0&&(u=[]),!a&&!n)return u;a?n=Math.round(d(o)/a):a=d(o)/n;for(var c=o.x,l=o.y,v=0,p=0;p<n;p++)switch(u.push(new x(c,l)),v){case 0:c+=a,c>=o.right&&(v=1,l+=c-o.right,c=o.right);break;case 1:l+=a,l>=o.bottom&&(v=2,c-=l-o.bottom,l=o.bottom);break;case 2:c-=a,c<=o.left&&(v=3,l-=o.left-c,c=o.left);break;case 3:l-=a,l<=o.top&&(v=0,l=o.top);break}return u};r.exports=f},33595:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){for(var x=i.x,f=i.right,o=i.y,a=i.bottom,n=0;n<d.length;n++)x=Math.min(x,d[n].x),f=Math.max(f,d[n].x),o=Math.min(o,d[n].y),a=Math.max(a,d[n].y);return i.x=x,i.y=o,i.width=f-x,i.height=a-o,i};r.exports=T},20074:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=Math.min(i.x,d.x),f=Math.max(i.right,d.right);i.x=x,i.width=f-x;var o=Math.min(i.y,d.y),a=Math.max(i.bottom,d.bottom);return i.y=o,i.height=a-o,i};r.exports=T},92171:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=Math.min(i.x,d),o=Math.max(i.right,d);i.x=f,i.width=o-f;var a=Math.min(i.y,x),n=Math.max(i.bottom,x);return i.y=a,i.height=n-a,i};r.exports=T},42981:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x+=d,i.y+=x,i};r.exports=T},46907:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x+=d.x,i.y+=d.y,i};r.exports=T},60170:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x<d.right&&i.right>d.x&&i.y<d.bottom&&i.bottom>d.y};r.exports=T},13019:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return 2*(i.width+i.height)};r.exports=T},85133:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(39506),f=function(o,a,n){n===void 0&&(n=new d),a=x(a);var u=Math.sin(a),c=Math.cos(a),l=c>0?o.width/2:o.width/-2,v=u>0?o.height/2:o.height/-2;return Math.abs(l*u)<Math.abs(v*c)?v=l*u/c:l=v*c/u,n.x=l+o.centerX,n.y=v+o.centerY,n};r.exports=f},26597:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.x=f.x+Math.random()*f.width,o.y=f.y+Math.random()*f.height,o};r.exports=x},86470:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),x=i(70273),f=i(2141),o=function(a,n,u){if(u===void 0&&(u=new f),x(a,n))switch(d(0,3)){case 0:u.x=a.x+Math.random()*(n.right-a.x),u.y=a.y+Math.random()*(n.top-a.y);break;case 1:u.x=n.x+Math.random()*(a.right-n.x),u.y=n.bottom+Math.random()*(a.bottom-n.bottom);break;case 2:u.x=a.x+Math.random()*(n.x-a.x),u.y=n.y+Math.random()*(a.bottom-n.y);break;case 3:u.x=n.right+Math.random()*(a.right-n.right),u.y=a.y+Math.random()*(n.bottom-a.y);break}return u};r.exports=o},87841:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(37303),f=i(20812),o=i(34819),a=i(23777),n=i(23031),u=i(26597),c=new d({initialize:function(v,p,g,m){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=a.RECTANGLE,this.x=v,this.y=p,this.width=g,this.height=m},contains:function(l,v){return x(this,l,v)},getPoint:function(l,v){return f(this,l,v)},getPoints:function(l,v,p){return o(this,l,v,p)},getRandomPoint:function(l){return u(this,l)},setTo:function(l,v,p,g){return this.x=l,this.y=v,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,v){return v===void 0&&(v=l),this.x=l,this.y=v,this},setSize:function(l,v){return v===void 0&&(v=l),this.width=l,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new n),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new n),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new n),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new n),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});r.exports=c},94845:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.width===d.width&&i.height===d.height};r.exports=T},31730:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x===void 0&&(x=d),i.width*=d,i.height*=x,i};r.exports=T},36899:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=function(f,o,a){a===void 0&&(a=new d);var n=Math.min(f.x,o.x),u=Math.min(f.y,o.y),c=Math.max(f.right,o.right)-n,l=Math.max(f.bottom,o.bottom)-u;return a.setTo(n,u,c,l)};r.exports=x},93232:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841);d.Area=i(62224),d.Ceil=i(98615),d.CeilAll=i(31688),d.CenterOn=i(67502),d.Clone=i(65085),d.Contains=i(37303),d.ContainsPoint=i(96553),d.ContainsRect=i(70273),d.CopyFrom=i(43459),d.Decompose=i(77493),d.Equals=i(9219),d.FitInside=i(53751),d.FitOutside=i(16088),d.Floor=i(80774),d.FloorAll=i(83859),d.FromPoints=i(19217),d.FromXY=i(9477),d.GetAspectRatio=i(8249),d.GetCenter=i(27165),d.GetPoint=i(20812),d.GetPoints=i(34819),d.GetSize=i(51313),d.Inflate=i(86091),d.Intersection=i(53951),d.MarchingAnts=i(14649),d.MergePoints=i(33595),d.MergeRect=i(20074),d.MergeXY=i(92171),d.Offset=i(42981),d.OffsetPoint=i(46907),d.Overlaps=i(60170),d.Perimeter=i(13019),d.PerimeterPoint=i(85133),d.Random=i(26597),d.RandomOutside=i(86470),d.SameDimensions=i(94845),d.Scale=i(31730),d.Union=i(36899),r.exports=d},41658:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=i.x1,x=i.y1,f=i.x2,o=i.y2,a=i.x3,n=i.y3;return Math.abs(((a-d)*(o-x)-(f-d)*(n-x))/2)};r.exports=T},39208:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),x=function(f,o,a){var n=a*(Math.sqrt(3)/2),u=f,c=o,l=f+a/2,v=o+n,p=f-a/2,g=o+n;return new d(u,c,l,v,p,g)};r.exports=x},39545:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(94811),x=i(16483),f=function(o,a,n,u,c){a===void 0&&(a=null),n===void 0&&(n=1),u===void 0&&(u=1),c===void 0&&(c=[]);for(var l=d(o,a),v,p,g,m,C,P,M,E,w,R=0;R<l.length;R+=3)v=l[R],p=l[R+1],g=l[R+2],m=o[v*2]*n,C=o[v*2+1]*u,P=o[p*2]*n,M=o[p*2+1]*u,E=o[g*2]*n,w=o[g*2+1]*u,c.push(new x(m,C,P,M,E,w));return c};r.exports=f},90301:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),x=function(f,o,a,n){n===void 0&&(n=a);var u=f,c=o,l=f,v=o-n,p=f+a,g=o;return new d(u,c,l,v,p,g)};r.exports=x},23707:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97523),x=i(13584),f=function(o,a,n,u){u===void 0&&(u=d);var c=u(o),l=a-c.x,v=n-c.y;return x(o,l,v)};r.exports=f},97523:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){return o===void 0&&(o=new d),o.x=(f.x1+f.x2+f.x3)/3,o.y=(f.y1+f.y2+f.y3)/3,o};r.exports=x},24951:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099);function x(o,a,n,u){return o*u-a*n}var f=function(o,a){a===void 0&&(a=new d);var n=o.x3,u=o.y3,c=o.x1-n,l=o.y1-u,v=o.x2-n,p=o.y2-u,g=2*x(c,l,v,p),m=x(l,c*c+l*l,p,v*v+p*p),C=x(c,c*c+l*l,v,v*v+p*p);return a.x=n-m/g,a.y=u+C/g,a};r.exports=f},85614:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),x=function(f,o){o===void 0&&(o=new d);var a=f.x1,n=f.y1,u=f.x2,c=f.y2,l=f.x3,v=f.y3,p=u-a,g=c-n,m=l-a,C=v-n,P=p*(a+u)+g*(n+c),M=m*(a+l)+C*(n+v),E=2*(p*(v-c)-g*(l-u)),w,R;if(Math.abs(E)<1e-6){var A=Math.min(a,u,l),L=Math.min(n,c,v);w=(Math.max(a,u,l)-A)*.5,R=(Math.max(n,c,v)-L)*.5,o.x=A+w,o.y=L+R,o.radius=Math.sqrt(w*w+R*R)}else o.x=(C*P-g*M)/E,o.y=(p*M-m*P)/E,w=o.x-a,R=o.y-n,o.radius=Math.sqrt(w*w+R*R);return o};r.exports=x},74422:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),x=function(f){return new d(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)};r.exports=x},10690:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=i.x3-i.x1,o=i.y3-i.y1,a=i.x2-i.x1,n=i.y2-i.y1,u=d-i.x1,c=x-i.y1,l=f*f+o*o,v=f*a+o*n,p=f*u+o*c,g=a*a+n*n,m=a*u+n*c,C=l*g-v*v,P=C===0?0:1/C,M=(g*p-v*m)*P,E=(l*m-v*p)*P;return M>=0&&E>=0&&M+E<1};r.exports=T},48653:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x===void 0&&(x=!1),f===void 0&&(f=[]);for(var o=i.x3-i.x1,a=i.y3-i.y1,n=i.x2-i.x1,u=i.y2-i.y1,c=o*o+a*a,l=o*n+a*u,v=n*n+u*u,p=c*v-l*l,g=p===0?0:1/p,m,C,P,M,E,w,R=i.x1,A=i.y1,L=0;L<d.length&&(P=d[L].x-R,M=d[L].y-A,E=o*P+a*M,w=n*P+u*M,m=(v*E-l*w)*g,C=(c*w-l*E)*g,!(m>=0&&C>=0&&m+C<1&&(f.push({x:d[L].x,y:d[L].y}),x)));L++);return f};r.exports=T},96006:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10690),x=function(f,o){return d(f,o.x,o.y)};r.exports=x},71326:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.setTo(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)};r.exports=T},71694:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=[]),d.push({x:i.x1,y:i.y1}),d.push({x:i.x2,y:i.y2}),d.push({x:i.x3,y:i.y3}),d};r.exports=T},33522:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.x1===d.x1&&i.y1===d.y1&&i.x2===d.x2&&i.y2===d.y2&&i.x3===d.x3&&i.y3===d.y3};r.exports=T},20437:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=i(35001),f=function(o,a,n){n===void 0&&(n=new d);var u=o.getLineA(),c=o.getLineB(),l=o.getLineC();if(a<=0||a>=1)return n.x=u.x1,n.y=u.y1,n;var v=x(u),p=x(c),g=x(l),m=v+p+g,C=m*a,P=0;return C<v?(P=C/v,n.x=u.x1+(u.x2-u.x1)*P,n.y=u.y1+(u.y2-u.y1)*P):C>v+p?(C-=v+p,P=C/g,n.x=l.x1+(l.x2-l.x1)*P,n.y=l.y1+(l.y2-l.y1)*P):(C-=v,P=C/p,n.x=c.x1+(c.x2-c.x1)*P,n.y=c.y1+(c.y2-c.y1)*P),n};r.exports=f},80672:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=i(2141),f=function(o,a,n,u){u===void 0&&(u=[]);var c=o.getLineA(),l=o.getLineB(),v=o.getLineC(),p=d(c),g=d(l),m=d(v),C=p+g+m;!a&&n>0&&(a=C/n);for(var P=0;P<a;P++){var M=C*(P/a),E=0,w=new x;M<p?(E=M/p,w.x=c.x1+(c.x2-c.x1)*E,w.y=c.y1+(c.y2-c.y1)*E):M>p+g?(M-=p+g,E=M/m,w.x=v.x1+(v.x2-v.x1)*E,w.y=v.y1+(v.y2-v.y1)*E):(M-=p,E=M/g,w.x=l.x1+(l.x2-l.x1)*E,w.y=l.y1+(l.y2-l.y1)*E),u.push(w)}return u};r.exports=f},39757:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141);function x(o,a,n,u){var c=o-n,l=a-u,v=c*c+l*l;return Math.sqrt(v)}var f=function(o,a){a===void 0&&(a=new d);var n=o.x1,u=o.y1,c=o.x2,l=o.y2,v=o.x3,p=o.y3,g=x(v,p,c,l),m=x(n,u,v,p),C=x(c,l,n,u),P=g+m+C;return a.x=(n*g+c*m+v*C)/P,a.y=(u*g+l*m+p*C)/P,a};r.exports=f},13584:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i.x1+=d,i.y1+=x,i.x2+=d,i.y2+=x,i.x3+=d,i.y3+=x,i};r.exports=T},1376:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),x=function(f){var o=f.getLineA(),a=f.getLineB(),n=f.getLineC();return d(o)+d(a)+d(n)};r.exports=x},90260:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),x=function(f,o){o===void 0&&(o=new d);var a=f.x2-f.x1,n=f.y2-f.y1,u=f.x3-f.x1,c=f.y3-f.y1,l=Math.random(),v=Math.random();return l+v>=1&&(l=1-l,v=1-v),o.x=f.x1+(a*l+u*v),o.y=f.y1+(n*l+c*v),o};r.exports=x},52172:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99614),x=i(39757),f=function(o,a){var n=x(o);return d(o,n.x,n.y,a)};r.exports=f},49907:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99614),x=function(f,o,a){return d(f,o.x,o.y,a)};r.exports=x},99614:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=Math.cos(f),a=Math.sin(f),n=i.x1-d,u=i.y1-x;return i.x1=n*o-u*a+d,i.y1=n*a+u*o+x,n=i.x2-d,u=i.y2-x,i.x2=n*o-u*a+d,i.y2=n*a+u*o+x,n=i.x3-d,u=i.y3-x,i.x3=n*o-u*a+d,i.y3=n*a+u*o+x,i};r.exports=T},16483:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(10690),f=i(20437),o=i(80672),a=i(23777),n=i(23031),u=i(90260),c=new d({initialize:function(v,p,g,m,C,P){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=0),P===void 0&&(P=0),this.type=a.TRIANGLE,this.x1=v,this.y1=p,this.x2=g,this.y2=m,this.x3=C,this.y3=P},contains:function(l,v){return x(this,l,v)},getPoint:function(l,v){return f(this,l,v)},getPoints:function(l,v,p){return o(this,l,v,p)},getRandomPoint:function(l){return u(this,l)},setTo:function(l,v,p,g,m,C){return l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),C===void 0&&(C=0),this.x1=l,this.y1=v,this.x2=p,this.y2=g,this.x3=m,this.y3=C,this},getLineA:function(l){return l===void 0&&(l=new n),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new n),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new n),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-l:v=this.x3-l,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-l:v=this.x3-l,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-l:v=this.y3-l,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-l:v=this.y3-l,this.y1-=v,this.y2-=v,this.y3-=v}}});r.exports=c},84435:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483);d.Area=i(41658),d.BuildEquilateral=i(39208),d.BuildFromPolygon=i(39545),d.BuildRight=i(90301),d.CenterOn=i(23707),d.Centroid=i(97523),d.CircumCenter=i(24951),d.CircumCircle=i(85614),d.Clone=i(74422),d.Contains=i(10690),d.ContainsArray=i(48653),d.ContainsPoint=i(96006),d.CopyFrom=i(71326),d.Decompose=i(71694),d.Equals=i(33522),d.GetPoint=i(20437),d.GetPoints=i(80672),d.InCenter=i(39757),d.Perimeter=i(1376),d.Offset=i(13584),d.Random=i(90260),d.Rotate=i(52172),d.RotateAroundPoint=i(49907),d.RotateAroundXY=i(99614),r.exports=d},74457:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return{gameObject:i,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};r.exports=T},84409:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return function(x,f,o,a){var n=i.getPixelAlpha(f,o,a.texture.key,a.frame.name);return n&&n>=d}};r.exports=T},7003:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(93301),f=i(50792),o=i(8214),a=i(8443),n=i(78970),u=i(85098),c=i(42515),l=i(36210),v=i(61340),p=i(85955),g=new d({initialize:function(C,P){this.game=C,this.scaleManager,this.canvas,this.config=P,this.enabled=!0,this.events=new f,this.isOver=!0,this.defaultCursor="",this.keyboard=P.inputKeyboard?new n(this):null,this.mouse=P.inputMouse?new u(this):null,this.touch=P.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=P.inputActivePointers,P.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var M=0;M<=this.pointersTotal;M++){var E=new c(this,M);E.smoothFactor=P.inputSmoothFactor,this.pointers.push(E)}this.mousePointer=P.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(a.BOOT,this.boot,this)},boot:function(){var m=this.game,C=m.events;this.canvas=m.canvas,this.scaleManager=m.scale,this.events.emit(o.MANAGER_BOOT),C.on(a.PRE_RENDER,this.preRender,this),C.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(o.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(o.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,C=this.game.loop.delta,P=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(o.MANAGER_UPDATE);for(var M=0;M<P.length;M++){var E=P[M];if(E.sys.input&&E.sys.input.updatePoll(m,C)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var C=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var P=0;P<m;P++){var M=this.pointers.length,E=new c(this,M);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,C.push(E)}return C},updateInputPlugins:function(m,C){var P=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var M=0;M<P.length;M++){var E=P[M];if(E.sys.input){var w=E.sys.input.update(m,C);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var C=this.pointers,P=[],M=0;M<m.changedTouches.length;M++)for(var E=m.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=C[w];if(!R.active){R.touchstart(E,m),this.activePointer=R,P.push(R);break}}this.updateInputPlugins(x.TOUCH_START,P)},onTouchMove:function(m){for(var C=this.pointers,P=[],M=0;M<m.changedTouches.length;M++)for(var E=m.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=C[w];if(R.active&&R.identifier===E.identifier){var A=document.elementFromPoint(E.clientX,E.clientY),L=A===this.canvas;!this.isOver&&L?this.setCanvasOver(m):this.isOver&&!L&&this.setCanvasOut(m),this.isOver&&(R.touchmove(E,m),this.activePointer=R,P.push(R));break}}this.updateInputPlugins(x.TOUCH_MOVE,P)},onTouchEnd:function(m){for(var C=this.pointers,P=[],M=0;M<m.changedTouches.length;M++)for(var E=m.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=C[w];if(R.active&&R.identifier===E.identifier){R.touchend(E,m),P.push(R);break}}this.updateInputPlugins(x.TOUCH_END,P)},onTouchCancel:function(m){for(var C=this.pointers,P=[],M=0;M<m.changedTouches.length;M++)for(var E=m.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=C[w];if(R.active&&R.identifier===E.identifier){R.touchcancel(E,m),P.push(R);break}}this.updateInputPlugins(x.TOUCH_CANCEL,P)},onMouseDown:function(m){var C=this.mousePointer;C.down(m),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var C=this.mousePointer;C.move(m),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var C=this.mousePointer;C.up(m),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var C=this.mousePointer;C.wheel(m),this.activePointer=C,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(o.POINTERLOCK_CHANGE,m,C)},inputCandidate:function(m,C){var P=m.input;if(!P||!P.enabled||!m.willRender(C))return!1;var M=!0,E=m.parentContainer;if(E)do{if(!E.willRender(C)){M=!1;break}E=E.parentContainer}while(E);return M},hitTest:function(m,C,P,M){M===void 0&&(M=this._tempHitTest);var E=this._tempPoint,w=P.scrollX,R=P.scrollY;M.length=0;var A=m.x,L=m.y;P.getWorldPoint(A,L,E),m.worldX=E.x,m.worldY=E.y;for(var F={x:0,y:0},O=this._tempMatrix,b=this._tempMatrix2,I=0;I<C.length;I++){var B=C[I];if(!!this.inputCandidate(B,P)){var N=E.x+w*B.scrollFactorX-w,k=E.y+R*B.scrollFactorY-R;B.parentContainer?(B.getWorldTransformMatrix(O,b),O.applyInverse(N,k,F)):p(N,k,B.x,B.y,B.rotation,B.scaleX,B.scaleY,F),this.pointWithinHitArea(B,F.x,F.y)&&M.push(B)}}return M},pointWithinHitArea:function(m,C,P){C+=m.displayOriginX,P+=m.displayOriginY;var M=m.input;return M&&M.hitAreaCallback(M.hitArea,C,P,m)?(M.localX=C,M.localY=P,!0):!1},pointWithinInteractiveObject:function(m,C,P){return m.hitArea?(C+=m.gameObject.displayOriginX,P+=m.gameObject.displayOriginY,m.localX=C,m.localY=P,m.hitAreaCallback(m.hitArea,C,P,m)):!1},transformPointer:function(m,C,P,M){var E=m.position,w=m.prevPosition;w.x=E.x,w.y=E.y;var R=this.scaleManager.transformX(C),A=this.scaleManager.transformY(P),L=m.smoothFactor;!M||L===0?(E.x=R,E.y=A):(E.x=R*L+w.x*(1-L),E.y=A*L+w.y*(1-L))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});r.exports=g},48205:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),x=i(87902),f=i(83419),o=i(93301),a=i(74457),n=i(84409),u=i(20339),c=i(8497),l=i(81154),v=i(8214),p=i(50792),g=i(95540),m=i(23777),C=i(89639),P=i(41212),M=i(37277),E=i(87841),w=i(37303),R=i(44594),A=i(16483),L=i(10690),F=new f({Extends:p,initialize:function(b){p.call(this),this.scene=b,this.systems=b.sys,this.settings=b.sys.settings,this.manager=b.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var I={cancelled:!1};this._eventContainer={stopPropagation:function(){I.cancelled=!0}},this._eventData=I,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,b.sys.events.once(R.BOOT,this.boot,this),b.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var O=this.systems.events;O.on(R.TRANSITION_START,this.transitionIn,this),O.on(R.TRANSITION_OUT,this.transitionOut,this),O.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(R.PRE_UPDATE,this.preUpdate,this),O.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(O){this.isActive()&&this.emit(v.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(v.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var O=this._pendingRemoval,b=this._pendingInsertion,I=O.length,B=b.length;if(!(I===0&&B===0)){for(var N=this._list,k=0;k<I;k++){var Y=O[k],H=N.indexOf(Y);H>-1&&(N.splice(H,1),this.clear(Y,!0))}this._pendingRemoval.length=0,this._list=N.concat(b.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(O,b){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,O,b),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var I,B=this.manager,N=B.pointers,k=B.pointersTotal;for(I=0;I<k;I++)N[I].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=b,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var H=!1;for(I=0;I<k;I++){var z=0,X=N[I];this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),z+=this.processOverOutEvents(X),this.getDragState(X)===2&&this.processDragThresholdEvent(X,O),z>0&&(H=!0)}return H},update:function(O,b){if(!this.isActive())return!1;for(var I=b.length,B=!1,N=0;N<I;N++){var k=0,Y=b[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case o.MOUSE_DOWN:k+=this.processDragDownEvent(Y),k+=this.processDownEvents(Y),k+=this.processOverOutEvents(Y);break;case o.MOUSE_UP:k+=this.processDragUpEvent(Y),k+=this.processUpEvents(Y),k+=this.processOverOutEvents(Y);break;case o.TOUCH_START:k+=this.processDragDownEvent(Y),k+=this.processDownEvents(Y),k+=this.processOverEvents(Y);break;case o.TOUCH_END:case o.TOUCH_CANCEL:k+=this.processDragUpEvent(Y),k+=this.processUpEvents(Y),k+=this.processOutEvents(Y);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:k+=this.processDragMoveEvent(Y),k+=this.processMoveEvents(Y),k+=this.processOverOutEvents(Y);break;case o.MOUSE_WHEEL:k+=this.processWheelEvent(Y);break}k>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(O,b){b===void 0&&(b=!1),this.disable(O);var I=O.input;I&&(this.removeDebug(O),this.manager.resetCursor(I),I.gameObject=void 0,I.target=void 0,I.hitArea=void 0,I.hitAreaCallback=void 0,I.callbackContext=void 0,O.input=null),b||this.queueForRemoval(O);var B=this._draggable.indexOf(O);return B>-1&&this._draggable.splice(B,1),O},disable:function(O){var b=O.input;b&&(b.enabled=!1,b.dragState=0);for(var I=this._drag,B=this._over,N=this.manager,k=0,Y;k<N.pointersTotal;k++)Y=I[k].indexOf(O),Y>-1&&I[k].splice(Y,1),Y=B[k].indexOf(O),Y>-1&&B[k].splice(Y,1);return this},enable:function(O,b,I,B){return B===void 0&&(B=!1),O.input?O.input.enabled=!0:this.setHitArea(O,b,I),O.input&&B&&!O.input.dropZone&&(O.input.dropZone=B),this},hitTestPointer:function(O){for(var b=this.cameras.getCamerasBelowPointer(O),I=0;I<b.length;I++){for(var B=b[I],N=this.manager.hitTest(O,this._list,B),k=0;k<N.length;k++){var Y=N[k];Y.input.dropZone&&this._tempZones.push(Y)}if(N.length>0)return O.camera=B,N}return O.camera=b[0],[]},processDownEvents:function(O){var b=0,I=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var k=!1,Y=0;Y<I.length;Y++){var H=I[Y];if(!(!H.input||!H.input.enabled)){if(b++,H.emit(v.GAMEOBJECT_POINTER_DOWN,O,H.input.localX,H.input.localY,N),B.cancelled||!H.input||!H.input.enabled){k=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,O,H,N),B.cancelled||!H.input){k=!0;break}}}return!k&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,O,I):this.emit(v.POINTER_DOWN_OUTSIDE,O)),b},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,b){this._dragState[O.id]=b},processDragThresholdEvent:function(O,b){var I=!1,B=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&u(O.x,O.y,O.downX,O.downY)>=N||B>0&&b>=O.downTime+B)&&(I=!0),I)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var b=this._drag[O.id],I=0;I<b.length;I++){var B=b[I],N=B.input;N.dragState=2,N.dragStartX=B.x,N.dragStartY=B.y,N.dragStartXGlobal=O.worldX,N.dragStartYGlobal=O.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,B.emit(v.GAMEOBJECT_DRAG_START,O,N.dragX,N.dragY),this.emit(v.DRAG_START,O,B)}return this.setDragState(O,4),b.length},processDragDownEvent:function(O){var b=this._temp;if(this._draggable.length===0||b.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var I=[],B=0;B<b.length;B++){var N=b[B];N.input.draggable&&N.input.dragState===0&&I.push(N)}return I.length===0?(this.setDragState(O,0),0):(I.length>1&&(this.sortGameObjects(I,O),this.topOnly&&I.splice(1)),this._drag[O.id]=I,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var b=this._tempZones,I=this._drag[O.id],B=0;B<I.length;B++){var N=I[B],k=N.input,Y=k.target;if(Y){var H=b.indexOf(Y);H===0?(N.emit(v.GAMEOBJECT_DRAG_OVER,O,Y),this.emit(v.DRAG_OVER,O,N,Y)):H>0?(N.emit(v.GAMEOBJECT_DRAG_LEAVE,O,Y),this.emit(v.DRAG_LEAVE,O,N,Y),k.target=b[0],Y=k.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,Y),this.emit(v.DRAG_ENTER,O,N,Y)):(N.emit(v.GAMEOBJECT_DRAG_LEAVE,O,Y),this.emit(v.DRAG_LEAVE,O,N,Y),b[0]?(k.target=b[0],Y=k.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,Y),this.emit(v.DRAG_ENTER,O,N,Y)):k.target=null)}else!Y&&b[0]&&(k.target=b[0],Y=k.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,Y),this.emit(v.DRAG_ENTER,O,N,Y));var z,X;if(!N.parentContainer)z=O.worldX-k.dragX,X=O.worldY-k.dragY;else{var D=O.worldX-k.dragStartXGlobal,G=O.worldY-k.dragStartYGlobal,V=N.getParentRotation(),W=D*Math.cos(V)+G*Math.sin(V),U=G*Math.cos(V)-D*Math.sin(V);W*=1/N.parentContainer.scaleX,U*=1/N.parentContainer.scaleY,z=W+k.dragStartX,X=U+k.dragStartY}N.emit(v.GAMEOBJECT_DRAG,O,z,X),this.emit(v.DRAG,O,N,z,X)}return I.length},processDragUpEvent:function(O){for(var b=this._drag[O.id],I=0;I<b.length;I++){var B=b[I],N=B.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-B.displayOriginX,N.dragY=N.localY-B.displayOriginY;var k=!1,Y=N.target;Y&&(B.emit(v.GAMEOBJECT_DROP,O,Y),this.emit(v.DROP,O,B,Y),N.target=null,k=!0),B.input&&B.input.enabled&&(B.emit(v.GAMEOBJECT_DRAG_END,O,N.dragX,N.dragY,k),this.emit(v.DRAG_END,O,B,k))}}return this.setDragState(O,0),b.splice(0),0},processMoveEvents:function(O){var b=0,I=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var k=!1,Y=0;Y<I.length;Y++){var H=I[Y];if(!(!H.input||!H.input.enabled)){if(b++,H.emit(v.GAMEOBJECT_POINTER_MOVE,O,H.input.localX,H.input.localY,N),B.cancelled||!H.input||!H.input.enabled){k=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,O,H,N),B.cancelled||!H.input||!H.input.enabled){k=!0;break}if(this.topOnly)break}}return k||this.emit(v.POINTER_MOVE,O,I),b},processWheelEvent:function(O){var b=0,I=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var k=!1,Y=O.deltaX,H=O.deltaY,z=O.deltaZ,X=0;X<I.length;X++){var D=I[X];if(!(!D.input||!D.input.enabled)){if(b++,D.emit(v.GAMEOBJECT_POINTER_WHEEL,O,Y,H,z,N),B.cancelled||!D.input||!D.input.enabled){k=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,O,D,Y,H,z,N),B.cancelled||!D.input||!D.input.enabled){k=!0;break}}}return k||this.emit(v.POINTER_WHEEL,O,I,Y,H,z),b},processOverEvents:function(O){var b=this._temp,I=0,B=b.length,N=[];if(B>0){var k=this.manager,Y=this._eventData,H=this._eventContainer;Y.cancelled=!1;for(var z=!1,X=0;X<B;X++){var D=b[X];if(!(!D.input||!D.input.enabled)){if(N.push(D),k.setCursor(D.input),D.emit(v.GAMEOBJECT_POINTER_OVER,O,D.input.localX,D.input.localY,H),I++,Y.cancelled||!D.input||!D.input.enabled){z=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,D,H),Y.cancelled||!D.input||!D.input.enabled){z=!0;break}}}z||this.emit(v.POINTER_OVER,O,N)}return this._over[O.id]=N,I},processOutEvents:function(O){var b=this._over[O.id],I=0,B=b.length;if(B>0){var N=this.manager,k=this._eventData,Y=this._eventContainer;k.cancelled=!1;var H=!1;this.sortGameObjects(b,O);for(var z=0;z<B;z++){var X=b[z];if(X=b[z],!(!X.input||!X.input.enabled)){if(N.resetCursor(X.input),X.emit(v.GAMEOBJECT_POINTER_OUT,O,Y),I++,k.cancelled||!X.input||!X.input.enabled){H=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,X,Y),k.cancelled||!X.input||!X.input.enabled){H=!0;break}H||this.emit(v.POINTER_OUT,O,b)}}this._over[O.id]=[]}return I},processOverOutEvents:function(O){var b=this._temp,I,B,N=[],k=[],Y=[],H=this._over[O.id],z=this._drag[O.id],X=this.manager;for(I=0;I<H.length;I++)B=H[I],b.indexOf(B)===-1&&z.indexOf(B)===-1?N.push(B):Y.push(B);for(I=0;I<b.length;I++)B=b[I],H.indexOf(B)===-1&&k.push(B);var D=N.length,G=0,V=this._eventData,W=this._eventContainer;V.cancelled=!1;var U=!1;if(D>0){for(this.sortGameObjects(N,O),I=0;I<D;I++)if(B=N[I],!(!B.input||!B.input.enabled)){if(X.resetCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OUT,O,W),G++,V.cancelled||!B.input||!B.input.enabled){U=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,B,W),V.cancelled||!B.input||!B.input.enabled){U=!0;break}}U||this.emit(v.POINTER_OUT,O,N)}if(D=k.length,V.cancelled=!1,U=!1,D>0){for(this.sortGameObjects(k,O),I=0;I<D;I++)if(B=k[I],!(!B.input||!B.input.enabled)){if(X.setCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OVER,O,B.input.localX,B.input.localY,W),G++,V.cancelled||!B.input||!B.input.enabled){U=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,B,W),V.cancelled||!B.input||!B.input.enabled){U=!0;break}}U||this.emit(v.POINTER_OVER,O,k)}return H=Y.concat(k),this._over[O.id]=this.sortGameObjects(H,O),G},processUpEvents:function(O){var b=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var N=!1,k=0;k<b.length;k++){var Y=b[k];if(!(!Y.input||!Y.input.enabled)){if(Y.emit(v.GAMEOBJECT_POINTER_UP,O,Y.input.localX,Y.input.localY,B),I.cancelled||!Y.input||!Y.input.enabled){N=!0;break}if(this.emit(v.GAMEOBJECT_UP,O,Y,B),I.cancelled||!Y.input||!Y.input.enabled){N=!0;break}}}return!N&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,O,b):this.emit(v.POINTER_UP_OUTSIDE,O)),b.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,b){b===void 0&&(b=!0),Array.isArray(O)||(O=[O]);for(var I=0;I<O.length;I++){var B=O[I];B.input.draggable=b;var N=this._draggable.indexOf(B);b&&N===-1?this._draggable.push(B):!b&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var b=this.systems.textures;return n(b,O)},setHitArea:function(O,b,I){if(b===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var B=!1,N=!1,k=!1,Y=!1,H=!1,z=!0;if(P(b)&&Object.keys(b).length){var X=b,D=O.some(function($){return $.hasOwnProperty("faces")});if(!D){b=g(X,"hitArea",null),I=g(X,"hitAreaCallback",null),H=g(X,"pixelPerfect",!1);var G=g(X,"alphaTolerance",1);H&&(b={},I=this.makePixelPerfect(G))}B=g(X,"draggable",!1),N=g(X,"dropZone",!1),k=g(X,"cursor",!1),Y=g(X,"useHandCursor",!1),(!b||!I)&&(this.setHitAreaFromTexture(O),z=!1)}else typeof b=="function"&&!I&&(I=b,b={});for(var V=0;V<O.length;V++){var W=O[V];if(H&&W.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var U=W.input?W.input:a(W,b,I);U.customHitArea=z,U.dropZone=N,U.cursor=Y?"pointer":k,W.input=U,B&&this.setDraggable(W),this.queueForInsertion(W)}return this},setHitAreaCircle:function(O,b,I,B,N){N===void 0&&(N=x);var k=new d(b,I,B);return this.setHitArea(O,k,N)},setHitAreaEllipse:function(O,b,I,B,N,k){k===void 0&&(k=l);var Y=new c(b,I,B,N);return this.setHitArea(O,Y,k)},setHitAreaFromTexture:function(O,b){b===void 0&&(b=w),Array.isArray(O)||(O=[O]);for(var I=0;I<O.length;I++){var B=O[I],N=B.frame,k=0,Y=0;if(B.width?(k=B.width,Y=B.height):N&&(k=N.realWidth,Y=N.realHeight),B.type==="Container"&&(k===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}k!==0&&Y!==0&&(B.input=a(B,new E(0,0,k,Y),b),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(O,b,I,B,N,k){k===void 0&&(k=w);var Y=new E(b,I,B,N);return this.setHitArea(O,Y,k)},setHitAreaTriangle:function(O,b,I,B,N,k,Y,H){H===void 0&&(H=L);var z=new A(b,I,B,N,k,Y);return this.setHitArea(O,z,H)},enableDebug:function(O,b){b===void 0&&(b=65280);var I=O.input;if(!I||!I.hitArea)return this;var B=I.hitArea,N=B.type,k=I.hitAreaDebug,Y=this.systems.add,H=this.systems.updateList;k&&(H.remove(k),k.destroy(),k=null);var z=0,X=0;switch(N){case m.CIRCLE:k=Y.arc(0,0,B.radius),z=B.x-B.radius,X=B.y-B.radius;break;case m.ELLIPSE:k=Y.ellipse(0,0,B.width,B.height),z=B.x-B.width/2,X=B.y-B.height/2;break;case m.LINE:k=Y.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:k=Y.polygon(0,0,B.points);break;case m.RECTANGLE:k=Y.rectangle(0,0,B.width,B.height),z=B.x,X=B.y;break;case m.TRIANGLE:k=Y.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return k&&(k.isFilled=!1,k.strokeColor=b,k.preUpdate=function(){k.setVisible(O.visible),k.setStrokeStyle(1/O.scale,k.strokeColor),k.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var D=O.x,G=O.y,V=O.rotation,W=O.scaleX,U=O.scaleY;if(O.parentContainer){var $=O.getWorldTransformMatrix();D=$.tx,G=$.ty,V=$.rotation,W=$.scaleX,U=$.scaleY}k.setRotation(V),k.setScale(W,U),k.setPosition(D+z*W,G+X*U),k.setScrollFactor(O.scrollFactorX,O.scrollFactorY),k.setDepth(O.depth)},H.add(k),I.hitAreaDebug=k),this},removeDebug:function(O){var b=O.input;if(b&&b.hitAreaDebug){var I=b.hitAreaDebug;I.destroy(),b.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,b){if(O.length<2||!b.camera)return O;var I=b.camera.renderList;return O.sort(function(B,N){var k=Math.max(I.indexOf(B),0),Y=Math.max(I.indexOf(N),0);return Y-k})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,b){if(!O.parentContainer&&!b.parentContainer)return this.displayList.getIndex(b)-this.displayList.getIndex(O);if(O.parentContainer===b.parentContainer)return b.parentContainer.getIndex(b)-O.parentContainer.getIndex(O);if(O.parentContainer===b)return-1;if(b.parentContainer===O)return 1;for(var I=O.getIndexList(),B=b.getIndexList(),N=Math.min(I.length,B.length),k=0;k<N;k++){var Y=I[k],H=B[k];if(Y!==H)return H-Y}return B.length-I.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var b=this.manager;b.canvas.style.cursor=b.defaultCursor;var I=this.systems.events;I.off(R.TRANSITION_START,this.transitionIn,this),I.off(R.TRANSITION_OUT,this.transitionOut,this),I.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.off(R.PRE_UPDATE,this.preUpdate,this),b.events.off(v.GAME_OUT,this.onGameOut,this),b.events.off(v.GAME_OVER,this.onGameOver,this),I.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var O=this.manager.pointers,b=0;b<O.length;b++)O[b].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});M.register("InputPlugin",F,"input"),r.exports=F},89639:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),x={},f={};f.register=function(o,a,n,u,c){x[o]={plugin:a,mapping:n,settingsKey:u,configKey:c}},f.getPlugin=function(o){return x[o]},f.install=function(o){var a=o.scene.sys,n=a.settings.input,u=a.game.config;for(var c in x){var l=x[c].plugin,v=x[c].mapping,p=x[c].settingsKey,g=x[c].configKey;d(n,p,u[g])&&(o[v]=new l(o))}},f.remove=function(o){x.hasOwnProperty(o)&&delete x[o]},r.exports=f},42515:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31040),x=i(83419),f=i(20339),o=i(43855),a=i(47235),n=i(26099),u=i(25892),c=new x({initialize:function(v,p){this.manager=v,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var v=l.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(l,v){return l.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var l=this.position.x,v=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(l===p&&v===g)){var m=a(this.motionFactor,p,l),C=a(this.motionFactor,g,v);o(m,l,.1)&&(m=l),o(C,v,.1)&&(C=v),this.midPoint.set(m,C);var P=l-m,M=v-C;this.velocity.set(P,M),this.angle=d(m,C,l,v),this.distance=Math.sqrt(P*P+M*M)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),u.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,v){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,v){this.event=v,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,v){this.buttons=0,this.event=v,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,v){this.buttons=0,this.event=v,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?f(this.downX,this.downY,this.x,this.y):f(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,v){l===void 0&&(l=10),v===void 0&&(v=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,C=this.position.y,P=0;P<l;P++){var M=1/l*P;v[P]={x:a(M,p,m),y:a(M,g,C)}}return v},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});r.exports=c},93301:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};r.exports=T},7179:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},85375:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},39843:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},23388:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"},16133:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},27829:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"},53904:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"},56058:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},2642:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"},88171:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectdown"},36147:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},71692:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"},96149:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},81285:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"},74048:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"},21322:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},49378:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"},86754:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectmove"},86433:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectout"},60709:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectover"},24081:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"},11172:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"},18907:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"},95579:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"},35368:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"},26972:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"},47078:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectup"},73802:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectwheel"},56718:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameout"},25936:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameover"},27503:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},50852:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="process"},96438:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},59152:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerlockchange"},47777:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"},27957:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdownoutside"},19444:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"},54251:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"},18667:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"},27192:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"},24652:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerupoutside"},45132:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"},44512:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"},15757:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"},41637:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},93802:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},8214:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a){this.pad=o,this.events=o.events,this.index=a,this.value=0,this.threshold=.1},update:function(f){this.value=f},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});r.exports=x},28884:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(92734),f=new d({initialize:function(a,n){this.pad=a,this.events=a.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var a=this.pad,n=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,a,this,o),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,n,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,a,this,o),this.pad.emit(x.GAMEPAD_BUTTON_UP,n,o,this))},destroy:function(){this.pad=null,this.events=null}});r.exports=f},99125:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97421),x=i(28884),f=i(83419),o=i(50792),a=i(26099),n=new f({Extends:o,initialize:function(c,l){o.call(this),this.manager=c,this.pad=l,this.id=l.id,this.index=l.index;for(var v=[],p=0;p<l.buttons.length;p++)v.push(new x(this,p));this.buttons=v;var g=[];for(p=0;p<l.axes.length;p++)g.push(new d(this,p));this.axes=g,this.vibration=l.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:m,this._LCRight=v[15]?v[15]:m,this._LCTop=v[12]?v[12]:m,this._LCBottom=v[13]?v[13]:m,this._RCLeft=v[2]?v[2]:m,this._RCRight=v[1]?v[1]:m,this._RCTop=v[3]?v[3]:m,this._RCBottom=v[0]?v[0]:m,this._FBLeftTop=v[4]?v[4]:m,this._FBLeftBottom=v[6]?v[6]:m,this._FBRightTop=v[5]?v[5]:m,this._FBRightBottom=v[7]?v[7]:m;var C={value:0};this._HAxisLeft=g[0]?g[0]:C,this._VAxisLeft=g[1]?g[1]:C,this._HAxisRight=g[2]?g[2]:C,this._VAxisRight=g[3]?g[3]:C,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(u){return this.axes[u].getValue()},setAxisThreshold:function(u){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=u},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(u){return this.buttons[u].value},isButtonDown:function(u){return this.buttons[u].pressed},update:function(u){if(!(u.timestamp<this._created)){var c,l=this.buttons,v=u.buttons,p=l.length;for(c=0;c<p;c++)l[c].update(v[c].value);var g=this.axes,m=u.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var u;for(u=0;u<this.buttons.length;u++)this.buttons[u].destroy();for(u=0;u<this.axes.length;u++)this.axes[u].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});r.exports=n},56654:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(92734),o=i(99125),a=i(35154),n=i(89639),u=i(8214),c=new d({Extends:x,initialize:function(v){x.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(u.BOOT,this.boot,this),v.pluginEvents.on(u.START,this.start,this)},boot:function(){var l=this.scene.sys.game,v=this.settings.input,p=l.config;this.enabled=a(v,"gamepad",p.inputGamepad)&&l.device.input.gamepads,this.target=a(v,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,v=this.target,p=function(g){g.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(g))};this.onGamepadHandler=p,v.addEventListener("gamepadconnected",p,!1),v.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var v=this.gamepads,p=0;p<l.length;p++){var g=l[p];if(!!g){var m=g.id,C=g.index,P=v[C];if(P)P.id!==m?(P.destroy(),v[C]=new o(this,g)):P.update(g);else{var M=new o(this,g);v[C]=M,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=M):this._pad3=M:this._pad2=M:this._pad1=M}}}},getAll:function(){for(var l=[],v=this.gamepads,p=0;p<v.length;p++)v[p]&&l.push(v[p]);return l},getPad:function(l){for(var v=this.gamepads,p=0;p<v.length;p++)if(v[p]&&v[p].index===l)return v[p]},update:function(){if(!!this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var v=this.queue.splice(0,l),p=0;p<l;p++){var g=v[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(f.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(f.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),r.exports=c},89651:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},7629:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},42206:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="connected"},86544:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="disconnected"},94784:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},14325:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},92734:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(93301),x=i(79291),f={CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)};f=x(!1,f,d),r.exports=f},78970:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),x=i(83419),f=i(8443),o=i(8214),a=i(46032),n=i(29747),u=new x({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,l.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(f.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=a[p.trim().toUpperCase()]),l.indexOf(p)===-1&&l.push(p)}this.preventDefault=l.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=a[p.toUpperCase()]),d(l,p)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(f.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});r.exports=u},28846:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(95922),o=i(8443),a=i(35154),n=i(8214),u=i(89639),c=i(30472),l=i(46032),v=i(87960),p=i(74600),g=i(44594),m=i(56583),C=new d({Extends:x,initialize:function(M){x.call(this),this.game=M.systems.game,this.scene=M.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=M,this.manager=M.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,M.pluginEvents.once(n.BOOT,this.boot,this),M.pluginEvents.on(n.START,this.start,this)},boot:function(){var P=this.settings.input;this.enabled=a(P,"keyboard",!0);var M=a(P,"keyboard.capture",null);M&&this.addCaptures(M),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(P){return this.manager.addCapture(P),this},removeCapture:function(P){return this.manager.removeCapture(P),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(P,M,E){M===void 0&&(M=!0),E===void 0&&(E=!1);var w={};if(typeof P=="string"){P=P.split(",");for(var R=0;R<P.length;R++){var A=P[R].trim();A&&(w[A]=this.addKey(A,M,E))}}else for(var L in P)w[L]=this.addKey(P[L],M,E);return w},addKey:function(P,M,E){M===void 0&&(M=!0),E===void 0&&(E=!1);var w=this.keys;if(P instanceof c){var R=w.indexOf(P);return R>-1?w[R]=P:w[P.keyCode]=P,M&&this.addCapture(P.keyCode),P.setEmitOnRepeat(E),P}return typeof P=="string"&&(P=l[P.toUpperCase()]),w[P]||(w[P]=new c(this,P),M&&this.addCapture(P),w[P].setEmitOnRepeat(E)),w[P]},removeKey:function(P,M,E){M===void 0&&(M=!1),E===void 0&&(E=!1);var w=this.keys,R;if(P instanceof c){var A=w.indexOf(P);A>-1&&(R=this.keys[A],this.keys[A]=void 0)}else typeof P=="string"&&(P=l[P.toUpperCase()]);return w[P]&&(R=w[P],w[P]=void 0),R&&(R.plugin=null,E&&this.removeCapture(R.keyCode),M&&R.destroy()),this},removeAllKeys:function(P,M){P===void 0&&(P=!1),M===void 0&&(M=!1);for(var E=this.keys,w=0;w<E.length;w++){var R=E[w];R&&(E[w]=void 0,M&&this.removeCapture(R.keyCode),P&&R.destroy())}return this},createCombo:function(P,M){return new v(this,P,M)},checkDown:function(P,M){if(M===void 0&&(M=0),this.enabled&&P.isDown){var E=m(this.time-P.timeDown,M);if(E>P._tick)return P._tick=E,!0}return!1},update:function(){var P=this.manager.queue,M=P.length;if(!(!this.isActive()||M===0))for(var E=this.keys,w=0;w<M;w++){var R=P[w],A=R.keyCode,L=E[A],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(A===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=A,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(L&&(F=L.isDown,L.onDown(R)),!R.cancelled&&(!L||!F)&&(p[A]&&this.emit(f.KEY_DOWN+p[A],R),R.cancelled||this.emit(f.ANY_KEY_DOWN,R))):(L&&L.onUp(R),R.cancelled||(p[A]&&this.emit(f.KEY_UP+p[A],R),R.cancelled||this.emit(f.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var P=this.keys,M=0;M<P.length;M++)P[M]&&P[M].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var P=this.keys,M=0;M<P.length;M++)P[M]&&P[M].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),r.exports=C},66970:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d.timeLastMatched=i.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};r.exports=T},87960:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95922),f=i(95540),o=i(68769),a=i(92803),n=new d({initialize:function(c,l,v){if(v===void 0&&(v={}),l.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<l.length;p++){var g=l[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=f(v,"resetOnWrongKey",!0),this.maxKeyDelay=f(v,"maxKeyDelay",0),this.resetOnMatch=f(v,"resetOnMatch",!1),this.deleteOnMatch=f(v,"deleteOnMatch",!1);var m=this,C=function(P){if(!(m.matched||!m.enabled)){var M=o(P,m);M&&(m.manager.emit(x.COMBO_MATCH,m,P),m.resetOnMatch?a(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=C,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});r.exports=n},68769:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66970),x=function(f,o){if(o.matched)return!0;var a=!1,n=!1;if(f.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var u=o.timeLastMatched+o.maxKeyDelay;f.timeStamp<=u&&(n=!0,a=d(f,o))}else n=!0,a=d(f,o);return!n&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),a&&(o.timeLastMatched=f.timeStamp,o.matched=!0,o.timeMatched=f.timeStamp),a};r.exports=x},92803:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.current=i.keyCodes[0],i.index=0,i.timeLastMatched=0,i.matched=!1,i.timeMatched=0,i};r.exports=T},92612:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown"},23345:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup"},21957:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keycombomatch"},44743:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},3771:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown-"},46358:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup-"},75674:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},95922:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=50);var x=i.plugin.game.loop.time-i.timeDown;return i.isDown&&x<d};r.exports=T},90229:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i._justDown?(i._justDown=!1,!0):!1};r.exports=T},38796:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i._justUp?(i._justUp=!1,!0):!1};r.exports=T},30472:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(95922),o=new d({Extends:x,initialize:function(n,u){x.call(this),this.plugin=n,this.keyCode=u,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(a){return this.emitOnRepeat=a,this},onDown:function(a){this.originalEvent=a,this.enabled&&(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.location=a.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(f.DOWN,this,a):(this.isDown=!0,this.isUp=!1,this.timeDown=a.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(f.DOWN,this,a)))},onUp:function(a){this.originalEvent=a,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=a.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(f.UP,this,a))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});r.exports=o},46032:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};r.exports=T},74600:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(46032),x={};for(var f in d)x[d[f]]=f;r.exports=x},41170:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=50);var x=i.plugin.game.loop.time-i.timeUp;return i.isUp&&x<d};r.exports=T},85098:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(89357),f=i(8214),o=i(29747),a=new d({initialize:function(u){this.manager=u,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,u.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(!!n){var u=this,c=this.manager,l=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseMove(g),u.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseDown(g),u.preventDefaultDown&&g.target===l&&g.preventDefault())},this.onMouseDownWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&u.enabled&&c&&c.enabled&&g.target!==l&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseUp(g),u.preventDefaultUp&&g.target===l&&g.preventDefault())},this.onMouseUpWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&u.enabled&&c&&c.enabled&&g.target!==l&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.onMouseWheel(g),u.preventDefaultWheel&&g.target===l&&g.preventDefault()};var p={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,p),n.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(g){var m=u.target;u.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=a},87078:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={MouseManager:i(85098)}},36210:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(8214),f=i(29747),o=new d({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=f,this.onTouchStartWindow=f,this.onTouchMove=f,this.onTouchEnd=f,this.onTouchEndWindow=f,this.onTouchCancel=f,this.onTouchCancelWindow=f,this.isTop=!0,n.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputTouch,this.target=a.inputTouchEventTarget,this.capture=a.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},startListeners:function(){var a=this.target;if(!!a){var n=this,u=this.manager,c=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onTouchMove=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onTouchMove(m),n.capture&&m.cancelable&&m.preventDefault())},this.onTouchStart=function(m){l&&window.focus(),!m.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onTouchStart(m),n.capture&&m.cancelable&&m.target===c&&m.preventDefault())},this.onTouchStartWindow=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&m.target!==c&&u.onTouchStart(m)},this.onTouchEnd=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onTouchEnd(m),n.capture&&m.cancelable&&m.target===c&&m.preventDefault())},this.onTouchEndWindow=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&m.target!==c&&u.onTouchEnd(m)},this.onTouchCancel=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onTouchCancel(m),n.capture&&m.preventDefault())},this.onTouchCancelWindow=function(m){!m.defaultPrevented&&n.enabled&&u&&u.enabled&&u.onTouchCancel(m)};var v=this.capture,p={passive:!0},g={passive:!1};if(a.addEventListener("touchstart",this.onTouchStart,v?g:p),a.addEventListener("touchmove",this.onTouchMove,v?g:p),a.addEventListener("touchend",this.onTouchEnd,v?g:p),a.addEventListener("touchcancel",this.onTouchCancel,v?g:p),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,g),window.top.addEventListener("touchend",this.onTouchEndWindow,g),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,g)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,g),window.addEventListener("touchend",this.onTouchEndWindow,g),window.addEventListener("touchcancel",this.onTouchCancelWindow,g),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("touchmove",this.onTouchMove),a.removeEventListener("touchend",this.onTouchEnd),a.removeEventListener("touchcancel",this.onTouchCancel),window&&(a=this.isTop?window.top:window,a.removeEventListener("touchstart",this.onTouchStartWindow),a.removeEventListener("touchend",this.onTouchEndWindow),a.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=o},95618:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TouchManager:i(36210)}},41299:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(54899),o=i(95540),a=i(98356),n=i(3374),u=i(84376),c=i(92638),l=new d({initialize:function(p,g){if(this.loader=p,this.cache=o(g,"cache",!1),this.type=o(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=o(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.key)throw new Error("Invalid File key: "+this.key);var C=o(g,"url");C===void 0?C=p.path+m+"."+o(g,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=p.path+C),this.url=C,this.src="",this.xhrSettings=c(o(g,"responseType",void 0)),o(g,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,o(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(g,"config",{}),this.multiFile,this.linkFile,this.base64=typeof C=="string"&&C.indexOf("data:")===0},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===x.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=x.FILE_LOADING,this.src=a(this,this.loader.baseURL),this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(v,p){var g=v.responseURL&&this.loader.localSchemes.some(function(P){return v.responseURL.indexOf(P)===0}),m=g&&p.target.status===0,C=!(p.target&&p.target.status!==200)||m;v.readyState===4&&v.status>=400&&v.status<=599&&(C=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onBase64Load:function(v){this.xhrLoader=v,this.state=x.FILE_LOADED,this.percentComplete=1,this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(v){if(this.state!==x.FILE_PENDING_DESTROY){v===void 0&&(v=this.data);var p=this.key,g=this.type;this.loader.emit(f.FILE_COMPLETE,p,g,v),this.loader.emit(f.FILE_KEY_COMPLETE+g+"-"+p,p,g,v),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(v,p,g){if(typeof URL=="function")v.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(p)}},l.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},r.exports=l},74099:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},i={install:function(d){for(var x in T)d[x]=T[x]},register:function(d,x){T[d]=x},destroy:function(){T={}}};r.exports=i},98356:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.url?i.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?i.url:d+i.url:!1};r.exports=T},74261:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(35072),o=i(50792),a=i(54899),n=i(74099),u=i(95540),c=i(35154),l=i(37277),v=i(44594),p=i(92638),g=new d({Extends:o,initialize:function(C){o.call(this);var P=C.sys.game.config,M=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(u(M,"baseURL",P.loaderBaseURL)),this.setPath(u(M,"path",P.loaderPath)),this.setPrefix(u(M,"prefix",P.loaderPrefix)),this.maxParallelDownloads=u(M,"maxParallelDownloads",P.loaderMaxParallelDownloads),this.xhr=p(u(M,"responseType",P.loaderResponseType),u(M,"async",P.loaderAsync),u(M,"user",P.loaderUser),u(M,"password",P.loaderPassword),u(M,"timeout",P.loaderTimeout),u(M,"withCredentials",P.loaderWithCredentials)),this.crossOrigin=u(M,"crossOrigin",P.loaderCrossOrigin),this.imageLoadType=u(M,"imageLoadType",P.loaderImageLoadType),this.localSchemes=u(M,"localScheme",P.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new f,this.inflight=new f,this.queue=new f,this._deleteQueue=new f,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,C.sys.events.once(v.BOOT,this.boot,this),C.sys.events.on(v.START,this.pluginStart,this)},boot:function(){this.systems.events.once(v.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(v.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var C=0;C<m.length;C++){var P=m[C];this.keyExists(P)||(this.list.set(P),this.emit(a.ADD,P.key,P.type,this,P),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var C=m.hasCacheConflict();return C||this.list.iterate(function(P){if(P.type===m.type&&P.key===m.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(P){if(P.type===m.type&&P.key===m.key)return C=!0,!1}),this.queue.iterate(function(P){if(P.type===m.type&&P.key===m.key)return C=!0,!1})),C},addPack:function(m,C){if(typeof C=="string"){var P=c(m,C);P&&(m={packKey:P})}var M=0,E=this.baseURL,w=this.path,R=this.prefix;for(var A in m)if(!!Object.prototype.hasOwnProperty.call(m,A)){var L=m[A],F=u(L,"baseURL",E),O=u(L,"path",w),b=u(L,"prefix",R),I=u(L,"files",null),B=u(L,"defaultType","void");if(Array.isArray(I)){this.setBaseURL(F),this.setPath(O),this.setPrefix(b);for(var N=0;N<I.length;N++){var k=I[N],Y=k.hasOwnProperty("type")?k.type:B;this[Y]&&(this[Y](k),M++)}}}return this.setBaseURL(E),this.setPath(w),this.setPrefix(R),M>0},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(v.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===x.FILE_POPULATED||m.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,C){!this.inflight||(this.inflight.delete(m),this.updateProgress(),C?(this.totalComplete++,this.queue.set(m),this.emit(a.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(a.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===x.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===x.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(v.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,C){return this.save(JSON.stringify(m),C)},save:function(m,C,P){C===void 0&&(C="file.json"),P===void 0&&(P="application/json");var M=new Blob([m],{type:P}),E=URL.createObjectURL(M),w=document.createElement("a");return w.download=C,w.textContent="Download "+C,w.href=E,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(u(C,"baseURL",m.loaderBaseURL)),this.setPath(u(C,"path",m.loaderPath)),this.setPrefix(u(C,"prefix",m.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",g,"load"),r.exports=g},3374:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=i(92638),f=function(o,a){var n=o===void 0?x():d({},o);if(a)for(var u in a)a[u]!==void 0&&(n[u]=a[u]);return n};r.exports=f},26430:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(54899),o=new d({initialize:function(n,u,c,l){var v=[];l.forEach(function(m){m&&v.push(m)}),this.loader=n,this.type=u,this.key=c;var p=this.key;n.prefix&&n.prefix!==""&&(this.key=n.prefix+p),this.multiKeyIndex=n.multiKeyIndex++,this.files=v,this.state=x.FILE_PENDING,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var g=0;g<v.length;g++)v[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(a){return this.files.push(a),a.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(a){var n=this.files.indexOf(a);n!==-1&&this.pending--},onFileFailed:function(a){var n=this.files.indexOf(a);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,a.type,a.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var a=this.key,n=this.type;this.loader.emit(f.FILE_COMPLETE,a,n),this.loader.emit(f.FILE_KEY_COMPLETE+n+"-"+a,a,n),this.loader.flagForRemoval(this);for(var u=0;u<this.files.length;u++)this.files[u].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});r.exports=o},84376:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3374),x=function(f,o){var a=d(o,f.xhrSettings);if(f.base64){var n=f.url.split(";base64,").pop()||f.url.split(",").pop(),u={responseText:atob(n)};f.onBase64Load(u);return}var c=new XMLHttpRequest;if(c.open("GET",f.src,a.async,a.user,a.password),c.responseType=f.xhrSettings.responseType,c.timeout=a.timeout,a.headers)for(var l in a.headers)c.setRequestHeader(l,a.headers[l]);return a.header&&a.headerValue&&c.setRequestHeader(a.header,a.headerValue),a.requestedWith&&c.setRequestHeader("X-Requested-With",a.requestedWith),a.overrideMimeType&&c.overrideMimeType(a.overrideMimeType),a.withCredentials&&(c.withCredentials=!0),c.onload=f.onLoad.bind(f,c),c.onerror=f.onError.bind(f,c),c.onprogress=f.onProgress.bind(f),c.ontimeout=f.onError.bind(f,c),c.send(),c};r.exports=x},92638:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a){return i===void 0&&(i=""),d===void 0&&(d=!0),x===void 0&&(x=""),f===void 0&&(f=""),o===void 0&&(o=0),a===void 0&&(a=!1),{responseType:i,async:d,user:x,password:f,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}};r.exports=T},23906:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};r.exports=T},42155:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addfile"},38991:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},27540:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete"},87464:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete-"},94486:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loaderror"},13035:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="load"},38144:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fileprogress"},97520:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postprocess"},85595:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="progress"},55680:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},54899:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(518),o=i(54899),a=new d({Extends:f,initialize:function(u,c,l,v,p){f.call(this,u,c,l,v,p),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),f.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(n,u,c,l){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new a(this,n[v]));else this.addFile(new a(this,n,u,l,c));return this}),r.exports=a},76272:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(518),u=i(26430),c=new d({Extends:u,initialize:function(v,p,g,m,C,P){var M,E;if(a(p)){var w=p;p=f(w,"key"),M=new o(v,{key:p,url:f(w,"textureURL"),extension:f(w,"textureExtension","png"),normalMap:f(w,"normalMap"),xhrSettings:f(w,"textureXhrSettings")}),E=new n(v,{key:p,url:f(w,"atlasURL"),extension:f(w,"atlasExtension","json"),xhrSettings:f(w,"atlasXhrSettings")})}else M=new o(v,p,g,C),E=new n(v,p,m,P);M.linkFile?u.call(this,v,"atlasjson",p,[M,E,M.linkFile]):u.call(this,v,"atlasjson",p,[M,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,v.data,p),v.addToCache(),this.complete=!0}}});x.register("aseprite",function(l,v,p,g,m){var C;if(Array.isArray(l))for(var P=0;P<l.length;P++)C=new c(this,l[P]),this.addFile(C.files);else C=new c(this,l,v,p,g,m),this.addFile(C.files);return this}),r.exports=c},38734:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(518),u=i(26430),c=new d({Extends:u,initialize:function(v,p,g,m,C,P){var M,E;if(a(p)){var w=p;p=f(w,"key"),M=new o(v,{key:p,url:f(w,"textureURL"),extension:f(w,"textureExtension","png"),normalMap:f(w,"normalMap"),xhrSettings:f(w,"textureXhrSettings")}),E=new n(v,{key:p,url:f(w,"atlasURL"),extension:f(w,"atlasExtension","json"),xhrSettings:f(w,"atlasXhrSettings")})}else M=new o(v,p,g,C),E=new n(v,p,m,P);M.linkFile?u.call(this,v,"atlasjson",p,[M,E,M.linkFile]):u.call(this,v,"atlasjson",p,[M,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,v.data,p),this.complete=!0}}});x.register("atlas",function(l,v,p,g,m){var C;if(Array.isArray(l))for(var P=0;P<l.length;P++)C=new c(this,l[P]),this.addFile(C.files);else C=new c(this,l,v,p,g,m),this.addFile(C.files);return this}),r.exports=c},74599:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(26430),u=i(57318),c=new d({Extends:n,initialize:function(v,p,g,m,C,P){var M,E;if(a(p)){var w=p;p=f(w,"key"),M=new o(v,{key:p,url:f(w,"textureURL"),extension:f(w,"textureExtension","png"),normalMap:f(w,"normalMap"),xhrSettings:f(w,"textureXhrSettings")}),E=new u(v,{key:p,url:f(w,"atlasURL"),extension:f(w,"atlasExtension","xml"),xhrSettings:f(w,"atlasXhrSettings")})}else M=new o(v,p,g,C),E=new u(v,p,m,P);M.linkFile?n.call(this,v,"atlasxml",p,[M,E,M.linkFile]):n.call(this,v,"atlasxml",p,[M,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,v.data,p),this.complete=!0}}});x.register("atlasXML",function(l,v,p,g,m){var C;if(Array.isArray(l))for(var P=0;P<l.length;P++)C=new c(this,l[P]),this.addFile(C.files);else C=new c(this,l,v,p,g,m),this.addFile(C.files);return this}),r.exports=c},21097:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(89749),u=i(41212),c=new d({Extends:f,initialize:function(v,p,g,m,C){if(u(p)){var P=p;p=a(P,"key"),m=a(P,"xhrSettings"),C=a(P,"context",C)}var M={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:C}};f.call(this,v,M)},onProcess:function(){this.state=x.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){l.data=v,l.onProcessComplete()},function(v){console.error("Error decoding audio: "+l.key+" - ",v?v.message:null),l.onProcessError()}),this.config.context=null}});c.create=function(l,v,p,g,m){var C=l.systems.game,P=C.config.audio,M=C.device.audio;u(v)&&(p=a(v,"url",[]),g=a(v,"config",{}));var E=c.getAudioURL(C,p);return E?M.webAudio&&!P.disableWebAudio?new c(l,v,E,m,C.sound.context):new n(l,v,E,g):(console.warn('No audio URLs for "%s" matched this device',v),null)},c.getAudioURL=function(l,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=a(v[p],"url",v[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=a(v[p],"type",m?m[1]:"").toLowerCase(),l.device.audio[m])return{url:g,type:m}}return null},o.register("audio",function(l,v,p,g){var m=this.systems.game,C=m.config.audio,P=m.device.audio;if(C.noAudio||!P.webAudio&&!P.audioData)return this;var M;if(Array.isArray(l))for(var E=0;E<l.length;E++)M=c.create(this,l[E]),M&&this.addFile(M);else M=c.create(this,l,v,p,g),M&&this.addFile(M);return this}),r.exports=c},89524:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21097),x=i(83419),f=i(74099),o=i(95540),a=i(41212),n=i(518),u=i(26430),c=new x({Extends:u,initialize:function(v,p,g,m,C,P,M){if(a(p)){var E=p;p=o(E,"key"),g=o(E,"jsonURL"),m=o(E,"audioURL"),C=o(E,"audioConfig"),P=o(E,"audioXhrSettings"),M=o(E,"jsonXhrSettings")}var w;if(!m)w=new n(v,p,g,M),u.call(this,v,"audiosprite",p,[w]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=P;else{var R=d.create(v,p,m,C,P);R&&(w=new n(v,p,g,M),u.call(this,v,"audiosprite",p,[R,w]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var v=this.files.indexOf(l);if(v!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var p=l.data.resources,g=o(this.config,"audioConfig"),m=o(this.config,"audioXhrSettings"),C=d.create(this.loader,l.key,p,g,m);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1];l.addToCache(),v.addToCache(),this.complete=!0}}});f.register("audioSprite",function(l,v,p,g,m,C){var P=this.systems.game,M=P.config.audio,E=P.device.audio;if(M&&M.noAudio||!E.webAudio&&!E.audioData)return this;var w;if(Array.isArray(l))for(var R=0;R<l.length;R++)w=new c(this,l[R]),w.files&&this.addFile(w.files);else w=new c(this,l,v,p,g,m,C),w.files&&this.addFile(w.files);return this})},85722:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m){var C="bin";if(n(v)){var P=v;v=a(P,"key"),p=a(P,"url"),g=a(P,"xhrSettings"),C=a(P,"extension",C),m=a(P,"dataType",m)}var M={type:"binary",cache:l.cacheManager.binary,extension:C,responseType:"arraybuffer",key:v,url:p,xhrSettings:g,config:{dataType:m}};f.call(this,l,M)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(c,l,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new u(this,c[g]));else this.addFile(new u(this,c,l,p,v));return this}),r.exports=u},97025:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(26430),u=i(21859),c=i(57318),l=new d({Extends:n,initialize:function(p,g,m,C,P,M){var E,w;if(a(g)){var R=g;g=f(R,"key"),E=new o(p,{key:g,url:f(R,"textureURL"),extension:f(R,"textureExtension","png"),normalMap:f(R,"normalMap"),xhrSettings:f(R,"textureXhrSettings")}),w=new c(p,{key:g,url:f(R,"fontDataURL"),extension:f(R,"fontDataExtension","xml"),xhrSettings:f(R,"fontDataXhrSettings")})}else E=new o(p,g,m,P),w=new c(p,g,C,M);E.linkFile?n.call(this,p,"bitmapfont",g,[E,w,E.linkFile]):n.call(this,p,"bitmapfont",g,[E,w])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1];v.addToCache();var g=v.cache.get(v.key),m=u(p.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(v,p,g,m,C){var P;if(Array.isArray(v))for(var M=0;M<v.length;M++)P=new l(this,v[M]),this.addFile(P.files);else P=new l(this,v,p,g,m,C),this.addFile(P.files);return this}),r.exports=l},16024:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g){var m="css";if(n(v)){var C=v;v=a(C,"key"),p=a(C,"url"),g=a(C,"xhrSettings"),m=a(C,"extension",m)}var P={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};f.call(this,l,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(c,l,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,l,v));return this}),r.exports=u},69559:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38734),x=i(85722),f=i(83419),o=i(74099),a=i(95540),n=i(19550),u=i(41212),c=i(518),l=i(31403),v=i(46975),p=i(59327),g=i(26430),m=i(82038),C=i(55222),P=new f({Extends:g,initialize:function(E,w,R,A){if(R.multiAtlasURL){var L=new c(E,{key:w,url:R.multiAtlasURL,xhrSettings:A,config:R});g.call(this,E,"texture",w,[L])}else{var F=R.textureURL.substr(R.textureURL.length-3);R.type||(R.type=F.toLowerCase()==="ktx"?"KTX":"PVR");var O=new x(E,{key:w,url:R.textureURL,extension:F,xhrSettings:A,config:R});if(R.atlasURL){var b=new c(E,{key:w,url:R.atlasURL,xhrSettings:A,config:R});g.call(this,E,"texture",w,[O,b])}else g.call(this,E,"texture",w,[O])}this.config=R},onFileComplete:function(M){var E=this.files.indexOf(M);if(E!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(M.type==="json"&&M.data.hasOwnProperty("textures")){var w=M.data.textures,R=this.config,A=this.loader,L=A.baseURL,F=A.path,O=A.prefix,b=a(R,"multiBaseURL",this.baseURL),I=a(R,"multiPath",this.path),B=a(R,"prefix",this.prefix),N=a(R,"textureXhrSettings");b&&A.setBaseURL(b),I&&A.setPath(I),B&&A.setPrefix(B);for(var k=0;k<w.length;k++){var Y=w[k].image,H="CMA"+this.multiKeyIndex+"_"+Y,z=new x(A,H,Y,N);if(this.addToMultiFile(z),A.addFile(z),w[k].normalMap){var X=new x(A,H,w[k].normalMap,N);X.type="normalMap",z.setLink(X),this.addToMultiFile(X),A.addFile(X)}}A.setBaseURL(L),A.setPath(F),A.setPrefix(O)}}},addToCache:function(){function M(b){console.warn('Compressed Texture Invalid: "'+L.key+'". '+b)}if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var w=this.loader.systems.renderer,R=this.loader.textureManager,A,L=this.files[0],F=this.files[1];if(E.type==="PVR"?A=m(L.data):E.type==="KTX"&&(A=l(L.data),A||M("KTX file contains unsupported format.")),A&&!C(A)&&(M("Texture dimensions failed verification. Check the texture format specifications for "+E.format+" 0x"+A.internalFormat.toString(16)+"."),A=null),A&&!w.supportsCompressedTexture(E.format,A.internalFormat)&&(M("Texture format "+E.format+" with internal format "+A.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),A=null),A){A.format=w.getCompressedTextureName(E.format,A.internalFormat);var O=F&&F.data?F.data:null;R.addCompressedTexture(L.key,A,O)}}this.complete=!0}},addMultiToCache:function(){for(var M=this.config,E=this.files[0],w=[],R=[],A=[],L=this.loader.systems.renderer,F=this.loader.textureManager,O,b=1;b<this.files.length;b++){var I=this.files[b];if(I.type!=="normalMap")for(var B=I.key.indexOf("_"),N=I.key.substr(B+1),k=I.data,Y=0;Y<E.data.textures.length;Y++){var H=E.data.textures[Y];if(H.image===N){M.type==="PVR"?O=m(k):M.type==="KTX"&&(O=l(k)),O&&L.supportsCompressedTexture(M.format,O.internalFormat)&&(O.format=L.getCompressedTextureName(M.format,O.internalFormat),R.push(O),w.push(H),I.linkFile&&A.push(I.linkFile.data));break}}}A.length===0&&(A=void 0),F.addAtlasJSONArray(this.key,R,w,A),this.complete=!0}});o.register("texture",function(M,E,w){var R=this.systems.renderer,A=function(F,O,b,I){var B={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(u(O)){var N=O;O=a(N,"key"),b=a(N,"url"),I=a(N,"xhrSettings")}var k=!1;for(var Y in b)if(R.supportsCompressedTexture(Y)){var H=b[Y];typeof H=="string"?B.textureURL=H:B=v(H,B),B.format=Y.toUpperCase(),k=!0;break}if(!k)console.warn("No supported compressed texture format or IMG fallback",O);else if(B.format==="IMG"){var z,X;B.multiAtlasURL?(X=new p(F,O,B.multiAtlasURL,B.multiPath,B.multiBaseURL,I),z=X.files):B.atlasURL?(X=new d(F,O,B.textureURL,B.atlasURL,I),z=X.files):z=new n(F,O,B.textureURL,I),F.addFile(z)}else{var D=new P(F,O,B,I);F.addFile(D.files)}};if(Array.isArray(M))for(var L=0;L<M.length;L++)A(this,M[L]);else A(this,M,E,w);return this}),r.exports=P},47931:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=i(73894),c=new d({Extends:f,initialize:function(v,p,g,m,C){var P="glsl";if(n(p)){var M=p;p=a(M,"key"),g=a(M,"url"),m=a(M,"shaderType","fragment"),C=a(M,"xhrSettings"),P=a(M,"extension",P)}else m===void 0&&(m="fragment");var E={type:"glsl",cache:v.cacheManager.shader,extension:P,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:C};f.call(this,v,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),v=this.extractBlock(l,0);if(v)for(;v;){var p=this.getShaderName(v.header),g=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),C=v.shader;if(this.cache.has(p)){var P=this.cache.get(p);g==="fragment"?P.fragmentSrc=C:P.vertexSrc=C,P.uniforms||(P.uniforms=m)}else g==="fragment"?this.cache.add(p,new u(p,C,"",m)):this.cache.add(p,new u(p,"",C,m));v=this.extractBlock(l,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new u(this.key,this.data)):this.cache.add(this.key,new u(this.key,"",this.data))},getShaderName:function(l){for(var v=0;v<l.length;v++){var p=l[v].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(l){for(var v=0;v<l.length;v++){var p=l[v].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var v={},p=0;p<l.length;p++){var g=l[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var C=g.substring(8,m);try{v[C]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+C)}}}}return v},extractBlock:function(l,v){for(var p=-1,g=-1,m=-1,C=!1,P=!1,M=[],E=[],w=v;w<l.length;w++){var R=l[w].trim();if(R==="---")if(p===-1)p=w,C=!0;else if(C)g=w,C=!1,P=!0;else{P=!1;break}else C?M.push(R):P&&(E.push(R),m=w)}return!C&&g!==-1?{header:M,shader:E.join(`
`),offset:m}:null}});o.register("glsl",function(l,v,p,g){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new c(this,l[m]));else this.addFile(new c(this,l,v,p,g));return this}),r.exports=c},89749:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(54899),f=i(41299),o=i(95540),a=i(98356),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g){if(n(v)){var m=v;v=o(m,"key"),g=o(m,"config",g)}var C={type:"audio",cache:l.cacheManager.audio,extension:p.type,key:v,url:p.url,config:g};f.call(this,l,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var l=this.data[c];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var l=c.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<c;l++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+l).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(l=0;l<this.data.length;l++)v=this.data[l],v.src=a(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});r.exports=u},88470:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g){var m="html";if(n(v)){var C=v;v=a(C,"key"),p=a(C,"url"),g=a(C,"xhrSettings"),m=a(C,"extension",m)}var P={type:"text",cache:l.cacheManager.html,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};f.call(this,l,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(c,l,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,l,v));return this}),r.exports=u},14643:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m,C){g===void 0&&(g=512),m===void 0&&(m=512);var P="html";if(n(v)){var M=v;v=a(M,"key"),p=a(M,"url"),C=a(M,"xhrSettings"),P=a(M,"extension",P),g=a(M,"width",g),m=a(M,"height",m)}var E={type:"html",cache:l.textureManager,extension:P,responseType:"text",key:v,url:p,xhrSettings:C,config:{width:g,height:m}};f.call(this,l,E)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.config.width,l=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+l+'px" viewBox="0 0 '+c+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var p=[v.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=x.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){f.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(g.data),g.onProcessError()},f.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("htmlTexture",function(c,l,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,l,v,p,g));return this}),r.exports=u},19550:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=i(98356),c=new d({Extends:f,initialize:function l(v,p,g,m,C){var P="png",M;if(n(p)){var E=p;p=a(E,"key"),g=a(E,"url"),M=a(E,"normalMap"),m=a(E,"xhrSettings"),P=a(E,"extension",P),C=a(E,"frameConfig")}Array.isArray(g)&&(M=g[1],g=g[0]);var w={type:"image",cache:v.textureManager,extension:P,responseType:"blob",key:p,url:g,xhrSettings:m,config:C};if(f.call(this,v,w),M){var R=new l(v,this.key,M,m,C);R.type="normalMap",this.setLink(R),v.addFile(R)}this.useImageElementLoad=v.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){f.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(l.data),l.onProcessError()},f.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var l=this.state;this.state=x.FILE_PROCESSING,l===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=x.FILE_LOADING,this.src=u(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){l.state=x.FILE_LOADED,l.loader.nextFile(l,!0)},this.data.onerror=function(){l.loader.nextFile(l,!1)},this.data.src=this.src},addToCache:function(){var l=this.linkFile;l?l.state>=x.FILE_COMPLETE&&(l.type==="spritesheet"?l.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,l.data,this.data):this.cache.addImage(this.key,this.data,l.data)):this.cache.addImage(this.key,this.data)}});o.register("image",function(l,v,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,v,p));return this}),r.exports=c},518:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(35154),u=i(41212),c=new d({Extends:f,initialize:function(v,p,g,m,C){var P="json";if(u(p)){var M=p;p=a(M,"key"),g=a(M,"url"),m=a(M,"xhrSettings"),P=a(M,"extension",P),C=a(M,"dataKey",C)}var E={type:"json",cache:v.cacheManager.json,extension:P,responseType:"text",key:p,url:g,xhrSettings:m,config:C};f.call(this,v,E),u(g)&&(C?this.data=n(g,C):this.data=g,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(p){throw this.onProcessError(),p}var v=this.config;typeof v=="string"?this.data=n(l,v,l):this.data=l}this.onProcessComplete()}});o.register("json",function(l,v,p,g){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new c(this,l[m]));else this.addFile(new c(this,l,v,g,p));return this}),r.exports=c},59327:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(518),u=i(26430),c=new d({Extends:u,initialize:function(v,p,g,m,C,P,M){if(a(p)){var E=p;p=f(E,"key"),f(E,"url",!1)?g=f(E,"url"):g=f(E,"atlasURL"),P=f(E,"xhrSettings"),m=f(E,"path"),C=f(E,"baseURL"),M=f(E,"textureXhrSettings")}var w=new n(v,p,g,P);u.call(this,v,"multiatlas",p,[w]),this.config.path=m,this.config.baseURL=C,this.config.textureXhrSettings=M},onFileComplete:function(l){var v=this.files.indexOf(l);if(v!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var p=l.data.textures,g=this.config,m=this.loader,C=m.baseURL,P=m.path,M=m.prefix,E=f(g,"baseURL",this.baseURL),w=f(g,"path",this.path),R=f(g,"prefix",this.prefix),A=f(g,"textureXhrSettings");m.setBaseURL(E),m.setPath(w),m.setPrefix(R);for(var L=0;L<p.length;L++){var F=p[L].image,O="MA"+this.multiKeyIndex+"_"+F,b=new o(m,O,F,A);if(this.addToMultiFile(b),m.addFile(b),p[L].normalMap){var I=new o(m,O,p[L].normalMap,A);I.type="normalMap",b.setLink(I),this.addToMultiFile(I),m.addFile(I)}}m.setBaseURL(C),m.setPath(P),m.setPrefix(M)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],v=[],p=[],g=[],m=1;m<this.files.length;m++){var C=this.files[m];if(C.type!=="normalMap")for(var P=C.key.indexOf("_"),M=C.key.substr(P+1),E=C.data,w=0;w<l.data.textures.length;w++){var R=l.data.textures[w];if(R.image===M){p.push(E),v.push(R),C.linkFile&&g.push(C.linkFile.data);break}}}g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,v,g),this.complete=!0}}});x.register("multiatlas",function(l,v,p,g,m){var C;if(Array.isArray(l))for(var P=0;P<l.length;P++)C=new c(this,l[P]),this.addFile(C.files);else C=new c(this,l,v,p,g,m),this.addFile(C.files);return this}),r.exports=c},99297:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(41212),a=i(26430),n=i(34328),u=new d({Extends:a,initialize:function(l,v,p,g){var m="js",C=[];if(o(v)){var P=v;v=f(P,"key"),p=f(P,"url"),g=f(P,"xhrSettings"),m=f(P,"extension",m)}Array.isArray(p)||(p=[p]);for(var M=0;M<p.length;M++){var E=new n(l,{key:v+"_"+M.toString(),url:p[M],extension:m,xhrSettings:g});E.onProcess=function(){this.onProcessComplete()},C.push(E)}a.call(this,l,"scripts",v,C)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var l=this.files[c];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});x.register("scripts",function(c,l,v){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new u(this,c[g]),this.addFile(p.files);else p=new u(this,c,l,v),this.addFile(p.files);return this}),r.exports=u},41846:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(41212),a=i(26430),n=i(85048),u=i(61485),c=i(78776),l=new d({Extends:a,initialize:function(p,g,m,C,P,M){var E,w,R=p.cacheManager.obj;if(o(g)){var A=g;g=f(A,"key"),E=new c(p,{key:g,type:"obj",cache:R,url:f(A,"url"),extension:f(A,"extension","obj"),xhrSettings:f(A,"xhrSettings"),config:{flipUV:f(A,"flipUV",P)}}),C=f(A,"matURL"),C&&(w=new c(p,{key:g,type:"mat",cache:R,url:C,extension:f(A,"matExtension","mat"),xhrSettings:f(A,"xhrSettings")}))}else E=new c(p,{key:g,url:m,type:"obj",cache:R,extension:"obj",xhrSettings:M,config:{flipUV:P}}),C&&(w=new c(p,{key:g,url:C,type:"mat",cache:R,extension:"mat",xhrSettings:M}));a.call(this,p,"obj",g,[E,w])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1],g=n(v.data,v.config.flipUV);p&&(g.materials=u(p.data)),v.cache.add(v.key,g),this.complete=!0}}});x.register("obj",function(v,p,g,m,C){var P;if(Array.isArray(v))for(var M=0;M<v.length;M++)P=new l(this,v[M]),this.addFile(P.files);else P=new l(this,v,p,g,m,C),this.addFile(P.files);return this}),r.exports=l},58610:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(74099),o=i(518),a=new d({Extends:o,initialize:function(u,c,l,v,p){o.call(this,u,c,l,v,p),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});f.register("pack",function(n,u,c,l){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new a(this,n[v]));else this.addFile(new a(this,n,u,l,c));return this}),r.exports=a},48988:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m,C){var P="js";if(n(v)){var M=v;v=a(M,"key"),p=a(M,"url"),C=a(M,"xhrSettings"),P=a(M,"extension",P),g=a(M,"start"),m=a(M,"mapping")}var E={type:"plugin",cache:!1,extension:P,responseType:"text",key:v,url:p,xhrSettings:C,config:{start:g,mapping:m}};f.call(this,l,E),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,v=a(l,"start",!1),p=a(l,"mapping",null);if(this.state===x.FILE_POPULATED)c.install(this.key,this.data,v,p);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],v,p);(v||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});o.register("plugin",function(c,l,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,l,v,p,g));return this}),r.exports=u},67397:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m){var C="svg";if(n(v)){var P=v;v=a(P,"key"),p=a(P,"url"),g=a(P,"svgConfig",{}),m=a(P,"xhrSettings"),C=a(P,"extension",C)}var M={type:"svg",cache:l.textureManager,extension:C,responseType:"text",key:v,url:p,xhrSettings:m,config:{width:a(g,"width"),height:a(g,"height"),scale:a(g,"scale")}};f.call(this,l,M)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.xhrLoader.responseText,l=[c],v=this.config.width,p=this.config.height,g=this.config.scale;t:if(v&&p||g){var m=null,C=new DOMParser;m=C.parseFromString(c,"text/xml");var P=m.getElementsByTagName("svg")[0],M=P.hasAttribute("viewBox"),E=parseFloat(P.getAttribute("width")),w=parseFloat(P.getAttribute("height"));if(!M&&E&&w)P.setAttribute("viewBox","0  0 "+E+" "+w);else if(M&&!E&&!w){var R=P.getAttribute("viewBox").split(/\s+|,/);E=R[2],w=R[3]}if(g)if(E&&w)v=E*g,p=w*g;else break t;P.setAttribute("width",v.toString()+"px"),P.setAttribute("height",p.toString()+"px"),l=[new XMLSerializer().serializeToString(P)]}try{var A=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var L=this,F=!1;this.data.onload=function(){F||f.revokeObjectURL(L.data),L.onProcessComplete()},this.data.onerror=function(){F?L.onProcessError():(F=!0,f.revokeObjectURL(L.data),L.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},f.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("svg",function(c,l,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new u(this,c[g]));else this.addFile(new u(this,c,l,v,p));return this}),r.exports=u},88423:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g){var m="js";if(n(v)){var C=v;v=a(C,"key"),p=a(C,"url"),g=a(C,"xhrSettings"),m=a(C,"extension",m)}var P={type:"text",extension:m,responseType:"text",key:v,url:p,xhrSettings:g};f.call(this,l,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(c)),this.complete=!0}});o.register("sceneFile",function(c,l,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,l,v));return this}),r.exports=u},56812:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m,C){var P="js";if(n(v)){var M=v;v=a(M,"key"),p=a(M,"url"),C=a(M,"xhrSettings"),P=a(M,"extension",P),g=a(M,"systemKey"),m=a(M,"sceneKey")}var E={type:"scenePlugin",cache:!1,extension:P,responseType:"text",key:v,url:p,xhrSettings:C,config:{systemKey:g,sceneKey:m}};f.call(this,l,E),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,v=this.key,p=a(l,"systemKey",v),g=a(l,"sceneKey",v);this.state===x.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(c,l,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,l,v,p,g));return this}),r.exports=u},34328:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g,m){var C="js";if(n(v)){var P=v;v=a(P,"key"),p=a(P,"url"),g=a(P,"type","script"),m=a(P,"xhrSettings"),C=a(P,"extension",C)}else g===void 0&&(g="script");var M={type:g,cache:!1,extension:C,responseType:"text",key:v,url:p,xhrSettings:m};f.call(this,l,M)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(c,l,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new u(this,c[g]));else this.addFile(new u(this,c,l,v,p));return this}),r.exports=u},85035:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(74099),o=i(19550),a=new d({Extends:o,initialize:function(u,c,l,v,p){o.call(this,u,c,l,p,v),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});f.register("spritesheet",function(n,u,c,l){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new a(this,n[v]));else this.addFile(new a(this,n,u,c,l));return this}),r.exports=a},78776:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=new d({Extends:f,initialize:function(l,v,p,g){var m="text",C="txt",P=l.cacheManager.text;if(n(v)){var M=v;v=a(M,"key"),p=a(M,"url"),g=a(M,"xhrSettings"),C=a(M,"extension",C),m=a(M,"type",m),P=a(M,"cache",P)}var E={type:m,cache:P,extension:C,responseType:"text",key:v,url:p,xhrSettings:g};f.call(this,l,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(c,l,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,l,v));return this}),r.exports=u},49477:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=i(80341),c=new d({Extends:f,initialize:function(v,p,g,m){var C="csv";if(n(p)){var P=p;p=a(P,"key"),g=a(P,"url"),m=a(P,"xhrSettings"),C=a(P,"extension",C)}var M={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:C,responseType:"text",key:p,url:g,xhrSettings:m};f.call(this,v,M),this.tilemapFormat=u.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l)}});o.register("tilemapCSV",function(l,v,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,v,p));return this}),r.exports=c},40807:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(518),o=i(80341),a=new d({Extends:f,initialize:function(u,c,l,v){f.call(this,u,c,l,v),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var n={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapImpact",function(n,u,c){if(Array.isArray(n))for(var l=0;l<n.length;l++)this.addFile(new a(this,n[l]));else this.addFile(new a(this,n,u,c));return this}),r.exports=a},56775:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(518),o=i(80341),a=new d({Extends:f,initialize:function(u,c,l,v){f.call(this,u,c,l,v),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var n={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapTiledJSON",function(n,u,c){if(Array.isArray(n))for(var l=0;l<n.length;l++)this.addFile(new a(this,n[l]));else this.addFile(new a(this,n,u,c));return this}),r.exports=a},25771:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(74099),f=i(95540),o=i(19550),a=i(41212),n=i(26430),u=i(78776),c=new d({Extends:n,initialize:function(v,p,g,m,C,P){var M,E;if(a(p)){var w=p;p=f(w,"key"),M=new o(v,{key:p,url:f(w,"textureURL"),extension:f(w,"textureExtension","png"),normalMap:f(w,"normalMap"),xhrSettings:f(w,"textureXhrSettings")}),E=new u(v,{key:p,url:f(w,"atlasURL"),extension:f(w,"atlasExtension","txt"),xhrSettings:f(w,"atlasXhrSettings")})}else M=new o(v,p,g,C),E=new u(v,p,m,P);M.linkFile?n.call(this,v,"unityatlas",p,[M,E,M.linkFile]):n.call(this,v,"unityatlas",p,[M,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,v.data,p),this.complete=!0}}});x.register("unityAtlas",function(l,v,p,g,m){var C;if(Array.isArray(l))for(var P=0;P<l.length;P++)C=new c(this,l[P]),this.addFile(C.files);else C=new c(this,l,v,p,g,m),this.addFile(C.files);return this}),r.exports=c},33720:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(98356),n=i(95540),u=i(41212),c=new d({Extends:f,initialize:function(v,p,g,m){if(m===void 0&&(m=!1),u(p)){var C=p;p=n(C,"key"),g=n(C,"url",[]),m=n(C,"noAudio",!1)}var P=v.systems.game.device.video.getVideoURL(g);P||console.warn("VideoFile: No supported format for "+p);var M={type:"video",cache:v.cacheManager.video,extension:P.type,key:p,url:P.url,config:{noAudio:m}};f.call(this,v,M)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=a(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});o.register("video",function(l,v,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,v,p));return this}),r.exports=c},57318:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(23906),f=i(41299),o=i(74099),a=i(95540),n=i(41212),u=i(56836),c=new d({Extends:f,initialize:function(v,p,g,m){var C="xml";if(n(p)){var P=p;p=a(P,"key"),g=a(P,"url"),m=a(P,"xhrSettings"),C=a(P,"extension",C)}var M={type:"xml",cache:v.cacheManager.xml,extension:C,responseType:"text",key:p,url:g,xhrSettings:m};f.call(this,v,M)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=u(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});o.register("xml",function(l,v,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,v,p));return this}),r.exports=c},64589:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23906),x=i(79291),f={Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)};f=x(!1,f,d),r.exports=f},53307:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=0,x=0;x<i.length;x++)d+=+i[x];return d/i.length};r.exports=T},85710:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6411),x=function(f,o){return d(f)/d(o)/d(f-o)};r.exports=x},30976:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return Math.floor(Math.random()*(d-i+1)+i)};r.exports=T},87842:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){var a=(f-d)*.5,n=(o-x)*.5,u=i*i,c=i*u;return(2*x-2*f+a+n)*c+(-3*x+3*f-2*a-n)*u+a*i+x};r.exports=T},26302:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var f=Math.pow(x,-d);return Math.ceil(i*f)/f};r.exports=T},45319:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return Math.max(d,Math.min(x,i))};r.exports=T},39506:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=function(f){return f*d.DEG_TO_RAD};r.exports=x},61241:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return Math.abs(i-d)};r.exports=T},38857:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(37867),o=i(29747),a=new f,n=new x({initialize:function u(c,l,v,p){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p=u.DefaultOrder),this._x=c,this._y=l,this._z=v,this._order=p,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(u){this._x=u,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(u){this._y=u,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(u){this._z=u,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(u){this._order=u,this.onChangeCallback(this)}},set:function(u,c,l,v){return v===void 0&&(v=this._order),this._x=u,this._y=c,this._z=l,this._order=v,this.onChangeCallback(this),this},copy:function(u){return this.set(u.x,u.y,u.z,u.order)},setFromQuaternion:function(u,c,l){return c===void 0&&(c=this._order),l===void 0&&(l=!1),a.fromQuat(u),this.setFromRotationMatrix(a,c,l)},setFromRotationMatrix:function(u,c,l){c===void 0&&(c=this._order),l===void 0&&(l=!1);var v=u.val,p=v[0],g=v[4],m=v[8],C=v[1],P=v[5],M=v[9],E=v[2],w=v[6],R=v[10],A=0,L=0,F=0,O=.99999;switch(c){case"XYZ":{L=Math.asin(d(m,-1,1)),Math.abs(m)<O?(A=Math.atan2(-M,R),F=Math.atan2(-g,p)):A=Math.atan2(w,P);break}case"YXZ":{A=Math.asin(-d(M,-1,1)),Math.abs(M)<O?(L=Math.atan2(m,R),F=Math.atan2(C,P)):L=Math.atan2(-E,p);break}case"ZXY":{A=Math.asin(d(w,-1,1)),Math.abs(w)<O?(L=Math.atan2(-E,R),F=Math.atan2(-g,P)):F=Math.atan2(C,p);break}case"ZYX":{L=Math.asin(-d(E,-1,1)),Math.abs(E)<O?(A=Math.atan2(w,R),F=Math.atan2(C,p)):F=Math.atan2(-g,P);break}case"YZX":{F=Math.asin(d(C,-1,1)),Math.abs(C)<O?(A=Math.atan2(-M,P),L=Math.atan2(-E,p)):L=Math.atan2(m,R);break}case"XZY":{F=Math.asin(-d(g,-1,1)),Math.abs(g)<O?(A=Math.atan2(w,P),L=Math.atan2(m,p)):A=Math.atan2(-M,R);break}}return this._x=A,this._y=L,this._z=F,this._order=c,l&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",r.exports=n},6411:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){if(i===0)return 1;for(var d=i;--i;)d*=i;return d};r.exports=T},99472:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return Math.random()*(d-i)+i};r.exports=T},77623:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var f=Math.pow(x,-d);return Math.floor(i*f)/f};r.exports=T},62945:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=function(f,o,a){return f=d(f,0,1),(a-o)*f+o};r.exports=x},38265:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i/d/1e3};r.exports=T},78702:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i==parseFloat(i)?!(i%2):void 0};r.exports=T},94883:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i===parseFloat(i)?!(i%2):void 0};r.exports=T},28915:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return(d-i)*x+i};r.exports=T},94908:r=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x===void 0&&(x=0),i.clone().lerp(d,x)};r.exports=T},94434:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new x(this)},set:function(f){return this.copy(f)},copy:function(f){var o=this.val,a=f.val;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this},fromMat4:function(f){var o=f.val,a=this.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],this},fromArray:function(f){var o=this.val;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],this},identity:function(){var f=this.val;return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,this},transpose:function(){var f=this.val,o=f[1],a=f[2],n=f[5];return f[1]=f[3],f[2]=f[6],f[3]=o,f[5]=f[7],f[6]=a,f[7]=n,this},invert:function(){var f=this.val,o=f[0],a=f[1],n=f[2],u=f[3],c=f[4],l=f[5],v=f[6],p=f[7],g=f[8],m=g*c-l*p,C=-g*u+l*v,P=p*u-c*v,M=o*m+a*C+n*P;return M?(M=1/M,f[0]=m*M,f[1]=(-g*a+n*p)*M,f[2]=(l*a-n*c)*M,f[3]=C*M,f[4]=(g*o-n*v)*M,f[5]=(-l*o+n*u)*M,f[6]=P*M,f[7]=(-p*o+a*v)*M,f[8]=(c*o-a*u)*M,this):null},adjoint:function(){var f=this.val,o=f[0],a=f[1],n=f[2],u=f[3],c=f[4],l=f[5],v=f[6],p=f[7],g=f[8];return f[0]=c*g-l*p,f[1]=n*p-a*g,f[2]=a*l-n*c,f[3]=l*v-u*g,f[4]=o*g-n*v,f[5]=n*u-o*l,f[6]=u*p-c*v,f[7]=a*v-o*p,f[8]=o*c-a*u,this},determinant:function(){var f=this.val,o=f[0],a=f[1],n=f[2],u=f[3],c=f[4],l=f[5],v=f[6],p=f[7],g=f[8];return o*(g*c-l*p)+a*(-g*u+l*v)+n*(p*u-c*v)},multiply:function(f){var o=this.val,a=o[0],n=o[1],u=o[2],c=o[3],l=o[4],v=o[5],p=o[6],g=o[7],m=o[8],C=f.val,P=C[0],M=C[1],E=C[2],w=C[3],R=C[4],A=C[5],L=C[6],F=C[7],O=C[8];return o[0]=P*a+M*c+E*p,o[1]=P*n+M*l+E*g,o[2]=P*u+M*v+E*m,o[3]=w*a+R*c+A*p,o[4]=w*n+R*l+A*g,o[5]=w*u+R*v+A*m,o[6]=L*a+F*c+O*p,o[7]=L*n+F*l+O*g,o[8]=L*u+F*v+O*m,this},translate:function(f){var o=this.val,a=f.x,n=f.y;return o[6]=a*o[0]+n*o[3]+o[6],o[7]=a*o[1]+n*o[4]+o[7],o[8]=a*o[2]+n*o[5]+o[8],this},rotate:function(f){var o=this.val,a=o[0],n=o[1],u=o[2],c=o[3],l=o[4],v=o[5],p=Math.sin(f),g=Math.cos(f);return o[0]=g*a+p*c,o[1]=g*n+p*l,o[2]=g*u+p*v,o[3]=g*c-p*a,o[4]=g*l-p*n,o[5]=g*v-p*u,this},scale:function(f){var o=this.val,a=f.x,n=f.y;return o[0]=a*o[0],o[1]=a*o[1],o[2]=a*o[2],o[3]=n*o[3],o[4]=n*o[4],o[5]=n*o[5],this},fromQuat:function(f){var o=f.x,a=f.y,n=f.z,u=f.w,c=o+o,l=a+a,v=n+n,p=o*c,g=o*l,m=o*v,C=a*l,P=a*v,M=n*v,E=u*c,w=u*l,R=u*v,A=this.val;return A[0]=1-(C+M),A[3]=g+R,A[6]=m-w,A[1]=g-R,A[4]=1-(p+M),A[7]=P+E,A[2]=m+w,A[5]=P-E,A[8]=1-(p+C),this},normalFromMat4:function(f){var o=f.val,a=this.val,n=o[0],u=o[1],c=o[2],l=o[3],v=o[4],p=o[5],g=o[6],m=o[7],C=o[8],P=o[9],M=o[10],E=o[11],w=o[12],R=o[13],A=o[14],L=o[15],F=n*p-u*v,O=n*g-c*v,b=n*m-l*v,I=u*g-c*p,B=u*m-l*p,N=c*m-l*g,k=C*R-P*w,Y=C*A-M*w,H=C*L-E*w,z=P*A-M*R,X=P*L-E*R,D=M*L-E*A,G=F*D-O*X+b*z+I*H-B*Y+N*k;return G?(G=1/G,a[0]=(p*D-g*X+m*z)*G,a[1]=(g*H-v*D-m*Y)*G,a[2]=(v*X-p*H+m*k)*G,a[3]=(c*X-u*D-l*z)*G,a[4]=(n*D-c*H+l*Y)*G,a[5]=(u*H-n*X-l*k)*G,a[6]=(R*N-A*B+L*I)*G,a[7]=(A*b-w*N-L*O)*G,a[8]=(w*B-R*b+L*F)*G,this):null}});r.exports=x},37867:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(25836),f=1e-6,o=new d({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new o(this)},set:function(v){return this.copy(v)},setValues:function(v,p,g,m,C,P,M,E,w,R,A,L,F,O,b,I){var B=this.val;return B[0]=v,B[1]=p,B[2]=g,B[3]=m,B[4]=C,B[5]=P,B[6]=M,B[7]=E,B[8]=w,B[9]=R,B[10]=A,B[11]=L,B[12]=F,B[13]=O,B[14]=b,B[15]=I,this},copy:function(v){var p=v.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,p,g){var m=a.fromQuat(g),C=m.val,P=p.x,M=p.y,E=p.z;return this.setValues(C[0]*P,C[1]*P,C[2]*P,0,C[4]*M,C[5]*M,C[6]*M,0,C[8]*E,C[9]*E,C[10]*E,0,v.x,v.y,v.z,1)},xyz:function(v,p,g){this.identity();var m=this.val;return m[12]=v,m[13]=p,m[14]=g,this},scaling:function(v,p,g){this.zero();var m=this.val;return m[0]=v,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,p=v[1],g=v[2],m=v[3],C=v[6],P=v[7],M=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=p,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=C,v[11]=v[14],v[12]=m,v[13]=P,v[14]=M,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,p=v[0],g=v[1],m=v[2],C=v[3],P=v[4],M=v[5],E=v[6],w=v[7],R=v[8],A=v[9],L=v[10],F=v[11],O=v[12],b=v[13],I=v[14],B=v[15],N=p*M-g*P,k=p*E-m*P,Y=p*w-C*P,H=g*E-m*M,z=g*w-C*M,X=m*w-C*E,D=R*b-A*O,G=R*I-L*O,V=R*B-F*O,W=A*I-L*b,U=A*B-F*b,$=L*B-F*I,K=N*$-k*U+Y*W+H*V-z*G+X*D;return K?(K=1/K,this.setValues((M*$-E*U+w*W)*K,(m*U-g*$-C*W)*K,(b*X-I*z+B*H)*K,(L*z-A*X-F*H)*K,(E*V-P*$-w*G)*K,(p*$-m*V+C*G)*K,(I*Y-O*X-B*k)*K,(R*X-L*Y+F*k)*K,(P*U-M*V+w*D)*K,(g*V-p*U-C*D)*K,(O*z-b*Y+B*N)*K,(A*Y-R*z-F*N)*K,(M*G-P*W-E*D)*K,(p*W-g*G+m*D)*K,(b*k-O*H-I*N)*K,(R*H-A*k+L*N)*K)):this},adjoint:function(){var v=this.val,p=v[0],g=v[1],m=v[2],C=v[3],P=v[4],M=v[5],E=v[6],w=v[7],R=v[8],A=v[9],L=v[10],F=v[11],O=v[12],b=v[13],I=v[14],B=v[15];return this.setValues(M*(L*B-F*I)-A*(E*B-w*I)+b*(E*F-w*L),-(g*(L*B-F*I)-A*(m*B-C*I)+b*(m*F-C*L)),g*(E*B-w*I)-M*(m*B-C*I)+b*(m*w-C*E),-(g*(E*F-w*L)-M*(m*F-C*L)+A*(m*w-C*E)),-(P*(L*B-F*I)-R*(E*B-w*I)+O*(E*F-w*L)),p*(L*B-F*I)-R*(m*B-C*I)+O*(m*F-C*L),-(p*(E*B-w*I)-P*(m*B-C*I)+O*(m*w-C*E)),p*(E*F-w*L)-P*(m*F-C*L)+R*(m*w-C*E),P*(A*B-F*b)-R*(M*B-w*b)+O*(M*F-w*A),-(p*(A*B-F*b)-R*(g*B-C*b)+O*(g*F-C*A)),p*(M*B-w*b)-P*(g*B-C*b)+O*(g*w-C*M),-(p*(M*F-w*A)-P*(g*F-C*A)+R*(g*w-C*M)),-(P*(A*I-L*b)-R*(M*I-E*b)+O*(M*L-E*A)),p*(A*I-L*b)-R*(g*I-m*b)+O*(g*L-m*A),-(p*(M*I-E*b)-P*(g*I-m*b)+O*(g*E-m*M)),p*(M*L-E*A)-P*(g*L-m*A)+R*(g*E-m*M))},determinant:function(){var v=this.val,p=v[0],g=v[1],m=v[2],C=v[3],P=v[4],M=v[5],E=v[6],w=v[7],R=v[8],A=v[9],L=v[10],F=v[11],O=v[12],b=v[13],I=v[14],B=v[15],N=p*M-g*P,k=p*E-m*P,Y=p*w-C*P,H=g*E-m*M,z=g*w-C*M,X=m*w-C*E,D=R*b-A*O,G=R*I-L*O,V=R*B-F*O,W=A*I-L*b,U=A*B-F*b,$=L*B-F*I;return N*$-k*U+Y*W+H*V-z*G+X*D},multiply:function(v){var p=this.val,g=p[0],m=p[1],C=p[2],P=p[3],M=p[4],E=p[5],w=p[6],R=p[7],A=p[8],L=p[9],F=p[10],O=p[11],b=p[12],I=p[13],B=p[14],N=p[15],k=v.val,Y=k[0],H=k[1],z=k[2],X=k[3];return p[0]=Y*g+H*M+z*A+X*b,p[1]=Y*m+H*E+z*L+X*I,p[2]=Y*C+H*w+z*F+X*B,p[3]=Y*P+H*R+z*O+X*N,Y=k[4],H=k[5],z=k[6],X=k[7],p[4]=Y*g+H*M+z*A+X*b,p[5]=Y*m+H*E+z*L+X*I,p[6]=Y*C+H*w+z*F+X*B,p[7]=Y*P+H*R+z*O+X*N,Y=k[8],H=k[9],z=k[10],X=k[11],p[8]=Y*g+H*M+z*A+X*b,p[9]=Y*m+H*E+z*L+X*I,p[10]=Y*C+H*w+z*F+X*B,p[11]=Y*P+H*R+z*O+X*N,Y=k[12],H=k[13],z=k[14],X=k[15],p[12]=Y*g+H*M+z*A+X*b,p[13]=Y*m+H*E+z*L+X*I,p[14]=Y*C+H*w+z*F+X*B,p[15]=Y*P+H*R+z*O+X*N,this},multiplyLocal:function(v){var p=this.val,g=v.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,p){var g=v.val,m=p.val,C=g[0],P=g[4],M=g[8],E=g[12],w=g[1],R=g[5],A=g[9],L=g[13],F=g[2],O=g[6],b=g[10],I=g[14],B=g[3],N=g[7],k=g[11],Y=g[15],H=m[0],z=m[4],X=m[8],D=m[12],G=m[1],V=m[5],W=m[9],U=m[13],$=m[2],K=m[6],Z=m[10],J=m[14],Q=m[3],j=m[7],_=m[11],q=m[15];return this.setValues(C*H+P*G+M*$+E*Q,w*H+R*G+A*$+L*Q,F*H+O*G+b*$+I*Q,B*H+N*G+k*$+Y*Q,C*z+P*V+M*K+E*j,w*z+R*V+A*K+L*j,F*z+O*V+b*K+I*j,B*z+N*V+k*K+Y*j,C*X+P*W+M*Z+E*_,w*X+R*W+A*Z+L*_,F*X+O*W+b*Z+I*_,B*X+N*W+k*Z+Y*_,C*D+P*U+M*J+E*q,w*D+R*U+A*J+L*q,F*D+O*U+b*J+I*q,B*D+N*U+k*J+Y*q)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,p,g){var m=this.val;return m[12]=m[0]*v+m[4]*p+m[8]*g+m[12],m[13]=m[1]*v+m[5]*p+m[9]*g+m[13],m[14]=m[2]*v+m[6]*p+m[10]*g+m[14],m[15]=m[3]*v+m[7]*p+m[11]*g+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,p,g){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(v,p){var g=Math.cos(p),m=Math.sin(p),C=1-g,P=v.x,M=v.y,E=v.z,w=C*P,R=C*M;return this.setValues(w*P+g,w*M-m*E,w*E+m*M,0,w*M+m*E,R*M+g,R*E-m*P,0,w*E-m*M,R*E+m*P,C*E*E+g,0,0,0,0,1)},rotate:function(v,p){var g=this.val,m=p.x,C=p.y,P=p.z,M=Math.sqrt(m*m+C*C+P*P);if(Math.abs(M)<f)return this;M=1/M,m*=M,C*=M,P*=M;var E=Math.sin(v),w=Math.cos(v),R=1-w,A=g[0],L=g[1],F=g[2],O=g[3],b=g[4],I=g[5],B=g[6],N=g[7],k=g[8],Y=g[9],H=g[10],z=g[11],X=g[12],D=g[13],G=g[14],V=g[15],W=m*m*R+w,U=C*m*R+P*E,$=P*m*R-C*E,K=m*C*R-P*E,Z=C*C*R+w,J=P*C*R+m*E,Q=m*P*R+C*E,j=C*P*R-m*E,_=P*P*R+w;return this.setValues(A*W+b*U+k*$,L*W+I*U+Y*$,F*W+B*U+H*$,O*W+N*U+z*$,A*K+b*Z+k*J,L*K+I*Z+Y*J,F*K+B*Z+H*J,O*K+N*Z+z*J,A*Q+b*j+k*_,L*Q+I*j+Y*_,F*Q+B*j+H*_,O*Q+N*j+z*_,X,D,G,V)},rotateX:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),C=p[4],P=p[5],M=p[6],E=p[7],w=p[8],R=p[9],A=p[10],L=p[11];return p[4]=C*m+w*g,p[5]=P*m+R*g,p[6]=M*m+A*g,p[7]=E*m+L*g,p[8]=w*m-C*g,p[9]=R*m-P*g,p[10]=A*m-M*g,p[11]=L*m-E*g,this},rotateY:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),C=p[0],P=p[1],M=p[2],E=p[3],w=p[8],R=p[9],A=p[10],L=p[11];return p[0]=C*m-w*g,p[1]=P*m-R*g,p[2]=M*m-A*g,p[3]=E*m-L*g,p[8]=C*g+w*m,p[9]=P*g+R*m,p[10]=M*g+A*m,p[11]=E*g+L*m,this},rotateZ:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),C=p[0],P=p[1],M=p[2],E=p[3],w=p[4],R=p[5],A=p[6],L=p[7];return p[0]=C*m+w*g,p[1]=P*m+R*g,p[2]=M*m+A*g,p[3]=E*m+L*g,p[4]=w*m-C*g,p[5]=R*m-P*g,p[6]=A*m-M*g,p[7]=L*m-E*g,this},fromRotationTranslation:function(v,p){var g=v.x,m=v.y,C=v.z,P=v.w,M=g+g,E=m+m,w=C+C,R=g*M,A=g*E,L=g*w,F=m*E,O=m*w,b=C*w,I=P*M,B=P*E,N=P*w;return this.setValues(1-(F+b),A+N,L-B,0,A-N,1-(R+b),O+I,0,L+B,O-I,1-(R+F),0,p.x,p.y,p.z,1)},fromQuat:function(v){var p=v.x,g=v.y,m=v.z,C=v.w,P=p+p,M=g+g,E=m+m,w=p*P,R=p*M,A=p*E,L=g*M,F=g*E,O=m*E,b=C*P,I=C*M,B=C*E;return this.setValues(1-(L+O),R+B,A-I,0,R-B,1-(w+O),F+b,0,A+I,F-b,1-(w+L),0,0,0,0,1)},frustum:function(v,p,g,m,C,P){var M=1/(p-v),E=1/(m-g),w=1/(C-P);return this.setValues(C*2*M,0,0,0,0,C*2*E,0,0,(p+v)*M,(m+g)*E,(P+C)*w,-1,0,0,P*C*2*w,0)},perspective:function(v,p,g,m){var C=1/Math.tan(v/2),P=1/(g-m);return this.setValues(C/p,0,0,0,0,C,0,0,0,0,(m+g)*P,-1,0,0,2*m*g*P,0)},perspectiveLH:function(v,p,g,m){return this.setValues(2*g/v,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(v,p,g,m,C,P){var M=v-p,E=g-m,w=C-P;return M=M===0?M:1/M,E=E===0?E:1/E,w=w===0?w:1/w,this.setValues(-2*M,0,0,0,0,-2*E,0,0,0,0,2*w,0,(v+p)*M,(m+g)*E,(P+C)*w,1)},lookAtRH:function(v,p,g){var m=this.val;return l.subVectors(v,p),l.getLengthSquared()===0&&(l.z=1),l.normalize(),u.crossVectors(g,l),u.getLengthSquared()===0&&(Math.abs(g.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),u.crossVectors(g,l)),u.normalize(),c.crossVectors(l,u),m[0]=u.x,m[1]=u.y,m[2]=u.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=l.x,m[9]=l.y,m[10]=l.z,this},lookAt:function(v,p,g){var m=v.x,C=v.y,P=v.z,M=g.x,E=g.y,w=g.z,R=p.x,A=p.y,L=p.z;if(Math.abs(m-R)<f&&Math.abs(C-A)<f&&Math.abs(P-L)<f)return this.identity();var F=m-R,O=C-A,b=P-L,I=1/Math.sqrt(F*F+O*O+b*b);F*=I,O*=I,b*=I;var B=E*b-w*O,N=w*F-M*b,k=M*O-E*F;I=Math.sqrt(B*B+N*N+k*k),I?(I=1/I,B*=I,N*=I,k*=I):(B=0,N=0,k=0);var Y=O*k-b*N,H=b*B-F*k,z=F*N-O*B;return I=Math.sqrt(Y*Y+H*H+z*z),I?(I=1/I,Y*=I,H*=I,z*=I):(Y=0,H=0,z=0),this.setValues(B,Y,F,0,N,H,O,0,k,z,b,0,-(B*m+N*C+k*P),-(Y*m+H*C+z*P),-(F*m+O*C+b*P),1)},yawPitchRoll:function(v,p,g){this.zero(),a.zero(),n.zero();var m=this.val,C=a.val,P=n.val,M=Math.sin(g),E=Math.cos(g);return m[10]=1,m[15]=1,m[0]=E,m[1]=M,m[4]=-M,m[5]=E,M=Math.sin(p),E=Math.cos(p),C[0]=1,C[15]=1,C[5]=E,C[10]=E,C[9]=-M,C[6]=M,M=Math.sin(v),E=Math.cos(v),P[5]=1,P[15]=1,P[0]=E,P[2]=-M,P[8]=M,P[10]=E,this.multiplyLocal(a),this.multiplyLocal(n),this},setWorldMatrix:function(v,p,g,m,C){return this.yawPitchRoll(v.y,v.x,v.z),a.scaling(g.x,g.y,g.z),n.xyz(p.x,p.y,p.z),this.multiplyLocal(a),this.multiplyLocal(n),m&&this.multiplyLocal(m),C&&this.multiplyLocal(C),this},multiplyToMat4:function(v,p){var g=this.val,m=v.val,C=g[0],P=g[1],M=g[2],E=g[3],w=g[4],R=g[5],A=g[6],L=g[7],F=g[8],O=g[9],b=g[10],I=g[11],B=g[12],N=g[13],k=g[14],Y=g[15],H=m[0],z=m[1],X=m[2],D=m[3],G=m[4],V=m[5],W=m[6],U=m[7],$=m[8],K=m[9],Z=m[10],J=m[11],Q=m[12],j=m[13],_=m[14],q=m[15];return p.setValues(H*C+z*w+X*F+D*B,z*P+z*R+X*O+D*N,X*M+z*A+X*b+D*k,D*E+z*L+X*I+D*Y,G*C+V*w+W*F+U*B,G*P+V*R+W*O+U*N,G*M+V*A+W*b+U*k,G*E+V*L+W*I+U*Y,$*C+K*w+Z*F+J*B,$*P+K*R+Z*O+J*N,$*M+K*A+Z*b+J*k,$*E+K*L+Z*I+J*Y,Q*C+j*w+_*F+q*B,Q*P+j*R+_*O+q*N,Q*M+j*A+_*b+q*k,Q*E+j*L+_*I+q*Y)},fromRotationXYTranslation:function(v,p,g){var m=p.x,C=p.y,P=p.z,M=Math.sin(v.x),E=Math.cos(v.x),w=Math.sin(v.y),R=Math.cos(v.y),A=m,L=C,F=P,O=-M,b=0-O*w,I=0-E*w,B=O*R,N=E*R;return g||(A=R*m+w*P,L=b*m+E*C+B*P,F=I*m+M*C+N*P),this.setValues(R,b,I,0,0,E,M,0,w,B,N,0,A,L,F,1)},getMaxScaleOnAxis:function(){var v=this.val,p=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(p,g,m))}}),a=new o,n=new o,u=new x,c=new x,l=new x;r.exports=o},86883:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return Math.min(i+d,x)};r.exports=T},50040:r=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=i.length;if(d===0)return 0;i.sort(function(f,o){return f-o});var x=Math.floor(d/2);return d%2===0?(i[x]+i[x-1])/2:i[x]};r.exports=T},37204:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return Math.max(i-d,x)};r.exports=T},65201:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){x===void 0&&(x=d+1);var o=(i-d)/(x-d);return o>1?f!==void 0?(o=(f-i)/(f-x),o<0&&(o=0)):o=1:o<0&&(o=0),o};r.exports=T},15746:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(94434),f=i(29747),o=i(25836),a=1e-6,n=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),c=new o(1,0,0),l=new o(0,1,0),v=new o,p=new x,g=new d({initialize:function(C,P,M,E){this.onChangeCallback=f,this.set(C,P,M,E)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,C,P,M,E){return E===void 0&&(E=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=C||0,this._z=P||0,this._w=M||0),E&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,C=this.y,P=this.z,M=this.w;return Math.sqrt(m*m+C*C+P*P+M*M)},lengthSq:function(){var m=this.x,C=this.y,P=this.z,M=this.w;return m*m+C*C+P*P+M*M},normalize:function(){var m=this.x,C=this.y,P=this.z,M=this.w,E=m*m+C*C+P*P+M*M;return E>0&&(E=1/Math.sqrt(E),this._x=m*E,this._y=C*E,this._z=P*E,this._w=M*E),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,C){C===void 0&&(C=0);var P=this.x,M=this.y,E=this.z,w=this.w;return this.set(P+C*(m.x-P),M+C*(m.y-M),E+C*(m.z-E),w+C*(m.w-w))},rotationTo:function(m,C){var P=m.x*C.x+m.y*C.y+m.z*C.z;return P<-.999999?(v.copy(c).cross(m).length()<a&&v.copy(l).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):P>.999999?this.set(0,0,0,1):(v.copy(m).cross(C),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+P,this.normalize())},setAxes:function(m,C,P){var M=p.val;return M[0]=C.x,M[3]=C.y,M[6]=C.z,M[1]=P.x,M[4]=P.y,M[7]=P.z,M[2]=-m.x,M[5]=-m.y,M[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,C){C=C*.5;var P=Math.sin(C);return this.set(P*m.x,P*m.y,P*m.z,Math.cos(C))},multiply:function(m){var C=this.x,P=this.y,M=this.z,E=this.w,w=m.x,R=m.y,A=m.z,L=m.w;return this.set(C*L+E*w+P*A-M*R,P*L+E*R+M*w-C*A,M*L+E*A+C*R-P*w,E*L-C*w-P*R-M*A)},slerp:function(m,C){var P=this.x,M=this.y,E=this.z,w=this.w,R=m.x,A=m.y,L=m.z,F=m.w,O=P*R+M*A+E*L+w*F;O<0&&(O=-O,R=-R,A=-A,L=-L,F=-F);var b=1-C,I=C;if(1-O>a){var B=Math.acos(O),N=Math.sin(B);b=Math.sin((1-C)*B)/N,I=Math.sin(C*B)/N}return this.set(b*P+I*R,b*M+I*A,b*E+I*L,b*w+I*F)},invert:function(){var m=this.x,C=this.y,P=this.z,M=this.w,E=m*m+C*C+P*P+M*M,w=E?1/E:0;return this.set(-m*w,-C*w,-P*w,M*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var C=this.x,P=this.y,M=this.z,E=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(C*R+E*w,P*R+M*w,M*R-P*w,E*R-C*w)},rotateY:function(m){m*=.5;var C=this.x,P=this.y,M=this.z,E=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(C*R-M*w,P*R+E*w,M*R+C*w,E*R-P*w)},rotateZ:function(m){m*=.5;var C=this.x,P=this.y,M=this.z,E=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(C*R+P*w,P*R-C*w,M*R+E*w,E*R-M*w)},calculateW:function(){var m=this.x,C=this.y,P=this.z;return this.w=-Math.sqrt(1-m*m-C*C-P*P),this},setFromEuler:function(m,C){var P=m.x/2,M=m.y/2,E=m.z/2,w=Math.cos(P),R=Math.cos(M),A=Math.cos(E),L=Math.sin(P),F=Math.sin(M),O=Math.sin(E);switch(m.order){case"XYZ":{this.set(L*R*A+w*F*O,w*F*A-L*R*O,w*R*O+L*F*A,w*R*A-L*F*O,C);break}case"YXZ":{this.set(L*R*A+w*F*O,w*F*A-L*R*O,w*R*O-L*F*A,w*R*A+L*F*O,C);break}case"ZXY":{this.set(L*R*A-w*F*O,w*F*A+L*R*O,w*R*O+L*F*A,w*R*A-L*F*O,C);break}case"ZYX":{this.set(L*R*A-w*F*O,w*F*A+L*R*O,w*R*O-L*F*A,w*R*A+L*F*O,C);break}case"YZX":{this.set(L*R*A+w*F*O,w*F*A+L*R*O,w*R*O-L*F*A,w*R*A-L*F*O,C);break}case"XZY":{this.set(L*R*A-w*F*O,w*F*A-L*R*O,w*R*O+L*F*A,w*R*A+L*F*O,C);break}}return this},setFromRotationMatrix:function(m){var C=m.val,P=C[0],M=C[4],E=C[8],w=C[1],R=C[5],A=C[9],L=C[2],F=C[6],O=C[10],b=P+R+O,I;return b>0?(I=.5/Math.sqrt(b+1),this.set((F-A)*I,(E-L)*I,(w-M)*I,.25/I)):P>R&&P>O?(I=2*Math.sqrt(1+P-R-O),this.set(.25*I,(M+w)/I,(E+L)/I,(F-A)/I)):R>O?(I=2*Math.sqrt(1+R-P-O),this.set((M+w)/I,.25*I,(A+F)/I,(E-L)/I)):(I=2*Math.sqrt(1+O-P-R),this.set((E+L)/I,(A+F)/I,.25*I,(w-M)/I)),this},fromMat3:function(m){var C=m.val,P=C[0]+C[4]+C[8],M;if(P>0)M=Math.sqrt(P+1),this.w=.5*M,M=.5/M,this._x=(C[7]-C[5])*M,this._y=(C[2]-C[6])*M,this._z=(C[3]-C[1])*M;else{var E=0;C[4]>C[0]&&(E=1),C[8]>C[E*3+E]&&(E=2);var w=n[E],R=n[w];M=Math.sqrt(C[E*3+E]-C[w*3+w]-C[R*3+R]+1),u[E]=.5*M,M=.5/M,u[w]=(C[w*3+E]+C[E*3+w])*M,u[R]=(C[R*3+E]+C[E*3+R])*M,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(C[R*3+w]-C[w*3+R])*M}return this.onChangeCallback(this),this}});r.exports=g},43396:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=function(f){return f*d.RAD_TO_DEG};r.exports=x},74362:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI;return i.x=Math.cos(x)*d,i.y=Math.sin(x)*d,i};r.exports=T},60706:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI,f=Math.random()*2-1,o=Math.sqrt(1-f*f)*d;return i.x=Math.cos(x)*o,i.y=Math.sin(x)*o,i.z=f*d,i};r.exports=T},67421:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1),i.x=(Math.random()*2-1)*d,i.y=(Math.random()*2-1)*d,i.z=(Math.random()*2-1)*d,i.w=(Math.random()*2-1)*d,i};r.exports=T},36305:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.x,f=i.y;return i.x=x*Math.cos(d)-f*Math.sin(d),i.y=x*Math.sin(d)+f*Math.cos(d),i};r.exports=T},11520:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=Math.cos(f),a=Math.sin(f),n=i.x-d,u=i.y-x;return i.x=n*o-u*a+d,i.y=n*a+u*o+x,i};r.exports=T},1163:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){var a=f+Math.atan2(i.y-x,i.x-d);return i.x=d+o*Math.cos(a),i.y=x+o*Math.sin(a),i};r.exports=T},70336:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){return i.x=d+o*Math.cos(f),i.y=x+o*Math.sin(f),i};r.exports=T},72678:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),x=i(37867),f=i(15746),o=new x,a=new f,n=new d,u=function(c,l,v){return a.setAxisAngle(l,v),o.fromRotationTranslation(a,n.set(0,0,0)),c.transformMat4(o)};r.exports=u},2284:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i>0?Math.ceil(i):Math.floor(i)};r.exports=T},41013:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var f=Math.pow(x,-d);return Math.round(i*f)/f};r.exports=T},16922:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d===void 0&&(d=1),x===void 0&&(x=1),f===void 0&&(f=1),f*=Math.PI/i;for(var o=[],a=[],n=0;n<i;n++)x-=d*f,d+=x*f,o[n]=x,a[n]=d;return{sin:a,cos:o,length:i}};r.exports=T},7602:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i<=d?0:i>=x?1:(i=(i-d)/(x-d),i*i*(3-2*i))};r.exports=T},54261:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i=Math.max(0,Math.min(1,(i-d)/(x-d))),i*i*i*(i*(i*6-15)+10)};r.exports=T},44408:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n){n===void 0&&(n=new d);var u=0,c=0,l=o*a;return f>0&&f<=l&&(f>o-1?(c=Math.floor(f/o),u=f-c*o):u=f),n.set(u,c)};r.exports=x},85955:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u,c,l,v){v===void 0&&(v=new d);var p=Math.sin(u),g=Math.cos(u),m=g*c,C=p*c,P=-p*l,M=g*l,E=1/(m*M+P*-C);return v.x=M*E*f+-P*E*o+(n*P-a*M)*E,v.y=m*E*o+-C*E*f+(-n*m+a*C)*E,v};r.exports=x},26099:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(43855),f=new d({initialize:function(a,n){this.x=0,this.y=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0):(n===void 0&&(n=a),this.x=a||0,this.y=n||0)},clone:function(){return new f(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,a){return a===void 0&&(a=o),this.x=o,this.y=a,this},setTo:function(o,a){return this.set(o,a)},setToPolar:function(o,a){return a==null&&(a=1),this.x=Math.cos(o)*a,this.y=Math.sin(o)*a,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,a){return x(this.x,o.x,a)&&x(this.y,o.y,a)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var a=o.x-this.x,n=o.y-this.y;return Math.sqrt(a*a+n*n)},distanceSq:function(o){var a=o.x-this.x,n=o.y-this.y;return a*a+n*n},length:function(){var o=this.x,a=this.y;return Math.sqrt(o*o+a*a)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,a=this.y;return o*o+a*a},normalize:function(){var o=this.x,a=this.y,n=o*o+a*a;return n>0&&(n=1/Math.sqrt(n),this.x=o*n,this.y=a*n),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,a){a===void 0&&(a=0);var n=this.x,u=this.y;return this.x=n+a*(o.x-n),this.y=u+a*(o.y-u),this},transformMat3:function(o){var a=this.x,n=this.y,u=o.val;return this.x=u[0]*a+u[3]*n+u[6],this.y=u[1]*a+u[4]*n+u[7],this},transformMat4:function(o){var a=this.x,n=this.y,u=o.val;return this.x=u[0]*a+u[4]*n+u[12],this.y=u[1]*a+u[5]*n+u[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var a=this.length();return a&&a>o&&this.scale(o/a),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var a=Math.cos(o),n=Math.sin(o);return this.set(a*this.x-n*this.y,n*this.x+a*this.y)},project:function(o){var a=this.dot(o)/o.dot(o);return this.copy(o).scale(a)}});f.ZERO=new f,f.RIGHT=new f(1,0),f.LEFT=new f(-1,0),f.UP=new f(0,-1),f.DOWN=new f(0,1),f.ONE=new f(1,1),r.exports=f},25836:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=a||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(f){return this.x=Math.min(this.x,f.x),this.y=Math.min(this.y,f.y),this.z=Math.min(this.z,f.z),this},max:function(f){return this.x=Math.max(this.x,f.x),this.y=Math.max(this.y,f.y),this.z=Math.max(this.z,f.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(f,o){return this.x=f.x+o.x,this.y=f.y+o.y,this.z=f.z+o.z,this},crossVectors:function(f,o){var a=f.x,n=f.y,u=f.z,c=o.x,l=o.y,v=o.z;return this.x=n*v-u*l,this.y=u*c-a*v,this.z=a*l-n*c,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this},set:function(f,o,a){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):(this.x=f||0,this.y=o||0,this.z=a||0),this},setFromMatrixPosition:function(f){return this.fromArray(f.val,12)},setFromMatrixColumn:function(f,o){return this.fromArray(f.val,o*4)},fromArray:function(f,o){return o===void 0&&(o=0),this.x=f[o],this.y=f[o+1],this.z=f[o+2],this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this},addScalar:function(f){return this.x+=f,this.y+=f,this.z+=f,this},addScale:function(f,o){return this.x+=f.x*o,this.y+=f.y*o,this.z+=f.z*o||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this},scale:function(f){return isFinite(f)?(this.x*=f,this.y*=f,this.z*=f):(this.x=0,this.y=0,this.z=0),this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(f){var o=f.x-this.x,a=f.y-this.y,n=f.z-this.z||0;return Math.sqrt(o*o+a*a+n*n)},distanceSq:function(f){var o=f.x-this.x,a=f.y-this.y,n=f.z-this.z||0;return o*o+a*a+n*n},length:function(){var f=this.x,o=this.y,a=this.z;return Math.sqrt(f*f+o*o+a*a)},lengthSq:function(){var f=this.x,o=this.y,a=this.z;return f*f+o*o+a*a},normalize:function(){var f=this.x,o=this.y,a=this.z,n=f*f+o*o+a*a;return n>0&&(n=1/Math.sqrt(n),this.x=f*n,this.y=o*n,this.z=a*n),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z},cross:function(f){var o=this.x,a=this.y,n=this.z,u=f.x,c=f.y,l=f.z;return this.x=a*l-n*c,this.y=n*u-o*l,this.z=o*c-a*u,this},lerp:function(f,o){o===void 0&&(o=0);var a=this.x,n=this.y,u=this.z;return this.x=a+o*(f.x-a),this.y=n+o*(f.y-n),this.z=u+o*(f.z-u),this},applyMatrix3:function(f){var o=this.x,a=this.y,n=this.z,u=f.val;return this.x=u[0]*o+u[3]*a+u[6]*n,this.y=u[1]*o+u[4]*a+u[7]*n,this.z=u[2]*o+u[5]*a+u[8]*n,this},applyMatrix4:function(f){var o=this.x,a=this.y,n=this.z,u=f.val,c=1/(u[3]*o+u[7]*a+u[11]*n+u[15]);return this.x=(u[0]*o+u[4]*a+u[8]*n+u[12])*c,this.y=(u[1]*o+u[5]*a+u[9]*n+u[13])*c,this.z=(u[2]*o+u[6]*a+u[10]*n+u[14])*c,this},transformMat3:function(f){var o=this.x,a=this.y,n=this.z,u=f.val;return this.x=o*u[0]+a*u[3]+n*u[6],this.y=o*u[1]+a*u[4]+n*u[7],this.z=o*u[2]+a*u[5]+n*u[8],this},transformMat4:function(f){var o=this.x,a=this.y,n=this.z,u=f.val;return this.x=u[0]*o+u[4]*a+u[8]*n+u[12],this.y=u[1]*o+u[5]*a+u[9]*n+u[13],this.z=u[2]*o+u[6]*a+u[10]*n+u[14],this},transformCoordinates:function(f){var o=this.x,a=this.y,n=this.z,u=f.val,c=o*u[0]+a*u[4]+n*u[8]+u[12],l=o*u[1]+a*u[5]+n*u[9]+u[13],v=o*u[2]+a*u[6]+n*u[10]+u[14],p=o*u[3]+a*u[7]+n*u[11]+u[15];return this.x=c/p,this.y=l/p,this.z=v/p,this},transformQuat:function(f){var o=this.x,a=this.y,n=this.z,u=f.x,c=f.y,l=f.z,v=f.w,p=v*o+c*n-l*a,g=v*a+l*o-u*n,m=v*n+u*a-c*o,C=-u*o-c*a-l*n;return this.x=p*v+C*-u+g*-l-m*-c,this.y=g*v+C*-c+m*-u-p*-l,this.z=m*v+C*-l+p*-c-g*-u,this},project:function(f){var o=this.x,a=this.y,n=this.z,u=f.val,c=u[0],l=u[1],v=u[2],p=u[3],g=u[4],m=u[5],C=u[6],P=u[7],M=u[8],E=u[9],w=u[10],R=u[11],A=u[12],L=u[13],F=u[14],O=u[15],b=1/(o*p+a*P+n*R+O);return this.x=(o*c+a*g+n*M+A)*b,this.y=(o*l+a*m+n*E+L)*b,this.z=(o*v+a*C+n*w+F)*b,this},projectViewMatrix:function(f,o){return this.applyMatrix4(f).applyMatrix4(o)},unprojectViewMatrix:function(f,o){return this.applyMatrix4(f).applyMatrix4(o)},unproject:function(f,o){var a=f.x,n=f.y,u=f.z,c=f.w,l=this.x-a,v=c-this.y-1-n,p=this.z;return this.x=2*l/u-1,this.y=2*v/c-1,this.z=2*p-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),r.exports=x},61369:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=a||0,this.z=n||0,this.w=u||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this.w=f.w||0,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z&&this.w===f.w},set:function(f,o,a,n){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0,this.w=f.w||0):(this.x=f||0,this.y=o||0,this.z=a||0,this.w=n||0),this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this.w+=f.w||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this.w-=f.w||0,this},scale:function(f){return this.x*=f,this.y*=f,this.z*=f,this.w*=f,this},length:function(){var f=this.x,o=this.y,a=this.z,n=this.w;return Math.sqrt(f*f+o*o+a*a+n*n)},lengthSq:function(){var f=this.x,o=this.y,a=this.z,n=this.w;return f*f+o*o+a*a+n*n},normalize:function(){var f=this.x,o=this.y,a=this.z,n=this.w,u=f*f+o*o+a*a+n*n;return u>0&&(u=1/Math.sqrt(u),this.x=f*u,this.y=o*u,this.z=a*u,this.w=n*u),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,o){o===void 0&&(o=0);var a=this.x,n=this.y,u=this.z,c=this.w;return this.x=a+o*(f.x-a),this.y=n+o*(f.y-n),this.z=u+o*(f.z-u),this.w=c+o*(f.w-c),this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this.w*=f.w||1,this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this.w/=f.w||1,this},distance:function(f){var o=f.x-this.x,a=f.y-this.y,n=f.z-this.z||0,u=f.w-this.w||0;return Math.sqrt(o*o+a*a+n*n+u*u)},distanceSq:function(f){var o=f.x-this.x,a=f.y-this.y,n=f.z-this.z||0,u=f.w-this.w||0;return o*o+a*a+n*n+u*u},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(f){var o=this.x,a=this.y,n=this.z,u=this.w,c=f.val;return this.x=c[0]*o+c[4]*a+c[8]*n+c[12]*u,this.y=c[1]*o+c[5]*a+c[9]*n+c[13]*u,this.z=c[2]*o+c[6]*a+c[10]*n+c[14]*u,this.w=c[3]*o+c[7]*a+c[11]*n+c[15]*u,this},transformQuat:function(f){var o=this.x,a=this.y,n=this.z,u=f.x,c=f.y,l=f.z,v=f.w,p=v*o+c*n-l*a,g=v*a+l*o-u*n,m=v*n+u*a-c*o,C=-u*o-c*a-l*n;return this.x=p*v+C*-u+g*-l-m*-c,this.y=g*v+C*-c+m*-u-p*-l,this.z=m*v+C*-l+p*-c-g*-u,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,r.exports=x},60417:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return Math.abs(i-d)<=x};r.exports=T},15994:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=x-d;return d+((i-d)%f+f)%f};r.exports=T},31040:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return Math.atan2(f-d,x-i)};r.exports=T},55495:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return Math.atan2(d.y-i.y,d.x-i.x)};r.exports=T},128:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return Math.atan2(d.x-i.x,d.y-i.y)};r.exports=T},41273:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return Math.atan2(x-i,f-d)};r.exports=T},1432:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=function(f){return f>Math.PI&&(f-=d.PI2),Math.abs(((f+d.TAU)%d.PI2-d.PI2)%d.PI2)};r.exports=x},12407:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i=i%(2*Math.PI),i>=0?i:i+2*Math.PI};r.exports=T},53993:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99472),x=function(){return d(-Math.PI,Math.PI)};r.exports=x},86564:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99472),x=function(){return d(-180,180)};r.exports=x},90154:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(12407),x=function(f){return d(f+Math.PI)};r.exports=x},48736:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=function(f,o,a){return a===void 0&&(a=.05),f===o||(Math.abs(o-f)<=a||Math.abs(o-f)>=d.PI2-a?f=o:(Math.abs(o-f)>Math.PI&&(o<f?o+=d.PI2:o-=d.PI2),o>f?f+=a:o<f&&(f-=a))),f};r.exports=x},61430:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=d-i;if(x===0)return 0;var f=Math.floor((x- -180)/360);return x-f*360};r.exports=T},86554:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),x=function(f){return d(f,-Math.PI,Math.PI)};r.exports=x},30954:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),x=function(f){return d(f,-180,180)};r.exports=x},25588:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};r.exports=T},20339:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=i-x,a=d-f;return Math.sqrt(o*o+a*a)};r.exports=T},52816:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.x-d.x,f=i.y-d.y;return Math.sqrt(x*x+f*f)};r.exports=T},64559:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.x-d.x,f=i.y-d.y;return x*x+f*f};r.exports=T},82340:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return Math.max(Math.abs(i-x),Math.abs(d-f))};r.exports=T},14390:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(x-i,o)+Math.pow(f-d,o))};r.exports=T},2243:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return Math.abs(i-x)+Math.abs(d-f)};r.exports=T},89774:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=i-x,a=d-f;return o*o+a*a};r.exports=T},50994:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54178),x=i(41521),f=i(79980),o=i(85433),a=i(99140),n=i(48857),u=i(81596),c=i(59133),l=i(98516),v=i(35248),p=i(82500),g=i(49752);r.exports={Power0:u,Power1:c.Out,Power2:o.Out,Power3:l.Out,Power4:v.Out,Linear:u,Quad:c.Out,Cubic:o.Out,Quart:l.Out,Quint:v.Out,Sine:p.Out,Expo:n.Out,Circ:f.Out,Elastic:a.Out,Back:d.Out,Bounce:x.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":o.In,"Quart.easeIn":l.In,"Quint.easeIn":v.In,"Sine.easeIn":p.In,"Expo.easeIn":n.In,"Circ.easeIn":f.In,"Elastic.easeIn":a.In,"Back.easeIn":d.In,"Bounce.easeIn":x.In,"Quad.easeOut":c.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":l.Out,"Quint.easeOut":v.Out,"Sine.easeOut":p.Out,"Expo.easeOut":n.Out,"Circ.easeOut":f.Out,"Elastic.easeOut":a.Out,"Back.easeOut":d.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":f.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":d.InOut,"Bounce.easeInOut":x.InOut}},1639:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1.70158),i*i*((d+1)*i-d)};r.exports=T},50099:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=1.70158);var x=d*1.525;return(i*=2)<1?.5*(i*i*((x+1)*i-x)):.5*((i-=2)*i*((x+1)*i+x)+2)};r.exports=T},41286:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1.70158),--i*i*((d+1)*i+d)+1};r.exports=T},54178:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i=1-i,i<.36363636363636365?1-7.5625*i*i:i<.7272727272727273?1-(7.5625*(i-=.5454545454545454)*i+.75):i<.9090909090909091?1-(7.5625*(i-=.8181818181818182)*i+.9375):1-(7.5625*(i-=.9545454545454546)*i+.984375)};r.exports=T},41788:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=!1;return i<.5?(i=1-i*2,d=!0):i=i*2-1,i<.36363636363636365?i=7.5625*i*i:i<.7272727272727273?i=7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?i=7.5625*(i-=.8181818181818182)*i+.9375:i=7.5625*(i-=.9545454545454546)*i+.984375,d?(1-i)*.5:i*.5+.5};r.exports=T},69905:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i<.36363636363636365?7.5625*i*i:i<.7272727272727273?7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?7.5625*(i-=.8181818181818182)*i+.9375:7.5625*(i-=.9545454545454546)*i+.984375};r.exports=T},41521:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return 1-Math.sqrt(1-i*i)};r.exports=T},4177:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)};r.exports=T},57512:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.sqrt(1- --i*i)};r.exports=T},79980:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i*i*i};r.exports=T},82820:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)};r.exports=T},35033:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return--i*i*i+1};r.exports=T},85433:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var f=x/4;return d<1?d=1:f=x*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(i-=1))*Math.sin((i-f)*(2*Math.PI)/x))};r.exports=T},50665:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var f=x/4;return d<1?d=1:f=x*Math.asin(1/d)/(2*Math.PI),(i*=2)<1?-.5*(d*Math.pow(2,10*(i-=1))*Math.sin((i-f)*(2*Math.PI)/x)):d*Math.pow(2,-10*(i-=1))*Math.sin((i-f)*(2*Math.PI)/x)*.5+1};r.exports=T},7744:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var f=x/4;return d<1?d=1:f=x*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*i)*Math.sin((i-f)*(2*Math.PI)/x)+1};r.exports=T},99140:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return Math.pow(2,10*(i-1))-.001};r.exports=T},87844:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?.5*Math.pow(2,10*(i-1)):.5*(2-Math.pow(2,-10*(i-1)))};r.exports=T},89433:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return 1-Math.pow(2,-10*i)};r.exports=T},48857:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i};r.exports=T},81596:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=i(7147)},34826:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i*i};r.exports=T},20544:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)};r.exports=T},92029:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i*(2-i)};r.exports=T},59133:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i*i*i*i};r.exports=T},78137:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)};r.exports=T},45840:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return 1- --i*i*i*i};r.exports=T},98516:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i*i*i*i*i};r.exports=T},16509:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)};r.exports=T},17868:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return--i*i*i*i*i+1};r.exports=T},35248:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i===0?0:i===1?1:1-Math.cos(i*Math.PI/2)};r.exports=T},34025:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i===0?0:i===1?1:.5*(1-Math.cos(Math.PI*i))};r.exports=T},52768:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i===0?0:i===1?1:Math.sin(i*Math.PI/2)};r.exports=T},82500:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1),i<=0?0:i>=1?1:((d*i|0)+1)*(1/d)};r.exports=T},49752:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=i(72251)},75698:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1e-4),Math.ceil(i-d)};r.exports=T},43855:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x===void 0&&(x=1e-4),Math.abs(i-d)<x};r.exports=T},25777:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d=1e-4),Math.floor(i+d)};r.exports=T},5470:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x===void 0&&(x=1e-4),i>d-x};r.exports=T},94977:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return x===void 0&&(x=1e-4),i<d+x};r.exports=T},48379:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),x=i(79291),f={Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)};f=x(!1,f,d),r.exports=f},89318:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85710),x=function(f,o){for(var a=0,n=f.length-1,u=0;u<=n;u++)a+=Math.pow(1-o,n-u)*Math.pow(o,u)*f[u]*d(n,u);return a};r.exports=x},77259:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87842),x=function(f,o){var a=f.length-1,n=a*o,u=Math.floor(n);return f[0]===f[a]?(o<0&&(u=Math.floor(n=a*(1+o))),d(n-u,f[(u-1+a)%a],f[u],f[(u+1)%a],f[(u+2)%a])):o<0?f[0]-(d(-n,f[0],f[0],f[1],f[1])-f[0]):o>1?f[a]-(d(n-a,f[a],f[a],f[a-1],f[a-1])-f[a]):d(n-u,f[u?u-1:0],f[u],f[a<u+1?a:u+1],f[a<u+2?a:u+2])};r.exports=x},36316:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(o,a){var n=1-o;return n*n*n*a}function i(o,a){var n=1-o;return 3*n*n*o*a}function d(o,a){return 3*(1-o)*o*o*a}function x(o,a){return o*o*o*a}var f=function(o,a,n,u,c){return T(o,a)+i(o,n)+d(o,u)+x(o,c)};r.exports=f},28392:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28915),x=function(f,o){var a=f.length-1,n=a*o,u=Math.floor(n);return o<0?d(f[0],f[1],n):o>1?d(f[a],f[a-1],a-n):d(f[u],f[u+1>a?a:u+1],n-u)};r.exports=x},32112:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(f,o){var a=1-f;return a*a*o}function i(f,o){return 2*(1-f)*f*o}function d(f,o){return f*f*o}var x=function(f,o,a,n){return T(f,o)+i(f,a)+d(f,n)};r.exports=x},47235:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7602),x=function(f,o,a){return o+(a-o)*d(f,0,1)};r.exports=x},50178:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54261),x=function(f,o,a){return o+(a-o)*d(f,0,1)};r.exports=x},38289:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=Math.log(i)/.6931471805599453;return 1<<Math.ceil(d)};r.exports=T},50030:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i>0&&(i&i-1)===0&&d>0&&(d&d-1)===0};r.exports=T},81230:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i>0&&(i&i-1)===0};r.exports=T},49001:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var f=2091639*this.s0+this.c*23283064365386963e-26;return this.c=f|0,this.s0=this.s1,this.s1=this.s2,this.s2=f-this.c,this.s2},hash:function(f){var o,a=this.n;f=f.toString();for(var n=0;n<f.length;n++)a+=f.charCodeAt(n),o=.02519603282416938*a,a=o>>>0,o-=a,o*=a,a=o>>>0,o-=a,a+=o*4294967296;return this.n=a,(a>>>0)*23283064365386963e-26},init:function(f){typeof f=="string"?this.state(f):this.sow(f)},sow:function(f){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!f)for(var o=0;o<f.length&&f[o]!=null;o++){var a=f[o];this.s0-=this.hash(a),this.s0+=~~(this.s0<0),this.s1-=this.hash(a),this.s1+=~~(this.s1<0),this.s2-=this.hash(a),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(f,o){return Math.floor(this.realInRange(0,o-f+1)+f)},between:function(f,o){return Math.floor(this.realInRange(0,o-f+1)+f)},realInRange:function(f,o){return this.frac()*(o-f)+f},normal:function(){return 1-2*this.frac()},uuid:function(){var f="",o="";for(o=f="";f++<36;o+=~f%5|f*3&4?(f^15?8^this.frac()*(f^20?16:4):4).toString(16):"-");return o},pick:function(f){return f[this.integerInRange(0,f.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(f){return f[~~(Math.pow(this.frac(),2)*(f.length-.5)+.5)]},timestamp:function(f,o){return this.realInRange(f||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(f){return typeof f=="string"&&f.match(/^!rnd/)&&(f=f.split(","),this.c=parseFloat(f[1]),this.s0=parseFloat(f[2]),this.s1=parseFloat(f[3]),this.s2=parseFloat(f[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(f){for(var o=f.length-1,a=o;a>0;a--){var n=Math.floor(this.frac()*(a+1)),u=f[n];f[n]=f[a],f[a]=u}return f}});r.exports=x},63448:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return x===void 0&&(x=0),d===0?i:(i-=x,i=d*Math.ceil(i/d),f?(x+i)/d:x+i)};r.exports=T},56583:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return x===void 0&&(x=0),d===0?i:(i-=x,i=d*Math.floor(i/d),f?(x+i)/d:x+i)};r.exports=T},77720:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){return x===void 0&&(x=0),d===0?i:(i-=x,i=d*Math.round(i/d),f?(x+i)/d:x+i)};r.exports=T},73697:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i(63595);var d=i(8054),x=i(79291),f={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};f.Sound=i(23717),f=x(!1,f,d),r.exports=f,i.g.Phaser=f},71289:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(92209),f=i(88571),o=new d({Extends:f,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,u,c,l,v){f.call(this,n,u,c,l,v),this.body=null}});r.exports=o},86689:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(39506),f=i(20339),o=i(89774),a=i(66022),n=i(95540),u=i(46975),c=i(72441),l=i(47956),v=i(37277),p=i(44594),g=i(26099),m=i(82248),C=new d({initialize:function(M){this.scene=M,this.systems=M.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,M.sys.events.once(p.BOOT,this.boot,this),M.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new a(this.world));var P=this.systems.events;n(this.config,"customUpdate",!1)||P.on(p.UPDATE,this.world.update,this.world),P.on(p.POST_UPDATE,this.world.postUpdate,this.world),P.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var P=this.systems.game.config.physics,M=this.systems.settings.physics,E=u(n(M,"arcade",{}),n(P,"arcade",{}));return E},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(P,M,E,w,R){return E===void 0&&(E=null),w===void 0&&(w=null),R===void 0&&(R=E),this.world.collideObjects(P,M,E,w,R,!0)},collide:function(P,M,E,w,R){return E===void 0&&(E=null),w===void 0&&(w=null),R===void 0&&(R=E),this.world.collideObjects(P,M,E,w,R,!1)},collideTiles:function(P,M,E,w,R){return this.world.collideTiles(P,M,E,w,R)},overlapTiles:function(P,M,E,w,R){return this.world.overlapTiles(P,M,E,w,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(P,M,E,w,R,A){w===void 0&&(w=60);var L=Math.atan2(E-P.y,M-P.x);return P.body.acceleration.setToPolar(L,w),R!==void 0&&A!==void 0&&P.body.maxVelocity.set(R,A),L},accelerateToObject:function(P,M,E,w,R){return this.accelerateTo(P,M.x,M.y,E,w,R)},closest:function(P,M){M||(M=this.world.bodies.entries);for(var E=Number.MAX_VALUE,w=null,R=P.x,A=P.y,L=M.length,F=0;F<L;F++){var O=M[F],b=O.body||O;if(!(P===O||P===b||P===b.gameObject||P===b.center)){var I=o(R,A,b.center.x,b.center.y);I<E&&(w=O,E=I)}}return w},furthest:function(P,M){M||(M=this.world.bodies.entries);for(var E=-1,w=null,R=P.x,A=P.y,L=M.length,F=0;F<L;F++){var O=M[F],b=O.body||O;if(!(P===O||P===b||P===b.gameObject||P===b.center)){var I=o(R,A,b.center.x,b.center.y);I>E&&(w=O,E=I)}}return w},moveTo:function(P,M,E,w,R){w===void 0&&(w=60),R===void 0&&(R=0);var A=Math.atan2(E-P.y,M-P.x);return R>0&&(w=f(P.x,P.y,M,E)/(R/1e3)),P.body.velocity.setToPolar(A,w),A},moveToObject:function(P,M,E,w){return this.moveTo(P,M.x,M.y,E,w)},velocityFromAngle:function(P,M,E){return M===void 0&&(M=60),E===void 0&&(E=new g),E.setToPolar(x(P),M)},velocityFromRotation:function(P,M,E){return M===void 0&&(M=60),E===void 0&&(E=new g),E.setToPolar(P,M)},overlapRect:function(P,M,E,w,R,A){return l(this.world,P,M,E,w,R,A)},overlapCirc:function(P,M,E,w,R){return c(this.world,P,M,E,w,R)},shutdown:function(){if(!!this.world){var P=this.systems.events;P.off(p.UPDATE,this.world.update,this.world),P.off(p.POST_UPDATE,this.world.postUpdate,this.world),P.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",C,"arcadePhysics"),r.exports=C},13759:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(92209),f=i(68287),o=new d({Extends:f,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,u,c,l,v){f.call(this,n,u,c,l,v),this.body=null}});r.exports=o},37742:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(78389),f=i(37747),o=i(63012),a=i(43396),n=i(87841),u=i(37303),c=i(95829),l=i(26099),v=new d({Mixins:[x],initialize:function(g,m){var C=64,P=64,M={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=m!==void 0;E&&m.displayWidth&&(C=m.displayWidth,P=m.displayHeight),E||(m=M),this.world=g,this.gameObject=E?m:void 0,this.isBody=!0,this.transform={x:m.x,y:m.y,rotation:m.angle,scaleX:m.scaleX,scaleY:m.scaleY,displayOriginX:m.displayOriginX,displayOriginY:m.displayOriginY},this.debugShowBody=g.defaults.debugShowBody,this.debugShowVelocity=g.defaults.debugShowVelocity,this.debugBodyColor=g.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(m.x-m.scaleX*m.displayOriginX,m.y-m.scaleY*m.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=m.angle,this.preRotation=m.angle,this.width=C,this.height=P,this.sourceWidth=C,this.sourceHeight=P,m.frame&&(this.sourceWidth=m.frame.realWidth,this.sourceHeight=m.frame.realHeight),this.halfWidth=Math.abs(C/2),this.halfHeight=Math.abs(P/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=g.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=f.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new l(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=c(!1),this.touching=c(!0),this.wasTouching=c(!0),this.blocked=c(!0),this.syncBounds=!1,this.physicsType=f.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=m.scaleX,this._sy=m.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var p=this.gameObject,g=this.transform;if(p.parentContainer){var m=p.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);g.x=m.tx,g.y=m.ty,g.rotation=a(m.rotation),g.scaleX=m.scaleX,g.scaleY=m.scaleY,g.displayOriginX=p.displayOriginX,g.displayOriginY=p.displayOriginY}else g.x=p.x,g.y=p.y,g.rotation=p.angle,g.scaleX=p.scaleX,g.scaleY=p.scaleY,g.displayOriginX=p.displayOriginX,g.displayOriginY=p.displayOriginY;var C=!1;if(this.syncBounds){var P=p.getBounds(this._bounds);this.width=P.width,this.height=P.height,C=!0}else{var M=Math.abs(g.scaleX),E=Math.abs(g.scaleY);(this._sx!==M||this._sy!==E)&&(this.width=this.sourceWidth*M,this.height=this.sourceHeight*E,this._sx=M,this._sy=E,C=!0)}C&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var p=this.transform;this.position.x=p.x+p.scaleX*(this.offset.x-p.displayOriginX),this.position.y=p.y+p.scaleY*(this.offset.y-p.displayOriginY),this.updateCenter()},resetFlags:function(p){p===void 0&&(p=!1);var g=this.wasTouching,m=this.touching,C=this.blocked;p?c(!0,g):(g.none=m.none,g.up=m.up,g.down=m.down,g.left=m.left,g.right=m.right),c(!0,m),c(!0,C),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(p,g){if(p&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var m=this.position;this.prev.x=m.x,this.prev.y=m.y,this.prevFrame.x=m.x,this.prevFrame.y=m.y}p&&this.update(g)},update:function(p){var g=this.prev,m=this.position,C=this.velocity;if(g.set(m.x,m.y),!this.moves){this._dx=m.x-g.x,this._dy=m.y-g.y;return}if(this.directControl){var P=this.autoFrame;C.set((m.x-P.x)/p,(m.y-P.y)/p),this.world.updateMotion(this,p),this._dx=m.x-P.x,this._dy=m.y-P.y}else this.world.updateMotion(this,p),this.newVelocity.set(C.x*p,C.y*p),m.add(this.newVelocity),this._dx=m.x-g.x,this._dy=m.y-g.y;var M=C.x,E=C.y;if(this.updateCenter(),this.angle=Math.atan2(E,M),this.speed=Math.sqrt(M*M+E*E),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var w=this.blocked;this.world.emit(o.WORLD_BOUNDS,this,w.up,w.down,w.left,w.right)}},postUpdate:function(){var p=this.position,g=p.x-this.prevFrame.x,m=p.y-this.prevFrame.y,C=this.gameObject;if(this.moves){var P=this.deltaMax.x,M=this.deltaMax.y;P!==0&&g!==0&&(g<0&&g<-P?g=-P:g>0&&g>P&&(g=P)),M!==0&&m!==0&&(m<0&&m<-M?m=-M:m>0&&m>M&&(m=M)),C&&(C.x+=g,C.y+=m)}g<0?this.facing=f.FACING_LEFT:g>0&&(this.facing=f.FACING_RIGHT),m<0?this.facing=f.FACING_UP:m>0&&(this.facing=f.FACING_DOWN),this.allowRotation&&C&&(C.angle+=this.deltaZ()),this._tx=g,this._ty=m,this.autoFrame.set(p.x,p.y)},setBoundsRectangle:function(p){return this.customBoundsRectangle=p||this.world.bounds,this},checkWorldBounds:function(){var p=this.position,g=this.velocity,m=this.blocked,C=this.customBoundsRectangle,P=this.world.checkCollision,M=this.worldBounce?-this.worldBounce.x:-this.bounce.x,E=this.worldBounce?-this.worldBounce.y:-this.bounce.y,w=!1;return p.x<C.x&&P.left?(p.x=C.x,g.x*=M,m.left=!0,w=!0):this.right>C.right&&P.right&&(p.x=C.right-this.width,g.x*=M,m.right=!0,w=!0),p.y<C.y&&P.up?(p.y=C.y,g.y*=E,m.up=!0,w=!0):this.bottom>C.bottom&&P.down&&(p.y=C.bottom-this.height,g.y*=E,m.down=!0,w=!0),w&&(this.blocked.none=!1,this.updateCenter()),w},setOffset:function(p,g){return g===void 0&&(g=p),this.offset.set(p,g),this},setGameObject:function(p,g){return g===void 0&&(g=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=p,p.body&&(p.body=this),this.setSize(),this.world.add(this),this.enable=g,this},setSize:function(p,g,m){m===void 0&&(m=!0);var C=this.gameObject;if(C&&(!p&&C.frame&&(p=C.frame.realWidth),!g&&C.frame&&(g=C.frame.realHeight)),this.sourceWidth=p,this.sourceHeight=g,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),m&&C&&C.getCenter){var P=(C.width-p)/2,M=(C.height-g)/2;this.offset.set(P,M)}return this.isCircle=!1,this.radius=0,this},setCircle:function(p,g,m){return g===void 0&&(g=this.offset.x),m===void 0&&(m=this.offset.y),p>0?(this.isCircle=!0,this.radius=p,this.sourceWidth=p*2,this.sourceHeight=p*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(g,m),this.updateCenter()):this.isCircle=!1,this},reset:function(p,g){this.stop();var m=this.gameObject;m&&(m.setPosition(p,g),this.rotation=m.angle,this.preRotation=m.angle);var C=this.position;m&&m.getTopLeft?m.getTopLeft(C):C.set(p,g),this.prev.copy(C),this.prevFrame.copy(C),this.autoFrame.copy(C),m&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(p){return p.x=this.x,p.y=this.y,p.right=this.right,p.bottom=this.bottom,p},hitTest:function(p,g){if(!this.isCircle)return u(this,p,g);if(this.radius>0&&p>=this.left&&p<=this.right&&g>=this.top&&g<=this.bottom){var m=(this.center.x-p)*(this.center.x-p),C=(this.center.y-g)*(this.center.y-g);return m+C<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(p){var g=this.position,m=g.x+this.halfWidth,C=g.y+this.halfHeight;this.debugShowBody&&(p.lineStyle(p.defaultStrokeWidth,this.debugBodyColor),this.isCircle?p.strokeCircle(m,C,this.width/2):(this.checkCollision.up&&p.lineBetween(g.x,g.y,g.x+this.width,g.y),this.checkCollision.right&&p.lineBetween(g.x+this.width,g.y,g.x+this.width,g.y+this.height),this.checkCollision.down&&p.lineBetween(g.x,g.y+this.height,g.x+this.width,g.y+this.height),this.checkCollision.left&&p.lineBetween(g.x,g.y,g.x,g.y+this.height))),this.debugShowVelocity&&(p.lineStyle(p.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),p.lineBetween(m,C,m+this.velocity.x/2,C+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(p){return p===void 0&&(p=!0),this.directControl=p,this},setCollideWorldBounds:function(p,g,m,C){p===void 0&&(p=!0),this.collideWorldBounds=p;var P=g!==void 0,M=m!==void 0;return(P||M)&&(this.worldBounce||(this.worldBounce=new l),P&&(this.worldBounce.x=g),M&&(this.worldBounce.y=m)),C!==void 0&&(this.onWorldBounds=C),this},setVelocity:function(p,g){return this.velocity.set(p,g),p=this.velocity.x,g=this.velocity.y,this.speed=Math.sqrt(p*p+g*g),this},setVelocityX:function(p){return this.setVelocity(p,this.velocity.y)},setVelocityY:function(p){return this.setVelocity(this.velocity.x,p)},setMaxVelocity:function(p,g){return this.maxVelocity.set(p,g),this},setMaxVelocityX:function(p){return this.maxVelocity.x=p,this},setMaxVelocityY:function(p){return this.maxVelocity.y=p,this},setMaxSpeed:function(p){return this.maxSpeed=p,this},setSlideFactor:function(p,g){return this.slideFactor.set(p,g),this},setBounce:function(p,g){return this.bounce.set(p,g),this},setBounceX:function(p){return this.bounce.x=p,this},setBounceY:function(p){return this.bounce.y=p,this},setAcceleration:function(p,g){return this.acceleration.set(p,g),this},setAccelerationX:function(p){return this.acceleration.x=p,this},setAccelerationY:function(p){return this.acceleration.y=p,this},setAllowDrag:function(p){return p===void 0&&(p=!0),this.allowDrag=p,this},setAllowGravity:function(p){return p===void 0&&(p=!0),this.allowGravity=p,this},setAllowRotation:function(p){return p===void 0&&(p=!0),this.allowRotation=p,this},setDrag:function(p,g){return this.drag.set(p,g),this},setDamping:function(p){return this.useDamping=p,this},setDragX:function(p){return this.drag.x=p,this},setDragY:function(p){return this.drag.y=p,this},setGravity:function(p,g){return this.gravity.set(p,g),this},setGravityX:function(p){return this.gravity.x=p,this},setGravityY:function(p){return this.gravity.y=p,this},setFriction:function(p,g){return this.friction.set(p,g),this},setFrictionX:function(p){return this.friction.x=p,this},setFrictionY:function(p){return this.friction.y=p,this},setAngularVelocity:function(p){return this.angularVelocity=p,this},setAngularAcceleration:function(p){return this.angularAcceleration=p,this},setAngularDrag:function(p){return this.angularDrag=p,this},setMass:function(p){return this.mass=p,this},setImmovable:function(p){return p===void 0&&(p=!0),this.immovable=p,this},setEnable:function(p){return p===void 0&&(p=!0),this.enable=p,this},processX:function(p,g,m,C){this.x+=p,this.updateCenter(),g!==null&&(this.velocity.x=g*this.slideFactor.x);var P=this.blocked;m&&(P.left=!0,P.none=!1),C&&(P.right=!0,P.none=!1)},processY:function(p,g,m,C){this.y+=p,this.updateCenter(),g!==null&&(this.velocity.y=g*this.slideFactor.y);var P=this.blocked;m&&(P.up=!0,P.none=!1),C&&(P.down=!0,P.none=!1)},x:{get:function(){return this.position.x},set:function(p){this.position.x=p}},y:{get:function(){return this.position.y},set:function(p){this.position.y=p}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=v},79342:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u,c,l,v){this.world=o,this.name="",this.active=!0,this.overlapOnly=a,this.object1=n,this.object2=u,this.collideCallback=c,this.processCallback=l,this.callbackContext=v},setName:function(f){return this.name=f,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});r.exports=x},66022:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71289),x=i(13759),f=i(37742),o=i(83419),a=i(37747),n=i(60758),u=i(72624),c=i(71464),l=new o({initialize:function(p){this.world=p,this.scene=p.scene,this.sys=p.scene.sys},collider:function(v,p,g,m,C){return this.world.addCollider(v,p,g,m,C)},overlap:function(v,p,g,m,C){return this.world.addOverlap(v,p,g,m,C)},existing:function(v,p){var g=p?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(v,g),v},staticImage:function(v,p,g,m){var C=new d(this.scene,v,p,g,m);return this.sys.displayList.add(C),this.world.enableBody(C,a.STATIC_BODY),C},image:function(v,p,g,m){var C=new d(this.scene,v,p,g,m);return this.sys.displayList.add(C),this.world.enableBody(C,a.DYNAMIC_BODY),C},staticSprite:function(v,p,g,m){var C=new x(this.scene,v,p,g,m);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,a.STATIC_BODY),C},sprite:function(v,p,g,m){var C=new x(this.scene,v,p,g,m);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,a.DYNAMIC_BODY),C},staticGroup:function(v,p){return this.sys.updateList.add(new c(this.world,this.world.scene,v,p))},group:function(v,p){return this.sys.updateList.add(new n(this.world,this.world.scene,v,p))},body:function(v,p,g,m){var C=new f(this.world);return C.position.set(v,p),g&&m&&C.setSize(g,m),this.world.add(C,a.DYNAMIC_BODY),C},staticBody:function(v,p,g,m){var C=new u(this.world);return C.position.set(v,p),g&&m&&C.setSize(g,m),this.world.add(C,a.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=l},79599:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=0;if(!Array.isArray(i))d=i;else for(var x=0;x<i.length;x++)d|=i[x];return d};r.exports=T},64897:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),x=function(f,o,a,n){var u=0,c=f.deltaAbsX()+o.deltaAbsX()+n;return f._dx===0&&o._dx===0?(f.embedded=!0,o.embedded=!0):f._dx>o._dx?(u=f.right-o.x,u>c&&!a||f.checkCollision.right===!1||o.checkCollision.left===!1?u=0:(f.touching.none=!1,f.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===d.STATIC_BODY&&!a&&(f.blocked.none=!1,f.blocked.right=!0),f.physicsType===d.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.left=!0))):f._dx<o._dx&&(u=f.x-o.width-o.x,-u>c&&!a||f.checkCollision.left===!1||o.checkCollision.right===!1?u=0:(f.touching.none=!1,f.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===d.STATIC_BODY&&!a&&(f.blocked.none=!1,f.blocked.left=!0),f.physicsType===d.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.right=!0))),f.overlapX=u,o.overlapX=u,u};r.exports=x},45170:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),x=function(f,o,a,n){var u=0,c=f.deltaAbsY()+o.deltaAbsY()+n;return f._dy===0&&o._dy===0?(f.embedded=!0,o.embedded=!0):f._dy>o._dy?(u=f.bottom-o.y,u>c&&!a||f.checkCollision.down===!1||o.checkCollision.up===!1?u=0:(f.touching.none=!1,f.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===d.STATIC_BODY&&!a&&(f.blocked.none=!1,f.blocked.down=!0),f.physicsType===d.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.up=!0))):f._dy<o._dy&&(u=f.y-o.bottom,-u>c&&!a||f.checkCollision.up===!1||o.checkCollision.down===!1?u=0:(f.touching.none=!1,f.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===d.STATIC_BODY&&!a&&(f.blocked.none=!1,f.blocked.up=!0),f.physicsType===d.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.down=!0))),f.overlapY=u,o.overlapY=u,u};r.exports=x},60758:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13759),x=i(83419),f=i(78389),o=i(37747),a=i(95540),n=i(26479),u=i(41212),c=new x({Extends:n,Mixins:[f],initialize:function(v,p,g,m){if(!g&&!m)m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(u(g))m=g,g=null,m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&u(g[0])){var C=this;g.forEach(function(P){P.internalCreateCallback=C.createCallbackHandler,P.internalRemoveCallback=C.removeCallbackHandler,P.classType=a(P,"classType",d)}),m=null}else m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=v,m&&(m.classType=a(m,"classType",d)),this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:a(m,"collideWorldBounds",!1),setBoundsRectangle:a(m,"customBoundsRectangle",null),setAccelerationX:a(m,"accelerationX",0),setAccelerationY:a(m,"accelerationY",0),setAllowDrag:a(m,"allowDrag",!0),setAllowGravity:a(m,"allowGravity",!0),setAllowRotation:a(m,"allowRotation",!0),setDamping:a(m,"useDamping",!1),setBounceX:a(m,"bounceX",0),setBounceY:a(m,"bounceY",0),setDragX:a(m,"dragX",0),setDragY:a(m,"dragY",0),setEnable:a(m,"enable",!0),setGravityX:a(m,"gravityX",0),setGravityY:a(m,"gravityY",0),setFrictionX:a(m,"frictionX",0),setFrictionY:a(m,"frictionY",0),setMaxSpeed:a(m,"maxSpeed",-1),setMaxVelocityX:a(m,"maxVelocityX",1e4),setMaxVelocityY:a(m,"maxVelocityY",1e4),setVelocityX:a(m,"velocityX",0),setVelocityY:a(m,"velocityY",0),setAngularVelocity:a(m,"angularVelocity",0),setAngularAcceleration:a(m,"angularAcceleration",0),setAngularDrag:a(m,"angularDrag",0),setMass:a(m,"mass",1),setImmovable:a(m,"immovable",!1)},n.call(this,p,g,m),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.DYNAMIC_BODY);var v=l.body;for(var p in this.defaults)v[p](this.defaults[p])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,v,p){p===void 0&&(p=0);for(var g=this.getChildren(),m=0;m<g.length;m++)g[m].body.velocity.set(l+m*p,v+m*p);return this},setVelocityX:function(l,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.x=l+g*v;return this},setVelocityY:function(l,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.y=l+g*v;return this}});r.exports=c},3017:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,i,d,x,f,o,a,n,u,c,l,v,p,g,m,C,P,M=function(F,O,b){T=F,i=O;var I=T.velocity.x,B=i.velocity.x;return d=T.pushable,u=T._dx<0,c=T._dx>0,l=T._dx===0,m=Math.abs(T.right-i.x)<=Math.abs(i.right-T.x),a=B-I*T.bounce.x,x=i.pushable,v=i._dx<0,p=i._dx>0,g=i._dx===0,C=!m,n=I-B*i.bounce.x,P=Math.abs(b),E()},E=function(){return c&&m&&i.blocked.right?(T.processX(-P,a,!1,!0),1):u&&C&&i.blocked.left?(T.processX(P,a,!0),1):p&&C&&T.blocked.right?(i.processX(-P,n,!1,!0),2):v&&m&&T.blocked.left?(i.processX(P,n,!0),2):0},w=function(){var F=T.velocity.x,O=i.velocity.x,b=Math.sqrt(O*O*i.mass/T.mass)*(O>0?1:-1),I=Math.sqrt(F*F*T.mass/i.mass)*(F>0?1:-1),B=(b+I)*.5;return b-=B,I-=B,f=B+b*T.bounce.x,o=B+I*i.bounce.x,u&&C?R(0):v&&m?R(1):c&&m?R(2):p&&C?R(3):!1},R=function(F){if(d&&x)P*=.5,F===0||F===3?(T.processX(P,f),i.processX(-P,o)):(T.processX(-P,f),i.processX(P,o));else if(d&&!x)F===0||F===3?T.processX(P,a,!0):T.processX(-P,a,!1,!0);else if(!d&&x)F===0||F===3?i.processX(-P,n,!1,!0):i.processX(P,n,!0);else{var O=P*.5;F===0?g?(T.processX(P,0,!0),i.processX(0,null,!1,!0)):p?(T.processX(O,0,!0),i.processX(-O,0,!1,!0)):(T.processX(O,i.velocity.x,!0),i.processX(-O,null,!1,!0)):F===1?l?(T.processX(0,null,!1,!0),i.processX(P,0,!0)):c?(T.processX(-O,0,!1,!0),i.processX(O,0,!0)):(T.processX(-O,null,!1,!0),i.processX(O,T.velocity.x,!0)):F===2?g?(T.processX(-P,0,!1,!0),i.processX(0,null,!0)):v?(T.processX(-O,0,!1,!0),i.processX(O,0,!0)):(T.processX(-O,i.velocity.x,!1,!0),i.processX(O,null,!0)):F===3&&(l?(T.processX(0,null,!0),i.processX(-P,0,!1,!0)):u?(T.processX(O,0,!0),i.processX(-O,0,!1,!0)):(T.processX(O,i.velocity.y,!0),i.processX(-O,null,!1,!0)))}return!0},A=function(F){F===1?i.velocity.x=0:m?i.processX(P,n,!0):i.processX(-P,n,!1,!0),T.moves&&(i.y+=(T.y-T.prev.y)*T.friction.y,i._dy=i.y-i.prev.y)},L=function(F){F===2?T.velocity.x=0:C?T.processX(P,a,!0):T.processX(-P,a,!1,!0),i.moves&&(T.y+=(i.y-i.prev.y)*i.friction.y,T._dy=T.y-T.prev.y)};r.exports={BlockCheck:E,Check:w,Set:M,Run:R,RunImmovableBody1:A,RunImmovableBody2:L}},47962:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,i,d,x,f,o,a,n,u,c,l,v,p,g,m,C,P,M=function(F,O,b){T=F,i=O;var I=T.velocity.y,B=i.velocity.y;return d=T.pushable,u=T._dy<0,c=T._dy>0,l=T._dy===0,m=Math.abs(T.bottom-i.y)<=Math.abs(i.bottom-T.y),a=B-I*T.bounce.y,x=i.pushable,v=i._dy<0,p=i._dy>0,g=i._dy===0,C=!m,n=I-B*i.bounce.y,P=Math.abs(b),E()},E=function(){return c&&m&&i.blocked.down?(T.processY(-P,a,!1,!0),1):u&&C&&i.blocked.up?(T.processY(P,a,!0),1):p&&C&&T.blocked.down?(i.processY(-P,n,!1,!0),2):v&&m&&T.blocked.up?(i.processY(P,n,!0),2):0},w=function(){var F=T.velocity.y,O=i.velocity.y,b=Math.sqrt(O*O*i.mass/T.mass)*(O>0?1:-1),I=Math.sqrt(F*F*T.mass/i.mass)*(F>0?1:-1),B=(b+I)*.5;return b-=B,I-=B,f=B+b*T.bounce.y,o=B+I*i.bounce.y,u&&C?R(0):v&&m?R(1):c&&m?R(2):p&&C?R(3):!1},R=function(F){if(d&&x)P*=.5,F===0||F===3?(T.processY(P,f),i.processY(-P,o)):(T.processY(-P,f),i.processY(P,o));else if(d&&!x)F===0||F===3?T.processY(P,a,!0):T.processY(-P,a,!1,!0);else if(!d&&x)F===0||F===3?i.processY(-P,n,!1,!0):i.processY(P,n,!0);else{var O=P*.5;F===0?g?(T.processY(P,0,!0),i.processY(0,null,!1,!0)):p?(T.processY(O,0,!0),i.processY(-O,0,!1,!0)):(T.processY(O,i.velocity.y,!0),i.processY(-O,null,!1,!0)):F===1?l?(T.processY(0,null,!1,!0),i.processY(P,0,!0)):c?(T.processY(-O,0,!1,!0),i.processY(O,0,!0)):(T.processY(-O,null,!1,!0),i.processY(O,T.velocity.y,!0)):F===2?g?(T.processY(-P,0,!1,!0),i.processY(0,null,!0)):v?(T.processY(-O,0,!1,!0),i.processY(O,0,!0)):(T.processY(-O,i.velocity.y,!1,!0),i.processY(O,null,!0)):F===3&&(l?(T.processY(0,null,!0),i.processY(-P,0,!1,!0)):u?(T.processY(O,0,!0),i.processY(-O,0,!1,!0)):(T.processY(O,i.velocity.y,!0),i.processY(-O,null,!1,!0)))}return!0},A=function(F){F===1?i.velocity.y=0:m?i.processY(P,n,!0):i.processY(-P,n,!1,!0),T.moves&&(i.x+=(T.x-T.prev.x)*T.friction.x,i._dx=i.x-i.prev.x)},L=function(F){F===2?T.velocity.y=0:C?T.processY(P,a,!0):T.processY(-P,a,!1,!0),i.moves&&(T.x+=(i.x-i.prev.x)*i.friction.x,T._dx=T.x-T.prev.x)};r.exports={BlockCheck:E,Check:w,Set:M,Run:R,RunImmovableBody1:A,RunImmovableBody2:L}},14087:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64897),x=i(3017),f=function(o,a,n,u,c){c===void 0&&(c=d(o,a,n,u));var l=o.immovable,v=a.immovable;if(n||c===0||l&&v||o.customSeparateX||a.customSeparateX)return c!==0||o.embedded&&a.embedded;var p=x.Set(o,a,c);return!l&&!v?p>0?!0:x.Check():(l?x.RunImmovableBody1(p):v&&x.RunImmovableBody2(p),!0)};r.exports=f},89936:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45170),x=i(47962),f=function(o,a,n,u,c){c===void 0&&(c=d(o,a,n,u));var l=o.immovable,v=a.immovable;if(n||c===0||l&&v||o.customSeparateY||a.customSeparateY)return c!==0||o.embedded&&a.embedded;var p=x.Set(o,a,c);return!l&&!v?p>0?!0:x.Check():(l?x.RunImmovableBody1(p):v&&x.RunImmovableBody2(p),!0)};r.exports=f},95829:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===void 0&&(d={}),d.none=i,d.up=!1,d.down=!1,d.left=!1,d.right=!1,i||(d.up=!0,d.down=!0,d.left=!0,d.right=!0),d};r.exports=T},72624:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),x=i(83419),f=i(78389),o=i(37747),a=i(37303),n=i(95829),u=i(26099),c=new x({Mixins:[f],initialize:function(v,p){var g=64,m=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},P=p!==void 0;P&&p.displayWidth&&(g=p.displayWidth,m=p.displayHeight),P||(p=C),this.world=v,this.gameObject=P?p:void 0,this.isBody=!0,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(p.x-g*p.originX,p.y-m*p.originY),this.width=g,this.height=m,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=n(!1),this.touching=n(!0),this.wasTouching=n(!0),this.blocked=n(!0),this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(l,v){return l&&l!==this.gameObject&&(this.gameObject.body=null,l.body=this,this.gameObject=l),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,v){return v===void 0&&(v=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,v,p){p===void 0&&(p=!0);var g=this.gameObject;if(g&&g.frame&&(l||(l=g.frame.realWidth),v||(v=g.frame.realHeight)),this.world.staticTree.remove(this),this.width=l,this.height=v,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(v/2),p&&g&&g.getCenter){var m=g.displayWidth/2,C=g.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(m-this.halfWidth,C-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,v,p){return v===void 0&&(v=this.offset.x),p===void 0&&(p=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,p),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,v){var p=this.gameObject;l===void 0&&(l=p.x),v===void 0&&(v=p.y),this.world.staticTree.remove(this),p.setPosition(l,v),p.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,v){return this.isCircle?d(this,l,v):a(this,l,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var v=this.position,p=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(p,g,this.width/2):l.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=c},71464:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13759),x=i(83419),f=i(78389),o=i(37747),a=i(95540),n=i(26479),u=i(41212),c=new x({Extends:n,Mixins:[f],initialize:function(v,p,g,m){!g&&!m?m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:d}:u(g)?(m=g,g=null,m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=a(m,"classType",d)):Array.isArray(g)&&u(g[0])?(m=g,g=null,m.forEach(function(C){C.internalCreateCallback=this.createCallbackHandler,C.internalRemoveCallback=this.removeCallbackHandler,C.createMultipleCallback=this.createMultipleCallbackHandler,C.classType=a(C,"classType",d)})):m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=v,this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,n.call(this,p,g,m),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,v=0;v<l.length;v++)l[v].body.reset();return this}});r.exports=c},82248:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55495),x=i(37742),f=i(45319),o=i(83419),a=i(79342),n=i(37747),u=i(20339),c=i(52816),l=i(50792),v=i(63012),p=i(43855),g=i(5470),m=i(94977),C=i(64897),P=i(45170),M=i(96523),E=i(35154),w=i(36383),R=i(25774),A=i(96602),L=i(87841),F=i(59542),O=i(40012),b=i(14087),I=i(89936),B=i(35072),N=i(72624),k=i(2483),Y=i(61340),H=i(26099),z=i(15994),X=new o({Extends:l,initialize:function(G,V){l.call(this),this.scene=G,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new R,this.gravity=new H(E(V,"gravity.x",0),E(V,"gravity.y",0)),this.bounds=new L(E(V,"x",0),E(V,"y",0),E(V,"width",G.sys.scale.width),E(V,"height",G.sys.scale.height)),this.checkCollision={up:E(V,"checkCollision.up",!0),down:E(V,"checkCollision.down",!0),left:E(V,"checkCollision.left",!0),right:E(V,"checkCollision.right",!0)},this.fps=E(V,"fps",60),this.fixedStep=E(V,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=E(V,"timeScale",1),this.OVERLAP_BIAS=E(V,"overlapBias",4),this.TILE_BIAS=E(V,"tileBias",16),this.forceX=E(V,"forceX",!1),this.isPaused=E(V,"isPaused",!1),this._total=0,this.drawDebug=E(V,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:E(V,"debugShowBody",!0),debugShowStaticBody:E(V,"debugShowStaticBody",!0),debugShowVelocity:E(V,"debugShowVelocity",!0),bodyDebugColor:E(V,"debugBodyColor",16711935),staticBodyDebugColor:E(V,"debugStaticBodyColor",255),velocityDebugColor:E(V,"debugVelocityColor",65280)},this.maxEntries=E(V,"maxEntries",16),this.useTree=E(V,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Y,this._tempMatrix2=new Y,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(D,G){G===void 0&&(G=n.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var V=0;V<D.length;V++){var W=D[V];if(W.isParent)for(var U=W.getChildren(),$=0;$<U.length;$++){var K=U[$];K.isParent?this.enable(K,G):this.enableBody(K,G)}else this.enableBody(W,G)}},enableBody:function(D,G){return G===void 0&&(G=n.DYNAMIC_BODY),D.hasTransformComponent&&(D.body||(G===n.DYNAMIC_BODY?D.body=new x(this,D):G===n.STATIC_BODY&&(D.body=new N(this,D))),this.add(D.body)),D},add:function(D){return D.physicsType===n.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===n.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var G=0;G<D.length;G++){var V=D[G];if(V.isParent)for(var W=V.getChildren(),U=0;U<W.length;U++){var $=W[U];$.isParent?this.disable($):this.disableBody($.body)}else this.disableBody(V.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===n.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,G,V,W,U,$,K,Z){return this.bounds.setTo(D,G,V,W),U!==void 0&&this.setBoundsCollision(U,$,K,Z),this},setBoundsCollision:function(D,G,V,W){return D===void 0&&(D=!0),G===void 0&&(G=!0),V===void 0&&(V=!0),W===void 0&&(W=!0),this.checkCollision.left=D,this.checkCollision.right=G,this.checkCollision.up=V,this.checkCollision.down=W,this},pause:function(){return this.isPaused=!0,this.emit(v.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(v.RESUME),this},addCollider:function(D,G,V,W,U){V===void 0&&(V=null),W===void 0&&(W=null),U===void 0&&(U=V);var $=new a(this,!1,D,G,V,W,U);return this.colliders.add($),$},addOverlap:function(D,G,V,W,U){V===void 0&&(V=null),W===void 0&&(W=null),U===void 0&&(U=V);var $=new a(this,!0,D,G,V,W,U);return this.colliders.add($),$},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,G){if(!(this.isPaused||this.bodies.size===0)){var V,W=this._frameTime,U=this._frameTimeMS*this.timeScale;this._elapsed+=G;var $,K=this.bodies.entries,Z=this._elapsed>=U;for(this.fixedStep||(W=G*.001,Z=!0,this._elapsed=0),V=0;V<K.length;V++)$=K[V],$.enable&&$.preUpdate(Z,W);if(Z){this._elapsed-=U,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(K));var J=this.colliders.update();for(V=0;V<J.length;V++){var Q=J[V];Q.active&&Q.update()}this.emit(v.WORLD_STEP,W)}for(;this._elapsed>=U;)this._elapsed-=U,this.step(W)}},step:function(D){var G,V,W=this.bodies.entries,U=W.length;for(G=0;G<U;G++)V=W[G],V.enable&&V.update(D);this.useTree&&(this.tree.clear(),this.tree.load(W));var $=this.colliders.update();for(G=0;G<$.length;G++){var K=$[G];K.active&&K.update()}this.emit(v.WORLD_STEP,D),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var D,G,V=this.bodies.entries,W=V.length,U=this.bodies,$=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<W;D++)G=V[D],G.enable&&G.postUpdate();if(this.drawDebug){var K=this.debugGraphic;for(K.clear(),D=0;D<W;D++)G=V[D],G.willDrawDebug()&&G.drawDebug(K);for(V=$.entries,W=V.length,D=0;D<W;D++)G=V[D],G.willDrawDebug()&&G.drawDebug(K)}var Z=this.pendingDestroy;if(Z.size>0){var J=this.tree,Q=this.staticTree;for(V=Z.entries,W=V.length,D=0;D<W;D++)G=V[D],G.physicsType===n.DYNAMIC_BODY?(J.remove(G),U.delete(G)):G.physicsType===n.STATIC_BODY&&(Q.remove(G),$.delete(G)),G.world=void 0,G.gameObject=void 0;Z.clear()}},updateMotion:function(D,G){D.allowRotation&&this.computeAngularVelocity(D,G),this.computeVelocity(D,G)},computeAngularVelocity:function(D,G){var V=D.angularVelocity,W=D.angularAcceleration,U=D.angularDrag,$=D.maxAngular;W?V+=W*G:D.allowDrag&&U&&(U*=G,g(V-U,0,.1)?V-=U:m(V+U,0,.1)?V+=U:V=0),V=f(V,-$,$);var K=V-D.angularVelocity;D.angularVelocity+=K,D.rotation+=D.angularVelocity*G},computeVelocity:function(D,G){var V=D.velocity.x,W=D.acceleration.x,U=D.drag.x,$=D.maxVelocity.x,K=D.velocity.y,Z=D.acceleration.y,J=D.drag.y,Q=D.maxVelocity.y,j=D.speed,_=D.maxSpeed,q=D.allowDrag,st=D.useDamping;D.allowGravity&&(V+=(this.gravity.x+D.gravity.x)*G,K+=(this.gravity.y+D.gravity.y)*G),W?V+=W*G:q&&U&&(st?(U=Math.pow(U,G),V*=U,j=Math.sqrt(V*V+K*K),p(j,0,.001)&&(V=0)):(U*=G,g(V-U,0,.01)?V-=U:m(V+U,0,.01)?V+=U:V=0)),Z?K+=Z*G:q&&J&&(st?(J=Math.pow(J,G),K*=J,j=Math.sqrt(V*V+K*K),p(j,0,.001)&&(K=0)):(J*=G,g(K-J,0,.01)?K-=J:m(K+J,0,.01)?K+=J:K=0)),V=f(V,-$,$),K=f(K,-Q,Q),D.velocity.set(V,K),_>-1&&D.velocity.length()>_&&(D.velocity.normalize().scale(_),j=_),D.speed=j},separate:function(D,G,V,W,U){var $,K,Z=!1,J=!0;if(!D.enable||!G.enable||D.checkCollision.none||G.checkCollision.none||!this.intersects(D,G)||V&&V.call(W,D.gameObject,G.gameObject)===!1)return Z;if(D.isCircle||G.isCircle){var Q=this.separateCircle(D,G,U);Q.result?(Z=!0,J=!1):($=Q.x,K=Q.y,J=!0)}if(J){var j=!1,_=!1,q=this.OVERLAP_BIAS;U?(j=b(D,G,U,q,$),_=I(D,G,U,q,K)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(j=b(D,G,U,q,$),this.intersects(D,G)&&(_=I(D,G,U,q,K))):(_=I(D,G,U,q,K),this.intersects(D,G)&&(j=b(D,G,U,q,$))),Z=j||_}return Z&&(U?(D.onOverlap||G.onOverlap)&&this.emit(v.OVERLAP,D.gameObject,G.gameObject,D,G):(D.onCollide||G.onCollide)&&this.emit(v.COLLIDE,D.gameObject,G.gameObject,D,G)),Z},separateCircle:function(D,G,V){C(D,G,!1,0),P(D,G,!1,0);var W=D.isCircle,U=G.isCircle,$=D.center,K=G.center,Z=D.immovable,J=G.immovable,Q=D.velocity,j=G.velocity,_=0,q=!0;if(W!==U){q=!1;var st=$.x,ht=$.y,lt=D.halfWidth,ot=G.position.x,tt=G.position.y,at=G.right,nt=G.bottom;U&&(st=K.x,ht=K.y,lt=G.halfWidth,ot=D.position.x,tt=D.position.y,at=D.right,nt=D.bottom),ht<tt?st<ot?_=u(st,ht,ot,tt)-lt:st>at&&(_=u(st,ht,at,tt)-lt):ht>nt&&(st<ot?_=u(st,ht,ot,nt)-lt:st>at&&(_=u(st,ht,at,nt)-lt)),_*=-1}else _=D.halfWidth+G.halfWidth-c($,K);D.overlapR=_,G.overlapR=_;var vt=d($,K),mt=(_+w.EPSILON)*Math.cos(vt),Bt=(_+w.EPSILON)*Math.sin(vt),Dt={overlap:_,result:!1,x:mt,y:Bt};if(V&&(!q||q&&_!==0))return Dt.result=!0,Dt;if(!q&&_===0||Z&&J||D.customSeparateX||G.customSeparateX)return Dt.x=void 0,Dt.y=void 0,Dt;var Pt=!D.pushable&&!G.pushable;if(q){var Ct=$.x-K.x,Ut=$.y-K.y,Ft=Math.sqrt(Math.pow(Ct,2)+Math.pow(Ut,2)),ee=(K.x-$.x)/Ft||0,oe=(K.y-$.y)/Ft||0,Ie=2*(Q.x*ee+Q.y*oe-j.x*ee-j.y*oe)/(D.mass+G.mass);(Z||J)&&(Ie*=2),Z||(Q.x=Q.x-Ie/D.mass*ee,Q.y=Q.y-Ie/D.mass*oe,Q.multiply(D.bounce)),J||(j.x=j.x+Ie/G.mass*ee,j.y=j.y+Ie/G.mass*oe,j.multiply(G.bounce)),!Z&&!J&&(mt*=.5,Bt*=.5),Z||(D.x-=mt,D.y-=Bt,D.updateCenter()),J||(G.x+=mt,G.y+=Bt,G.updateCenter()),Dt.result=!0}else!Z||D.pushable||Pt?(D.x-=mt,D.y-=Bt,D.updateCenter()):(!J||G.pushable||Pt)&&(G.x+=mt,G.y+=Bt,G.updateCenter()),Dt.x=void 0,Dt.y=void 0;return Dt},intersects:function(D,G){return D===G?!1:!D.isCircle&&!G.isCircle?!(D.right<=G.left||D.bottom<=G.top||D.left>=G.right||D.top>=G.bottom):D.isCircle?G.isCircle?c(D.center,G.center)<=D.halfWidth+G.halfWidth:this.circleBodyIntersects(D,G):this.circleBodyIntersects(G,D)},circleBodyIntersects:function(D,G){var V=f(D.center.x,G.left,G.right),W=f(D.center.y,G.top,G.bottom),U=(D.center.x-V)*(D.center.x-V),$=(D.center.y-W)*(D.center.y-W);return U+$<=D.halfWidth*D.halfWidth},overlap:function(D,G,V,W,U){return V===void 0&&(V=null),W===void 0&&(W=null),U===void 0&&(U=V),this.collideObjects(D,G,V,W,U,!0)},collide:function(D,G,V,W,U){return V===void 0&&(V=null),W===void 0&&(W=null),U===void 0&&(U=V),this.collideObjects(D,G,V,W,U,!1)},collideObjects:function(D,G,V,W,U,$){var K,Z;D.isParent&&(D.physicsType===void 0||G===void 0||D===G)&&(D=D.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var J=Array.isArray(D),Q=Array.isArray(G);if(this._total=0,!J&&!Q)this.collideHandler(D,G,V,W,U,$);else if(!J&&Q)for(K=0;K<G.length;K++)this.collideHandler(D,G[K],V,W,U,$);else if(J&&!Q)if(G)for(K=0;K<D.length;K++)this.collideHandler(D[K],G,V,W,U,$);else for(K=0;K<D.length;K++){var j=D[K];for(Z=K+1;Z<D.length;Z++)K!==Z&&this.collideHandler(j,D[Z],V,W,U,$)}else for(K=0;K<D.length;K++)for(Z=0;Z<G.length;Z++)this.collideHandler(D[K],G[Z],V,W,U,$);return this._total>0},collideHandler:function(D,G,V,W,U,$){if(G===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,V,W,U,$);if(!D||!G)return!1;if(D.body||D.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(D,G,V,W,U,$);if(G.isParent)return this.collideSpriteVsGroup(D,G,V,W,U,$);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(D,G,V,W,U,$)}else if(D.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,D,V,W,U,$);if(G.isParent)return this.collideGroupVsGroup(D,G,V,W,U,$);if(G.isTilemap)return this.collideGroupVsTilemapLayer(D,G,V,W,U,$)}else if(D.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,D,V,W,U,$);if(G.isParent)return this.collideGroupVsTilemapLayer(G,D,V,W,U,$)}},canCollide:function(D,G){return D&&G&&(D.collisionMask&G.collisionCategory)!==0&&(G.collisionMask&D.collisionCategory)!==0},collideSpriteVsSprite:function(D,G,V,W,U,$){var K=D.isBody?D:D.body,Z=G.isBody?G:G.body;return this.canCollide(K,Z)?(this.separate(K,Z,W,U,$)&&(V&&V.call(U,D,G),this._total++),!0):!1},collideSpriteVsGroup:function(D,G,V,W,U,$){var K=D.isBody?D:D.body;if(!(G.length===0||!K||!K.enable||K.checkCollision.none||!this.canCollide(K,G))){var Z,J,Q;if(this.useTree||G.physicsType===n.STATIC_BODY){var j=this.treeMinMax;j.minX=K.left,j.minY=K.top,j.maxX=K.right,j.maxY=K.bottom;var _=G.physicsType===n.DYNAMIC_BODY?this.tree.search(j):this.staticTree.search(j);for(J=_.length,Z=0;Z<J;Z++)Q=_[Z],!(K===Q||!Q.enable||Q.checkCollision.none||!G.contains(Q.gameObject))&&this.separate(K,Q,W,U,$)&&(V&&V.call(U,K.gameObject,Q.gameObject),this._total++)}else{var q=G.getChildren(),st=G.children.entries.indexOf(D);for(J=q.length,Z=0;Z<J;Z++)Q=q[Z].body,!(!Q||Z===st||!Q.enable)&&this.separate(K,Q,W,U,$)&&(V&&V.call(U,K.gameObject,Q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,G,V,W,U,$){if(!this.canCollide(D,G))return!1;var K=D.getChildren();if(K.length===0)return!1;for(var Z=!1,J=0;J<K.length;J++)(K[J].body||K[J].isBody)&&this.collideSpriteVsTilemapLayer(K[J],G,V,W,U,$)&&(Z=!0);return Z},collideTiles:function(D,G,V,W,U){return G.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,G,V,W,U,!1,!1)},overlapTiles:function(D,G,V,W,U){return G.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,G,V,W,U,!0,!1)},collideSpriteVsTilemapLayer:function(D,G,V,W,U,$){var K=D.isBody?D:D.body;if(!K.enable||K.checkCollision.none||!this.canCollide(K,G))return!1;var Z=G.layer,J=K.x-Z.tileWidth*G.scaleX,Q=K.y-Z.tileHeight*G.scaleY,j=K.width+Z.tileWidth*G.scaleX,_=K.height+Z.tileHeight*G.scaleY,q=$?null:this.tileFilterOptions,st=M(J,Q,j,_,q,G.scene.cameras.main,G.layer);return st.length===0?!1:this.collideSpriteVsTilesHandler(D,st,V,W,U,$,!0)},collideSpriteVsTilesHandler:function(D,G,V,W,U,$,K){for(var Z=D.isBody?D:D.body,J,Q={left:0,right:0,top:0,bottom:0},j,_=!1,q=0;q<G.length;q++){J=G[q],j=J.tilemapLayer;var st=j.tileToWorldXY(J.x,J.y);Q.left=st.x,Q.top=st.y,Q.right=Q.left+J.width*j.scaleX,Q.bottom=Q.top+J.height*j.scaleY,k(Q,Z)&&(!W||W.call(U,D,J))&&A(J,D)&&($||O(q,Z,J,Q,j,this.TILE_BIAS,K))&&(this._total++,_=!0,V&&V.call(U,D,J),$&&Z.onOverlap?this.emit(v.TILE_OVERLAP,D,J,Z):Z.onCollide&&this.emit(v.TILE_COLLIDE,D,J,Z))}return _},collideGroupVsGroup:function(D,G,V,W,U,$){if(!(D.length===0||G.length===0||!this.canCollide(D,G)))for(var K=D.getChildren(),Z=0;Z<K.length;Z++)this.collideSpriteVsGroup(K[Z],G,V,W,U,$)},wrap:function(D,G){D.body?this.wrapObject(D,G):D.getChildren?this.wrapArray(D.getChildren(),G):Array.isArray(D)?this.wrapArray(D,G):this.wrapObject(D,G)},wrapArray:function(D,G){for(var V=0;V<D.length;V++)this.wrapObject(D[V],G)},wrapObject:function(D,G){G===void 0&&(G=0),D.x=z(D.x,this.bounds.left-G,this.bounds.right+G),D.y=z(D.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});r.exports=X},1093:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(i,d){return this.body.acceleration.set(i,d),this},setAccelerationX:function(i){return this.body.acceleration.x=i,this},setAccelerationY:function(i){return this.body.acceleration.y=i,this}};r.exports=T},59023:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(i){return this.body.angularVelocity=i,this},setAngularAcceleration:function(i){return this.body.angularAcceleration=i,this},setAngularDrag:function(i){return this.body.angularDrag=i,this}};r.exports=T},62069:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(i,d){return this.body.bounce.set(i,d),this},setBounceX:function(i){return this.body.bounce.x=i,this},setBounceY:function(i){return this.body.bounce.y=i,this},setCollideWorldBounds:function(i,d,x,f){return this.body.setCollideWorldBounds(i,d,x,f),this}};r.exports=T},78389:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79599),x={setCollisionCategory:function(f){var o=this.body?this.body:this;return o.collisionCategory=f,this},willCollideWith:function(f){var o=this.body?this.body:this;return(o.collisionMask&f)!==0},addCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask|f,this},removeCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask&~f,this},setCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=d(f),this},resetCollisionCategory:function(){var f=this.body?this.body:this;return f.collisionCategory=1,f.collisionMask=1,this}};r.exports=x},87118:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(i,d,x){return this.debugShowBody=i,this.debugShowVelocity=d,this.debugBodyColor=x,this},setDebugBodyColor:function(i){return this.body.debugBodyColor=i,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(i){this.body.debugShowBody=i}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(i){this.body.debugShowVelocity=i}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(i){this.body.debugBodyColor=i}}};r.exports=T},52819:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(i,d){return this.body.drag.set(i,d),this},setDragX:function(i){return this.body.drag.x=i,this},setDragY:function(i){return this.body.drag.y=i,this},setDamping:function(i){return this.body.useDamping=i,this}};r.exports=T},4074:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDirectControl:function(i){return this.body.setDirectControl(i),this},enableBody:function(i,d,x,f,o){return i&&this.body.reset(d,x),f&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(i,d){return i===void 0&&(i=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,i&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};r.exports=T},40831:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(i,d){return this.body.friction.set(i,d),this},setFrictionX:function(i){return this.body.friction.x=i,this},setFrictionY:function(i){return this.body.friction.y=i,this}};r.exports=T},26775:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(i,d){return this.body.gravity.set(i,d),this},setGravityX:function(i){return this.body.gravity.x=i,this},setGravityY:function(i){return this.body.gravity.y=i,this}};r.exports=T},9437:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(i){return i===void 0&&(i=!0),this.body.immovable=i,this}};r.exports=T},30621:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(i){return this.body.mass=i,this}};r.exports=T},72441:(r,T,i)=>{var d=i(47956),x=i(96503),f=i(2044),o=i(81491),a=function(n,u,c,l,v,p){var g=d(n,u-l,c-l,2*l,2*l,v,p);if(g.length===0)return g;for(var m=new x(u,c,l),C=new x,P=[],M=0;M<g.length;M++){var E=g[M];E.isCircle?(C.setTo(E.center.x,E.center.y,E.halfWidth),f(m,C)&&P.push(E)):o(m,E)&&P.push(E)}return P};r.exports=a},47956:r=>{var T=function(i,d,x,f,o,a,n){a===void 0&&(a=!0),n===void 0&&(n=!1);var u=[],c=[],l=i.treeMinMax;if(l.minX=d,l.minY=x,l.maxX=d+f,l.maxY=x+o,n&&(c=i.staticTree.search(l)),a&&i.useTree)u=i.tree.search(l);else if(a){var v=i.bodies,p={position:{x:d,y:x},left:d,top:x,right:d+f,bottom:x+o,isCircle:!1},g=i.intersects;v.iterate(function(m){g(m,p)&&u.push(m)})}return c.concat(u)};r.exports=T},62121:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(i){return i===void 0&&(i=!0),this.body.pushable=i,this}};r.exports=T},29384:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(i,d){return this.body.setOffset(i,d),this},setSize:function(i,d,x){return this.body.setSize(i,d,x),this},setBodySize:function(i,d,x){return this.body.setSize(i,d,x),this},setCircle:function(i,d,x){return this.body.setCircle(i,d,x),this}};r.exports=T},15098:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(i,d){return this.body.setVelocity(i,d),this},setVelocityX:function(i){return this.body.setVelocityX(i),this},setVelocityY:function(i){return this.body.setVelocityY(i),this},setMaxVelocity:function(i,d){return this.body.maxVelocity.set(i,d),this}};r.exports=T},92209:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};r.exports=T},20009:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collide"},36768:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="overlap"},60473:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},89954:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},61804:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tilecollide"},7161:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tileoverlap"},34689:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldbounds"},16006:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldstep"},63012:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),x=i(79291),f={ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)};f=x(!1,f,d),r.exports=f},96602:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.collisionCallback?!i.collisionCallback.call(i.collisionCallbackContext,d,i):i.layer.callbacks[i.index]?!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,d,i):!0};r.exports=T},36294:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d<0?(i.blocked.none=!1,i.blocked.left=!0):d>0&&(i.blocked.none=!1,i.blocked.right=!0),i.position.x-=d,i.updateCenter(),i.bounce.x===0?i.velocity.x=0:i.velocity.x=-i.velocity.x*i.bounce.x};r.exports=T},67013:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d<0?(i.blocked.none=!1,i.blocked.up=!0):d>0&&(i.blocked.none=!1,i.blocked.down=!0),i.position.y-=d,i.updateCenter(),i.bounce.y===0?i.velocity.y=0:i.velocity.y=-i.velocity.y*i.bounce.y};r.exports=T},40012:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21329),x=i(53442),f=i(2483),o=function(a,n,u,c,l,v,p){var g=c.left,m=c.top,C=c.right,P=c.bottom,M=u.faceLeft||u.faceRight,E=u.faceTop||u.faceBottom;if(p||(M=!0,E=!0),!M&&!E)return!1;var w=0,R=0,A=0,L=1;if(n.deltaAbsX()>n.deltaAbsY()?A=-1:n.deltaAbsX()<n.deltaAbsY()&&(L=-1),n.deltaX()!==0&&n.deltaY()!==0&&M&&E&&(A=Math.min(Math.abs(n.position.x-C),Math.abs(n.right-g)),L=Math.min(Math.abs(n.position.y-P),Math.abs(n.bottom-m))),A<L){if(M&&(w=d(n,u,g,C,v,p),w!==0&&!f(c,n)))return!0;E&&(R=x(n,u,m,P,v,p))}else{if(E&&(R=x(n,u,m,P,v,p),R!==0&&!f(c,n)))return!0;M&&(w=d(n,u,g,C,v,p))}return w!==0||R!==0};r.exports=o},21329:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36294),x=function(f,o,a,n,u,c){var l=0,v=o.faceLeft,p=o.faceRight,g=o.collideLeft,m=o.collideRight;return c||(v=!0,p=!0,g=!0,m=!0),f.deltaX()<0&&m&&f.checkCollision.left?p&&f.x<n&&(l=f.x-n,l<-u&&(l=0)):f.deltaX()>0&&g&&f.checkCollision.right&&v&&f.right>a&&(l=f.right-a,l>u&&(l=0)),l!==0&&(f.customSeparateX?f.overlapX=l:d(f,l)),l};r.exports=x},53442:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(67013),x=function(f,o,a,n,u,c){var l=0,v=o.faceTop,p=o.faceBottom,g=o.collideUp,m=o.collideDown;return c||(v=!0,p=!0,g=!0,m=!0),f.deltaY()<0&&m&&f.checkCollision.up?p&&f.y<n&&(l=f.y-n,l<-u&&(l=0)):f.deltaY()>0&&g&&f.checkCollision.down&&v&&f.bottom>a&&(l=f.bottom-a,l>u&&(l=0)),l!==0&&(f.customSeparateY?f.overlapY=l:d(f,l)),l};r.exports=x},2483:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return!(d.right<=i.left||d.bottom<=i.top||d.position.x>=i.right||d.position.y>=i.bottom)};r.exports=T},55173:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)};r.exports=d},44563:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Arcade:i(27064),Matter:i(3875)}},68174:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(26099),f=new d({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var a=this.boundsCenter,n=this.centerDiff,u=o.bounds.max.x-o.bounds.min.x,c=o.bounds.max.y-o.bounds.min.y,l=u*o.centerOfMass.x,v=c*o.centerOfMass.y;return a.set(u/2,c/2),n.set(l-a.x,v-a.y),!0},getTopLeft:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a+u.x+c.x,n+u.y+c.y)}return!1},getTopCenter:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a+c.x,n+u.y+c.y)}return!1},getTopRight:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a-(u.x-c.x),n+u.y+c.y)}return!1},getLeftCenter:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a+u.x+c.x,n+c.y)}return!1},getCenter:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.centerDiff;return new x(a+u.x,n+u.y)}return!1},getRightCenter:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a-(u.x-c.x),n+c.y)}return!1},getBottomLeft:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a+u.x+c.x,n-(u.y-c.y))}return!1},getBottomCenter:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a+c.x,n-(u.y-c.y))}return!1},getBottomRight:function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new x(a-(u.x-c.x),n-(u.y-c.y))}return!1}});r.exports=f},19933:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6790);d.Body=i(22562),d.Composite=i(69351),d.World=i(4372),d.Collision=i(52284),d.Detector=i(81388),d.Pairs=i(99561),d.Pair=i(4506),d.Query=i(73296),d.Resolver=i(66272),d.Constraint=i(48140),d.Common=i(53402),d.Engine=i(48413),d.Events=i(35810),d.Sleeping=i(53614),d.Plugin=i(73832),d.Bodies=i(66280),d.Composites=i(74116),d.Axes=i(66615),d.Bounds=i(15647),d.Svg=i(74058),d.Vector=i(31725),d.Vertices=i(41598),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,r.exports=d},28137:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(83419),f=i(74116),o=i(48140),a=i(74058),n=i(75803),u=i(23181),c=i(34803),l=i(73834),v=i(19496),p=i(85791),g=i(98713),m=i(41598),C=new x({initialize:function(M){this.world=M,this.scene=M.scene,this.sys=M.scene.sys},rectangle:function(P,M,E,w,R){var A=d.rectangle(P,M,E,w,R);return this.world.add(A),A},trapezoid:function(P,M,E,w,R,A){var L=d.trapezoid(P,M,E,w,R,A);return this.world.add(L),L},circle:function(P,M,E,w,R){var A=d.circle(P,M,E,w,R);return this.world.add(A),A},polygon:function(P,M,E,w,R){var A=d.polygon(P,M,E,w,R);return this.world.add(A),A},fromVertices:function(P,M,E,w,R,A,L){typeof E=="string"&&(E=m.fromPath(E));var F=d.fromVertices(P,M,E,w,R,A,L);return this.world.add(F),F},fromPhysicsEditor:function(P,M,E,w,R){R===void 0&&(R=!0);var A=v.parseBody(P,M,E,w);return R&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(P,M,E,w,R,A){w===void 0&&(w=1),R===void 0&&(R={}),A===void 0&&(A=!0);for(var L=E.getElementsByTagName("path"),F=[],O=0;O<L.length;O++){var b=a.pathToVertices(L[O],30);w!==1&&m.scale(b,w,w),F.push(b)}var I=d.fromVertices(P,M,F,R);return A&&this.world.add(I),I},fromJSON:function(P,M,E,w,R){w===void 0&&(w={}),R===void 0&&(R=!0);var A=p.parseBody(P,M,E,w);return A&&R&&this.world.add(A),A},imageStack:function(P,M,E,w,R,A,L,F,O){L===void 0&&(L=0),F===void 0&&(F=0),O===void 0&&(O={});var b=this.world,I=this.sys.displayList;O.addToWorld=!1;var B=f.stack(E,w,R,A,L,F,function(N,k){var Y=new u(b,N,k,P,M,O);return I.add(Y),Y.body});return b.add(B),B},stack:function(P,M,E,w,R,A,L){var F=f.stack(P,M,E,w,R,A,L);return this.world.add(F),F},pyramid:function(P,M,E,w,R,A,L){var F=f.pyramid(P,M,E,w,R,A,L);return this.world.add(F),F},chain:function(P,M,E,w,R,A){return f.chain(P,M,E,w,R,A)},mesh:function(P,M,E,w,R){return f.mesh(P,M,E,w,R)},newtonsCradle:function(P,M,E,w,R){var A=f.newtonsCradle(P,M,E,w,R);return this.world.add(A),A},car:function(P,M,E,w,R){var A=f.car(P,M,E,w,R);return this.world.add(A),A},softBody:function(P,M,E,w,R,A,L,F,O,b){var I=f.softBody(P,M,E,w,R,A,L,F,O,b);return this.world.add(I),I},joint:function(P,M,E,w,R){return this.constraint(P,M,E,w,R)},spring:function(P,M,E,w,R){return this.constraint(P,M,E,w,R)},constraint:function(P,M,E,w,R){w===void 0&&(w=1),R===void 0&&(R={}),R.bodyA=P.type==="body"?P:P.body,R.bodyB=M.type==="body"?M:M.body,isNaN(E)||(R.length=E),R.stiffness=w;var A=o.create(R);return this.world.add(A),A},worldConstraint:function(P,M,E,w){E===void 0&&(E=1),w===void 0&&(w={}),w.bodyB=P.type==="body"?P:P.body,isNaN(M)||(w.length=M),w.stiffness=E;var R=o.create(w);return this.world.add(R),R},mouseSpring:function(P){return this.pointerConstraint(P)},pointerConstraint:function(P){P===void 0&&(P={}),P.hasOwnProperty("render")||(P.render={visible:!1});var M=new g(this.scene,this.world,P);return this.world.add(M.constraint),M},image:function(P,M,E,w,R){var A=new u(this.world,P,M,E,w,R);return this.sys.displayList.add(A),A},tileBody:function(P,M){return new l(this.world,P,M)},sprite:function(P,M,E,w,R){var A=new c(this.world,P,M,E,w,R);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(P,M,E){return n(this.world,P,M,E)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=C},75803:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31884),x=i(95540),f=i(26099);function o(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var a=function(n,u,c,l){c===void 0&&(c={}),l===void 0&&(l=!0);var v=u.x,p=u.y;u.body={temp:!0,position:{x:v,y:p}};var g=[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity];if(g.forEach(function(C){for(var P in C)o(C[P])?Object.defineProperty(u,P,{get:C[P].get,set:C[P].set}):Object.defineProperty(u,P,{value:C[P]})}),u.world=n,u._tempVec2=new f(v,p),c.hasOwnProperty("type")&&c.type==="body")u.setExistingBody(c,l);else{var m=x(c,"shape",null);m||(m="rectangle"),c.addToWorld=l,u.setBody(m,c)}return u};r.exports=a},23181:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31884),f=i(95643),o=i(95540),a=i(88571),n=i(72699),u=i(26099),c=new d({Extends:a,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,n],initialize:function(v,p,g,m,C,P){f.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,C),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new u(p,g);var M=o(P,"shape",null);M?this.setBody(M,P):this.setRectangle(this.width,this.height,P),this.setPosition(p,g),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=c},42045:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),x=i(66615),f=i(66280),o=i(22562),a=i(68174),n=i(15647),u=i(83419),c=i(52284),l=i(53402),v=i(69351),p=i(74116),g=i(48140),m=i(81388),C=i(20339),P=i(28137),M=i(95540),E=i(35154),w=i(18210),R=i(40178),A=i(6790),L=i(74507),F=i(46975),O=i(4506),b=i(99561),I=i(73832),B=i(37277),N=i(73296),k=i(66272),Y=i(44594),H=i(74058),z=i(31725),X=i(41598),D=i(68243);l.setDecomp(i(55973));var G=new u({initialize:function(W){this.scene=W,this.systems=W.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=v,this.collision=c,this.detector=m,this.pair=O,this.pairs=b,this.query=N,this.resolver=k,this.constraint=g,this.bodies=f,this.composites=p,this.axes=x,this.bounds=n,this.svg=H,this.vector=z,this.vertices=X,this.verts=X,this._tempVec2=z.create(),E(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),E(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),E(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),k._restingThresh=E(this.config,"restingThresh",4),k._restingThreshTangent=E(this.config,"restingThreshTangent",6),k._positionDampen=E(this.config,"positionDampen",.9),k._positionWarming=E(this.config,"positionWarming",.8),k._frictionNormalMultiplier=E(this.config,"frictionNormalMultiplier",5),W.sys.events.once(Y.BOOT,this.boot,this),W.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new D(this.scene,this.config),this.add=new P(this.world),this.bodyBounds=new a,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new D(this.scene,this.config),this.add=new P(this.world));var V=this.systems.events;V.on(Y.UPDATE,this.world.update,this.world),V.on(Y.POST_UPDATE,this.world.postUpdate,this.world),V.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var V=this.systems.game.config.physics,W=this.systems.settings.physics,U=F(M(W,"matter",{}),M(V,"matter",{}));return U},enableAttractorPlugin:function(){return I.register(w),I.use(A,w),this},enableWrapPlugin:function(){return I.register(L),I.use(A,L),this},enableCollisionEventsPlugin:function(){return I.register(R),I.use(A,R),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(V,W){this.world.step(V,W)},containsPoint:function(V,W,U){V=this.getMatterBodies(V);var $=z.create(W,U),K=N.point(V,$);return K.length>0},intersectPoint:function(V,W,U){U=this.getMatterBodies(U);var $=z.create(V,W),K=[],Z=N.point(U,$);return Z.forEach(function(J){K.indexOf(J)===-1&&K.push(J)}),K},intersectRect:function(V,W,U,$,K,Z){K===void 0&&(K=!1),Z=this.getMatterBodies(Z);var J={min:{x:V,y:W},max:{x:V+U,y:W+$}},Q=[],j=N.region(Z,J,K);return j.forEach(function(_){Q.indexOf(_)===-1&&Q.push(_)}),Q},intersectRay:function(V,W,U,$,K,Z){K===void 0&&(K=1),Z=this.getMatterBodies(Z);for(var J=[],Q=N.ray(Z,z.create(V,W),z.create(U,$),K),j=0;j<Q.length;j++)J.push(Q[j].body);return J},intersectBody:function(V,W){W=this.getMatterBodies(W);for(var U=[],$=N.collides(V,W),K=0;K<$.length;K++){var Z=$[K];Z.bodyA===V?U.push(Z.bodyB):U.push(Z.bodyA)}return U},overlap:function(V,W,U,$,K){U===void 0&&(U=null),$===void 0&&($=null),K===void 0&&(K=U),Array.isArray(V)||(V=[V]),V=this.getMatterBodies(V),W=this.getMatterBodies(W);for(var Z=!1,J=0;J<V.length;J++)for(var Q=V[J],j=N.collides(Q,W),_=0;_<j.length;_++){var q=j[_],st=q.bodyA.id===Q.id?q.bodyB:q.bodyA;if(!$||$.call(K,Q,st,q)){if(Z=!0,U)U.call(K,Q,st,q);else if(!$)return!0}}return Z},setCollisionCategory:function(V,W){return V=this.getMatterBodies(V),V.forEach(function(U){U.collisionFilter.category=W}),this},setCollisionGroup:function(V,W){return V=this.getMatterBodies(V),V.forEach(function(U){U.collisionFilter.group=W}),this},setCollidesWith:function(V,W){V=this.getMatterBodies(V);var U=0;if(!Array.isArray(W))U=W;else for(var $=0;$<W.length;$++)U|=W[$];return V.forEach(function(K){K.collisionFilter.mask=U}),this},getMatterBodies:function(V){if(!V)return this.world.getAllBodies();Array.isArray(V)||(V=[V]);for(var W=[],U=0;U<V.length;U++){var $=V[U].hasOwnProperty("body")?V[U].body:V[U];W.push($)}return W},setVelocity:function(V,W,U){V=this.getMatterBodies(V);var $=this._tempVec2;return $.x=W,$.y=U,V.forEach(function(K){o.setVelocity(K,$)}),this},setVelocityX:function(V,W){V=this.getMatterBodies(V);var U=this._tempVec2;return U.x=W,V.forEach(function($){U.y=$.velocity.y,o.setVelocity($,U)}),this},setVelocityY:function(V,W){V=this.getMatterBodies(V);var U=this._tempVec2;return U.y=W,V.forEach(function($){U.x=$.velocity.x,o.setVelocity($,U)}),this},setAngularVelocity:function(V,W){return V=this.getMatterBodies(V),V.forEach(function(U){o.setAngularVelocity(U,W)}),this},applyForce:function(V,W){V=this.getMatterBodies(V);var U=this._tempVec2;return V.forEach(function($){U.x=$.position.x,U.y=$.position.y,o.applyForce($,U,W)}),this},applyForceFromPosition:function(V,W,U,$){V=this.getMatterBodies(V);var K=this._tempVec2;return V.forEach(function(Z){$===void 0&&($=Z.angle),K.x=U*Math.cos($),K.y=U*Math.sin($),o.applyForce(Z,W,K)}),this},applyForceFromAngle:function(V,W,U){V=this.getMatterBodies(V);var $=this._tempVec2;return V.forEach(function(K){U===void 0&&(U=K.angle),$.x=W*Math.cos(U),$.y=W*Math.sin(U),o.applyForce(K,{x:K.position.x,y:K.position.y},$)}),this},getConstraintLength:function(V){var W=V.pointA.x,U=V.pointA.y,$=V.pointB.x,K=V.pointB.y;return V.bodyA&&(W+=V.bodyA.position.x,U+=V.bodyA.position.y),V.bodyB&&($+=V.bodyB.position.x,K+=V.bodyB.position.y),C(W,U,$,K)},alignBody:function(V,W,U,$){V=V.hasOwnProperty("body")?V.body:V;var K;switch($){case d.TOP_LEFT:case d.LEFT_TOP:K=this.bodyBounds.getTopLeft(V,W,U);break;case d.TOP_CENTER:K=this.bodyBounds.getTopCenter(V,W,U);break;case d.TOP_RIGHT:case d.RIGHT_TOP:K=this.bodyBounds.getTopRight(V,W,U);break;case d.LEFT_CENTER:K=this.bodyBounds.getLeftCenter(V,W,U);break;case d.CENTER:K=this.bodyBounds.getCenter(V,W,U);break;case d.RIGHT_CENTER:K=this.bodyBounds.getRightCenter(V,W,U);break;case d.LEFT_BOTTOM:case d.BOTTOM_LEFT:K=this.bodyBounds.getBottomLeft(V,W,U);break;case d.BOTTOM_CENTER:K=this.bodyBounds.getBottomCenter(V,W,U);break;case d.BOTTOM_RIGHT:case d.RIGHT_BOTTOM:K=this.bodyBounds.getBottomRight(V,W,U);break}return K&&o.setPosition(V,K),this},shutdown:function(){var V=this.systems.events;this.world&&(V.off(Y.UPDATE,this.world.update,this.world),V.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),V.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",G,"matterPhysics"),r.exports=G},34803:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),x=i(83419),f=i(31884),o=i(95643),a=i(95540),n=i(72699),u=i(68287),c=i(26099),l=new x({Extends:u,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,n],initialize:function(p,g,m,C,P,M){o.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(C,P),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var E=a(M,"shape",null);E?this.setBody(E,M):this.setRectangle(this.width,this.height,M),this.setPosition(g,m),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=l},73834:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(22562),f=i(83419),o=i(31884),a=i(62644),n=i(50792),u=i(95540),c=i(97022),l=i(41598),v=new f({Extends:n,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(g,m,C){n.call(this),this.tile=m,this.world=g,m.physics.matterBody&&m.physics.matterBody.destroy(),m.physics.matterBody=this;var P=u(C,"body",null),M=u(C,"addToWorld",!0);if(P)this.setBody(P,M);else{var E=m.getCollisionGroup(),w=u(E,"objects",[]);w.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(m.flipX||m.flipY){var R={x:m.getCenterX(),y:m.getCenterY()},A=m.flipX?-1:1,L=m.flipY?-1:1;x.scale(P,A,L,R)}},setFromTileRectangle:function(p){p===void 0&&(p={}),c(p,"isStatic")||(p.isStatic=!0),c(p,"addToWorld")||(p.addToWorld=!0);var g=this.tile.getBounds(),m=g.x+g.width/2,C=g.y+g.height/2,P=d.rectangle(m,C,g.width,g.height,p);return this.setBody(P,p.addToWorld),this},setFromTileCollision:function(p){p===void 0&&(p={}),c(p,"isStatic")||(p.isStatic=!0),c(p,"addToWorld")||(p.addToWorld=!0);for(var g=this.tile.tilemapLayer.scaleX,m=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),P=this.tile.getTop(),M=this.tile.getCollisionGroup(),E=u(M,"objects",[]),w=[],R=0;R<E.length;R++){var A=E[R],L=C+A.x*g,F=P+A.y*m,O=A.width*g,b=A.height*m,I=null;if(A.rectangle)I=d.rectangle(L+O/2,F+b/2,O,b,p);else if(A.ellipse)I=d.circle(L+O/2,F+b/2,O/2,p);else if(A.polygon||A.polyline){var B=A.polygon?A.polygon:A.polyline,N=B.map(function(z){return{x:z.x*g,y:z.y*m}}),k=l.create(N),Y=l.centre(k);L+=Y.x,F+=Y.y,I=d.fromVertices(L,F,k,p)}I&&w.push(I)}if(w.length===1)this.setBody(w[0],p.addToWorld);else if(w.length>1){var H=a(p);H.parts=w,this.setBody(x.create(H),H.addToWorld)}return this},setBody:function(p,g){return g===void 0&&(g=!0),this.body&&this.removeBody(),this.body=p,this.body.gameObject=this,g&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});r.exports=v},19496:(r,T,i)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(22562),f=i(53402),o=i(95540),a=i(41598),n={parseBody:function(u,c,l,v){v===void 0&&(v={});for(var p=o(l,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var C=this.parseFixture(p[m]),P=0;P<C.length;P++)g.push(C[P]);var M=f.clone(l,!0);f.extend(M,v,!0),delete M.fixtures,delete M.type;var E=x.create(M);return x.setParts(E,g),x.setPosition(E,{x:u,y:c}),E},parseFixture:function(u){var c=f.extend({},!1,u);delete c.circle,delete c.vertices;var l;if(u.circle){var v=o(u.circle,"x"),p=o(u.circle,"y"),g=o(u.circle,"radius");l=[d.circle(v,p,g,c)]}else u.vertices&&(l=this.parseVertices(u.vertices,c));return l},parseVertices:function(u,c){c===void 0&&(c={});for(var l=[],v=0;v<u.length;v++)a.clockwiseSort(u[v]),l.push(x.create(f.extend({position:a.centre(u[v]),vertices:u[v]},c)));return d.flagCoincidentParts(l)}};r.exports=n},85791:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(22562),f={parseBody:function(o,a,n,u){u===void 0&&(u={});var c,l=n.vertices;if(l.length===1)u.vertices=l[0],c=x.create(u),d.flagCoincidentParts(c.parts);else{for(var v=[],p=0;p<l.length;p++){var g=x.create({vertices:l[p]});v.push(g)}d.flagCoincidentParts(v),u.parts=v,c=x.create(u)}return c.label=n.label,x.setPosition(c,{x:o,y:a}),c}};r.exports=f},98713:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15647),x=i(83419),f=i(69351),o=i(48140),a=i(81388),n=i(1121),u=i(8214),c=i(46975),l=i(53614),v=i(26099),p=i(41598),g=new x({initialize:function(C,P,M){M===void 0&&(M={});var E={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=P,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=o.create(c(M,E)),this.world.on(n.BEFORE_UPDATE,this.update,this),C.sys.input.on(u.POINTER_DOWN,this.onDown,this),C.sys.input.on(u.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var C=this.position,P=this.constraint;this.camera.getWorldPoint(m.x,m.y,C);for(var M=f.allBodies(this.world.localWorld),E=0;E<M.length;E++){var w=M[E];if(!w.ignorePointer&&d.contains(w.bounds,C)&&a.canCollide(w.collisionFilter,P.collisionFilter)&&this.hitTestBody(w,C))return this.world.emit(n.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(m,C){for(var P=this.constraint,M=m.parts.length,E=M>1?1:0,w=E;w<M;w++){var R=m.parts[w];if(p.contains(R.vertices,C))return P.pointA=C,P.pointB={x:C.x-m.position.x,y:C.y-m.position.y},P.bodyB=m,P.angleB=m.angle,l.set(m,!1),this.part=R,this.body=m,!0}return!1},update:function(){var m=this.pointer,C=this.body;if(!this.active||!m){C&&this.stopDrag();return}if(!m.isDown&&C){this.stopDrag();return}else if(m.isDown){if(!this.camera||!C&&!this.getBody(m))return;C=this.body;var P=this.position,M=this.constraint;this.camera.getWorldPoint(m.x,m.y,P),M.pointA.x=P.x,M.pointA.y=P.y,l.set(C,!1),this.world.emit(n.DRAG,C,this)}},stopDrag:function(){var m=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(n.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(u.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(u.POINTER_UP,this.onUp,this)}});r.exports=g},68243:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(22562),f=i(83419),o=i(53402),a=i(69351),n=i(48413),u=i(50792),c=i(1121),l=i(95540),v=i(35154),p=i(22562),g=i(35810),m=i(73834),C=i(4372),P=i(31725),M=new f({Extends:u,initialize:function(w,R){u.call(this),this.scene=w,this.engine=n.create(R),this.localWorld=this.engine.world;var A=v(R,"gravity",null);A?this.setGravity(A.x,A.y,A.scale):A===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(R,"enabled",!0),this.getDelta=v(R,"getDelta",this.update60Hz);var L=l(R,"runner",{}),F=l(L,"fps",!1),O=l(L,"fps",60),b=l(L,"delta",1e3/O),I=l(L,"deltaMin",1e3/O),B=l(L,"deltaMax",1e3/(O*.5));F||(O=1e3/b),this.runner={fps:O,deltaSampleSize:l(L,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(L,"isFixed",!1),delta:b,deltaMin:I,deltaMax:B},this.autoUpdate=v(R,"autoUpdate",!0);var N=v(R,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:l(N,"showAxes",!1),showAngleIndicator:l(N,"showAngleIndicator",!1),angleColor:l(N,"angleColor",15208787),showBroadphase:l(N,"showBroadphase",!1),broadphaseColor:l(N,"broadphaseColor",16757760),showBounds:l(N,"showBounds",!1),boundsColor:l(N,"boundsColor",16777215),showVelocity:l(N,"showVelocity",!1),velocityColor:l(N,"velocityColor",44783),showCollisions:l(N,"showCollisions",!1),collisionColor:l(N,"collisionColor",16094476),showSeparations:l(N,"showSeparations",!1),separationColor:l(N,"separationColor",16753920),showBody:l(N,"showBody",!0),showStaticBody:l(N,"showStaticBody",!0),showInternalEdges:l(N,"showInternalEdges",!1),renderFill:l(N,"renderFill",!1),renderLine:l(N,"renderLine",!0),fillColor:l(N,"fillColor",1075465),fillOpacity:l(N,"fillOpacity",1),lineColor:l(N,"lineColor",2678297),lineOpacity:l(N,"lineOpacity",1),lineThickness:l(N,"lineThickness",1),staticFillColor:l(N,"staticFillColor",857979),staticLineColor:l(N,"staticLineColor",1255396),showSleeping:l(N,"showSleeping",!1),staticBodySleepOpacity:l(N,"staticBodySleepOpacity",.7),sleepFillColor:l(N,"sleepFillColor",4605510),sleepLineColor:l(N,"sleepLineColor",10066585),showSensors:l(N,"showSensors",!0),sensorFillColor:l(N,"sensorFillColor",857979),sensorLineColor:l(N,"sensorLineColor",1255396),showPositions:l(N,"showPositions",!0),positionSize:l(N,"positionSize",4),positionColor:l(N,"positionColor",14697178),showJoint:l(N,"showJoint",!0),jointColor:l(N,"jointColor",14737474),jointLineOpacity:l(N,"jointLineOpacity",1),jointLineThickness:l(N,"jointLineThickness",2),pinSize:l(N,"pinSize",4),pinColor:l(N,"pinColor",4382944),springColor:l(N,"springColor",14697184),anchorColor:l(N,"anchorColor",15724527),anchorSize:l(N,"anchorSize",4),showConvexHulls:l(N,"showConvexHulls",!1),hullColor:l(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(R,"setBounds",!1)){var k=R.setBounds;if(typeof k=="boolean")this.setBounds();else{var Y=l(k,"x",0),H=l(k,"y",0),z=l(k,"width",w.sys.scale.width),X=l(k,"height",w.sys.scale.height),D=l(k,"thickness",64),G=l(k,"left",!0),V=l(k,"right",!0),W=l(k,"top",!0),U=l(k,"bottom",!0);this.setBounds(Y,H,z,X,D,G,V,W,U)}}},setCompositeRenderStyle:function(E){var w=E.bodies,R=E.constraints,A=E.composites,L,F,O;for(L=0;L<w.length;L++)F=w[L],O=F.render,this.setBodyRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(L=0;L<R.length;L++)F=R[L],O=F.render,this.setConstraintRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(L=0;L<A.length;L++)F=A[L],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(E,w,R,A,L,F){var O=E.render,b=this.debugConfig;return O?(w==null&&(w=E.isStatic?b.staticLineColor:b.lineColor),R==null&&(R=b.lineOpacity),A==null&&(A=b.lineThickness),L==null&&(L=E.isStatic?b.staticFillColor:b.fillColor),F==null&&(F=b.fillOpacity),w!==!1&&(O.lineColor=w),R!==!1&&(O.lineOpacity=R),A!==!1&&(O.lineThickness=A),L!==!1&&(O.fillColor=L),F!==!1&&(O.fillOpacity=F),this):this},setConstraintRenderStyle:function(E,w,R,A,L,F,O){var b=E.render,I=this.debugConfig;if(!b)return this;if(w==null){var B=b.type;B==="line"?w=I.jointColor:B==="pin"?w=I.pinColor:B==="spring"&&(w=I.springColor)}return R==null&&(R=I.jointLineOpacity),A==null&&(A=I.jointLineThickness),L==null&&(L=I.pinSize),F==null&&(F=I.anchorColor),O==null&&(O=I.anchorSize),w!==!1&&(b.lineColor=w),R!==!1&&(b.lineOpacity=R),A!==!1&&(b.lineThickness=A),L!==!1&&(b.pinSize=L),F!==!1&&(b.anchorColor=F),O!==!1&&(b.anchorSize=O),this},setEventsProxy:function(){var E=this,w=this.engine,R=this.localWorld;this.drawDebug&&(g.on(R,"compositeModified",function(A){E.setCompositeRenderStyle(A)}),g.on(R,"beforeAdd",function(A){for(var L=[].concat(A.object),F=0;F<L.length;F++){var O=L[F],b=O.render;O.type==="body"?E.setBodyRenderStyle(O,b.lineColor,b.lineOpacity,b.lineThickness,b.fillColor,b.fillOpacity):O.type==="composite"?E.setCompositeRenderStyle(O):O.type==="constraint"&&E.setConstraintRenderStyle(O,b.lineColor,b.lineOpacity,b.lineThickness,b.pinSize,b.anchorColor,b.anchorSize)}})),g.on(R,"beforeAdd",function(A){E.emit(c.BEFORE_ADD,A)}),g.on(R,"afterAdd",function(A){E.emit(c.AFTER_ADD,A)}),g.on(R,"beforeRemove",function(A){E.emit(c.BEFORE_REMOVE,A)}),g.on(R,"afterRemove",function(A){E.emit(c.AFTER_REMOVE,A)}),g.on(w,"beforeUpdate",function(A){E.emit(c.BEFORE_UPDATE,A)}),g.on(w,"afterUpdate",function(A){E.emit(c.AFTER_UPDATE,A)}),g.on(w,"collisionStart",function(A){var L=A.pairs,F,O;L.length>0&&(F=L[0].bodyA,O=L[0].bodyB),E.emit(c.COLLISION_START,A,F,O)}),g.on(w,"collisionActive",function(A){var L=A.pairs,F,O;L.length>0&&(F=L[0].bodyA,O=L[0].bodyB),E.emit(c.COLLISION_ACTIVE,A,F,O)}),g.on(w,"collisionEnd",function(A){var L=A.pairs,F,O;L.length>0&&(F=L[0].bodyA,O=L[0].bodyB),E.emit(c.COLLISION_END,A,F,O)})},setBounds:function(E,w,R,A,L,F,O,b,I){return E===void 0&&(E=0),w===void 0&&(w=0),R===void 0&&(R=this.scene.sys.scale.width),A===void 0&&(A=this.scene.sys.scale.height),L===void 0&&(L=64),F===void 0&&(F=!0),O===void 0&&(O=!0),b===void 0&&(b=!0),I===void 0&&(I=!0),this.updateWall(F,"left",E-L,w-L,L,A+L*2),this.updateWall(O,"right",E+R,w-L,L,A+L*2),this.updateWall(b,"top",E,w-L,R,L),this.updateWall(I,"bottom",E,w+A,R,L),this},updateWall:function(E,w,R,A,L,F){var O=this.walls[w];E?(O&&C.remove(this.localWorld,O),R+=L/2,A+=F/2,this.walls[w]=this.create(R,A,L,F,{isStatic:!0,friction:0,frictionStatic:0})):(O&&C.remove(this.localWorld,O),this.walls[w]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,w,R){return E===void 0&&(E=0),w===void 0&&(w=1),R===void 0&&(R=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=R,this},create:function(E,w,R,A,L){var F=d.rectangle(E,w,R,A,L);return C.add(this.localWorld,F),F},add:function(E){return C.add(this.localWorld,E),this},remove:function(E,w){Array.isArray(E)||(E=[E]);for(var R=0;R<E.length;R++){var A=E[R],L=A.body?A.body:A;a.remove(this.localWorld,L,w)}return this},removeConstraint:function(E,w){return a.remove(this.localWorld,E,w),this},convertTilemapLayer:function(E,w){var R=E.layer,A=E.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(A,w),this},convertTiles:function(E,w){if(E.length===0)return this;for(var R=0;R<E.length;R++)new m(this,E[R],w);return this},nextGroup:function(E){return p.nextGroup(E)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(E,w){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,A=this.runner,L=R.timing;A.isFixed?w=this.getDelta(E,w):(w=E-A.timePrev||A.delta,A.timePrev=E,A.deltaHistory.push(w),A.deltaHistory=A.deltaHistory.slice(-A.deltaSampleSize),w=Math.min.apply(null,A.deltaHistory),w=w<A.deltaMin?A.deltaMin:w,w=w>A.deltaMax?A.deltaMax:w,A.delta=w),A.timeScalePrev=L.timeScale,A.frameCounter+=1,E-A.counterTimestamp>=1e3&&(A.fps=A.frameCounter*((E-A.counterTimestamp)/1e3),A.counterTimestamp=E,A.frameCounter=0),n.update(R,w)}},step:function(E){n.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var w=E.hasOwnProperty("body")?E.body:E;return a.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var E=this.debugConfig,w=this.engine,R=this.debugGraphic,A=a.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,R,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(A,R,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(A),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(A,R,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(A,R,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(w.pairs.list,R,E.separationColor),E.showCollisions&&this.renderCollisions(w.pairs.list,R,E.collisionColor)}},renderGrid:function(E,w,R,A){w.lineStyle(1,R,A);for(var L=o.keys(E.buckets),F=0;F<L.length;F++){var O=L[F];if(!(E.buckets[O].length<2)){var b=O.split(/C|R/);w.strokeRect(parseInt(b[1],10)*E.bucketWidth,parseInt(b[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,w,R){w.lineStyle(1,R,1);for(var A=0;A<E.length;A++){var L=E[A];if(!!L.isActive){var F=L.collision,O=F.bodyA,b=F.bodyB,I=O.position,B=b.position,N=F.penetration,k=!O.isStatic&&!b.isStatic?4:1;b.isStatic&&(k=0),w.lineBetween(B.x,B.y,B.x-N.x*k,B.y-N.y*k),k=!O.isStatic&&!b.isStatic?4:1,O.isStatic&&(k=0),w.lineBetween(I.x,I.y,I.x-N.x*k,I.y-N.y*k)}}return this},renderCollisions:function(E,w,R){w.lineStyle(1,R,.5),w.fillStyle(R,1);var A,L;for(A=0;A<E.length;A++)if(L=E[A],!!L.isActive)for(var F=0;F<L.activeContacts.length;F++){var O=L.activeContacts[F],b=O.vertex;w.fillRect(b.x-2,b.y-2,5,5)}for(A=0;A<E.length;A++)if(L=E[A],!!L.isActive){var I=L.collision,B=L.activeContacts;if(B.length>0){var N=B[0].vertex.x,k=B[0].vertex.y;B.length===2&&(N=(B[0].vertex.x+B[1].vertex.x)/2,k=(B[0].vertex.y+B[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic?w.lineBetween(N-I.normal.x*8,k-I.normal.y*8,N,k):w.lineBetween(N+I.normal.x*8,k+I.normal.y*8,N,k)}}return this},renderBodyBounds:function(E,w,R,A){w.lineStyle(1,R,A);for(var L=0;L<E.length;L++){var F=E[L];if(!!F.render.visible){var O=F.bounds;if(O)w.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var b=F.parts,I=b.length>1?1:0;I<b.length;I++){var B=b[I];w.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(E,w,R,A,L){w.lineStyle(1,A,L);for(var F=0;F<E.length;F++){var O=E[F],b=O.parts;if(!!O.render.visible){var I,B,N;if(R)for(B=b.length>1?1:0;B<b.length;B++)for(I=b[B],N=0;N<I.axes.length;N++){var k=I.axes[N];w.lineBetween(I.position.x,I.position.y,I.position.x+k.x*20,I.position.y+k.y*20)}else for(B=b.length>1?1:0;B<b.length;B++)for(I=b[B],N=0;N<I.axes.length;N++)w.lineBetween(I.position.x,I.position.y,(I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,w,R,A,L){w.lineStyle(L,R,A);for(var F=0;F<E.length;F++){var O=E[F];!O.render.visible||w.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(E){for(var w=this.debugGraphic,R=this.debugConfig,A=R.showBody,L=R.showStaticBody,F=R.showSleeping,O=R.showInternalEdges,b=R.showConvexHulls,I=R.renderFill,B=R.renderLine,N=R.staticBodySleepOpacity,k=R.sleepFillColor,Y=R.sleepLineColor,H=R.hullColor,z=0;z<E.length;z++){var X=E[z];if(!!X.render.visible&&!(!L&&X.isStatic||!A&&!X.isStatic)){var D=X.render.lineColor,G=X.render.lineOpacity,V=X.render.lineThickness,W=X.render.fillColor,U=X.render.fillOpacity;F&&X.isSleeping&&(X.isStatic?(G*=N,U*=N):(D=Y,W=k)),I||(W=null),B||(D=null),this.renderBody(X,w,O,D,G,V,W,U);var $=X.parts.length;b&&$>1&&this.renderConvexHull(X,w,H,V)}}},renderBody:function(E,w,R,A,L,F,O,b){A===void 0&&(A=null),L===void 0&&(L=null),F===void 0&&(F=1),O===void 0&&(O=null),b===void 0&&(b=null);for(var I=this.debugConfig,B=I.sensorFillColor,N=I.sensorLineColor,k=E.parts,Y=k.length,H=Y>1?1:0;H<Y;H++){var z=k[H],X=z.render,D=X.opacity;if(!(!X.visible||D===0||z.isSensor&&!I.showSensors)){var G=z.circleRadius;if(w.beginPath(),z.isSensor?(O!==null&&w.fillStyle(B,b*D),A!==null&&w.lineStyle(F,N,L*D)):(O!==null&&w.fillStyle(O,b*D),A!==null&&w.lineStyle(F,A,L*D)),G)w.arc(z.position.x,z.position.y,G,0,2*Math.PI);else{var V=z.vertices,W=V.length;w.moveTo(V[0].x,V[0].y);for(var U=1;U<W;U++){var $=V[U];if(!V[U-1].isInternal||R?w.lineTo($.x,$.y):w.moveTo($.x,$.y),U<W&&$.isInternal&&!R){var K=(U+1)%W;w.moveTo(V[K].x,V[K].y)}}w.closePath()}O!==null&&w.fillPath(),A!==null&&w.strokePath()}}if(I.showPositions&&!E.isStatic){var Z=E.position.x,J=E.position.y,Q=Math.ceil(I.positionSize/2);w.fillStyle(I.positionColor,1),w.fillRect(Z-Q,J-Q,I.positionSize,I.positionSize)}return this},renderConvexHull:function(E,w,R,A){A===void 0&&(A=1);var L=E.parts,F=L.length;if(F>1){var O=E.vertices;w.lineStyle(A,R),w.beginPath(),w.moveTo(O[0].x,O[0].y);for(var b=1;b<O.length;b++)w.lineTo(O[b].x,O[b].y);w.lineTo(O[0].x,O[0].y),w.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,w=a.allConstraints(this.localWorld),R=0;R<w.length;R++){var A=w[R].render,L=A.lineColor,F=A.lineOpacity,O=A.lineThickness,b=A.pinSize,I=A.anchorColor,B=A.anchorSize;this.renderConstraint(w[R],E,L,F,O,b,I,B)}},renderConstraint:function(E,w,R,A,L,F,O,b){var I=E.render;if(!I.visible||!E.pointA||!E.pointB)return this;w.lineStyle(L,R,A);var B=E.bodyA,N=E.bodyB,k,Y;if(B?k=P.add(B.position,E.pointA):k=E.pointA,I.type==="pin")w.strokeCircle(k.x,k.y,F);else{if(N?Y=P.add(N.position,E.pointB):Y=E.pointB,w.beginPath(),w.moveTo(k.x,k.y),I.type==="spring")for(var H=P.sub(Y,k),z=P.perp(P.normalise(H)),X=Math.ceil(o.clamp(E.length/5,12,20)),D,G=1;G<X;G+=1)D=G%2===0?1:-1,w.lineTo(k.x+H.x*(G/X)+z.x*D*4,k.y+H.y*(G/X)+z.y*D*4);w.lineTo(Y.x,Y.y)}return w.strokePath(),I.anchors&&b>0&&(w.fillStyle(O),w.fillCircle(k.x,k.y,b),w.fillCircle(Y.x,Y.y,b)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});r.exports=M},70410:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(i){return this.body.restitution=i,this}};r.exports=T},66968:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var d=0;if(!Array.isArray(i))d=i;else for(var x=0;x<i.length;x++)d|=i[x];return this.body.collisionFilter.mask=d,this},setOnCollide:function(i){return this.body.onCollideCallback=i,this},setOnCollideEnd:function(i){return this.body.onCollideEndCallback=i,this},setOnCollideActive:function(i){return this.body.onCollideActiveCallback=i,this},setOnCollideWith:function(i,d){Array.isArray(i)||(i=[i]);for(var x=0;x<i.length;x++){var f=i[x].hasOwnProperty("body")?i[x].body:i[x];this.body.setOnCollideWith(f,d)}return this}};r.exports=T},51607:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),x={applyForce:function(f){return this._tempVec2.set(this.body.position.x,this.body.position.y),d.applyForce(this.body,this._tempVec2,f),this},applyForceFrom:function(f,o){return d.applyForce(this.body,f,o),this},thrust:function(f){var o=this.body.angle;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(f){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(f){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(f){var o=this.body.angle-Math.PI;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};r.exports=x},5436:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(i,d,x){return this.body.friction=i,d!==void 0&&(this.body.frictionAir=d),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(i){return this.body.frictionAir=i,this},setFrictionStatic:function(i){return this.body.frictionStatic=i,this}};r.exports=T},39858:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(i){return this.body.ignoreGravity=i,this}};r.exports=T},37302:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),x=i(26099),f={setMass:function(o){return d.setMass(this.body,o),this},setDensity:function(o){return d.setDensity(this.body,o),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};r.exports=f},39132:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(i){return this.body.isSensor=i,this},isSensor:function(){return this.body.isSensor}};r.exports=T},57772:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),x=i(22562),f=i(43855),o=i(95540),a=i(19496),n=i(85791),u=i(41598),c={setRectangle:function(l,v,p){return this.setBody({type:"rectangle",width:l,height:v},p)},setCircle:function(l,v){return this.setBody({type:"circle",radius:l},v)},setPolygon:function(l,v,p){return this.setBody({type:"polygon",sides:v,radius:l},p)},setTrapezoid:function(l,v,p,g){return this.setBody({type:"trapezoid",width:l,height:v,slope:p},g)},setExistingBody:function(l,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var p=0;p<l.parts.length;p++)l.parts[p].gameObject=this;var g=this;if(l.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var m=l.render.sprite.xOffset,C=l.render.sprite.yOffset,P=l.centerOfMass.x,M=l.centerOfMass.y;if(f(P,.5)&&f(M,.5))this.setOrigin(m+.5,C+.5);else{var E=l.centerOffset.x,w=l.centerOffset.y;this.setOrigin(m+E/this.displayWidth,C+w/this.displayHeight)}}return this},setBody:function(l,v){if(!l)return this;var p;typeof l=="string"&&(l={type:l});var g=o(l,"type","rectangle"),m=o(l,"x",this._tempVec2.x),C=o(l,"y",this._tempVec2.y),P=o(l,"width",this.width),M=o(l,"height",this.height);switch(g){case"rectangle":p=d.rectangle(m,C,P,M,v);break;case"circle":var E=o(l,"radius",Math.max(P,M)/2),w=o(l,"maxSides",25);p=d.circle(m,C,E,v,w);break;case"trapezoid":var R=o(l,"slope",.5);p=d.trapezoid(m,C,P,M,R,v);break;case"polygon":var A=o(l,"sides",5),L=o(l,"radius",Math.max(P,M)/2);p=d.polygon(m,C,A,L,v);break;case"fromVertices":case"fromVerts":var F=o(l,"verts",null);if(F)if(typeof F=="string"&&(F=u.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,F),p=this.body;else{var O=o(l,"flagInternal",!1),b=o(l,"removeCollinear",.01),I=o(l,"minimumArea",10);p=d.fromVertices(m,C,F,v,O,b,I)}break;case"fromPhysicsEditor":p=a.parseBody(m,C,l,v);break;case"fromPhysicsTracer":p=n.parseBody(m,C,l,v);break}return p&&this.setExistingBody(p,l.addToWorld),this}};r.exports=c},38083:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1121),x=i(53614),f=i(35810),o={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(a){return a===void 0&&(a=60),this.body.sleepThreshold=a,this},setSleepEvents:function(a,n){return this.setSleepStartEvent(a),this.setSleepEndEvent(n),this},setSleepStartEvent:function(a){if(a){var n=this.world;f.on(this.body,"sleepStart",function(u){n.emit(d.SLEEP_START,u,this)})}else f.off(this.body,"sleepStart");return this},setSleepEndEvent:function(a){if(a){var n=this.world;f.on(this.body,"sleepEnd",function(u){n.emit(d.SLEEP_END,u,this)})}else f.off(this.body,"sleepEnd");return this}};r.exports=o},90556:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),x={setStatic:function(f){return d.setStatic(this.body,f),this},isStatic:function(){return this.body.isStatic}};r.exports=x},85436:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),x=i(36383),f=i(86554),o=i(30954),a=4,n={x:{get:function(){return this.body.position.x},set:function(u){this._tempVec2.set(u,this.y),d.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(u){this._tempVec2.set(this.x,u),d.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(u){var c=1/this._scaleX,l=1/this._scaleY;this._scaleX=u,this._scaleX===0?this.renderFlags&=~a:this.renderFlags|=a,d.scale(this.body,c,l),d.scale(this.body,u,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(u){var c=1/this._scaleX,l=1/this._scaleY;this._scaleY=u,this._scaleY===0?this.renderFlags&=~a:this.renderFlags|=a,d.scale(this.body,c,l),d.scale(this.body,this._scaleX,u)}},angle:{get:function(){return o(this.body.angle*x.RAD_TO_DEG)},set:function(u){this.rotation=o(u)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(u){this._rotation=f(u),d.setAngle(this.body,this._rotation)}},setPosition:function(u,c){return u===void 0&&(u=0),c===void 0&&(c=u),this._tempVec2.set(u,c),d.setPosition(this.body,this._tempVec2),this},setRotation:function(u){return u===void 0&&(u=0),this._rotation=f(u),d.setAngle(this.body,u),this},setFixedRotation:function(){return d.setInertia(this.body,1/0),this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,d.setAngle(this.body,this.rotation),this},setScale:function(u,c,l){u===void 0&&(u=1),c===void 0&&(c=u);var v=1/this._scaleX,p=1/this._scaleY;return this._scaleX=u,this._scaleY=c,d.scale(this.body,v,p,l),d.scale(this.body,u,c,l),this}};r.exports=n},42081:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),x={setVelocityX:function(f){return this._tempVec2.set(f,this.body.velocity.y),d.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(f){return this._tempVec2.set(this.body.velocity.x,f),d.setVelocity(this.body,this._tempVec2),this},setVelocity:function(f,o){return this._tempVec2.set(f,o),d.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return d.getVelocity(this.body)},setAngularVelocity:function(f){return d.setAngularVelocity(this.body,f),this},getAngularVelocity:function(){return d.getAngularVelocity(this.body)},setAngularSpeed:function(f){return d.setAngularSpeed(this.body,f),this},getAngularSpeed:function(){return d.getAngularSpeed(this.body)}};r.exports=x},31884:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afteradd"},1213:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterremove"},25968:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterupdate"},67205:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeadd"},39438:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeremove"},44823:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeupdate"},92593:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionactive"},60128:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionend"},76861:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionstart"},92362:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},76408:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},93971:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},5656:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},47861:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},79099:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepend"},35906:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepstart"},1121:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(r,T,i)=>{var d={};r.exports=d;var x=i(41598),f=i(31725),o=i(53614),a=i(53402),n=i(15647),u=i(66615);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(l){var v={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=x.centre(l.vertices):l.hasOwnProperty("vertices")||(v.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=a.extend(v,l);return c(p,l),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},d.nextGroup=function(l){return l?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var c=function(l,v){if(v=v||{},d.set(l,{bounds:l.bounds||n.create(l.vertices),positionPrev:l.positionPrev||f.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),x.rotate(l.vertices,l.angle,l.position),u.rotate(l.axes,l.angle),n.update(l.bounds,l.vertices,l.velocity),d.set(l,{axes:v.axes||l.axes,area:v.area||l.area,mass:v.mass||l.mass,inertia:v.inertia||l.inertia}),l.parts.length===1){var p=l.bounds,g=l.centerOfMass,m=l.centerOffset,C=p.max.x-p.min.x,P=p.max.y-p.min.y;g.x=-(p.min.x-l.position.x)/C,g.y=-(p.min.y-l.position.y)/P,m.x=C*g.x,m.y=P*g.y}};d.set=function(l,v,p){var g;typeof v=="string"&&(g=v,v={},v[g]=p);for(g in v)if(!!Object.prototype.hasOwnProperty.call(v,g))switch(p=v[g],g){case"isStatic":d.setStatic(l,p);break;case"isSleeping":o.set(l,p);break;case"mass":d.setMass(l,p);break;case"density":d.setDensity(l,p);break;case"inertia":d.setInertia(l,p);break;case"vertices":d.setVertices(l,p);break;case"position":d.setPosition(l,p);break;case"angle":d.setAngle(l,p);break;case"velocity":d.setVelocity(l,p);break;case"angularVelocity":d.setAngularVelocity(l,p);break;case"speed":d.setSpeed(l,p);break;case"angularSpeed":d.setAngularSpeed(l,p);break;case"parts":d.setParts(l,p);break;case"centre":d.setCentre(l,p);break;default:l[g]=p}},d.setStatic=function(l,v){for(var p=0;p<l.parts.length;p++){var g=l.parts[p];v?(g.isStatic||(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia}),g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null),g.isStatic=v}},d.setMass=function(l,v){var p=l.inertia/(l.mass/6);l.inertia=p*(v/6),l.inverseInertia=1/l.inertia,l.mass=v,l.inverseMass=1/l.mass,l.density=l.mass/l.area},d.setDensity=function(l,v){d.setMass(l,v*l.area),l.density=v},d.setInertia=function(l,v){l.inertia=v,l.inverseInertia=1/l.inertia},d.setVertices=function(l,v){v[0].body===l?l.vertices=v:l.vertices=x.create(v,l),l.axes=u.fromVertices(l.vertices),l.area=x.area(l.vertices),d.setMass(l,l.density*l.area);var p=x.centre(l.vertices);x.translate(l.vertices,p,-1),d.setInertia(l,d._inertiaScale*x.inertia(l.vertices,l.mass)),x.translate(l.vertices,l.position),n.update(l.bounds,l.vertices,l.velocity)},d.setParts=function(l,v,p){var g;for(v=v.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<v.length;g++){var m=v[g];m!==l&&(m.parent=l,l.parts.push(m))}if(l.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var C=[];for(g=0;g<v.length;g++)C=C.concat(v[g].vertices);x.clockwiseSort(C);var P=x.hull(C),M=x.centre(P);d.setVertices(l,P),x.translate(l.vertices,M)}var E=d._totalProperties(l),w=E.centre.x,R=E.centre.y,A=l.bounds,L=l.centerOfMass,F=l.centerOffset;n.update(A,l.vertices,l.velocity),L.x=-(A.min.x-w)/(A.max.x-A.min.x),L.y=-(A.min.y-R)/(A.max.y-A.min.y),F.x=w,F.y=R,l.area=E.area,l.parent=l,l.position.x=w,l.position.y=R,l.positionPrev.x=w,l.positionPrev.y=R,d.setMass(l,E.mass),d.setInertia(l,E.inertia),d.setPosition(l,E.centre)}},d.setCentre=function(l,v,p){p?(l.positionPrev.x+=v.x,l.positionPrev.y+=v.y,l.position.x+=v.x,l.position.y+=v.y):(l.positionPrev.x=v.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=v.y-(l.position.y-l.positionPrev.y),l.position.x=v.x,l.position.y=v.y)},d.setPosition=function(l,v,p){var g=f.sub(v,l.position);p?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=g.x,l.velocity.y=g.y,l.speed=f.magnitude(g)):(l.positionPrev.x+=g.x,l.positionPrev.y+=g.y);for(var m=0;m<l.parts.length;m++){var C=l.parts[m];C.position.x+=g.x,C.position.y+=g.y,x.translate(C.vertices,g),n.update(C.bounds,C.vertices,l.velocity)}},d.setAngle=function(l,v,p){var g=v-l.angle;p?(l.anglePrev=l.angle,l.angularVelocity=g,l.angularSpeed=Math.abs(g)):l.anglePrev+=g;for(var m=0;m<l.parts.length;m++){var C=l.parts[m];C.angle+=g,x.rotate(C.vertices,g,l.position),u.rotate(C.axes,g),n.update(C.bounds,C.vertices,l.velocity),m>0&&f.rotateAbout(C.position,g,l.position,C.position)}},d.setVelocity=function(l,v){var p=l.deltaTime/d._baseDelta;l.positionPrev.x=l.position.x-v.x*p,l.positionPrev.y=l.position.y-v.y*p,l.velocity.x=(l.position.x-l.positionPrev.x)/p,l.velocity.y=(l.position.y-l.positionPrev.y)/p,l.speed=f.magnitude(l.velocity)},d.getVelocity=function(l){var v=d._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*v,y:(l.position.y-l.positionPrev.y)*v}},d.getSpeed=function(l){return f.magnitude(d.getVelocity(l))},d.setSpeed=function(l,v){d.setVelocity(l,f.mult(f.normalise(d.getVelocity(l)),v))},d.setAngularVelocity=function(l,v){var p=l.deltaTime/d._baseDelta;l.anglePrev=l.angle-v*p,l.angularVelocity=(l.angle-l.anglePrev)/p,l.angularSpeed=Math.abs(l.angularVelocity)},d.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*d._baseDelta/l.deltaTime},d.getAngularSpeed=function(l){return Math.abs(d.getAngularVelocity(l))},d.setAngularSpeed=function(l,v){d.setAngularVelocity(l,a.sign(d.getAngularVelocity(l))*v)},d.translate=function(l,v,p){d.setPosition(l,f.add(l.position,v),p)},d.rotate=function(l,v,p,g){if(!p)d.setAngle(l,l.angle+v,g);else{var m=Math.cos(v),C=Math.sin(v),P=l.position.x-p.x,M=l.position.y-p.y;d.setPosition(l,{x:p.x+(P*m-M*C),y:p.y+(P*C+M*m)},g),d.setAngle(l,l.angle+v,g)}},d.scale=function(l,v,p,g){var m=0,C=0;g=g||l.position;for(var P=l.inertia===1/0,M=0;M<l.parts.length;M++){var E=l.parts[M];E.scale.x=v,E.scale.y=p,x.scale(E.vertices,v,p,g),E.axes=u.fromVertices(E.vertices),E.area=x.area(E.vertices),d.setMass(E,l.density*E.area),x.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),d.setInertia(E,d._inertiaScale*x.inertia(E.vertices,E.mass)),x.translate(E.vertices,{x:E.position.x,y:E.position.y}),M>0&&(m+=E.area,C+=E.inertia),E.position.x=g.x+(E.position.x-g.x)*v,E.position.y=g.y+(E.position.y-g.y)*p,n.update(E.bounds,E.vertices,l.velocity)}l.parts.length>1&&(l.area=m,l.isStatic||(d.setMass(l,l.density*m),d.setInertia(l,C))),l.circleRadius&&(v===p?l.circleRadius*=v:l.circleRadius=null),P&&d.setInertia(l,1/0)},d.update=function(l,v){v=(typeof v<"u"?v:16.666666666666668)*l.timeScale;var p=v*v,g=d._timeCorrection?v/(l.deltaTime||v):1,m=1-l.frictionAir*(v/a._baseDelta),C=(l.position.x-l.positionPrev.x)*g,P=(l.position.y-l.positionPrev.y)*g;l.velocity.x=C*m+l.force.x/l.mass*p,l.velocity.y=P*m+l.force.y/l.mass*p,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=v,l.angularVelocity=(l.angle-l.anglePrev)*m*g+l.torque/l.inertia*p,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=f.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var M=0;M<l.parts.length;M++){var E=l.parts[M];x.translate(E.vertices,l.velocity),M>0&&(E.position.x+=l.velocity.x,E.position.y+=l.velocity.y),l.angularVelocity!==0&&(x.rotate(E.vertices,l.angularVelocity,l.position),u.rotate(E.axes,l.angularVelocity),M>0&&f.rotateAbout(E.position,l.angularVelocity,l.position,E.position)),n.update(E.bounds,E.vertices,l.velocity)}},d.updateVelocities=function(l){var v=d._baseDelta/l.deltaTime,p=l.velocity;p.x=(l.position.x-l.positionPrev.x)*v,p.y=(l.position.y-l.positionPrev.y)*v,l.speed=Math.sqrt(p.x*p.x+p.y*p.y),l.angularVelocity=(l.angle-l.anglePrev)*v,l.angularSpeed=Math.abs(l.angularVelocity)},d.applyForce=function(l,v,p){var g={x:v.x-l.position.x,y:v.y-l.position.y};l.force.x+=p.x,l.force.y+=p.y,l.torque+=g.x*p.y-g.y*p.x},d._totalProperties=function(l){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=l.parts.length===1?0:1;p<l.parts.length;p++){var g=l.parts[p],m=g.mass!==1/0?g.mass:1;v.mass+=m,v.area+=g.area,v.inertia+=g.inertia,v.centre=f.add(v.centre,f.mult(g.position,m))}return v.centre=f.div(v.centre,v.mass),v}})()},69351:(r,T,i)=>{var d={};r.exports=d;var x=i(35810),f=i(53402),o=i(15647),a=i(22562);(function(){d.create=function(n){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},d.setModified=function(n,u,c,l){if(x.trigger(n,"compositeModified",n),n.isModified=u,u&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),c&&n.parent&&d.setModified(n.parent,u,c,l),l)for(var v=0;v<n.composites.length;v++){var p=n.composites[v];d.setModified(p,u,c,l)}},d.add=function(n,u){var c=[].concat(u);x.trigger(n,"beforeAdd",{object:u});for(var l=0;l<c.length;l++){var v=c[l];switch(v.type){case"body":if(v.parent!==v){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(n,v);break;case"constraint":d.addConstraint(n,v);break;case"composite":d.addComposite(n,v);break;case"mouseConstraint":d.addConstraint(n,v.constraint);break}}return x.trigger(n,"afterAdd",{object:u}),n},d.remove=function(n,u,c){var l=[].concat(u);x.trigger(n,"beforeRemove",{object:u});for(var v=0;v<l.length;v++){var p=l[v];switch(p.type){case"body":d.removeBody(n,p,c);break;case"constraint":d.removeConstraint(n,p,c);break;case"composite":d.removeComposite(n,p,c);break;case"mouseConstraint":d.removeConstraint(n,p.constraint);break}}return x.trigger(n,"afterRemove",{object:u}),n},d.addComposite=function(n,u){return n.composites.push(u),u.parent=n,d.setModified(n,!0,!0,!1),n},d.removeComposite=function(n,u,c){var l=f.indexOf(n.composites,u);if(l!==-1&&d.removeCompositeAt(n,l),c)for(var v=0;v<n.composites.length;v++)d.removeComposite(n.composites[v],u,!0);return n},d.removeCompositeAt=function(n,u){return n.composites.splice(u,1),d.setModified(n,!0,!0,!1),n},d.addBody=function(n,u){return n.bodies.push(u),d.setModified(n,!0,!0,!1),n},d.removeBody=function(n,u,c){var l=f.indexOf(n.bodies,u);if(l!==-1&&d.removeBodyAt(n,l),c)for(var v=0;v<n.composites.length;v++)d.removeBody(n.composites[v],u,!0);return n},d.removeBodyAt=function(n,u){return n.bodies.splice(u,1),d.setModified(n,!0,!0,!1),n},d.addConstraint=function(n,u){return n.constraints.push(u),d.setModified(n,!0,!0,!1),n},d.removeConstraint=function(n,u,c){var l=f.indexOf(n.constraints,u);if(l!==-1&&d.removeConstraintAt(n,l),c)for(var v=0;v<n.composites.length;v++)d.removeConstraint(n.composites[v],u,!0);return n},d.removeConstraintAt=function(n,u){return n.constraints.splice(u,1),d.setModified(n,!0,!0,!1),n},d.clear=function(n,u,c){if(c)for(var l=0;l<n.composites.length;l++)d.clear(n.composites[l],u,!0);return u?n.bodies=n.bodies.filter(function(v){return v.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,d.setModified(n,!0,!0,!1),n},d.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var u=[].concat(n.bodies),c=0;c<n.composites.length;c++)u=u.concat(d.allBodies(n.composites[c]));return n.cache&&(n.cache.allBodies=u),u},d.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var u=[].concat(n.constraints),c=0;c<n.composites.length;c++)u=u.concat(d.allConstraints(n.composites[c]));return n.cache&&(n.cache.allConstraints=u),u},d.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var u=[].concat(n.composites),c=0;c<n.composites.length;c++)u=u.concat(d.allComposites(n.composites[c]));return n.cache&&(n.cache.allComposites=u),u},d.get=function(n,u,c){var l,v;switch(c){case"body":l=d.allBodies(n);break;case"constraint":l=d.allConstraints(n);break;case"composite":l=d.allComposites(n).concat(n);break}return l?(v=l.filter(function(p){return p.id.toString()===u.toString()}),v.length===0?null:v[0]):null},d.move=function(n,u,c){return d.remove(n,u),d.add(c,u),n},d.rebase=function(n){for(var u=d.allBodies(n).concat(d.allConstraints(n)).concat(d.allComposites(n)),c=0;c<u.length;c++)u[c].id=f.nextId();return n},d.translate=function(n,u,c){for(var l=c?d.allBodies(n):n.bodies,v=0;v<l.length;v++)a.translate(l[v],u);return n},d.rotate=function(n,u,c,l){for(var v=Math.cos(u),p=Math.sin(u),g=l?d.allBodies(n):n.bodies,m=0;m<g.length;m++){var C=g[m],P=C.position.x-c.x,M=C.position.y-c.y;a.setPosition(C,{x:c.x+(P*v-M*p),y:c.y+(P*p+M*v)}),a.rotate(C,u)}return n},d.scale=function(n,u,c,l,v){for(var p=v?d.allBodies(n):n.bodies,g=0;g<p.length;g++){var m=p[g],C=m.position.x-l.x,P=m.position.y-l.y;a.setPosition(m,{x:l.x+C*u,y:l.y+P*c}),a.scale(m,u,c)}return n},d.bounds=function(n){for(var u=d.allBodies(n),c=[],l=0;l<u.length;l+=1){var v=u[l];c.push(v.bounds.min,v.bounds.max)}return o.create(c)}})()},4372:(r,T,i)=>{var d={};r.exports=d;var x=i(69351);(function(){d.create=x.create,d.add=x.add,d.remove=x.remove,d.clear=x.clear,d.addComposite=x.addComposite,d.addBody=x.addBody,d.addConstraint=x.addConstraint})()},52284:(r,T,i)=>{var d={};r.exports=d;var x=i(41598),f=i(4506);(function(){var o=[],a={overlap:0,axis:null},n={overlap:0,axis:null};d.create=function(u,c){return{pair:null,collided:!1,bodyA:u,bodyB:c,parentA:u.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},d.collides=function(u,c,l){if(d._overlapAxes(a,u.vertices,c.vertices,u.axes),a.overlap<=0||(d._overlapAxes(n,c.vertices,u.vertices,c.axes),n.overlap<=0))return null;var v=l&&l.table[f.id(u,c)],p;v?p=v.collision:(p=d.create(u,c),p.collided=!0,p.bodyA=u.id<c.id?u:c,p.bodyB=u.id<c.id?c:u,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),u=p.bodyA,c=p.bodyB;var g;a.overlap<n.overlap?g=a:g=n;var m=p.normal,C=p.supports,P=g.axis,M=P.x,E=P.y;M*(c.position.x-u.position.x)+E*(c.position.y-u.position.y)<0?(m.x=M,m.y=E):(m.x=-M,m.y=-E),p.tangent.x=-m.y,p.tangent.y=m.x,p.depth=g.overlap,p.penetration.x=m.x*p.depth,p.penetration.y=m.y*p.depth;var w=d._findSupports(u,c,m,1),R=0;if(x.contains(u.vertices,w[0])&&(C[R++]=w[0]),x.contains(u.vertices,w[1])&&(C[R++]=w[1]),R<2){var A=d._findSupports(c,u,m,-1);x.contains(c.vertices,A[0])&&(C[R++]=A[0]),R<2&&x.contains(c.vertices,A[1])&&(C[R++]=A[1])}return R===0&&(C[R++]=w[0]),C.length=R,p},d._overlapAxes=function(u,c,l,v){var p=c.length,g=l.length,m=c[0].x,C=c[0].y,P=l[0].x,M=l[0].y,E=v.length,w=Number.MAX_VALUE,R=0,A,L,F,O,b,I;for(b=0;b<E;b++){var B=v[b],N=B.x,k=B.y,Y=m*N+C*k,H=P*N+M*k,z=Y,X=H;for(I=1;I<p;I+=1)O=c[I].x*N+c[I].y*k,O>z?z=O:O<Y&&(Y=O);for(I=1;I<g;I+=1)O=l[I].x*N+l[I].y*k,O>X?X=O:O<H&&(H=O);if(L=z-H,F=X-Y,A=L<F?L:F,A<w&&(w=A,R=b,A<=0))break}u.axis=v[R],u.overlap=w},d._projectToAxis=function(u,c,l){for(var v=c[0].x*l.x+c[0].y*l.y,p=v,g=1;g<c.length;g+=1){var m=c[g].x*l.x+c[g].y*l.y;m>p?p=m:m<v&&(v=m)}u.min=v,u.max=p},d._findSupports=function(u,c,l,v){var p=c.vertices,g=p.length,m=u.position.x,C=u.position.y,P=l.x*v,M=l.y*v,E=Number.MAX_VALUE,w,R,A,L,F;for(F=0;F<g;F+=1)R=p[F],L=P*(m-R.x)+M*(C-R.y),L<E&&(E=L,w=R);return A=p[(g+w.index-1)%g],E=P*(m-A.x)+M*(C-A.y),R=p[(w.index+1)%g],P*(m-R.x)+M*(C-R.y)<E?(o[0]=w,o[1]=R,o):(o[0]=w,o[1]=A,o)}})()},43424:r=>{var T={};r.exports=T,function(){T.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},81388:(r,T,i)=>{var d={};r.exports=d;var x=i(53402),f=i(52284);(function(){d.create=function(o){var a={bodies:[],pairs:null};return x.extend(a,o)},d.setBodies=function(o,a){o.bodies=a.slice(0)},d.clear=function(o){o.bodies=[]},d.collisions=function(o){var a=[],n=o.pairs,u=o.bodies,c=u.length,l=d.canCollide,v=f.collides,p,g;for(u.sort(d._compareBoundsX),p=0;p<c;p++){var m=u[p],C=m.bounds,P=m.bounds.max.x,M=m.bounds.max.y,E=m.bounds.min.y,w=m.isStatic||m.isSleeping,R=m.parts.length,A=R===1;for(g=p+1;g<c;g++){var L=u[g],F=L.bounds;if(F.min.x>P)break;if(!(M<F.min.y||E>F.max.y)&&!(w&&(L.isStatic||L.isSleeping))&&!!l(m.collisionFilter,L.collisionFilter)){var O=L.parts.length;if(A&&O===1){var b=v(m,L,n);b&&a.push(b)}else for(var I=R>1?1:0,B=O>1?1:0,N=I;N<R;N++)for(var k=m.parts[N],C=k.bounds,Y=B;Y<O;Y++){var H=L.parts[Y],F=H.bounds;if(!(C.min.x>F.max.x||C.max.x<F.min.x||C.max.y<F.min.y||C.min.y>F.max.y)){var b=v(k,H,n);b&&a.push(b)}}}}}return a},d.canCollide=function(o,a){return o.group===a.group&&o.group!==0?o.group>0:(o.mask&a.category)!==0&&(a.mask&o.category)!==0},d._compareBoundsX=function(o,a){return o.bounds.min.x-a.bounds.min.x}})()},4506:(r,T,i)=>{var d={};r.exports=d;var x=i(43424);(function(){d.create=function(f,o){var a=f.bodyA,n=f.bodyB,u={id:d.id(a,n),bodyA:a,bodyB:n,collision:f,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||n.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(u,f,o),u},d.update=function(f,o,a){var n=f.contacts,u=o.supports,c=f.activeContacts,l=o.parentA,v=o.parentB,p=l.vertices.length;f.isActive=!0,f.timeUpdated=a,f.collision=o,f.separation=o.depth,f.inverseMass=l.inverseMass+v.inverseMass,f.friction=l.friction<v.friction?l.friction:v.friction,f.frictionStatic=l.frictionStatic>v.frictionStatic?l.frictionStatic:v.frictionStatic,f.restitution=l.restitution>v.restitution?l.restitution:v.restitution,f.slop=l.slop>v.slop?l.slop:v.slop,o.pair=f,c.length=0;for(var g=0;g<u.length;g++){var m=u[g],C=m.body===l?m.index:p+m.index,P=n[C];P?c.push(P):c.push(n[C]=x.create(m))}},d.setActive=function(f,o,a){o?(f.isActive=!0,f.timeUpdated=a):(f.isActive=!1,f.activeContacts.length=0)},d.id=function(f,o){return f.id<o.id?"A"+f.id+"B"+o.id:"A"+o.id+"B"+f.id}})()},99561:(r,T,i)=>{var d={};r.exports=d;var x=i(4506),f=i(53402);(function(){d.create=function(o){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},d.update=function(o,a,n){var u=o.list,c=u.length,l=o.table,v=a.length,p=o.collisionStart,g=o.collisionEnd,m=o.collisionActive,C,P,M,E;for(p.length=0,g.length=0,m.length=0,E=0;E<c;E++)u[E].confirmedActive=!1;for(E=0;E<v;E++)C=a[E],M=C.pair,M?(M.isActive?m.push(M):p.push(M),x.update(M,C,n),M.confirmedActive=!0):(M=x.create(C,n),l[M.id]=M,p.push(M),u.push(M));var w=[];for(c=u.length,E=0;E<c;E++)M=u[E],M.confirmedActive||(x.setActive(M,!1,n),g.push(M),!M.collision.bodyA.isSleeping&&!M.collision.bodyB.isSleeping&&w.push(E));for(E=0;E<w.length;E++)P=w[E]-E,M=u[P],u.splice(P,1),delete l[M.id]},d.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},73296:(r,T,i)=>{var d={};r.exports=d;var x=i(31725),f=i(52284),o=i(15647),a=i(66280),n=i(41598);(function(){d.collides=function(u,c){for(var l=[],v=c.length,p=u.bounds,g=f.collides,m=o.overlaps,C=0;C<v;C++){var P=c[C],M=P.parts.length,E=M===1?0:1;if(u!==P&&m(P.bounds,p))for(var w=E;w<M;w++){var R=P.parts[w];if(m(R.bounds,p)){var A=g(R,u);if(A){l.push(A);break}}}}return l},d.ray=function(u,c,l,v){v=v||1e-100;for(var p=x.angle(c,l),g=x.magnitude(x.sub(c,l)),m=(l.x+c.x)*.5,C=(l.y+c.y)*.5,P=a.rectangle(m,C,g,v,{angle:p}),M=d.collides(P,u),E=0;E<M.length;E+=1){var w=M[E];w.body=w.bodyB=w.bodyA}return M},d.region=function(u,c,l){for(var v=[],p=0;p<u.length;p++){var g=u[p],m=o.overlaps(g.bounds,c);(m&&!l||!m&&l)&&v.push(g)}return v},d.point=function(u,c){for(var l=[],v=0;v<u.length;v++){var p=u[v];if(o.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(o.contains(m.bounds,c)&&n.contains(m.vertices,c)){l.push(p);break}}}return l}})()},66272:(r,T,i)=>{var d={};r.exports=d;var x=i(41598),f=i(53402),o=i(15647);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(a){var n,u,c,l=a.length;for(n=0;n<l;n++)u=a[n],u.isActive&&(c=u.activeContacts.length,u.collision.parentA.totalContacts+=c,u.collision.parentB.totalContacts+=c)},d.solvePosition=function(a,n,u){var c,l,v,p,g,m,C,P,M=d._positionDampen*(u||1),E=f.clamp(n/f._baseDelta,0,1),w=a.length;for(c=0;c<w;c++)l=a[c],!(!l.isActive||l.isSensor)&&(v=l.collision,p=v.parentA,g=v.parentB,m=v.normal,l.separation=m.x*(g.positionImpulse.x+v.penetration.x-p.positionImpulse.x)+m.y*(g.positionImpulse.y+v.penetration.y-p.positionImpulse.y));for(c=0;c<w;c++)l=a[c],!(!l.isActive||l.isSensor)&&(v=l.collision,p=v.parentA,g=v.parentB,m=v.normal,P=l.separation-l.slop*E,(p.isStatic||g.isStatic)&&(P*=2),p.isStatic||p.isSleeping||(C=M/p.totalContacts,p.positionImpulse.x+=m.x*P*C,p.positionImpulse.y+=m.y*P*C),g.isStatic||g.isSleeping||(C=M/g.totalContacts,g.positionImpulse.x-=m.x*P*C,g.positionImpulse.y-=m.y*P*C))},d.postSolvePosition=function(a){for(var n=d._positionWarming,u=a.length,c=x.translate,l=o.update,v=0;v<u;v++){var p=a[v],g=p.positionImpulse,m=g.x,C=g.y,P=p.velocity;if(p.totalContacts=0,m!==0||C!==0){for(var M=0;M<p.parts.length;M++){var E=p.parts[M];c(E.vertices,g),l(E.bounds,E.vertices,P),E.position.x+=m,E.position.y+=C}p.positionPrev.x+=m,p.positionPrev.y+=C,m*P.x+C*P.y<0?(g.x=0,g.y=0):(g.x*=n,g.y*=n)}}},d.preSolveVelocity=function(a){var n=a.length,u,c;for(u=0;u<n;u++){var l=a[u];if(!(!l.isActive||l.isSensor)){var v=l.activeContacts,p=v.length,g=l.collision,m=g.parentA,C=g.parentB,P=g.normal,M=g.tangent;for(c=0;c<p;c++){var E=v[c],w=E.vertex,R=E.normalImpulse,A=E.tangentImpulse;if(R!==0||A!==0){var L=P.x*R+M.x*A,F=P.y*R+M.y*A;m.isStatic||m.isSleeping||(m.positionPrev.x+=L*m.inverseMass,m.positionPrev.y+=F*m.inverseMass,m.anglePrev+=m.inverseInertia*((w.x-m.position.x)*F-(w.y-m.position.y)*L)),C.isStatic||C.isSleeping||(C.positionPrev.x-=L*C.inverseMass,C.positionPrev.y-=F*C.inverseMass,C.anglePrev-=C.inverseInertia*((w.x-C.position.x)*F-(w.y-C.position.y)*L))}}}}},d.solveVelocity=function(a,n){var u=n/f._baseDelta,c=u*u,l=c*u,v=-d._restingThresh*u,p=d._restingThreshTangent,g=d._frictionNormalMultiplier*u,m=d._frictionMaxStatic,C=a.length,P,M,E,w;for(E=0;E<C;E++){var R=a[E];if(!(!R.isActive||R.isSensor)){var A=R.collision,L=A.parentA,F=A.parentB,O=L.velocity,b=F.velocity,I=A.normal.x,B=A.normal.y,N=A.tangent.x,k=A.tangent.y,Y=R.activeContacts,H=Y.length,z=1/H,X=L.inverseMass+F.inverseMass,D=R.friction*R.frictionStatic*g;for(O.x=L.position.x-L.positionPrev.x,O.y=L.position.y-L.positionPrev.y,b.x=F.position.x-F.positionPrev.x,b.y=F.position.y-F.positionPrev.y,L.angularVelocity=L.angle-L.anglePrev,F.angularVelocity=F.angle-F.anglePrev,w=0;w<H;w++){var G=Y[w],V=G.vertex,W=V.x-L.position.x,U=V.y-L.position.y,$=V.x-F.position.x,K=V.y-F.position.y,Z=O.x-U*L.angularVelocity,J=O.y+W*L.angularVelocity,Q=b.x-K*F.angularVelocity,j=b.y+$*F.angularVelocity,_=Z-Q,q=J-j,st=I*_+B*q,ht=N*_+k*q,lt=R.separation+st,ot=Math.min(lt,1);ot=lt<0?0:ot;var tt=ot*D;ht<-tt||ht>tt?(M=ht>0?ht:-ht,P=R.friction*(ht>0?1:-1)*l,P<-M?P=-M:P>M&&(P=M)):(P=ht,M=m);var at=W*B-U*I,nt=$*B-K*I,vt=z/(X+L.inverseInertia*at*at+F.inverseInertia*nt*nt),mt=(1+R.restitution)*st*vt;if(P*=vt,st<v)G.normalImpulse=0;else{var Bt=G.normalImpulse;G.normalImpulse+=mt,G.normalImpulse>0&&(G.normalImpulse=0),mt=G.normalImpulse-Bt}if(ht<-p||ht>p)G.tangentImpulse=0;else{var Dt=G.tangentImpulse;G.tangentImpulse+=P,G.tangentImpulse<-M&&(G.tangentImpulse=-M),G.tangentImpulse>M&&(G.tangentImpulse=M),P=G.tangentImpulse-Dt}var Pt=I*mt+N*P,Ct=B*mt+k*P;L.isStatic||L.isSleeping||(L.positionPrev.x+=Pt*L.inverseMass,L.positionPrev.y+=Ct*L.inverseMass,L.anglePrev+=(W*Ct-U*Pt)*L.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Pt*F.inverseMass,F.positionPrev.y-=Ct*F.inverseMass,F.anglePrev-=($*Ct-K*Pt)*F.inverseInertia)}}}}})()},48140:(r,T,i)=>{var d={};r.exports=d;var x=i(41598),f=i(31725),o=i(53614),a=i(15647),n=i(66615),u=i(53402);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(c){var l=c;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var v=l.bodyA?f.add(l.bodyA.position,l.pointA):l.pointA,p=l.bodyB?f.add(l.bodyB.position,l.pointB):l.pointB,g=f.magnitude(f.sub(v,p));l.length=typeof l.length<"u"?l.length:g,l.id=l.id||u.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(m.type="pin",m.anchors=!1):l.stiffness<.9&&(m.type="spring"),l.render=u.extend(m,l.render),l},d.preSolveAll=function(c){for(var l=0;l<c.length;l+=1){var v=c[l],p=v.constraintImpulse;v.isStatic||p.x===0&&p.y===0&&p.angle===0||(v.position.x+=p.x,v.position.y+=p.y,v.angle+=p.angle)}},d.solveAll=function(c,l){for(var v=u.clamp(l/u._baseDelta,0,1),p=0;p<c.length;p+=1){var g=c[p],m=!g.bodyA||g.bodyA&&g.bodyA.isStatic,C=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(m||C)&&d.solve(c[p],v)}for(p=0;p<c.length;p+=1)g=c[p],m=!g.bodyA||g.bodyA&&g.bodyA.isStatic,C=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!m&&!C&&d.solve(c[p],v)},d.solve=function(c,l){var v=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!v&&!p)){v&&!v.isStatic&&(f.rotate(g,v.angle-c.angleA,g),c.angleA=v.angle),p&&!p.isStatic&&(f.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var C=g,P=m;if(v&&(C=f.add(v.position,g)),p&&(P=f.add(p.position,m)),!(!C||!P)){var M=f.sub(C,P),E=f.magnitude(M);E<d._minLength&&(E=d._minLength);var w=(E-c.length)/E,R=c.stiffness>=1||c.length===0,A=R?c.stiffness*l:c.stiffness*l*l,L=c.damping*l,F=f.mult(M,w*A),O=(v?v.inverseMass:0)+(p?p.inverseMass:0),b=(v?v.inverseInertia:0)+(p?p.inverseInertia:0),I=O+b,B,N,k,Y,H;if(L>0){var z=f.create();k=f.div(M,E),H=f.sub(p&&f.sub(p.position,p.positionPrev)||z,v&&f.sub(v.position,v.positionPrev)||z),Y=f.dot(k,H)}v&&!v.isStatic&&(N=v.inverseMass/O,v.constraintImpulse.x-=F.x*N,v.constraintImpulse.y-=F.y*N,v.position.x-=F.x*N,v.position.y-=F.y*N,L>0&&(v.positionPrev.x-=L*k.x*Y*N,v.positionPrev.y-=L*k.y*Y*N),B=f.cross(g,F)/I*d._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=B,v.angle-=B),p&&!p.isStatic&&(N=p.inverseMass/O,p.constraintImpulse.x+=F.x*N,p.constraintImpulse.y+=F.y*N,p.position.x+=F.x*N,p.position.y+=F.y*N,L>0&&(p.positionPrev.x+=L*k.x*Y*N,p.positionPrev.y+=L*k.y*Y*N),B=f.cross(m,F)/I*d._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=B,p.angle+=B)}}},d.postSolveAll=function(c){for(var l=0;l<c.length;l++){var v=c[l],p=v.constraintImpulse;if(!(v.isStatic||p.x===0&&p.y===0&&p.angle===0)){o.set(v,!1);for(var g=0;g<v.parts.length;g++){var m=v.parts[g];x.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(x.rotate(m.vertices,p.angle,v.position),n.rotate(m.axes,p.angle),g>0&&f.rotateAbout(m.position,p.angle,v.position,m.position)),a.update(m.bounds,m.vertices,v.velocity)}p.angle*=d._warming,p.x*=d._warming,p.y*=d._warming}}},d.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},d.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},d.currentLength=function(c){var l=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),v=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),p=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),g=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),m=l-p,C=v-g;return Math.sqrt(m*m+C*C)}})()},53402:(r,T,i)=>{var d={};r.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(f,o){var a,n;typeof o=="boolean"?(a=2,n=o):(a=1,n=!0);for(var u=a;u<arguments.length;u++){var c=arguments[u];if(c)for(var l in c)n&&c[l]&&c[l].constructor===Object&&(!f[l]||f[l].constructor===Object)?(f[l]=f[l]||{},d.extend(f[l],n,c[l])):f[l]=c[l]}return f},d.clone=function(f,o){return d.extend({},o,f)},d.keys=function(f){if(Object.keys)return Object.keys(f);var o=[];for(var a in f)o.push(a);return o},d.values=function(f){var o=[];if(Object.keys){for(var a=Object.keys(f),n=0;n<a.length;n++)o.push(f[a[n]]);return o}for(var u in f)o.push(f[u]);return o},d.get=function(f,o,a,n){o=o.split(".").slice(a,n);for(var u=0;u<o.length;u+=1)f=f[o[u]];return f},d.set=function(f,o,a,n,u){var c=o.split(".").slice(n,u);return d.get(f,o,0,-1)[c[c.length-1]]=a,a},d.shuffle=function(f){for(var o=f.length-1;o>0;o--){var a=Math.floor(d.random()*(o+1)),n=f[o];f[o]=f[a],f[a]=n}return f},d.choose=function(f){return f[Math.floor(d.random()*f.length)]},d.isElement=function(f){return typeof HTMLElement<"u"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},d.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},d.isFunction=function(f){return typeof f=="function"},d.isPlainObject=function(f){return typeof f=="object"&&f.constructor===Object},d.isString=function(f){return toString.call(f)==="[object String]"},d.clamp=function(f,o,a){return f<o?o:f>a?a:f},d.sign=function(f){return f<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(f,o){return f=typeof f<"u"?f:0,o=typeof o<"u"?o:1,f+x()*(o-f)};var x=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(f){return f=f.replace("#",""),f.length==3&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var f=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[f]||(d.warn(f),d._warnedOnce[f]=!0)},d.deprecated=function(f,o,a){f[o]=d.chain(function(){d.warnOnce("\u{1F505} deprecated \u{1F505}",a)},f[o])},d.nextId=function(){return d._nextId++},d.indexOf=function(f,o){if(f.indexOf)return f.indexOf(o);for(var a=0;a<f.length;a++)if(f[a]===o)return a;return-1},d.map=function(f,o){if(f.map)return f.map(o);for(var a=[],n=0;n<f.length;n+=1)a.push(o(f[n]));return a},d.topologicalSort=function(f){var o=[],a=[],n=[];for(var u in f)!a[u]&&!n[u]&&d._topologicalSort(u,a,n,f,o);return o},d._topologicalSort=function(f,o,a,n,u){var c=n[f]||[];a[f]=!0;for(var l=0;l<c.length;l+=1){var v=c[l];a[v]||o[v]||d._topologicalSort(v,o,a,n,u)}a[f]=!1,o[f]=!0,u.push(f)},d.chain=function(){for(var f=[],o=0;o<arguments.length;o+=1){var a=arguments[o];a._chained?f.push.apply(f,a._chained):f.push(a)}var n=function(){for(var u,c=new Array(arguments.length),l=0,v=arguments.length;l<v;l++)c[l]=arguments[l];for(l=0;l<f.length;l+=1){var p=f[l].apply(u,c);typeof p<"u"&&(u=p)}return u};return n._chained=f,n},d.chainPathBefore=function(f,o,a){return d.set(f,o,d.chain(a,d.get(f,o)))},d.chainPathAfter=function(f,o,a){return d.set(f,o,d.chain(d.get(f,o),a))},d.setDecomp=function(f){d._decomp=f},d.getDecomp=function(){var f=d._decomp;try{!f&&typeof window<"u"&&(f=window.decomp),!f&&typeof i.g<"u"&&(f=i.g.decomp)}catch{f=null}return f}}()},48413:(r,T,i)=>{var d={};r.exports=d;var x=i(53614),f=i(66272),o=i(81388),a=i(99561),n=i(35810),u=i(69351),c=i(48140),l=i(53402),v=i(22562);(function(){d.create=function(p){p=p||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},m=l.extend(g,p);return m.world=p.world||u.create({label:"World"}),m.pairs=p.pairs||a.create(),m.detector=p.detector||o.create(),m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},d.update=function(p,g){var m=l.now(),C=p.world,P=p.detector,M=p.pairs,E=p.timing,w=E.timestamp,R;g=typeof g<"u"?g:l._baseDelta,g*=E.timeScale,E.timestamp+=g,E.lastDelta=g;var A={timestamp:E.timestamp,delta:g};n.trigger(p,"beforeUpdate",A);var L=u.allBodies(C),F=u.allConstraints(C);for(C.isModified&&(o.setBodies(P,L),u.setModified(C,!1,!1,!0)),p.enableSleeping&&x.update(L,g),d._bodiesApplyGravity(L,p.gravity),g>0&&d._bodiesUpdate(L,g),n.trigger(p,"beforeSolve",A),c.preSolveAll(L),R=0;R<p.constraintIterations;R++)c.solveAll(F,g);c.postSolveAll(L),P.pairs=p.pairs;var O=o.collisions(P);a.update(M,O,w),p.enableSleeping&&x.afterCollisions(M.list),M.collisionStart.length>0&&n.trigger(p,"collisionStart",{pairs:M.collisionStart,timestamp:E.timestamp,delta:g});var b=l.clamp(20/p.positionIterations,0,1);for(f.preSolvePosition(M.list),R=0;R<p.positionIterations;R++)f.solvePosition(M.list,g,b);for(f.postSolvePosition(L),c.preSolveAll(L),R=0;R<p.constraintIterations;R++)c.solveAll(F,g);for(c.postSolveAll(L),f.preSolveVelocity(M.list),R=0;R<p.velocityIterations;R++)f.solveVelocity(M.list,g);return d._bodiesUpdateVelocities(L),M.collisionActive.length>0&&n.trigger(p,"collisionActive",{pairs:M.collisionActive,timestamp:E.timestamp,delta:g}),M.collisionEnd.length>0&&n.trigger(p,"collisionEnd",{pairs:M.collisionEnd,timestamp:E.timestamp,delta:g}),d._bodiesClearForces(L),n.trigger(p,"afterUpdate",A),p.timing.lastElapsed=l.now()-m,p},d.merge=function(p,g){if(l.extend(p,g),g.world){p.world=g.world,d.clear(p);for(var m=u.allBodies(p.world),C=0;C<m.length;C++){var P=m[C];x.set(P,!1),P.id=l.nextId()}}},d.clear=function(p){a.clear(p.pairs),o.clear(p.detector)},d._bodiesClearForces=function(p){for(var g=p.length,m=0;m<g;m++){var C=p[m];C.force.x=0,C.force.y=0,C.torque=0}},d._bodiesApplyGravity=function(p,g){var m=typeof g.scale<"u"?g.scale:.001,C=p.length;if(!(g.x===0&&g.y===0||m===0))for(var P=0;P<C;P++){var M=p[P];M.ignoreGravity||M.isStatic||M.isSleeping||(M.force.y+=M.mass*g.y*m,M.force.x+=M.mass*g.x*m)}},d._bodiesUpdate=function(p,g){for(var m=p.length,C=0;C<m;C++){var P=p[C];P.isStatic||P.isSleeping||v.update(P,g)}},d._bodiesUpdateVelocities=function(p){for(var g=p.length,m=0;m<g;m++)v.updateVelocities(p[m])}})()},35810:(r,T,i)=>{var d={};r.exports=d;var x=i(53402);(function(){d.on=function(f,o,a){for(var n=o.split(" "),u,c=0;c<n.length;c++)u=n[c],f.events=f.events||{},f.events[u]=f.events[u]||[],f.events[u].push(a);return a},d.off=function(f,o,a){if(!o){f.events={};return}typeof o=="function"&&(a=o,o=x.keys(f.events).join(" "));for(var n=o.split(" "),u=0;u<n.length;u++){var c=f.events[n[u]],l=[];if(a&&c)for(var v=0;v<c.length;v++)c[v]!==a&&l.push(c[v]);f.events[n[u]]=l}},d.trigger=function(f,o,a){var n,u,c,l,v=f.events;if(v&&x.keys(v).length>0){a||(a={}),n=o.split(" ");for(var p=0;p<n.length;p++)if(u=n[p],c=v[u],c){l=x.clone(a,!1),l.name=u,l.source=f;for(var g=0;g<c.length;g++)c[g].apply(f,[l])}}}})()},6790:(r,T,i)=>{var d={};r.exports=d;var x=i(73832),f=i(53402);(function(){d.name="matter-js",d.version="0.19.0",d.uses=[],d.used=[],d.use=function(){x.use(d,Array.prototype.slice.call(arguments))},d.before=function(o,a){return o=o.replace(/^Matter./,""),f.chainPathBefore(d,o,a)},d.after=function(o,a){return o=o.replace(/^Matter./,""),f.chainPathAfter(d,o,a)}})()},73832:(r,T,i)=>{var d={};r.exports=d;var x=i(53402);(function(){d._registry={},d.register=function(f){if(d.isPlugin(f)||x.warn("Plugin.register:",d.toString(f),"does not implement all required fields."),f.name in d._registry){var o=d._registry[f.name],a=d.versionParse(f.version).number,n=d.versionParse(o.version).number;a>n?(x.warn("Plugin.register:",d.toString(o),"was upgraded to",d.toString(f)),d._registry[f.name]=f):a<n?x.warn("Plugin.register:",d.toString(o),"can not be downgraded to",d.toString(f)):f!==o&&x.warn("Plugin.register:",d.toString(f),"is already registered to different plugin object")}else d._registry[f.name]=f;return f},d.resolve=function(f){return d._registry[d.dependencyParse(f).name]},d.toString=function(f){return typeof f=="string"?f:(f.name||"anonymous")+"@"+(f.version||f.range||"0.0.0")},d.isPlugin=function(f){return f&&f.name&&f.version&&f.install},d.isUsed=function(f,o){return f.used.indexOf(o)>-1},d.isFor=function(f,o){var a=f.for&&d.dependencyParse(f.for);return!f.for||o.name===a.name&&d.versionSatisfies(o.version,a.range)},d.use=function(f,o){if(f.uses=(f.uses||[]).concat(o||[]),f.uses.length===0){x.warn("Plugin.use:",d.toString(f),"does not specify any dependencies to install.");return}for(var a=d.dependencies(f),n=x.topologicalSort(a),u=[],c=0;c<n.length;c+=1)if(n[c]!==f.name){var l=d.resolve(n[c]);if(!l){u.push("\u274C "+n[c]);continue}d.isUsed(f,l.name)||(d.isFor(l,f)||(x.warn("Plugin.use:",d.toString(l),"is for",l.for,"but installed on",d.toString(f)+"."),l._warned=!0),l.install?l.install(f):(x.warn("Plugin.use:",d.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(u.push("\u{1F536} "+d.toString(l)),delete l._warned):u.push("\u2705 "+d.toString(l)),f.used.push(l.name))}u.length>0&&!l.silent&&x.info(u.join("  "))},d.dependencies=function(f,o){var a=d.dependencyParse(f),n=a.name;if(o=o||{},!(n in o)){f=d.resolve(f)||f,o[n]=x.map(f.uses||[],function(c){d.isPlugin(c)&&d.register(c);var l=d.dependencyParse(c),v=d.resolve(c);return v&&!d.versionSatisfies(v.version,l.range)?(x.warn("Plugin.dependencies:",d.toString(v),"does not satisfy",d.toString(l),"used by",d.toString(a)+"."),v._warned=!0,f._warned=!0):v||(x.warn("Plugin.dependencies:",d.toString(c),"used by",d.toString(a),"could not be resolved."),f._warned=!0),l.name});for(var u=0;u<o[n].length;u+=1)d.dependencies(o[n][u],o);return o}},d.dependencyParse=function(f){if(x.isString(f)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(f)||x.warn("Plugin.dependencyParse:",f,"is not a valid dependency string."),{name:f.split("@")[0],range:f.split("@")[1]||"*"}}return{name:f.name,range:f.range||f.version}},d.versionParse=function(f){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(f)||x.warn("Plugin.versionParse:",f,"is not a valid version or range.");var a=o.exec(f),n=Number(a[4]),u=Number(a[5]),c=Number(a[6]);return{isRange:Boolean(a[1]||a[2]),version:a[3],range:f,operator:a[1]||a[2]||"",major:n,minor:u,patch:c,parts:[n,u,c],prerelease:a[7],number:n*1e8+u*1e4+c}},d.versionSatisfies=function(f,o){o=o||"*";var a=d.versionParse(o),n=d.versionParse(f);if(a.isRange){if(a.operator==="*"||f==="*")return!0;if(a.operator===">")return n.number>a.number;if(a.operator===">=")return n.number>=a.number;if(a.operator==="~")return n.major===a.major&&n.minor===a.minor&&n.patch>=a.patch;if(a.operator==="^")return a.major>0?n.major===a.major&&n.number>=a.number:a.minor>0?n.minor===a.minor&&n.patch>=a.patch:n.patch===a.patch}return f===o||f==="*"}})()},53614:(r,T,i)=>{var d={};r.exports=d;var x=i(22562),f=i(35810),o=i(53402);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(a,n){for(var u=n/o._baseDelta,c=d._motionSleepThreshold,l=0;l<a.length;l++){var v=a[l],p=x.getSpeed(v),g=x.getAngularSpeed(v),m=p*p+g*g;if(v.force.x!==0||v.force.y!==0){d.set(v,!1);continue}var C=Math.min(v.motion,m),P=Math.max(v.motion,m);v.motion=d._minBias*C+(1-d._minBias)*P,v.sleepThreshold>0&&v.motion<c?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/u&&d.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},d.afterCollisions=function(a){for(var n=d._motionSleepThreshold,u=0;u<a.length;u++){var c=a[u];if(!!c.isActive){var l=c.collision,v=l.bodyA.parent,p=l.bodyB.parent;if(!(v.isSleeping&&p.isSleeping||v.isStatic||p.isStatic)&&(v.isSleeping||p.isSleeping)){var g=v.isSleeping&&!v.isStatic?v:p,m=g===v?p:v;!g.isStatic&&m.motion>n&&d.set(g,!1)}}}},d.set=function(a,n){var u=a.isSleeping;n?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,u||f.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,u&&f.trigger(a,"sleepEnd"))}})()},66280:(r,T,i)=>{var d={};r.exports=d;var x=i(41598),f=i(53402),o=i(22562),a=i(15647),n=i(31725);(function(){d.rectangle=function(u,c,l,v,p){p=p||{};var g={label:"Rectangle Body",position:{x:u,y:c},vertices:x.fromPath("L 0 0 L "+l+" 0 L "+l+" "+v+" L 0 "+v)};if(p.chamfer){var m=p.chamfer;g.vertices=x.chamfer(g.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete p.chamfer}return o.create(f.extend({},g,p))},d.trapezoid=function(u,c,l,v,p,g){g=g||{},p*=.5;var m=(1-p*2)*l,C=l*p,P=C+m,M=P+C,E;p<.5?E="L 0 0 L "+C+" "+-v+" L "+P+" "+-v+" L "+M+" 0":E="L 0 0 L "+P+" "+-v+" L "+M+" 0";var w={label:"Trapezoid Body",position:{x:u,y:c},vertices:x.fromPath(E)};if(g.chamfer){var R=g.chamfer;w.vertices=x.chamfer(w.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete g.chamfer}return o.create(f.extend({},w,g))},d.circle=function(u,c,l,v,p){v=v||{};var g={label:"Circle Body",circleRadius:l};p=p||25;var m=Math.ceil(Math.max(10,Math.min(p,l)));return m%2===1&&(m+=1),d.polygon(u,c,m,l,f.extend({},g,v))},d.polygon=function(u,c,l,v,p){if(p=p||{},l<3)return d.circle(u,c,v,p);for(var g=2*Math.PI/l,m="",C=g*.5,P=0;P<l;P+=1){var M=C+P*g,E=Math.cos(M)*v,w=Math.sin(M)*v;m+="L "+E.toFixed(3)+" "+w.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:u,y:c},vertices:x.fromPath(m)};if(p.chamfer){var A=p.chamfer;R.vertices=x.chamfer(R.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete p.chamfer}return o.create(f.extend({},R,p))},d.fromVertices=function(u,c,l,v,p,g,m,C){var P=f.getDecomp(),M,E,w,R,A,L,F,O,b,I,B;for(M=Boolean(P&&P.quickDecomp),v=v||{},w=[],p=typeof p<"u"?p:!1,g=typeof g<"u"?g:.01,m=typeof m<"u"?m:10,C=typeof C<"u"?C:.01,f.isArray(l[0])||(l=[l]),I=0;I<l.length;I+=1)if(L=l[I],R=x.isConvex(L),A=!R,A&&!M&&f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!M)R?L=x.clockwiseSort(L):L=x.hull(L),w.push({position:{x:u,y:c},vertices:L});else{var N=L.map(function($){return[$.x,$.y]});P.makeCCW(N),g!==!1&&P.removeCollinearPoints(N,g),C!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(N,C);var k=P.quickDecomp(N);for(F=0;F<k.length;F++){var Y=k[F],H=Y.map(function($){return{x:$[0],y:$[1]}});m>0&&x.area(H)<m||w.push({position:x.centre(H),vertices:H})}}for(F=0;F<w.length;F++)w[F]=o.create(f.extend(w[F],v));if(p){var z=5;for(F=0;F<w.length;F++){var X=w[F];for(O=F+1;O<w.length;O++){var D=w[O];if(a.overlaps(X.bounds,D.bounds)){var G=X.vertices,V=D.vertices;for(b=0;b<X.vertices.length;b++)for(B=0;B<D.vertices.length;B++){var W=n.magnitudeSquared(n.sub(G[(b+1)%G.length],V[B])),U=n.magnitudeSquared(n.sub(G[b],V[(B+1)%V.length]));W<z&&U<z&&(G[b].isInternal=!0,V[B].isInternal=!0)}}}}}return w.length>1?(E=o.create(f.extend({parts:w.slice(0)},v)),o.setPosition(E,{x:u,y:c}),E):w[0]},d.flagCoincidentParts=function(u,c){c===void 0&&(c=5);for(var l=0;l<u.length;l++)for(var v=u[l],p=l+1;p<u.length;p++){var g=u[p];if(a.overlaps(v.bounds,g.bounds))for(var m=v.vertices,C=g.vertices,P=0;P<v.vertices.length;P++)for(var M=0;M<g.vertices.length;M++){var E=n.magnitudeSquared(n.sub(m[(P+1)%m.length],C[M])),w=n.magnitudeSquared(n.sub(m[P],C[(M+1)%C.length]));E<c&&w<c&&(m[P].isInternal=!0,C[M].isInternal=!0)}}return u}})()},74116:(r,T,i)=>{var d={};r.exports=d;var x=i(69351),f=i(48140),o=i(53402),a=i(22562),n=i(66280);(function(){d.stack=function(u,c,l,v,p,g,m){for(var C=x.create({label:"Stack"}),P=u,M=c,E,w=0,R=0;R<v;R++){for(var A=0,L=0;L<l;L++){var F=m(P,M,L,R,E,w);if(F){var O=F.bounds.max.y-F.bounds.min.y,b=F.bounds.max.x-F.bounds.min.x;O>A&&(A=O),a.translate(F,{x:b*.5,y:O*.5}),P=F.bounds.max.x+p,x.addBody(C,F),E=F,w+=1}else P+=p}M+=A+g,P=u}return C},d.chain=function(u,c,l,v,p,g){for(var m=u.bodies,C=1;C<m.length;C++){var P=m[C-1],M=m[C],E=P.bounds.max.y-P.bounds.min.y,w=P.bounds.max.x-P.bounds.min.x,R=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x,L={bodyA:P,pointA:{x:w*c,y:E*l},bodyB:M,pointB:{x:A*v,y:R*p}},F=o.extend(L,g);x.addConstraint(u,f.create(F))}return u.label+=" Chain",u},d.mesh=function(u,c,l,v,p){var g=u.bodies,m,C,P,M,E;for(m=0;m<l;m++){for(C=1;C<c;C++)P=g[C-1+m*c],M=g[C+m*c],x.addConstraint(u,f.create(o.extend({bodyA:P,bodyB:M},p)));if(m>0)for(C=0;C<c;C++)P=g[C+(m-1)*c],M=g[C+m*c],x.addConstraint(u,f.create(o.extend({bodyA:P,bodyB:M},p))),v&&C>0&&(E=g[C-1+(m-1)*c],x.addConstraint(u,f.create(o.extend({bodyA:E,bodyB:M},p)))),v&&C<c-1&&(E=g[C+1+(m-1)*c],x.addConstraint(u,f.create(o.extend({bodyA:E,bodyB:M},p))))}return u.label+=" Mesh",u},d.pyramid=function(u,c,l,v,p,g,m){return d.stack(u,c,l,v,p,g,function(C,P,M,E,w,R){var A=Math.min(v,Math.ceil(l/2)),L=w?w.bounds.max.x-w.bounds.min.x:0;if(!(E>A)){E=A-E;var F=E,O=l-1-E;if(!(M<F||M>O)){R===1&&a.translate(w,{x:(M+(l%2===1?1:-1))*L,y:0});var b=w?M*L:0;return m(u+b+M*p,P,M,E,w,R)}}})},d.newtonsCradle=function(u,c,l,v,p){for(var g=x.create({label:"Newtons Cradle"}),m=0;m<l;m++){var C=1.9,P=n.circle(u+m*(v*C),c+p,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),M=f.create({pointA:{x:u+m*(v*C),y:c},bodyB:P});x.addBody(g,P),x.addConstraint(g,M)}return g},d.car=function(u,c,l,v,p){var g=a.nextGroup(!0),m=20,C=-l*.5+m,P=l*.5-m,M=0,E=x.create({label:"Car"}),w=n.rectangle(u,c,l,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),R=n.circle(u+C,c+M,p,{collisionFilter:{group:g},friction:.8}),A=n.circle(u+P,c+M,p,{collisionFilter:{group:g},friction:.8}),L=f.create({bodyB:w,pointB:{x:C,y:M},bodyA:R,stiffness:1,length:0}),F=f.create({bodyB:w,pointB:{x:P,y:M},bodyA:A,stiffness:1,length:0});return x.addBody(E,w),x.addBody(E,R),x.addBody(E,A),x.addConstraint(E,L),x.addConstraint(E,F),E},d.softBody=function(u,c,l,v,p,g,m,C,P,M){P=o.extend({inertia:1/0},P),M=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},M);var E=d.stack(u,c,l,v,p,g,function(w,R){return n.circle(w,R,C,P)});return d.mesh(E,l,v,m,M),E.label="Soft Body",E}})()},66615:(r,T,i)=>{var d={};r.exports=d;var x=i(31725),f=i(53402);(function(){d.fromVertices=function(o){for(var a={},n=0;n<o.length;n++){var u=(n+1)%o.length,c=x.normalise({x:o[u].y-o[n].y,y:o[n].x-o[u].x}),l=c.y===0?1/0:c.x/c.y;l=l.toFixed(3).toString(),a[l]=c}return f.values(a)},d.rotate=function(o,a){if(a!==0)for(var n=Math.cos(a),u=Math.sin(a),c=0;c<o.length;c++){var l=o[c],v;v=l.x*n-l.y*u,l.y=l.x*u+l.y*n,l.x=v}}})()},15647:r=>{var T={};r.exports=T,function(){T.create=function(i){var d={min:{x:0,y:0},max:{x:0,y:0}};return i&&T.update(d,i),d},T.update=function(i,d,x){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var f=0;f<d.length;f++){var o=d[f];o.x>i.max.x&&(i.max.x=o.x),o.x<i.min.x&&(i.min.x=o.x),o.y>i.max.y&&(i.max.y=o.y),o.y<i.min.y&&(i.min.y=o.y)}x&&(x.x>0?i.max.x+=x.x:i.min.x+=x.x,x.y>0?i.max.y+=x.y:i.min.y+=x.y)},T.contains=function(i,d){return d.x>=i.min.x&&d.x<=i.max.x&&d.y>=i.min.y&&d.y<=i.max.y},T.overlaps=function(i,d){return i.min.x<=d.max.x&&i.max.x>=d.min.x&&i.max.y>=d.min.y&&i.min.y<=d.max.y},T.translate=function(i,d){i.min.x+=d.x,i.max.x+=d.x,i.min.y+=d.y,i.max.y+=d.y},T.shift=function(i,d){var x=i.max.x-i.min.x,f=i.max.y-i.min.y;i.min.x=d.x,i.max.x=d.x+x,i.min.y=d.y,i.max.y=d.y+f}}()},74058:(r,T,i)=>{var d={};r.exports=d,i(15647);var x=i(53402);(function(){d.pathToVertices=function(f,o){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,n,u,c,l,v,p,g,m,C,P=[],M,E,w=0,R=0,A=0;o=o||15;var L=function(O,b,I){var B=I%2===1&&I>1;if(!m||O!=m.x||b!=m.y){m&&B?(M=m.x,E=m.y):(M=0,E=0);var N={x:M+O,y:E+b};(B||!m)&&(m=N),P.push(N),R=M+O,A=E+b}},F=function(O){var b=O.pathSegTypeAsLetter.toUpperCase();if(b!=="Z"){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":R=O.x,A=O.y;break;case"H":R=O.x;break;case"V":A=O.y;break}L(R,A,O.pathSegType)}};for(d._svgPathToAbsolute(f),u=f.getTotalLength(),v=[],a=0;a<f.pathSegList.numberOfItems;a+=1)v.push(f.pathSegList.getItem(a));for(p=v.concat();w<u;){if(C=f.getPathSegAtLength(w),l=v[C],l!=g){for(;p.length&&p[0]!=l;)F(p.shift());g=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=f.getPointAtLength(w),L(c.x,c.y,0);break}w+=o}for(a=0,n=p.length;a<n;++a)F(p[a]);return P},d._svgPathToAbsolute=function(f){for(var o,a,n,u,c,l,v=f.pathSegList,p=0,g=0,m=v.numberOfItems,C=0;C<m;++C){var P=v.getItem(C),M=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(M))"x"in P&&(p=P.x),"y"in P&&(g=P.y);else switch("x1"in P&&(n=p+P.x1),"x2"in P&&(c=p+P.x2),"y1"in P&&(u=g+P.y1),"y2"in P&&(l=g+P.y2),"x"in P&&(p+=P.x),"y"in P&&(g+=P.y),M){case"m":v.replaceItem(f.createSVGPathSegMovetoAbs(p,g),C);break;case"l":v.replaceItem(f.createSVGPathSegLinetoAbs(p,g),C);break;case"h":v.replaceItem(f.createSVGPathSegLinetoHorizontalAbs(p),C);break;case"v":v.replaceItem(f.createSVGPathSegLinetoVerticalAbs(g),C);break;case"c":v.replaceItem(f.createSVGPathSegCurvetoCubicAbs(p,g,n,u,c,l),C);break;case"s":v.replaceItem(f.createSVGPathSegCurvetoCubicSmoothAbs(p,g,c,l),C);break;case"q":v.replaceItem(f.createSVGPathSegCurvetoQuadraticAbs(p,g,n,u),C);break;case"t":v.replaceItem(f.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),C);break;case"a":v.replaceItem(f.createSVGPathSegArcAbs(p,g,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),C);break;case"z":case"Z":p=o,g=a;break}(M=="M"||M=="m")&&(o=p,a=g)}}})()},31725:r=>{var T={};r.exports=T,function(){T.create=function(i,d){return{x:i||0,y:d||0}},T.clone=function(i){return{x:i.x,y:i.y}},T.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},T.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},T.rotate=function(i,d,x){var f=Math.cos(d),o=Math.sin(d);x||(x={});var a=i.x*f-i.y*o;return x.y=i.x*o+i.y*f,x.x=a,x},T.rotateAbout=function(i,d,x,f){var o=Math.cos(d),a=Math.sin(d);f||(f={});var n=x.x+((i.x-x.x)*o-(i.y-x.y)*a);return f.y=x.y+((i.x-x.x)*a+(i.y-x.y)*o),f.x=n,f},T.normalise=function(i){var d=T.magnitude(i);return d===0?{x:0,y:0}:{x:i.x/d,y:i.y/d}},T.dot=function(i,d){return i.x*d.x+i.y*d.y},T.cross=function(i,d){return i.x*d.y-i.y*d.x},T.cross3=function(i,d,x){return(d.x-i.x)*(x.y-i.y)-(d.y-i.y)*(x.x-i.x)},T.add=function(i,d,x){return x||(x={}),x.x=i.x+d.x,x.y=i.y+d.y,x},T.sub=function(i,d,x){return x||(x={}),x.x=i.x-d.x,x.y=i.y-d.y,x},T.mult=function(i,d){return{x:i.x*d,y:i.y*d}},T.div=function(i,d){return{x:i.x/d,y:i.y/d}},T.perp=function(i,d){return d=d===!0?-1:1,{x:d*-i.y,y:d*i.x}},T.neg=function(i){return{x:-i.x,y:-i.y}},T.angle=function(i,d){return Math.atan2(d.y-i.y,d.x-i.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]}()},41598:(r,T,i)=>{var d={};r.exports=d;var x=i(31725),f=i(53402);(function(){d.create=function(o,a){for(var n=[],u=0;u<o.length;u++){var c=o[u],l={x:c.x,y:c.y,index:u,body:a,isInternal:!1};n.push(l)}return n},d.fromPath=function(o,a){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return o.replace(n,function(c,l,v){u.push({x:parseFloat(l),y:parseFloat(v)})}),d.create(u,a)},d.centre=function(o){for(var a=d.area(o,!0),n={x:0,y:0},u,c,l,v=0;v<o.length;v++)l=(v+1)%o.length,u=x.cross(o[v],o[l]),c=x.mult(x.add(o[v],o[l]),u),n=x.add(n,c);return x.div(n,6*a)},d.mean=function(o){for(var a={x:0,y:0},n=0;n<o.length;n++)a.x+=o[n].x,a.y+=o[n].y;return x.div(a,o.length)},d.area=function(o,a){for(var n=0,u=o.length-1,c=0;c<o.length;c++)n+=(o[u].x-o[c].x)*(o[u].y+o[c].y),u=c;return a?n/2:Math.abs(n)/2},d.inertia=function(o,a){for(var n=0,u=0,c=o,l,v,p=0;p<c.length;p++)v=(p+1)%c.length,l=Math.abs(x.cross(c[v],c[p])),n+=l*(x.dot(c[v],c[v])+x.dot(c[v],c[p])+x.dot(c[p],c[p])),u+=l;return a/6*(n/u)},d.translate=function(o,a,n){n=typeof n<"u"?n:1;var u=o.length,c=a.x*n,l=a.y*n,v;for(v=0;v<u;v++)o[v].x+=c,o[v].y+=l;return o},d.rotate=function(o,a,n){if(a!==0){var u=Math.cos(a),c=Math.sin(a),l=n.x,v=n.y,p=o.length,g,m,C,P;for(P=0;P<p;P++)g=o[P],m=g.x-l,C=g.y-v,g.x=l+(m*u-C*c),g.y=v+(m*c+C*u);return o}},d.contains=function(o,a){for(var n=a.x,u=a.y,c=o.length,l=o[c-1],v,p=0;p<c;p++){if(v=o[p],(n-l.x)*(v.y-l.y)+(u-l.y)*(l.x-v.x)>0)return!1;l=v}return!0},d.scale=function(o,a,n,u){if(a===1&&n===1)return o;u=u||d.centre(o);for(var c,l,v=0;v<o.length;v++)c=o[v],l=x.sub(c,u),o[v].x=u.x+l.x*a,o[v].y=u.y+l.y*n;return o},d.chamfer=function(o,a,n,u,c){typeof a=="number"?a=[a]:a=a||[8],n=typeof n<"u"?n:-1,u=u||2,c=c||14;for(var l=[],v=0;v<o.length;v++){var p=o[v-1>=0?v-1:o.length-1],g=o[v],m=o[(v+1)%o.length],C=a[v<a.length?v:a.length-1];if(C===0){l.push(g);continue}var P=x.normalise({x:g.y-p.y,y:p.x-g.x}),M=x.normalise({x:m.y-g.y,y:g.x-m.x}),E=Math.sqrt(2*Math.pow(C,2)),w=x.mult(f.clone(P),C),R=x.normalise(x.mult(x.add(P,M),.5)),A=x.sub(g,x.mult(R,E)),L=n;n===-1&&(L=Math.pow(C,.32)*1.75),L=f.clamp(L,u,c),L%2===1&&(L+=1);for(var F=Math.acos(x.dot(P,M)),O=F/L,b=0;b<L;b++)l.push(x.add(x.rotate(w,O*b),A))}return l},d.clockwiseSort=function(o){var a=d.mean(o);return o.sort(function(n,u){return x.angle(a,n)-x.angle(a,u)}),o},d.isConvex=function(o){var a=0,n=o.length,u,c,l,v;if(n<3)return null;for(u=0;u<n;u++)if(c=(u+1)%n,l=(u+2)%n,v=(o[c].x-o[u].x)*(o[l].y-o[c].y),v-=(o[c].y-o[u].y)*(o[l].x-o[c].x),v<0?a|=1:v>0&&(a|=2),a===3)return!1;return a!==0?!0:null},d.hull=function(o){var a=[],n=[],u,c;for(o=o.slice(0),o.sort(function(l,v){var p=l.x-v.x;return p!==0?p:l.y-v.y}),c=0;c<o.length;c+=1){for(u=o[c];n.length>=2&&x.cross3(n[n.length-2],n[n.length-1],u)<=0;)n.pop();n.push(u)}for(c=o.length-1;c>=0;c-=1){for(u=o[c];a.length>=2&&x.cross3(a[a.length-2],a[a.length-1],u)<=0;)a.pop();a.push(u)}return a.pop(),n.pop(),a.concat(n)}})()},18210:(r,T,i)=>{var d=i(19933),x={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(f){f.after("Body.create",function(){x.Body.init(this)}),f.before("Engine.update",function(o){x.Engine.update(o)})},Body:{init:function(f){f.plugin.attractors=f.plugin.attractors||[]}},Engine:{update:function(f){for(var o=d.Composite.allBodies(f.world),a=0;a<o.length;a++){var n=o[a],u=n.plugin.attractors;if(u&&u.length>0)for(var c=0;c<o.length;c++){var l=o[c];if(a!==c)for(var v=0;v<u.length;v++){var p=u[v],g=p;d.Common.isFunction(p)&&(g=p(n,l)),g&&d.Body.applyForce(l,l.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(f,o){var a=d.Vector.sub(o.position,f.position),n=d.Vector.magnitudeSquared(a)||1e-4,u=d.Vector.normalise(a),c=-x.Attractors.gravityConstant*(f.mass*o.mass/n),l=d.Vector.mult(u,c);d.Body.applyForce(f,f.position,d.Vector.neg(l)),d.Body.applyForce(o,o.position,l)}}};r.exports=x},40178:r=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@phaser.io>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(i){i.after("Engine.create",function(){i.Events.on(this,"collisionStart",function(d){d.pairs.map(function(x){var f=x.bodyA,o=x.bodyB;f.gameObject&&f.gameObject.emit("collide",f,o,x),o.gameObject&&o.gameObject.emit("collide",o,f,x),i.Events.trigger(f,"onCollide",{pair:x}),i.Events.trigger(o,"onCollide",{pair:x}),f.onCollideCallback&&f.onCollideCallback(x),o.onCollideCallback&&o.onCollideCallback(x),f.onCollideWith[o.id]&&f.onCollideWith[o.id](o,x),o.onCollideWith[f.id]&&o.onCollideWith[f.id](f,x)})}),i.Events.on(this,"collisionActive",function(d){d.pairs.map(function(x){var f=x.bodyA,o=x.bodyB;f.gameObject&&f.gameObject.emit("collideActive",f,o,x),o.gameObject&&o.gameObject.emit("collideActive",o,f,x),i.Events.trigger(f,"onCollideActive",{pair:x}),i.Events.trigger(o,"onCollideActive",{pair:x}),f.onCollideActiveCallback&&f.onCollideActiveCallback(x),o.onCollideActiveCallback&&o.onCollideActiveCallback(x)})}),i.Events.on(this,"collisionEnd",function(d){d.pairs.map(function(x){var f=x.bodyA,o=x.bodyB;f.gameObject&&f.gameObject.emit("collideEnd",f,o,x),o.gameObject&&o.gameObject.emit("collideEnd",o,f,x),i.Events.trigger(f,"onCollideEnd",{pair:x}),i.Events.trigger(o,"onCollideEnd",{pair:x}),f.onCollideEndCallback&&f.onCollideEndCallback(x),o.onCollideEndCallback&&o.onCollideEndCallback(x)})})})}};r.exports=T},74507:(r,T,i)=>{var d=i(19933),x={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(f){f.after("Engine.update",function(){x.Engine.update(this)})},Engine:{update:function(f){for(var o=f.world,a=d.Composite.allBodies(o),n=d.Composite.allComposites(o),u=0;u<a.length;u+=1){var c=a[u];c.plugin.wrap&&x.Body.wrap(c,c.plugin.wrap)}for(u=0;u<n.length;u+=1){var l=n[u];l.plugin.wrap&&x.Composite.wrap(l,l.plugin.wrap)}}},Bounds:{wrap:function(f,o){var a=null,n=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(f.min.x>o.max.x?a=o.min.x-f.max.x:f.max.x<o.min.x&&(a=o.max.x-f.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(f.min.y>o.max.y?n=o.min.y-f.max.y:f.max.y<o.min.y&&(n=o.max.y-f.min.y)),a!==null||n!==null)return{x:a||0,y:n||0}}},Body:{wrap:function(f,o){var a=x.Bounds.wrap(f.bounds,o);return a&&d.Body.translate(f,a),a}},Composite:{bounds:function(f){for(var o=d.Composite.allBodies(f),a=[],n=0;n<o.length;n+=1){var u=o[n];a.push(u.bounds.min,u.bounds.max)}return d.Bounds.create(a)},wrap:function(f,o){var a=x.Bounds.wrap(x.Composite.bounds(f),o);return a&&d.Composite.translate(f,a),a}}};r.exports=x},55973:r=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={decomp:F,quickDecomp:B,isSimple:b,removeCollinearPoints:N,removeDuplicatePoints:k,makeCCW:m};function T(z,X,D){D=D||0;var G=[0,0],V,W,U,$,K,Z,J;return V=z[1][1]-z[0][1],W=z[0][0]-z[1][0],U=V*z[0][0]+W*z[0][1],$=X[1][1]-X[0][1],K=X[0][0]-X[1][0],Z=$*X[0][0]+K*X[0][1],J=V*K-$*W,Y(J,0,D)||(G[0]=(K*U-W*Z)/J,G[1]=(V*Z-$*U)/J),G}function i(z,X,D,G){var V=X[0]-z[0],W=X[1]-z[1],U=G[0]-D[0],$=G[1]-D[1];if(U*W-$*V===0)return!1;var K=(V*(D[1]-z[1])+W*(z[0]-D[0]))/(U*W-$*V),Z=(U*(z[1]-D[1])+$*(D[0]-z[0]))/($*V-U*W);return K>=0&&K<=1&&Z>=0&&Z<=1}function d(z,X,D){return(X[0]-z[0])*(D[1]-z[1])-(D[0]-z[0])*(X[1]-z[1])}function x(z,X,D){return d(z,X,D)>0}function f(z,X,D){return d(z,X,D)>=0}function o(z,X,D){return d(z,X,D)<0}function a(z,X,D){return d(z,X,D)<=0}var n=[],u=[];function c(z,X,D,G){if(G){var V=n,W=u;V[0]=X[0]-z[0],V[1]=X[1]-z[1],W[0]=D[0]-X[0],W[1]=D[1]-X[1];var U=V[0]*W[0]+V[1]*W[1],$=Math.sqrt(V[0]*V[0]+V[1]*V[1]),K=Math.sqrt(W[0]*W[0]+W[1]*W[1]),Z=Math.acos(U/($*K));return Z<G}else return d(z,X,D)===0}function l(z,X){var D=X[0]-z[0],G=X[1]-z[1];return D*D+G*G}function v(z,X){var D=z.length;return z[X<0?X%D+D:X%D]}function p(z){z.length=0}function g(z,X,D,G){for(var V=D;V<G;V++)z.push(X[V])}function m(z){for(var X=0,D=z,G=1;G<z.length;++G)(D[G][1]<D[X][1]||D[G][1]===D[X][1]&&D[G][0]>D[X][0])&&(X=G);return x(v(z,X-1),v(z,X),v(z,X+1))?!1:(C(z),!0)}function C(z){for(var X=[],D=z.length,G=0;G!==D;G++)X.push(z.pop());for(var G=0;G!==D;G++)z[G]=X[G]}function P(z,X){return o(v(z,X-1),v(z,X),v(z,X+1))}var M=[],E=[];function w(z,X,D){var G,V,W=M,U=E;if(f(v(z,X+1),v(z,X),v(z,D))&&a(v(z,X-1),v(z,X),v(z,D)))return!1;V=l(v(z,X),v(z,D));for(var $=0;$!==z.length;++$)if(!(($+1)%z.length===X||$===X)&&f(v(z,X),v(z,D),v(z,$+1))&&a(v(z,X),v(z,D),v(z,$))&&(W[0]=v(z,X),W[1]=v(z,D),U[0]=v(z,$),U[1]=v(z,$+1),G=T(W,U),l(v(z,X),G)<V))return!1;return!0}function R(z,X,D){for(var G=0;G!==z.length;++G)if(!(G===X||G===D||(G+1)%z.length===X||(G+1)%z.length===D)&&i(v(z,X),v(z,D),v(z,G),v(z,G+1)))return!1;return!0}function A(z,X,D,G){var V=G||[];if(p(V),X<D)for(var W=X;W<=D;W++)V.push(z[W]);else{for(var W=0;W<=D;W++)V.push(z[W]);for(var W=X;W<z.length;W++)V.push(z[W])}return V}function L(z){for(var X=[],D=[],G=[],V=[],W=Number.MAX_VALUE,U=0;U<z.length;++U)if(P(z,U)){for(var $=0;$<z.length;++$)if(w(z,U,$)){D=L(A(z,U,$,V)),G=L(A(z,$,U,V));for(var K=0;K<G.length;K++)D.push(G[K]);D.length<W&&(X=D,W=D.length,X.push([v(z,U),v(z,$)]))}}return X}function F(z){var X=L(z);return X.length>0?O(z,X):[z]}function O(z,X){if(X.length===0)return[z];if(X instanceof Array&&X.length&&X[0]instanceof Array&&X[0].length===2&&X[0][0]instanceof Array){for(var D=[z],G=0;G<X.length;G++)for(var V=X[G],W=0;W<D.length;W++){var U=D[W],$=O(U,V);if($){D.splice(W,1),D.push($[0],$[1]);break}}return D}else{var V=X,G=z.indexOf(V[0]),W=z.indexOf(V[1]);return G!==-1&&W!==-1?[A(z,G,W),A(z,W,G)]:!1}}function b(z){var X=z,D;for(D=0;D<X.length-1;D++)for(var G=0;G<D-1;G++)if(i(X[D],X[D+1],X[G],X[G+1]))return!1;for(D=1;D<X.length-2;D++)if(i(X[0],X[X.length-1],X[D],X[D+1]))return!1;return!0}function I(z,X,D,G,V){V=V||0;var W=X[1]-z[1],U=z[0]-X[0],$=W*z[0]+U*z[1],K=G[1]-D[1],Z=D[0]-G[0],J=K*D[0]+Z*D[1],Q=W*Z-K*U;return Y(Q,0,V)?[0,0]:[(Z*$-U*J)/Q,(W*J-K*$)/Q]}function B(z,X,D,G,V,W,U){W=W||100,U=U||0,V=V||25,X=typeof X<"u"?X:[],D=D||[],G=G||[];var $=[0,0],K=[0,0],Z=[0,0],J=0,Q=0,j=0,_=0,q=0,st=0,ht=0,lt=[],ot=[],tt=z,at=z;if(at.length<3)return X;if(U++,U>W)return console.warn("quickDecomp: max level ("+W+") reached."),X;for(var nt=0;nt<z.length;++nt)if(P(tt,nt)){D.push(tt[nt]),J=Q=Number.MAX_VALUE;for(var vt=0;vt<z.length;++vt)x(v(tt,nt-1),v(tt,nt),v(tt,vt))&&a(v(tt,nt-1),v(tt,nt),v(tt,vt-1))&&(Z=I(v(tt,nt-1),v(tt,nt),v(tt,vt),v(tt,vt-1)),o(v(tt,nt+1),v(tt,nt),Z)&&(j=l(tt[nt],Z),j<Q&&(Q=j,K=Z,st=vt))),x(v(tt,nt+1),v(tt,nt),v(tt,vt+1))&&a(v(tt,nt+1),v(tt,nt),v(tt,vt))&&(Z=I(v(tt,nt+1),v(tt,nt),v(tt,vt),v(tt,vt+1)),x(v(tt,nt-1),v(tt,nt),Z)&&(j=l(tt[nt],Z),j<J&&(J=j,$=Z,q=vt)));if(st===(q+1)%z.length)Z[0]=(K[0]+$[0])/2,Z[1]=(K[1]+$[1])/2,G.push(Z),nt<q?(g(lt,tt,nt,q+1),lt.push(Z),ot.push(Z),st!==0&&g(ot,tt,st,tt.length),g(ot,tt,0,nt+1)):(nt!==0&&g(lt,tt,nt,tt.length),g(lt,tt,0,q+1),lt.push(Z),ot.push(Z),g(ot,tt,st,nt+1));else{if(st>q&&(q+=z.length),_=Number.MAX_VALUE,q<st)return X;for(var vt=st;vt<=q;++vt)f(v(tt,nt-1),v(tt,nt),v(tt,vt))&&a(v(tt,nt+1),v(tt,nt),v(tt,vt))&&(j=l(v(tt,nt),v(tt,vt)),j<_&&R(tt,nt,vt)&&(_=j,ht=vt%z.length));nt<ht?(g(lt,tt,nt,ht+1),ht!==0&&g(ot,tt,ht,at.length),g(ot,tt,0,nt+1)):(nt!==0&&g(lt,tt,nt,at.length),g(lt,tt,0,ht+1),g(ot,tt,ht,nt+1))}return lt.length<ot.length?(B(lt,X,D,G,V,W,U),B(ot,X,D,G,V,W,U)):(B(ot,X,D,G,V,W,U),B(lt,X,D,G,V,W,U)),X}return X.push(z),X}function N(z,X){for(var D=0,G=z.length-1;z.length>3&&G>=0;--G)c(v(z,G-1),v(z,G),v(z,G+1),X)&&(z.splice(G%z.length,1),D++);return D}function k(z,X){for(var D=z.length-1;D>=1;--D)for(var G=z[D],V=D-1;V>=0;--V)if(H(G,z[V],X)){z.splice(D,1);continue}}function Y(z,X,D){return D=D||0,Math.abs(z-X)<=D}function H(z,X,D){return Y(z[0],X[0],D)&&Y(z[1],X[1],D)}},52018:(r,T,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=i(83419),x=new d({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=x},42363:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};r.exports=T},37277:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},i={},d={};d.register=function(x,f,o,a){a===void 0&&(a=!1),T[x]={plugin:f,mapping:o,custom:a}},d.registerCustom=function(x,f,o,a){i[x]={plugin:f,mapping:o,data:a}},d.hasCore=function(x){return T.hasOwnProperty(x)},d.hasCustom=function(x){return i.hasOwnProperty(x)},d.getCore=function(x){return T[x]},d.getCustom=function(x){return i[x]},d.getCustomClass=function(x){return i.hasOwnProperty(x)?i[x].plugin:null},d.remove=function(x){T.hasOwnProperty(x)&&delete T[x]},d.removeCustom=function(x){i.hasOwnProperty(x)&&delete i[x]},d.destroyCorePlugins=function(){for(var x in T)T.hasOwnProperty(x)&&delete T[x]},d.destroyCustomPlugins=function(){for(var x in i)i.hasOwnProperty(x)&&delete i[x]},r.exports=d},77332:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(8443),f=i(50792),o=i(74099),a=i(44603),n=i(39429),u=i(95540),c=i(37277),l=i(72905),v=new d({Extends:f,initialize:function(g){f.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(x.BOOT,this.boot,this)},boot:function(){var p,g,m,C,P,M,E,w=this.game.config,R=w.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),p=0;p<R.length;p++)g=R[p],m=u(g,"key",null),C=u(g,"plugin",null),P=u(g,"start",!1),M=u(g,"mapping",null),E=u(g,"data",null),m&&(C?this.install(m,C,P,M,E):console.warn("Missing `plugin` for key: "+m));for(R=w.installScenePlugins,R=R.concat(this._pendingScene),p=0;p<R.length;p++)g=R[p],m=u(g,"key",null),C=u(g,"plugin",null),M=u(g,"mapping",null),m&&(C?this.installScenePlugin(m,C,M):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var C,P,M,E=this.game,w=p.scene,R=p.settings.map,A=p.settings.isBooted;for(C=0;C<g.length;C++)P=g[C],E[P]?(p[P]=E[P],R.hasOwnProperty(P)&&(w[R[P]]=p[P])):P==="game"&&R.hasOwnProperty(P)&&(w[R[P]]=E);for(var L=0;L<m.length;L++)for(M=m[L],C=0;C<M.length;C++)if(P=M[C],!!c.hasCore(P)){var F=c.getCore(P),O=F.mapping,b=new F.plugin(w,this,O);p[O]=b,F.custom?w[O]=b:R.hasOwnProperty(O)&&(w[R[O]]=b),A&&b.boot()}for(M=this.plugins,C=0;C<M.length;C++){var I=M[C];I.mapping&&(w[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,C,P){if(P===void 0&&(P=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(c.hasCore(p)||c.register(p,g,m,!0),this.scenePlugins.indexOf(p)===-1)this.scenePlugins.push(p);else if(!P&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(C){var M=new g(C,this,p);C.sys[p]=M,m&&m!==""&&(C[m]=M),M.boot()}},install:function(p,g,m,C,P){if(m===void 0&&(m=!1),C===void 0&&(C=null),P===void 0&&(P=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(C!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:C,data:P});else if(c.registerCustom(p,g,C,P),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var C=g[m];if(C.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var C=new m.plugin(this);m={key:g,plugin:C,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),C.init(m.data),C.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var C=this.getClass(p);return C&&g?(m=this.createEntry(p,p),m?m.plugin:null):C||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&l(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){l(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&n.register(p,g),m&&a.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&n.remove(p),m&&a.remove(p),this},registerFileType:function(p,g,m){o.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});r.exports=v},45145:(r,T,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=i(52018),x=i(83419),f=i(44594),o=new x({Extends:d,initialize:function(n,u,c){d.call(this,u),this.scene=n,this.systems=n.sys,this.pluginKey=c,n.sys.events.once(f.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=o},18922:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(r){const T=performance.now(),i=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames,x=(f,o)=>{const a=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||a.totalVideoFrames-a.droppedVideoFrames;if(n>d){const u=this.mozFrameDelay||a.totalFrameDelay-i.totalFrameDelay||0,c=o-f;r(o,{presentationTime:o+u*1e3,expectedDisplayTime:o+c,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+c/1e3,presentedFrames:n,processingDuration:u}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(u=>x(o,u))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(f=>x(T,f)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(r){cancelAnimationFrame(this._rvfcpolyfillmap[r]),delete this._rvfcpolyfillmap[r]})},10312:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};r.exports=T},68627:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19715),x=i(32880),f=i(83419),o=i(8054),a=i(50792),n=i(92503),u=i(56373),c=i(97480),l=i(69442),v=i(61340),p=new f({Extends:a,initialize:function(m){a.call(this);var C=m.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels},this.game=m,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var P={alpha:m.config.transparent,desynchronized:m.config.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",P),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=u(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(n.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,C=this.width,P=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,C,P),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,C,P))),g.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(g,m,C){var P=m.length;this.emit(n.RENDER,g,C);var M=C.x,E=C.y,w=C.width,R=C.height,A=C.renderToTexture?C.context:g.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(M,E,w,R),A.clip()),C.emit(d.PRE_RENDER,C),this.currentContext=A;var L=C.mask;L&&L.preRenderCanvas(this,null,C._maskCamera),C.transparent||(A.fillStyle=C.backgroundColor.rgba,A.fillRect(M,E,w,R)),A.globalAlpha=C.alpha,A.globalCompositeOperation="source-over",this.drawCount+=P,C.renderToTexture&&C.emit(d.PRE_RENDER,C),C.matrix.copyToContext(A);for(var F=0;F<P;F++){var O=m[F];O.mask&&O.mask.preRenderCanvas(this,O,C),O.renderCanvas(this,O,C),O.mask&&O.mask.postRenderCanvas(this,O,C)}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,C.flashEffect.postRenderCanvas(A),C.fadeEffect.postRenderCanvas(A),C.dirty=!1,L&&L.postRenderCanvas(this),A.restore(),C.renderToTexture&&(C.emit(d.POST_RENDER,C),C.renderToGame&&g.sys.context.drawImage(C.canvas,M,E)),C.emit(d.POST_RENDER,C)},postRender:function(){var g=this.gameContext;g.restore(),this.emit(n.POST_RENDER);var m=this.snapshotState;m.callback&&(x(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,C,P,M,E,w,R,A){C===void 0&&(C=!1),this.snapshotArea(P,M,E,w,m,R,A);var L=this.snapshotState;return L.getPixel=C,x(g,L),L.callback=null,this},snapshot:function(g,m,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,C)},snapshotArea:function(g,m,C,P,M,E,w){var R=this.snapshotState;return R.callback=M,R.type=E,R.encoder=w,R.getPixel=!1,R.x=g,R.y=m,R.width=Math.min(C,this.gameCanvas.width),R.height=Math.min(P,this.gameCanvas.height),this},snapshotPixel:function(g,m,C){return this.snapshotArea(g,m,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,C,P){var M=C.alpha*g.alpha;if(M!==0){var E=this.currentContext,w=this._tempMatrix1,R=this._tempMatrix2,A=m.canvasData,L=A.x,F=A.y,O=m.cutWidth,b=m.cutHeight,I=m.customPivot,B=m.source.resolution,N=g.displayOriginX,k=g.displayOriginY,Y=-N+m.x,H=-k+m.y;if(g.isCropped){var z=g._crop;(z.flipX!==g.flipX||z.flipY!==g.flipY)&&m.updateCropUVs(z,g.flipX,g.flipY),O=z.cw,b=z.ch,L=z.cx,F=z.cy,Y=-N+z.x,H=-k+z.y,g.flipX&&(Y>=0?Y=-(Y+O):Y<0&&(Y=Math.abs(Y)-O)),g.flipY&&(H>=0?H=-(H+b):H<0&&(H=Math.abs(H)-b))}var X=1,D=1;g.flipX&&(I||(Y+=-m.realWidth+N*2),X=-1),g.flipY&&(I||(H+=-m.realHeight+k*2),D=-1);var G=g.x,V=g.y;R.applyITRS(G,V,g.rotation,g.scaleX*X,g.scaleY*D),w.copyFrom(C.matrix),P?(w.multiplyWithOffset(P,-C.scrollX*g.scrollFactorX,-C.scrollY*g.scrollFactorY),R.e=G,R.f=V):(R.e-=C.scrollX*g.scrollFactorX,R.f-=C.scrollY*g.scrollFactorY),w.multiply(R),C.roundPixels&&(w.e=Math.round(w.e),w.f=Math.round(w.f)),E.save(),w.setToContext(E),E.globalCompositeOperation=this.blendModes[g.blendMode],E.globalAlpha=M,E.imageSmoothingEnabled=!m.source.scaleMode,g.mask&&g.mask.preRenderCanvas(this,g,C),O>0&&b>0&&(C.roundPixels?E.drawImage(m.source.image,L,F,O,b,Math.round(Y),Math.round(H),Math.round(O/B),Math.round(b/B)):E.drawImage(m.source.image,L,F,O,b,Y,H,O/B,b/B)),g.mask&&g.mask.postRenderCanvas(this,g,C),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});r.exports=p},55830:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(89289),f=function(){var o=[],a=x.supportNewBlendModes,n="source-over";return o[d.NORMAL]=n,o[d.ADD]="lighter",o[d.MULTIPLY]=a?"multiply":n,o[d.SCREEN]=a?"screen":n,o[d.OVERLAY]=a?"overlay":n,o[d.DARKEN]=a?"darken":n,o[d.LIGHTEN]=a?"lighten":n,o[d.COLOR_DODGE]=a?"color-dodge":n,o[d.COLOR_BURN]=a?"color-burn":n,o[d.HARD_LIGHT]=a?"hard-light":n,o[d.SOFT_LIGHT]=a?"soft-light":n,o[d.DIFFERENCE]=a?"difference":n,o[d.EXCLUSION]=a?"exclusion":n,o[d.HUE]=a?"hue":n,o[d.SATURATION]=a?"saturation":n,o[d.COLOR]=a?"color":n,o[d.LUMINOSITY]=a?"luminosity":n,o[d.ERASE]="destination-out",o[d.SOURCE_IN]="source-in",o[d.SOURCE_OUT]="source-out",o[d.SOURCE_ATOP]="source-atop",o[d.DESTINATION_OVER]="destination-over",o[d.DESTINATION_IN]="destination-in",o[d.DESTINATION_OUT]="destination-out",o[d.DESTINATION_ATOP]="destination-atop",o[d.LIGHTER]="lighter",o[d.COPY]="copy",o[d.XOR]="xor",o};r.exports=f},20926:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),x=function(f,o,a,n,u){var c=n.alpha*a.alpha;if(c<=0)return!1;var l=d(a,n,u).calc;return o.globalCompositeOperation=f.blendModes[a.blendMode],o.globalAlpha=c,o.save(),l.setToContext(o),o.imageSmoothingEnabled=a.frame?!a.frame.source.scaleMode:f.antialias,!0};r.exports=x},63899:r=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="losewebgl"},6119:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},48070:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},15640:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"},8912:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"},87124:r=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="restorewebgl"},92503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:i(92503),Snapshot:i(89966)},r.exports.Canvas=i(55830),r.exports.WebGL=i(4159)},32880:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=i(40987),f=i(95540),o=function(a,n){var u=f(n,"callback"),c=f(n,"type","image/png"),l=f(n,"encoder",.92),v=Math.abs(Math.round(f(n,"x",0))),p=Math.abs(Math.round(f(n,"y",0))),g=Math.floor(f(n,"width",a.width)),m=Math.floor(f(n,"height",a.height)),C=f(n,"getPixel",!1);if(C){var P=a.getContext("2d",{willReadFrequently:!1}),M=P.getImageData(v,p,1,1),E=M.data;u.call(null,new x(E[0],E[1],E[2],E[3]))}else if(v!==0||p!==0||g!==a.width||m!==a.height){var w=d.createWebGL(this,g,m),R=w.getContext("2d",{willReadFrequently:!0});g>0&&m>0&&R.drawImage(a,v,p,g,m,0,0,g,m);var A=new Image;A.onerror=function(){u.call(null),d.remove(w)},A.onload=function(){u.call(null,A),d.remove(w)},A.src=w.toDataURL(c,l)}else{var L=new Image;L.onerror=function(){u.call(null)},L.onload=function(){u.call(null,L)},L.src=a.toDataURL(c,l)}};r.exports=o},88815:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=i(40987),f=i(95540),o=function(a,n){var u=a,c=f(n,"callback"),l=f(n,"type","image/png"),v=f(n,"encoder",.92),p=Math.abs(Math.round(f(n,"x",0))),g=Math.abs(Math.round(f(n,"y",0))),m=f(n,"getPixel",!1),C=f(n,"isFramebuffer",!1),P=C?f(n,"bufferWidth",1):u.drawingBufferWidth,M=C?f(n,"bufferHeight",1):u.drawingBufferHeight;if(m){var E=new Uint8Array(4),w=C?g:M-g;u.readPixels(p,w,1,1,u.RGBA,u.UNSIGNED_BYTE,E),c.call(null,new x(E[0],E[1],E[2],E[3]))}else{var R=Math.floor(f(n,"width",P)),A=Math.floor(f(n,"height",M)),L=R*A*4,F=new Uint8Array(L);u.readPixels(p,M-g-A,R,A,u.RGBA,u.UNSIGNED_BYTE,F);for(var O=d.createWebGL(this,R,A),b=O.getContext("2d",{willReadFrequently:!0}),I=b.getImageData(0,0,R,A),B=I.data,N=0;N<A;N++)for(var k=0;k<R;k++){var Y=((A-N-1)*R+k)*4,H=C?L-(N*R+(R-k))*4:(N*R+k)*4;B[H+0]=F[Y+0],B[H+1]=F[Y+1],B[H+2]=F[Y+2],B[H+3]=F[Y+3]}b.putImageData(I,0,0);var z=new Image;z.onerror=function(){c.call(null),d.remove(O)},z.onload=function(){c.call(null,z),d.remove(O)},z.src=O.toDataURL(l,v)}};r.exports=o},89966:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(36060),f=i(90330),o=i(82264),a=i(95540),n=i(32302),u=i(63448),c=i(31302),l=i(58918),v=i(14811),p=i(92651),g=i(96569),m=i(56527),C=i(57516),P=i(43439),M=i(81041),E=i(12385),w=i(7589),R=i(95428),A=i(72905),L=new d({initialize:function(O){this.game=O.game,this.renderer=O,this.classes=new f([[x.UTILITY_PIPELINE,w],[x.MULTI_PIPELINE,C],[x.BITMAPMASK_PIPELINE,c],[x.SINGLE_PIPELINE,E],[x.ROPE_PIPELINE,M],[x.LIGHT_PIPELINE,g],[x.POINTLIGHT_PIPELINE,P],[x.MOBILE_PIPELINE,m]]),this.postPipelineClasses=new f,this.pipelines=new f,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(F,O,b){var I=this.renderer,B=this.renderTargets;this.frameInc=Math.floor(a(F,"frameInc",32));var N=I.width,k=I.height,Y=this.game.config.disablePreFX,H=this.game.config.disablePostFX;if(H||this.postPipelineClasses.setAll([[String(v.BARREL),l.Barrel],[String(v.BLOOM),l.Bloom],[String(v.BLUR),l.Blur],[String(v.BOKEH),l.Bokeh],[String(v.CIRCLE),l.Circle],[String(v.COLOR_MATRIX),l.ColorMatrix],[String(v.DISPLACEMENT),l.Displacement],[String(v.GLOW),l.Glow],[String(v.GRADIENT),l.Gradient],[String(v.PIXELATE),l.Pixelate],[String(v.SHADOW),l.Shadow],[String(v.SHINE),l.Shine],[String(v.VIGNETTE),l.Vignette],[String(v.WIPE),l.Wipe]]),!Y){this.classes.set(x.FX_PIPELINE,p);for(var z=Math.min(N,k),X=Math.ceil(z/this.frameInc),D=1;D<X;D++){var G=D*this.frameInc;B.push(new n(I,G,G)),B.push(new n(I,G,G)),B.push(new n(I,G,G)),this.maxDimension=G}B.push(new n(I,N,k,1,0,!0,!0)),B.push(new n(I,N,k,1,0,!0,!0)),B.push(new n(I,N,k,1,0,!0,!0))}var V,W,U=this,$=this.game;if(this.classes.each(function(Z,J){V=U.add(Z,new J({game:$})),Z===x.UTILITY_PIPELINE&&(U.UTILITY_PIPELINE=V,U.fullFrame1=V.fullFrame1,U.fullFrame2=V.fullFrame2,U.halfFrame1=V.halfFrame1,U.halfFrame2=V.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),Y||(this.FX_PIPELINE=this.get(x.FX_PIPELINE)),F)for(W in F){var K=F[W];V=new K($),V.name=W,V.isPostFX?this.postPipelineClasses.set(W,K):this.has(W)||(this.classes.set(W,K),this.add(W,V))}this.default=this.get(O),b&&!o.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(F){var O=this.get(F);return O&&(this.default=O),O},add:function(F,O){if(O.isPostFX){console.warn(F+" is a Post Pipeline. Use `addPostPipeline` instead");return}var b=this.pipelines,I=this.renderer;return b.has(F)?console.warn("Pipeline exists: "+F):(O.name=F,O.manager=this,b.set(F,O)),O.hasBooted||O.boot(),I.width!==0&&I.height!==0&&!O.isPreFX&&O.resize(I.width,I.height),O},addPostPipeline:function(F,O){this.postPipelineClasses.has(F)||this.postPipelineClasses.set(F,O)},flush:function(){this.current&&this.current.flush()},has:function(F){var O=this.pipelines;return typeof F=="string"?O.has(F):!!O.contains(F)},get:function(F){var O=this.pipelines;if(typeof F=="string")return O.get(F);if(O.contains(F))return F},getPostPipeline:function(F,O,b){var I=this.postPipelineClasses,B,N="",k=typeof F;if(k==="string"||k==="number"?(B=I.get(F),N=F):k==="function"?(I.contains(F)&&(B=F),N=F.name):k==="object"&&(B=I.get(F.name),N=F.name),B){var Y=new B(this.game,b);return Y.name=N,O&&(Y.gameObject=O),this.postPipelineInstances.push(Y),Y}},removePostPipeline:function(F){A(this.postPipelineInstances,F)},remove:function(F,O,b){O===void 0&&(O=!0),b===void 0&&(b=!0),this.pipelines.delete(F),O&&this.classes.delete(F),b&&this.postPipelineClasses.delete(F)},set:function(F,O,b){if(!F.isPostFX)return this.isCurrent(F,b)||(this.flush(),this.current&&this.current.unbind(),this.current=F,F.bind(b)),F.updateProjectionMatrix(),F.onBind(O),F},preBatch:function(F){if(F.hasPostPipeline){this.flush();for(var O=F.postPipelines,b=O.length-1;b>=0;b--){var I=O[b];I.active&&I.preBatch(F)}}},postBatch:function(F){if(F.hasPostPipeline){this.flush();for(var O=F.postPipelines,b=0;b<O.length;b++){var I=O[b];I.active&&I.postBatch(F)}}},preBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var O=F.postPipelines,b=O.length-1;b>=0;b--){var I=O[b];I.active&&I.preBatch(F)}}},postBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var O=F.postPipelines,b=0;b<O.length;b++){var I=O[b];I.active&&I.postBatch(F)}}},isCurrent:function(F,O){var b=this.renderer,I=this.current;return I&&!O&&(O=I.currentShader),!(I!==F||O.program!==b.currentProgram)},copyFrame:function(F,O,b,I,B){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(F,O,b,I,B),this},copyToGame:function(F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(F),this},drawFrame:function(F,O,b,I){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(F,O,b,I),this},blendFrames:function(F,O,b,I,B){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(F,O,b,I,B),this},blendFramesAdditive:function(F,O,b,I,B){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(F,O,b,I,B),this},clearFrame:function(F,O){return this.UTILITY_PIPELINE.clearFrame(F,O),this},blitFrame:function(F,O,b,I,B,N){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(F,O,b,I,B,N),this},copyFrameRect:function(F,O,b,I,B,N,k,Y){return this.UTILITY_PIPELINE.copyFrameRect(F,O,b,I,B,N,k,Y),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(F){return this.UTILITY_PIPELINE.bind(F)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(F,O){O.restoreContext()}),R(this.postPipelineInstances,function(F){F.restoreContext()})},rebind:function(F){F===void 0&&this.previous&&(F=this.previous);var O=this.renderer,b=O.gl;b.disable(b.DEPTH_TEST),b.disable(b.CULL_FACE),O.hasActiveStencilMask()?b.clear(b.DEPTH_BUFFER_BIT):(b.disable(b.STENCIL_TEST),b.clear(b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT)),b.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var I=O.vaoExtension;I&&I.bindVertexArrayOES(null);var B=this.pipelines.entries;for(var N in B)B[N].glReset=!0;F&&(this.current=F,F.rebind())},clear:function(){var F=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,F.currentProgram=null,F.setBlendMode(0,!0);var O=F.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(F){var O=this.renderTargets,b=3;if(F>this.maxDimension)return this.targetIndex=O.length-b,O[this.targetIndex];var I=(u(F,this.frameInc,0,!0)-1)*b;return this.targetIndex=I,O[I]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});r.exports=L},32302:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(92503),f=new d({initialize:function(a,n,u,c,l,v,p,g,m){c===void 0&&(c=1),l===void 0&&(l=0),v===void 0&&(v=!0),p===void 0&&(p=!1),g===void 0&&(g=!0),m===void 0&&(m=!0),this.renderer=a,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=l,this.autoClear=v,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=m,this.resize(n,u),p?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,a){if(o=Math.round(o*this.scale),a=Math.round(a*this.scale),o<=0&&(o=1),a<=0&&(a=1),this.autoResize&&(o!==this.width||a!==this.height)){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.texture=n.createTextureFromSource(null,o,a,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(o,a,this.texture,this.hasDepthBuffer),this.width=o,this.height=a}return this},willResize:function(o,a){return o=Math.round(o*this.scale),a=Math.round(a*this.scale),o<=0&&(o=1),a<=0&&(a=1),o!==this.width||a!==this.height},bind:function(o,a,n){o===void 0&&(o=!1);var u=this.renderer;if(o&&u.flush(),a&&n&&this.resize(a,n),u.pushFramebuffer(this.framebuffer,!1,!1),o&&this.adjustViewport(),this.autoClear){var c=this.renderer.gl;c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)}u.clearStencilMask()},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,a=o.gl;o.pushFramebuffer(this.framebuffer),a.disable(a.SCISSOR_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var a=this.renderer;return o&&a.flush(),a.popFramebuffer()},destroy:function(){var o=this.renderer;o.off(x.RESIZE,this.resize,this),o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});r.exports=f},70554:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={getTintFromFloats:function(T,i,d,x){var f=(T*255|0)&255,o=(i*255|0)&255,a=(d*255|0)&255,n=(x*255|0)&255;return(n<<24|f<<16|o<<8|a)>>>0},getTintAppendFloatAlpha:function(T,i){var d=(i*255|0)&255;return(d<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,i){var d=(T>>16|0)&255,x=(T>>8|0)&255,f=(T|0)&255,o=(i*255|0)&255;return(o<<24|f<<16|x<<8|d)>>>0},getFloatsFromUintRGB:function(T){var i=(T>>16|0)&255,d=(T>>8|0)&255,x=(T|0)&255;return[i/255,d/255,x/255]},checkShaderMax:function(T,i){var d=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!i||i===-1?d:Math.min(d,i)},parseFragmentShaderMaxTextures:function(T,i){if(!T)return"";for(var d="",x=0;x<i;x++)x>0&&(d+=`
	else `),x<i-1&&(d+="if (outTexId < "+x+".5)"),d+=`
	{`,d+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",d+=`
	}`;return T=T.replace(/%count%/gi,i.toString()),T.replace(/%forloop%/gi,d)},setGlowQuality:function(T,i,d,x){return d===void 0&&(d=i.config.glowFXQuality),x===void 0&&(x=i.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/d/x).toFixed(7)),T=T.replace(/__DIST__/gi,x.toFixed(0)+".0"),T}}},29100:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(62644),f=i(50792),o=i(77085),a=i(95540),n=i(37867),u=i(92503),c=i(32302),l=i(70554),v=i(38683),p=new d({Extends:f,initialize:function(m){f.call(this);var C=m.game,P=C.renderer,M=P.gl;this.name=a(m,"name","WebGLPipeline"),this.game=C,this.renderer=P,this.manager,this.gl=M,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=a(m,"topology",M.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=a(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=a(m,"resizeUniform","")},boot:function(){var g,m=this.gl,C=this.config,P=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var M=this.renderTargets,E=a(C,"renderTarget",!1);typeof E=="boolean"&&E&&(E=1);var w=P.width,R=P.height;if(typeof E=="number")for(g=0;g<E;g++)M.push(new c(P,w,R,1,0,!0));else if(Array.isArray(E))for(g=0;g<E.length;g++){var A=a(E[g],"scale",1),L=a(E[g],"minFilter",0),F=a(E[g],"autoClear",1),O=a(E[g],"autoResize",!1),b=a(E[g],"width",null),I=a(E[g],"height",b);b?M.push(new c(P,b,I,1,L,F,O)):M.push(new c(P,w,R,A,L,F,O))}M.length&&(this.currentRenderTarget=M[0]),this.setShadersFromConfig(C);var B=this.shaders,N=0;for(g=0;g<B.length;g++)B[g].vertexSize>N&&(N=B[g].vertexSize);var k=a(C,"batchSize",P.config.batchSize);this.vertexCapacity=k*6;var Y=new ArrayBuffer(this.vertexCapacity*N);this.vertexData=Y,this.bytes=new Uint8Array(Y),this.vertexViewF32=new Float32Array(Y),this.vertexViewU32=new Uint32Array(Y);var H=a(C,"vertices",null);for(H?(this.vertexViewF32.set(H),this.vertexBuffer=P.createVertexBuffer(Y,m.STATIC_DRAW)):this.vertexBuffer=P.createVertexBuffer(Y.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=B.length-1;g>=0;g--)B[g].rebind();this.hasBooted=!0,P.on(u.RESIZE,this.resize,this),P.on(u.PRE_RENDER,this.onPreRender,this),P.on(u.RENDER,this.onRender,this),P.on(u.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m,C){var P=this.renderer;if(g!==this.currentShader||P.currentProgram!==this.currentShader.program){this.flush();var M=this.setVertexBuffer(C);M&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,C=0;C<m.length;C++)if(m[C].name===g)return m[C]},setShadersFromConfig:function(g){var m,C=this.shaders,P=this.renderer;for(m=0;m<C.length;m++)C[m].destroy();var M="vertShader",E="fragShader",w="attributes",R=a(g,M,null),A=l.parseFragmentShaderMaxTextures(a(g,E,null),P.maxTextures),L=a(g,w,null),F=a(g,"shaders",[]),O=F.length;if(O===0)R&&A&&(this.shaders=[new v(this,"default",R,A,x(L))]);else{var b=[];for(m=0;m<O;m++){var I=F[m],B,N,k,Y;if(typeof I=="string"?(B="default",N=R,k=l.parseFragmentShaderMaxTextures(I,P.maxTextures),Y=L):(B=a(I,"name","default"),N=a(I,M,R),k=l.parseFragmentShaderMaxTextures(a(I,E,A),P.maxTextures),Y=a(I,w,L)),B==="default"){var H=k.split(`
`),z=H[0].trim();z.indexOf("#define SHADER_NAME")>-1&&(B=z.substring(20))}N&&k&&b.push(new v(this,B,N,k,x(Y)))}this.shaders=b}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(g){return this.currentBatch={start:this.vertexCount,count:0,texture:[g],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=g,this.batch.push(this.currentBatch),0},addTextureToBatch:function(g){var m=this.currentBatch;m&&(m.texture.push(g),m.unit++,m.maxUnit++)},pushBatch:function(g){if(!this.currentBatch||this.forceZero&&g!==this.currentTexture)return this.createBatch(g);if(g===this.currentTexture)return this.currentUnit;var m=this.currentBatch,C=m.texture.indexOf(g);return C===-1?m.texture.length===this.renderer.maxTextures?this.createBatch(g):(m.unit++,m.maxUnit++,m.texture.push(g),this.currentUnit=m.unit,this.currentTexture=g,m.unit):(this.currentUnit=C,this.currentTexture=g,C)},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.pushBatch(m.source.glTexture)},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var C=this.renderTargets,P=0;P<C.length;P++)C[P].resize(g,m);return this.setProjectionMatrix(g,m),this.resizeUniform&&this.set2f(this.resizeUniform,g,m),this.emit(o.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=g,this.projectionHeight=m,C.ortho(0,g,m,0,-1e3,1e3);for(var P=this.shaders,M="uProjectionMatrix",E=0;E<P.length;E++){var w=P[E];w.hasUniform(M)&&(w.resetUniform(M),w.setMatrix4fv(M,!1,C.val,w))}return this},flipProjectionMatrix:function(g){g===void 0&&(g=!0);var m=this.projectionMatrix;if(!m)return this;var C=this.projectionWidth,P=this.projectionHeight;g?m.ortho(0,C,0,P,-1e3,1e3):m.ortho(0,C,P,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,m.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,m=!0),g.bind(m),this.currentShader=g,this.activeTextures.length=0,this.emit(o.BIND,this,g),this.onActive(g),this},rebind:function(g){this.activeBuffer=null,this.setVertexBuffer();for(var m=this.shaders,C=m.length-1;C>=0;C--){var P=m[C].rebind();(!g||P===g)&&(this.currentShader=P)}return this.activeTextures.length=0,this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var g=this.shaders,m=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,m&&this.setVertexBuffer();for(var C=0;C<g.length;C++){var P=g[C];P.syncUniforms(),m&&P.rebind()}},setVertexBuffer:function(g){if(g===void 0&&(g=this.vertexBuffer),g!==this.activeBuffer){var m=this.gl;return this.gl.bindBuffer(m.ARRAY_BUFFER,g.webGLBuffer),this.activeBuffer=g,!0}return!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,C=this.vertexCount,P=this.currentShader.vertexSize,M=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,C*P));var E,w,R,A=this.batch,L=this.activeTextures;if(this.forceZero)for(L[0]||m.activeTexture(m.TEXTURE0),E=0;E<A.length;E++)w=A[E],R=w.texture[0],L[0]!==R&&(m.bindTexture(m.TEXTURE_2D,R.webGLTexture),L[0]=R),m.drawArrays(M,w.start,w.count);else for(E=0;E<A.length;E++){w=A[E];for(var F=0;F<=w.maxUnit;F++)R=w.texture[F],L[F]!==R&&(m.activeTexture(m.TEXTURE0+F),m.bindTexture(m.TEXTURE_2D,R.webGLTexture),L[F]=R);m.drawArrays(M,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(o.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,C,P,M,E,w){var R=this.vertexViewF32,A=this.vertexViewU32,L=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++L]=g,R[++L]=m,R[++L]=C,R[++L]=P,R[++L]=M,R[++L]=E,A[++L]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(g,m,C,P,M,E,w,R,A,L,F,O,b,I,B,N,k,Y,H,z){z===void 0&&(z=this.currentUnit);var X=!1;this.shouldFlush(6)&&(this.flush(),X=!0),this.currentBatch||(z=this.setTexture2D(H));var D=this.vertexViewF32,G=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return D[++V]=m,D[++V]=C,D[++V]=L,D[++V]=F,D[++V]=z,D[++V]=Y,G[++V]=I,D[++V]=P,D[++V]=M,D[++V]=L,D[++V]=b,D[++V]=z,D[++V]=Y,G[++V]=N,D[++V]=E,D[++V]=w,D[++V]=O,D[++V]=b,D[++V]=z,D[++V]=Y,G[++V]=k,D[++V]=m,D[++V]=C,D[++V]=L,D[++V]=F,D[++V]=z,D[++V]=Y,G[++V]=I,D[++V]=E,D[++V]=w,D[++V]=O,D[++V]=b,D[++V]=z,D[++V]=Y,G[++V]=k,D[++V]=R,D[++V]=A,D[++V]=O,D[++V]=F,D[++V]=z,D[++V]=Y,G[++V]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),X},batchTri:function(g,m,C,P,M,E,w,R,A,L,F,O,b,I,B,N,k){k===void 0&&(k=this.currentUnit);var Y=!1;this.shouldFlush(3)&&(this.flush(),Y=!0),this.currentBatch||(k=this.setTexture2D(N));var H=this.vertexViewF32,z=this.vertexViewU32,X=this.vertexCount*this.currentShader.vertexComponentCount-1;return H[++X]=m,H[++X]=C,H[++X]=R,H[++X]=A,H[++X]=k,H[++X]=B,z[++X]=O,H[++X]=P,H[++X]=M,H[++X]=R,H[++X]=F,H[++X]=k,H[++X]=B,z[++X]=b,H[++X]=E,H[++X]=w,H[++X]=L,H[++X]=F,H[++X]=k,H[++X]=B,z[++X]=I,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),Y},drawFillRect:function(g,m,C,P,M,E,w,R){w===void 0&&(w=this.renderer.whiteTexture),R===void 0&&(R=!0),g=Math.floor(g),m=Math.floor(m);var A=Math.floor(g+C),L=Math.floor(m+P),F=this.setTexture2D(w),O=l.getTintAppendFloatAlphaAndSwap(M,E),b=0,I=0,B=1,N=1;R&&(I=1,N=0),this.batchQuad(null,g,m,g,L,A,L,A,m,b,I,B,N,O,O,O,O,0,w,F)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture),this.pushBatch(g)},bindTexture:function(g,m){m===void 0&&(m=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+m),C.bindTexture(C.TEXTURE_2D,g.webGLTexture),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g,m){return this.set1f(g,this.game.loop.getDuration(),m),this},setBoolean:function(g,m,C){return C===void 0&&(C=this.currentShader),C.setBoolean(g,m),this},set1f:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set1f(g,m),this},set2f:function(g,m,C,P){return P===void 0&&(P=this.currentShader),P.set2f(g,m,C),this},set3f:function(g,m,C,P,M){return M===void 0&&(M=this.currentShader),M.set3f(g,m,C,P),this},set4f:function(g,m,C,P,M,E){return E===void 0&&(E=this.currentShader),E.set4f(g,m,C,P,M),this},set1fv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set1fv(g,m),this},set2fv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set2fv(g,m),this},set3fv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set3fv(g,m),this},set4fv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set4fv(g,m),this},set1iv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set1iv(g,m),this},set2iv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set2iv(g,m),this},set3iv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set3iv(g,m),this},set4iv:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set4iv(g,m),this},set1i:function(g,m,C){return C===void 0&&(C=this.currentShader),C.set1i(g,m),this},set2i:function(g,m,C,P){return P===void 0&&(P=this.currentShader),P.set2i(g,m,C),this},set3i:function(g,m,C,P,M){return M===void 0&&(M=this.currentShader),M.set3i(g,m,C,P),this},set4i:function(g,m,C,P,M,E){return E===void 0&&(E=this.currentShader),E.set4i(g,m,C,P,M),this},setMatrix2fv:function(g,m,C,P){return P===void 0&&(P=this.currentShader),P.setMatrix2fv(g,m,C),this},setMatrix3fv:function(g,m,C,P){return P===void 0&&(P=this.currentShader),P.setMatrix3fv(g,m,C),this},setMatrix4fv:function(g,m,C,P){return P===void 0&&(P=this.currentShader),P.setMatrix4fv(g,m,C),this},destroy:function(){this.emit(o.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var C=this.renderTargets;for(g=0;g<C.length;g++)C[g].destroy();var P=this.renderer;return P.deleteBuffer(this.vertexBuffer),P.off(u.RESIZE,this.resize,this),P.off(u.PRE_RENDER,this.onPreRender,this),P.off(u.RENDER,this.onRender,this),P.off(u.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});r.exports=p},74797:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95428),x=i(72905),f=i(19715),o=i(83419),a=i(8054),n=i(50792),u=i(92503),c=i(50030),l=i(37867),v=i(29747),p=i(7530),g=i(32302),m=i(97480),C=i(69442),P=i(70554),M=i(88815),E=i(26128),w=i(1482),R=i(82751),A=i(84387),L=i(93567),F=i(57183),O=new o({Extends:n,initialize:function(I){n.call(this);var B=I.config,N={alpha:B.transparent,desynchronized:B.desynchronized,depth:!0,antialias:B.antialiasGL,premultipliedAlpha:B.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:B.failIfMajorPerformanceCaveat,powerPreference:B.powerPreference,preserveDrawingBuffer:B.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:B.clearBeforeRender,antialias:B.antialias,backgroundColor:B.backgroundColor,contextCreation:N,roundPixels:B.roundPixels,maxTextures:B.maxTextures,maxTextureSize:B.maxTextureSize,batchSize:B.batchSize,maxLights:B.maxLights,mipmapFilter:B.mipmapFilter},this.game=I,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=I.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(b){var I,B=this.game,N=this.canvas,k=b.backgroundColor;if(B.config.context?I=B.config.context:I=N.getContext("webgl",b.contextCreation)||N.getContext("experimental-webgl",b.contextCreation),!I||I.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=I;var Y=this,H=function(){var D=I.getSupportedExtensions();Y.supportedExtensions=D;var G="ANGLE_instanced_arrays";Y.instancedArraysExtension=D.indexOf(G)>-1?I.getExtension(G):null;var V="OES_vertex_array_object";Y.vaoExtension=D.indexOf(V)>-1?I.getExtension(V):null};H(),this.contextLostHandler=function(D){Y.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),Y.emit(u.LOSE_WEBGL,Y),D.preventDefault()},N.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.contextRestoredHandler=function(D){if(I.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}Y.currentProgram=null,Y.currentFramebuffer=null,Y.setBlendMode(a.BlendModes.NORMAL),I.disable(I.BLEND),I.disable(I.DEPTH_TEST),I.enable(I.CULL_FACE),Y.compression=Y.getCompressedTextures();var G=function(V){V.createResource()};d(Y.glTextureWrappers,G),d(Y.glBufferWrappers,G),d(Y.glFramebufferWrappers,G),d(Y.glProgramWrappers,G),d(Y.glAttribLocationWrappers,G),d(Y.glUniformLocationWrappers,G),Y.createTemporaryTextures(),Y.pipelines.restoreContext(),Y.resize(Y.game.scale.baseSize.width,Y.game.scale.baseSize.height),H(),Y.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),Y.emit(u.RESTORE_WEBGL,Y),D.preventDefault()},N.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),B.context=I;for(var z=0;z<=27;z++)this.blendModes.push({func:[I.ONE,I.ONE_MINUS_SRC_ALPHA],equation:I.FUNC_ADD});this.blendModes[1].func=[I.ONE,I.DST_ALPHA],this.blendModes[2].func=[I.DST_COLOR,I.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[I.ONE,I.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[I.ZERO,I.ONE_MINUS_SRC_ALPHA],equation:I.FUNC_REVERSE_SUBTRACT},this.glFormats=[I.BYTE,I.SHORT,I.UNSIGNED_BYTE,I.UNSIGNED_SHORT,I.FLOAT],this.glFuncMap={mat2:{func:I.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:I.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:I.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:I.uniform1f,length:1},"1fv":{func:I.uniform1fv,length:1},"1i":{func:I.uniform1i,length:1},"1iv":{func:I.uniform1iv,length:1},"2f":{func:I.uniform2f,length:2},"2fv":{func:I.uniform2fv,length:1},"2i":{func:I.uniform2i,length:2},"2iv":{func:I.uniform2iv,length:1},"3f":{func:I.uniform3f,length:3},"3fv":{func:I.uniform3fv,length:1},"3i":{func:I.uniform3i,length:3},"3iv":{func:I.uniform3iv,length:1},"4f":{func:I.uniform4f,length:4},"4fv":{func:I.uniform4fv,length:1},"4i":{func:I.uniform4i,length:4},"4iv":{func:I.uniform4iv,length:1}},(!b.maxTextures||b.maxTextures===-1)&&(b.maxTextures=I.getParameter(I.MAX_TEXTURE_IMAGE_UNITS)),b.maxTextureSize||(b.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),I.disable(I.DEPTH_TEST),I.disable(I.CULL_FACE),I.enable(I.BLEND),I.clearColor(k.redGL,k.greenGL,k.blueGL,k.alphaGL);var X=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return X.indexOf(b.mipmapFilter)!==-1&&(this.mipmapFilter=I[b.mipmapFilter]),this.maxTextures=P.checkShaderMax(I,b.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new p(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),B.textures.once(C.READY,this.boot,this),this},boot:function(){var b=this.game,I=this.pipelines,B=b.scale.baseSize,N=B.width,k=B.height;this.width=N,this.height=k,this.isBooted=!0,this.renderTarget=new g(this,N,k,1,0,!0,!0),this.maskTarget=new g(this,N,k,1,0,!0,!0),this.maskSource=new g(this,N,k,1,0,!0,!0);var Y=b.config;I.boot(Y.pipeline,Y.defaultPipeline,Y.autoMobilePipeline),this.blankTexture=b.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=b.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=b.textures.getFrame("__WHITE").glTexture;var H=this.gl;H.bindFramebuffer(H.FRAMEBUFFER,null),H.enable(H.SCISSOR_TEST),b.scale.on(m.RESIZE,this.onResize,this),this.resize(N,k)},createTemporaryTextures:function(){for(var b=this.gl,I=0;I<this.maxTextures;I++){var B=b.createTexture();b.activeTexture(b.TEXTURE0+I),b.bindTexture(b.TEXTURE_2D,B),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(I)}},captureFrame:function(b,I){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(b,I,B){},stopCapture:function(){},onCapture:function(b){},onResize:function(b,I){(I.width!==this.width||I.height!==this.height)&&this.resize(I.width,I.height)},beginCapture:function(b,I){b===void 0&&(b=this.width),I===void 0&&(I=this.height),this.renderTarget.bind(!0,b,I),this.setProjectionMatrix(b,I)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(b,I){var B=this.gl;return this.width=b,this.height=I,this.setProjectionMatrix(b,I),B.viewport(0,0,b,I),this.drawingBufferHeight=B.drawingBufferHeight,B.scissor(0,B.drawingBufferHeight-I,b,I),this.defaultScissor[2]=b,this.defaultScissor[3]=I,this.emit(u.RESIZE,b,I),this},getCompressedTextures:function(){var b="WEBGL_compressed_texture_",I="WEBKIT_"+b,B="EXT_texture_compression_",N=function(Y,H){var z=Y.getExtension(b+H)||Y.getExtension(I+H)||Y.getExtension(B+H);if(z){var X={};for(var D in z)X[z[D]]=D;return X}},k=this.gl;return{ETC:N(k,"etc"),ETC1:N(k,"etc1"),ATC:N(k,"atc"),ASTC:N(k,"astc"),BPTC:N(k,"bptc"),RGTC:N(k,"rgtc"),PVRTC:N(k,"pvrtc"),S3TC:N(k,"s3tc"),S3TCSRGB:N(k,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(b,I){var B=this.compression[b.toUpperCase()];if(I in B)return B[I]},supportsCompressedTexture:function(b,I){var B=this.compression[b.toUpperCase()];return B?I?I in B:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(b,I){return(b!==this.projectionWidth||I!==this.projectionHeight)&&(this.projectionWidth=b,this.projectionHeight=I,this.projectionMatrix.ortho(0,b,I,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(b){return this.supportedExtensions?this.supportedExtensions.indexOf(b):!1},getExtension:function(b){return this.hasExtension(b)?(b in this.extensions||(this.extensions[b]=this.gl.getExtension(b)),this.extensions[b]):null},flush:function(){this.pipelines.flush()},pushScissor:function(b,I,B,N,k){k===void 0&&(k=this.drawingBufferHeight);var Y=this.scissorStack,H=[b,I,B,N];return Y.push(H),this.setScissor(b,I,B,N,k),this.currentScissor=H,H},setScissor:function(b,I,B,N,k){k===void 0&&(k=this.drawingBufferHeight);var Y=this.gl,H=this.currentScissor,z=B>0&&N>0;if(H&&z){var X=H[0],D=H[1],G=H[2],V=H[3];z=X!==b||D!==I||G!==B||V!==N}z&&(this.flush(),Y.scissor(b,k-I-N,B,N))},resetScissor:function(){var b=this.gl;b.enable(b.SCISSOR_TEST);var I=this.currentScissor;if(I){var B=I[0],N=I[1],k=I[2],Y=I[3];k>0&&Y>0&&b.scissor(B,this.drawingBufferHeight-N-Y,k,Y)}},popScissor:function(){var b=this.scissorStack;b.pop();var I=b[b.length-1];I&&this.setScissor(I[0],I[1],I[2],I[3]),this.currentScissor=I},hasActiveStencilMask:function(){var b=this.currentMask.mask,I=this.currentCameraMask.mask;return b&&b.isStencil||I&&I.isStencil},resetViewport:function(){var b=this.gl;b.viewport(0,0,this.width,this.height),this.drawingBufferHeight=b.drawingBufferHeight},setBlendMode:function(b,I){I===void 0&&(I=!1);var B=this.gl,N=this.blendModes[b];return I||b!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==b?(this.flush(),B.enable(B.BLEND),B.blendEquation(N.equation),N.func.length>2?B.blendFuncSeparate(N.func[0],N.func[1],N.func[2],N.func[3]):B.blendFunc(N.func[0],N.func[1]),this.currentBlendMode=b,!0):!1},addBlendMode:function(b,I){var B=this.blendModes.push({func:b,equation:I});return B-1},updateBlendMode:function(b,I,B){return this.blendModes[b]&&(this.blendModes[b].func=I,B&&(this.blendModes[b].equation=B)),this},removeBlendMode:function(b){return b>17&&this.blendModes[b]&&this.blendModes.splice(b,1),this},pushFramebuffer:function(b,I,B,N,k){return b===this.currentFramebuffer?this:(this.fboStack.push(b),this.setFramebuffer(b,I,B,N,k))},setFramebuffer:function(b,I,B,N,k){if(I===void 0&&(I=!1),B===void 0&&(B=!0),N===void 0&&(N=null),k===void 0&&(k=!1),b===this.currentFramebuffer)return this;var Y=this.gl,H=this.width,z=this.height;return b&&b.renderTexture&&B?(H=b.renderTexture.width,z=b.renderTexture.height):this.flush(),b?Y.bindFramebuffer(Y.FRAMEBUFFER,b.webGLFramebuffer):Y.bindFramebuffer(Y.FRAMEBUFFER,null),B&&Y.viewport(0,0,H,z),N&&Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,N.webGLTexture,0),k&&(Y.clearColor(0,0,0,0),Y.clear(Y.COLOR_BUFFER_BIT)),I&&(b?(this.drawingBufferHeight=z,this.pushScissor(0,0,H,z)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=b,this},popFramebuffer:function(b,I){b===void 0&&(b=!1),I===void 0&&(I=!0);var B=this.fboStack;B.pop();var N=B[B.length-1];return N||(N=null),this.setFramebuffer(N,b,I),N},restoreFramebuffer:function(b,I){b===void 0&&(b=!1),I===void 0&&(I=!0);var B=this.fboStack,N=B[B.length-1];N||(N=null),this.currentFramebuffer=null,this.setFramebuffer(N,b,I)},setProgram:function(b){return b!==this.currentProgram?(this.flush(),this.gl.useProgram(b.webGLProgram),this.currentProgram=b,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(b,I,B,N,k){k===void 0&&(k=!1);var Y=this.gl,H=Y.NEAREST,z=Y.NEAREST,X=Y.CLAMP_TO_EDGE,D=null;I=b?b.width:I,B=b?b.height:B;var G=c(I,B);if(G&&!k&&(X=Y.REPEAT),N===a.ScaleModes.LINEAR&&this.config.antialias){var V=b&&b.compressed,W=!V&&G||V&&b.mipmaps.length>1;H=this.mipmapFilter&&W?this.mipmapFilter:Y.LINEAR,z=Y.LINEAR}return!b&&typeof I=="number"&&typeof B=="number"?D=this.createTexture2D(0,H,z,X,X,Y.RGBA,null,I,B):D=this.createTexture2D(0,H,z,X,X,Y.RGBA,b),D},createTexture2D:function(b,I,B,N,k,Y,H,z,X,D,G,V){typeof z!="number"&&(z=H?H.width:1),typeof X!="number"&&(X=H?H.height:1);var W=new R(this.gl,b,I,B,N,k,Y,H,z,X,D,G,V);return this.glTextureWrappers.push(W),W},createFramebuffer:function(b,I,B,N){this.currentFramebuffer=null;var k=new A(this.gl,b,I,B,N);return this.glFramebufferWrappers.push(k),k},beginBitmapMask:function(b,I){var B=this.gl;B&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==b&&(this.currentMask.mask=b,this.currentMask.camera=I))},drawBitmapMask:function(b,I,B){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),b.renderWebGL(this,b,I),this.maskSource.unbind(!0),this.maskTarget.unbind();var N=this.gl,k=this.getCurrentStencilMask();k?(N.enable(N.STENCIL_TEST),k.mask.applyStencil(this,k.camera,!0)):this.currentMask.mask=null,this.pipelines.set(B),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,this.maskTarget.texture.webGLTexture),N.activeTexture(N.TEXTURE1),N.bindTexture(N.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(b,I){var B=new w(this.gl,b,I);return this.glProgramWrappers.push(B),B},createVertexBuffer:function(b,I){var B=this.gl,N=new E(B,b,B.ARRAY_BUFFER,I);return this.glBufferWrappers.push(N),N},createAttribLocation:function(b,I){var B=new L(this.gl,b,I);return this.glAttribLocationWrappers.push(B),B},createUniformLocation:function(b,I){var B=new F(this.gl,b,I);return this.glUniformLocationWrappers.push(B),B},createIndexBuffer:function(b,I){var B=this.gl,N=new E(B,b,B.ELEMENT_ARRAY_BUFFER,I);return this.glBufferWrappers.push(N),N},deleteTexture:function(b){if(!!b)return x(this.glTextureWrappers,b),b.destroy(),this},deleteFramebuffer:function(b){return b?(x(this.fboStack,b),x(this.glFramebufferWrappers,b),b.destroy(),this):this},deleteProgram:function(b){return b&&(x(this.glProgramWrappers,b),b.destroy()),this},deleteAttribLocation:function(b){return b&&(x(this.glAttribLocationWrappers,b),b.destroy()),this},deleteUniformLocation:function(b){return b&&(x(this.glUniformLocationWrappers,b),b.destroy()),this},deleteBuffer:function(b){return b?(x(this.glBufferWrappers,b),b.destroy(),this):this},preRenderCamera:function(b){var I=b.x,B=b.y,N=b.width,k=b.height,Y=b.backgroundColor;if(b.emit(f.PRE_RENDER,b),this.pipelines.preBatchCamera(b),this.pushScissor(I,B,N,k),b.mask&&(this.currentCameraMask.mask=b.mask,this.currentCameraMask.camera=b._maskCamera,b.mask.preRenderWebGL(this,b,b._maskCamera)),Y.alphaGL>0){var H=this.pipelines.setMulti();H.drawFillRect(I,B,N,k,P.getTintFromFloats(Y.blueGL,Y.greenGL,Y.redGL,1),Y.alphaGL)}},getCurrentStencilMask:function(){var b=null,I=this.maskStack,B=this.currentCameraMask;return I.length>0?b=I[I.length-1]:B.mask&&B.mask.isStencil&&(b=B),b},postRenderCamera:function(b){var I=b.flashEffect,B=b.fadeEffect;if(I.isRunning||B.isRunning||B.isComplete){var N=this.pipelines.setMulti();I.postRenderWebGL(N,P.getTintFromFloats),B.postRenderWebGL(N,P.getTintFromFloats)}b.dirty=!1,this.popScissor(),b.mask&&(this.currentCameraMask.mask=null,b.mask.postRenderWebGL(this,b._maskCamera)),this.pipelines.postBatchCamera(b),b.emit(f.POST_RENDER,b)},preRender:function(){if(!this.contextLost){var b=this.gl;if(b.bindFramebuffer(b.FRAMEBUFFER,null),this.config.clearBeforeRender){var I=this.config.backgroundColor;b.clearColor(I.redGL,I.greenGL,I.blueGL,I.alphaGL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT)}b.enable(b.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&b.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(u.PRE_RENDER)}},render:function(b,I,B){if(!this.contextLost){var N=I.length;if(this.emit(u.RENDER,b,B),this.preRenderCamera(B),N===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(B);return}this.currentType="";for(var k=this.currentMask,Y=0;Y<N;Y++){this.finalType=Y===N-1;var H=I[Y],z=H.mask;k=this.currentMask,k.mask&&k.mask!==z&&k.mask.postRenderWebGL(this,k.camera),z&&k.mask!==z&&z.preRenderWebGL(this,H,B),H.blendMode!==this.currentBlendMode&&this.setBlendMode(H.blendMode);var X=H.type;X!==this.currentType&&(this.newType=!0,this.currentType=X),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=I[Y+1].type===this.currentType,H.renderWebGL(this,H,B),this.newType=!1}k=this.currentMask,k.mask&&k.mask.postRenderWebGL(this,k.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(B)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(u.POST_RENDER);var b=this.snapshotState;b.callback&&(M(this.gl,b),b.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var b=this.gl,I=this.getCurrentStencilMask();if(I){var B=I.mask;b.enable(b.STENCIL_TEST),B.invertAlpha?b.stencilFunc(b.NOTEQUAL,B.level,255):b.stencilFunc(b.EQUAL,B.level,255)}},snapshot:function(b,I,B){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,b,I,B)},snapshotArea:function(b,I,B,N,k,Y,H){var z=this.snapshotState;return z.callback=k,z.type=Y,z.encoder=H,z.getPixel=!1,z.x=b,z.y=I,z.width=B,z.height=N,this},snapshotPixel:function(b,I,B){return this.snapshotArea(b,I,1,1,B),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(b,I,B,N,k,Y,H,z,X,D,G){k===void 0&&(k=!1),Y===void 0&&(Y=0),H===void 0&&(H=0),z===void 0&&(z=I),X===void 0&&(X=B),D==="pixel"&&(k=!0,D="image/png");var V=this.currentFramebuffer;this.snapshotArea(Y,H,z,X,N,D,G);var W=this.snapshotState;return W.getPixel=k,W.isFramebuffer=!0,W.bufferWidth=I,W.bufferHeight=B,W.width=Math.min(W.width,I),W.height=Math.min(W.height,B),this.setFramebuffer(b),M(this.gl,W),this.setFramebuffer(V),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(b,I,B,N){B===void 0&&(B=!1),N===void 0&&(N=!1);var k=this.gl,Y=k.NEAREST,H=k.NEAREST,z=b.width,X=b.height,D=k.CLAMP_TO_EDGE,G=c(z,X);return!B&&G&&(D=k.REPEAT),this.config.antialias&&(Y=G&&this.mipmapFilter?this.mipmapFilter:k.LINEAR,H=k.LINEAR),I?(I.update(b,z,X,N,D,D,Y,H,I.format),I):this.createTexture2D(0,Y,H,D,D,k.RGBA,b,z,X,!0,!1,N)},createCanvasTexture:function(b,I,B){return I===void 0&&(I=!1),B===void 0&&(B=!1),this.canvasToTexture(b,null,I,B)},updateCanvasTexture:function(b,I,B,N){return B===void 0&&(B=!1),N===void 0&&(N=!1),this.canvasToTexture(b,I,N,B)},videoToTexture:function(b,I,B,N){B===void 0&&(B=!1),N===void 0&&(N=!1);var k=this.gl,Y=k.NEAREST,H=k.NEAREST,z=b.videoWidth,X=b.videoHeight,D=k.CLAMP_TO_EDGE,G=c(z,X);return!B&&G&&(D=k.REPEAT),this.config.antialias&&(Y=G&&this.mipmapFilter?this.mipmapFilter:k.LINEAR,H=k.LINEAR),I?(I.update(b,z,X,N,D,D,Y,H,I.format),I):this.createTexture2D(0,Y,H,D,D,k.RGBA,b,z,X,!0,!0,N)},createVideoTexture:function(b,I,B){return I===void 0&&(I=!1),B===void 0&&(B=!1),this.videoToTexture(b,null,I,B)},updateVideoTexture:function(b,I,B,N){return B===void 0&&(B=!1),N===void 0&&(N=!1),this.videoToTexture(b,I,N,B)},createUint8ArrayTexture:function(b,I,B){var N=this.gl,k=N.NEAREST,Y=N.NEAREST,H=N.CLAMP_TO_EDGE,z=c(I,B);return z&&(H=N.REPEAT),this.createTexture2D(0,k,Y,H,H,N.RGBA,b,I,B)},setTextureFilter:function(b,I){var B=this.gl,N=I===0?B.LINEAR:B.NEAREST;B.activeTexture(B.TEXTURE0);var k=B.getParameter(B.TEXTURE_BINDING_2D);return B.bindTexture(B.TEXTURE_2D,b.webGLTexture),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,N),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,N),b.minFilter=N,b.magFilter=N,k&&B.bindTexture(B.TEXTURE_2D,k),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var b=function(I){I.destroy()};d(this.glAttribLocationWrappers,b),d(this.glBufferWrappers,b),d(this.glFramebufferWrappers,b),d(this.glProgramWrappers,b),d(this.glTextureWrappers,b),d(this.glUniformLocationWrappers,b),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});r.exports=O},38683:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95428),f=i(95540),o=i(14500),a=new d({initialize:function(u,c,l,v,p){this.pipeline=u,this.name=c,this.renderer=u.renderer,this.gl=this.renderer.gl,this.fragSrc=v,this.vertSrc=l,this.program=this.renderer.createProgram(l,v),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(n){var u=0,c=0,l=[];this.vertexComponentCount=0;for(var v=0;v<n.length;v++){var p=n[v],g=p.name,m=f(p,"size",1),C=f(p,"type",o.FLOAT),P=C.enum,M=C.size,E=!!p.normalized;l.push({name:g,size:m,type:P,normalized:E,offset:c,enabled:!1,location:-1}),M===4?u+=m:u++,c+=m*M}this.vertexSize=c,this.vertexComponentCount=u,this.attributes=l},bind:function(n,u){return n===void 0&&(n=!1),u===void 0&&(u=!1),u&&this.pipeline.flush(),this.renderer.setProgram(this.program),n&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(n){n===void 0&&(n=!1);for(var u=this.gl,c=this.renderer,l=this.vertexSize,v=this.attributes,p=this.program,g=0;g<v.length;g++){var m=v[g],C=m.size,P=m.type,M=m.offset,E=m.enabled,w=m.location,R=!!m.normalized;if(n){w!==-1&&c.deleteAttribLocation(w);var A=this.renderer.createAttribLocation(p,m.name);A.webGLAttribLocation>=0?(u.enableVertexAttribArray(A.webGLAttribLocation),u.vertexAttribPointer(A.webGLAttribLocation,C,P,R,l,M),m.enabled=!0,m.location=A):A.webGLAttribLocation!==-1&&u.disableVertexAttribArray(A.webGLAttribLocation)}else E?u.vertexAttribPointer(w.webGLAttribLocation,C,P,R,l,M):!E&&w!==-1&&w.webGLAttribLocation>-1&&(u.disableVertexAttribArray(w.webGLAttribLocation),m.location=-1)}return this},createUniforms:function(){var n=this.gl,u=this.program,c=this.uniforms,l,v,p,g=n.getProgramParameter(u.webGLProgram,n.ACTIVE_UNIFORMS);for(l=0;l<g;l++){var m=n.getActiveUniform(u.webGLProgram,l);if(m){v=m.name,p=this.renderer.createUniformLocation(u,v),p!==null&&(c[v]={name:v,location:p,setter:null,value1:null,value2:null,value3:null,value4:null});var C=v.indexOf("[");C>0&&(v=v.substr(0,C),c.hasOwnProperty(v)||(p=this.renderer.createUniformLocation(u,v),p!==null&&(c[v]={name:v,location:p,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var n=this.gl;this.renderer.setProgram(this.program);for(var u in this.uniforms){var c=this.uniforms[u];c.setter&&c.setter.call(n,c.location.webGLUniformLocation,c.value1,c.value2,c.value3,c.value4)}},hasUniform:function(n){return this.uniforms.hasOwnProperty(n)},resetUniform:function(n){var u=this.uniforms[n];return u&&(u.value1=null,u.value2=null,u.value3=null,u.value4=null),this},setUniform1:function(n,u,c,l){var v=this.uniforms[u];return v?((l||v.value1!==c)&&(v.setter||(v.setter=n),v.value1=c,this.renderer.setProgram(this.program),n.call(this.gl,v.location.webGLUniformLocation,c),this.pipeline.currentShader=this),this):this},setUniform2:function(n,u,c,l,v){var p=this.uniforms[u];return p?((v||p.value1!==c||p.value2!==l)&&(p.setter||(p.setter=n),p.value1=c,p.value2=l,this.renderer.setProgram(this.program),n.call(this.gl,p.location.webGLUniformLocation,c,l),this.pipeline.currentShader=this),this):this},setUniform3:function(n,u,c,l,v,p){var g=this.uniforms[u];return g?((p||g.value1!==c||g.value2!==l||g.value3!==v)&&(g.setter||(g.setter=n),g.value1=c,g.value2=l,g.value3=v,this.renderer.setProgram(this.program),n.call(this.gl,g.location.webGLUniformLocation,c,l,v),this.pipeline.currentShader=this),this):this},setUniform4:function(n,u,c,l,v,p,g){var m=this.uniforms[u];return m?((g||m.value1!==c||m.value2!==l||m.value3!==v||m.value4!==p)&&(m.setter||(m.setter=n),m.value1=c,m.value2=l,m.value3=v,m.value4=p,this.renderer.setProgram(this.program),n.call(this.gl,m.location.webGLUniformLocation,c,l,v,p),this.pipeline.currentShader=this),this):this},setBoolean:function(n,u){return this.setUniform1(this.gl.uniform1i,n,Number(u))},set1f:function(n,u){return this.setUniform1(this.gl.uniform1f,n,u)},set2f:function(n,u,c){return this.setUniform2(this.gl.uniform2f,n,u,c)},set3f:function(n,u,c,l){return this.setUniform3(this.gl.uniform3f,n,u,c,l)},set4f:function(n,u,c,l,v){return this.setUniform4(this.gl.uniform4f,n,u,c,l,v)},set1fv:function(n,u){return this.setUniform1(this.gl.uniform1fv,n,u,!0)},set2fv:function(n,u){return this.setUniform1(this.gl.uniform2fv,n,u,!0)},set3fv:function(n,u){return this.setUniform1(this.gl.uniform3fv,n,u,!0)},set4fv:function(n,u){return this.setUniform1(this.gl.uniform4fv,n,u,!0)},set1iv:function(n,u){return this.setUniform1(this.gl.uniform1iv,n,u,!0)},set2iv:function(n,u){return this.setUniform1(this.gl.uniform2iv,n,u,!0)},set3iv:function(n,u){return this.setUniform1(this.gl.uniform3iv,n,u,!0)},set4iv:function(n,u){return this.setUniform1(this.gl.uniform4iv,n,u,!0)},set1i:function(n,u){return this.setUniform1(this.gl.uniform1i,n,u)},set2i:function(n,u,c){return this.setUniform2(this.gl.uniform2i,n,u,c)},set3i:function(n,u,c,l){return this.setUniform3(this.gl.uniform3i,n,u,c,l)},set4i:function(n,u,c,l,v){return this.setUniform4(this.gl.uniform4i,n,u,c,l,v)},setMatrix2fv:function(n,u,c){return this.setUniform2(this.gl.uniformMatrix2fv,n,u,c,!0)},setMatrix3fv:function(n,u,c){return this.setUniform2(this.gl.uniformMatrix3fv,n,u,c,!0)},setMatrix4fv:function(n,u,c){return this.setUniform2(this.gl.uniformMatrix4fv,n,u,c,!0)},createProgram:function(n,u){return n===void 0&&(n=this.vertSrc),u===void 0&&(u=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=n,this.fragSrc=u,this.program=this.renderer.createProgram(n,u),this.createUniforms(),this.rebind()},destroy:function(){var n=this.renderer;x(this.uniforms,function(u){n.deleteUniformLocation(u.location)}),this.uniforms=null,x(this.attributes,function(u){n.deleteAttribLocation(u.location)}),this.attributes=null,n.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});r.exports=a},14500:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};r.exports=T},4159:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14500),x=i(79291),f={PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)};f=x(!1,f,d),r.exports=f},31302:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(78908),o=i(85191),a=i(14500),n=i(29100),u=new d({Extends:n,initialize:function(l){l.fragShader=x(l,"fragShader",f),l.vertShader=x(l,"vertShader",o),l.batchSize=x(l,"batchSize",1),l.vertices=x(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=x(l,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),n.call(this,l)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,l){n.prototype.resize.call(this,c,l),this.set2f("uResolution",c,l)},beginMask:function(c,l,v){this.renderer.beginBitmapMask(c,v)},endMask:function(c,l,v){var p=this.gl,g=this.renderer,m=c.bitmapMask;m&&p&&(g.drawBitmapMask(m,l,this),v&&this.set2f("uResolution",v.width,v.height),this.set1i("uInvertMaskAlpha",c.invertAlpha),p.drawArrays(this.topology,0,3),v&&this.set2f("uResolution",this.width,this.height),p.bindTexture(p.TEXTURE_2D,null))}});r.exports=u},92651:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(58918),f=i(14811),o=i(95540),a=i(43558),n=i(89350),u=i(70554),c=new d({Extends:a,initialize:function(v){v.shaders=[u.setGlowQuality(n.FXGlowFrag,v.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],a.call(this,v);var p=this.game;this.glow=new x.Glow(p),this.shadow=new x.Shadow(p),this.pixelate=new x.Pixelate(p),this.vignette=new x.Vignette(p),this.shine=new x.Shine(p),this.gradient=new x.Gradient(p),this.circle=new x.Circle(p),this.barrel=new x.Barrel(p),this.wipe=new x.Wipe(p),this.bokeh=new x.Bokeh(p);var g=[];g[f.GLOW]=this.onGlow,g[f.SHADOW]=this.onShadow,g[f.PIXELATE]=this.onPixelate,g[f.VIGNETTE]=this.onVignette,g[f.SHINE]=this.onShine,g[f.BLUR]=this.onBlur,g[f.GRADIENT]=this.onGradient,g[f.BLOOM]=this.onBloom,g[f.COLOR_MATRIX]=this.onColorMatrix,g[f.CIRCLE]=this.onCircle,g[f.BARREL]=this.onBarrel,g[f.DISPLACEMENT]=this.onDisplacement,g[f.WIPE]=this.onWipe,g[f.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(l,v,p){this.source=l,this.target=v,this.swap=p;var g=l.width,m=l.height,C=this.tempSprite,P=this.fxHandlers;if(C&&C.preFX)for(var M=C.preFX.list,E=0;E<M.length;E++){var w=M[E];w.active&&P[w.type].call(this,w,g,m)}this.drawToGame(this.source)},runDraw:function(){var l=this.source,v=this.target;this.copy(l,v),this.source=v,this.target=l},onGlow:function(l,v,p){var g=this.shaders[f.GLOW];this.setShader(g),this.glow.onPreRender(l,g,v,p),this.runDraw()},onShadow:function(l){var v=this.shaders[f.SHADOW];this.setShader(v),this.shadow.onPreRender(l,v),this.runDraw()},onPixelate:function(l,v,p){var g=this.shaders[f.PIXELATE];this.setShader(g),this.pixelate.onPreRender(l,g,v,p),this.runDraw()},onVignette:function(l){var v=this.shaders[f.VIGNETTE];this.setShader(v),this.vignette.onPreRender(l,v),this.runDraw()},onShine:function(l,v,p){var g=this.shaders[f.SHINE];this.setShader(g),this.shine.onPreRender(l,g,v,p),this.runDraw()},onBlur:function(l,v,p){var g=o(l,"quality"),m=this.shaders[f.BLUR+g];this.setShader(m),this.set1i("uMainSampler",0),this.set2f("resolution",v,p),this.set1f("strength",o(l,"strength")),this.set3fv("color",o(l,"glcolor"));for(var C=o(l,"x"),P=o(l,"y"),M=o(l,"steps"),E=0;E<M;E++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,P),this.runDraw()},onGradient:function(l){var v=this.shaders[f.GRADIENT];this.setShader(v),this.gradient.onPreRender(l,v),this.runDraw()},onBloom:function(l,v,p){var g=this.shaders[f.BLOOM];this.copySprite(this.source,this.swap),this.setShader(g),this.set1i("uMainSampler",0),this.set1f("strength",o(l,"blurStrength")),this.set3fv("color",o(l,"glcolor"));for(var m=2/v*o(l,"offsetX"),C=2/p*o(l,"offsetY"),P=o(l,"steps"),M=0;M<P;M++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,o(l,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(l){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",l.getData()),this.set1f("uAlpha",l.alpha),this.runDraw()},onCircle:function(l,v,p){var g=this.shaders[f.CIRCLE];this.setShader(g),this.circle.onPreRender(l,g,v,p),this.runDraw()},onBarrel:function(l){var v=this.shaders[f.BARREL];this.setShader(v),this.barrel.onPreRender(l,v),this.runDraw()},onDisplacement:function(l){this.setShader(this.shaders[f.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.runDraw()},onWipe:function(l){var v=this.shaders[f.WIPE];this.setShader(v),this.wipe.onPreRender(l,v),this.runDraw()},onBokeh:function(l,v,p){var g=this.shaders[f.BOKEH];this.setShader(g),this.bokeh.onPreRender(l,g,v,p),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,a.prototype.destroy.call(this),this}});r.exports=c},96569:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(31063),o=i(57516),a=i(61340),n=i(26099),u=i(29100),c=new d({Extends:o,initialize:function(v){var p=x(v,"fragShader",f);v.fragShader=p.replace("%LIGHT_COUNT%",v.game.renderer.config.maxLights),o.call(this,v),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new a,this._tempMatrix2=new a},boot:function(){u.prototype.boot.call(this)},onRender:function(l,v){var p=l.sys.lights;if(this.lightsActive=!1,!(!p||!p.active)){var g=p.getLights(v),m=g.length;this.lightsActive=!0;var C,P=this.renderer,M=P.height,E=v.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",p.ambientColor.r,p.ambientColor.g,p.ambientColor.b),this.set1i("uLightCount",m),C=0;C<m;C++){var R=g[C].light,A=R.color,L="uLights["+C+"].";E.transformPoint(R.x,R.y,w),this.set2f(L+"position",w.x-v.scrollX*R.scrollFactorX*v.zoom,M-(w.y-v.scrollY*R.scrollFactorY*v.zoom)),this.set3f(L+"color",A.r,A.g,A.b),this.set1f(L+"intensity",R.intensity),this.set1f(L+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(l){var p=-l,g=Math.cos(p),m=Math.sin(p);v[1]=m,v[3]=-m,v[0]=v[4]=g}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=l}},setTexture2D:function(l,v){var p=this.renderer;l===void 0&&(l=p.whiteTexture);var g=this.getNormalMap(v);this.isNewNormalMap(l,g)&&(this.flush(),this.createBatch(l),this.addTextureToBatch(g),this.currentNormalMap=g);var m=0;if(v&&v.parentContainer){var C=v.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);m=C.rotationNormalized}else v&&(m=v.rotation);return this.setNormalMapRotation(m),0},setGameObject:function(l,v){v===void 0&&(v=l.frame);var p=v.glTexture,g=this.getNormalMap(l);if(this.isNewNormalMap(p,g)&&(this.flush(),this.createBatch(p),this.addTextureToBatch(g),this.currentNormalMap=g),l.parentContainer){var m=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(m.rotationNormalized)}else this.setNormalMapRotation(l.rotation);return 0},isNewNormalMap:function(l,v){return this.currentTexture!==l||this.currentNormalMap!==v},getNormalMap:function(l){var v;if(l)l.displayTexture?v=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?v=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?v=l.tileset[0].image.dataSource[0]:v=l.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return v?v.glTexture:this.renderer.normalTexture},batchSprite:function(l,v,p){this.lightsActive&&o.prototype.batchSprite.call(this,l,v,p)},batchTexture:function(l,v,p,g,m,C,P,M,E,w,R,A,L,F,O,b,I,B,N,k,Y,H,z,X,D,G,V,W,U,$,K,Z){this.lightsActive&&o.prototype.batchTexture.call(this,l,v,p,g,m,C,P,M,E,w,R,A,L,F,O,b,I,B,N,k,Y,H,z,X,D,G,V,W,U,$,K,Z)},batchTextureFrame:function(l,v,p,g,m,C,P){this.lightsActive&&o.prototype.batchTextureFrame.call(this,l,v,p,g,m,C,P)}});r.exports=c},56527:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(57516),o=i(45561),a=i(60722),n=i(14500),u=i(29100),c=new d({Extends:f,initialize:function(v){v.fragShader=x(v,"fragShader",o),v.vertShader=x(v,"vertShader",a),v.attributes=x(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),v.forceZero=!0,v.resizeUniform="uResolution",f.call(this,v)},boot:function(){u.prototype.boot.call(this);var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height),this.set1i("uRoundPixels",l.config.roundPixels)}});r.exports=c},57516:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(94811),f=i(95540),o=i(98840),a=i(44667),n=i(61340),u=i(70554),c=i(14500),l=i(29100),v=new d({Extends:l,initialize:function(g){var m=g.game.renderer,C=f(g,"fragShader",o);g.fragShader=u.parseFragmentShaderMaxTextures(C,m.maxTextures),g.vertShader=f(g,"vertShader",a),g.attributes=f(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),g.resizeUniform="uResolution",l.call(this,g),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var p=this.renderer;this.set1iv("uMainSampler",p.textureIndexes),this.set2f("uResolution",p.width,p.height),this.set1i("uRoundPixels",p.config.roundPixels)},batchSprite:function(p,g,m){this.manager.set(this,p);var C=this._tempMatrix1,P=this._tempMatrix2,M=this._tempMatrix3,E=p.frame,w=E.glTexture,R=E.u0,A=E.v0,L=E.u1,F=E.v1,O=E.x,b=E.y,I=E.cutWidth,B=E.cutHeight,N=E.customPivot,k=p.displayOriginX,Y=p.displayOriginY,H=-k+O,z=-Y+b;if(p.isCropped){var X=p._crop;(X.flipX!==p.flipX||X.flipY!==p.flipY)&&E.updateCropUVs(X,p.flipX,p.flipY),R=X.u0,A=X.v0,L=X.u1,F=X.v1,I=X.width,B=X.height,O=X.x,b=X.y,H=-k+O,z=-Y+b}var D=1,G=1;p.flipX&&(N||(H+=-E.realWidth+k*2),D=-1),p.flipY&&(N||(z+=-E.realHeight+Y*2),G=-1);var V=p.x,W=p.y;P.applyITRS(V,W,p.rotation,p.scaleX*D,p.scaleY*G),C.copyFrom(g.matrix),m?(C.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),P.e=V,P.f=W):(P.e-=g.scrollX*p.scrollFactorX,P.f-=g.scrollY*p.scrollFactorY),C.multiply(P,M);var U=M.setQuad(H,z,H+I,z+B),$=u.getTintAppendFloatAlpha,K=g.alpha,Z=$(p.tintTopLeft,K*p._alphaTL),J=$(p.tintTopRight,K*p._alphaTR),Q=$(p.tintBottomLeft,K*p._alphaBL),j=$(p.tintBottomRight,K*p._alphaBR);this.shouldFlush(6)&&this.flush();var _=this.setGameObject(p,E);this.manager.preBatch(p),this.currentShader.set1i("uRoundPixels",g.roundPixels),this.batchQuad(p,U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],R,A,L,F,Z,J,Q,j,p.tintFill,w,_),this.manager.postBatch(p)},batchTexture:function(p,g,m,C,P,M,E,w,R,A,L,F,O,b,I,B,N,k,Y,H,z,X,D,G,V,W,U,$,K,Z,J,Q,j){j===void 0&&(j=!1),this.manager.set(this,p);var _=this._tempMatrix1,q=this._tempMatrix2,st=this._tempMatrix3,ht=k/m+U,lt=Y/C+$,ot=(k+H)/m+U,tt=(Y+z)/C+$,at=E,nt=w,vt=-B,mt=-N;if(p.isCropped){var Bt=p._crop,Dt=Bt.width,Pt=Bt.height;at=Dt,nt=Pt,E=Dt,w=Pt,k=Bt.x,Y=Bt.y;var Ct=k,Ut=Y;F&&(Ct=H-Bt.x-Dt),O&&(Ut=z-Bt.y-Pt),ht=Ct/m+U,lt=Ut/C+$,ot=(Ct+Dt)/m+U,tt=(Ut+Pt)/C+$,vt=-B+k,mt=-N+Y}O=O^(!J&&g.isRenderTexture?1:0),F&&(at*=-1,vt+=E),O&&(nt*=-1,mt+=w),q.applyITRS(P,M,L,R,A),_.copyFrom(K.matrix),Z?(_.multiplyWithOffset(Z,-K.scrollX*b,-K.scrollY*I),q.e=P,q.f=M):(q.e-=K.scrollX*b,q.f-=K.scrollY*I),_.multiply(q,st);var Ft=st.setQuad(vt,mt,vt+at,mt+nt);Q==null&&(Q=this.setTexture2D(g)),p&&!j&&this.manager.preBatch(p),this.currentShader.set1i("uRoundPixels",K.roundPixels),this.batchQuad(p,Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5],Ft[6],Ft[7],ht,lt,ot,tt,X,D,G,V,W,g,Q),p&&!j&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,C,P,M,E){this.manager.set(this);var w=this._tempMatrix1.copyFrom(M),R=this._tempMatrix2;E?w.multiply(E,R):R=w;var A=R.setQuad(g,m,g+p.width,m+p.height),L=this.setTexture2D(p.source.glTexture);C=u.getTintAppendFloatAlpha(C,P),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],p.u0,p.v0,p.u1,p.v1,C,C,C,C,0,p.glTexture,L)},batchFillRect:function(p,g,m,C,P,M){this.renderer.pipelines.set(this);var E=this.calcMatrix;M&&M.multiply(P,E);var w=E.setQuad(p,g,p+m,g+C),R=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(p,g,m,C,P,M,E,w){this.renderer.pipelines.set(this);var R=this.calcMatrix;w&&w.multiply(E,R);var A=R.getX(p,g),L=R.getY(p,g),F=R.getX(m,C),O=R.getY(m,C),b=R.getX(P,M),I=R.getY(P,M),B=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,A,L,F,O,b,I,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,g,m,C,P,M,E,w,R){var A=this.tempTriangle;A[0].x=p,A[0].y=g,A[0].width=E,A[1].x=m,A[1].y=C,A[1].width=E,A[2].x=P,A[2].y=M,A[2].width=E,A[3].x=p,A[3].y=g,A[3].width=E,this.batchStrokePath(A,E,!1,w,R)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var C=this.calcMatrix;m&&m.multiply(g,C);for(var P=p.length,M=this.polygonCache,E,w,R=this.fillTint.TL,A=this.fillTint.TR,L=this.fillTint.BL,F=0;F<P;++F)w=p[F],M.push(w.x,w.y);E=x(M),P=E.length,this.currentShader.set1i("uRoundPixels",!1);for(var O=0;O<P;O+=3){var b=E[O+0]*2,I=E[O+1]*2,B=E[O+2]*2,N=M[b+0],k=M[b+1],Y=M[I+0],H=M[I+1],z=M[B+0],X=M[B+1],D=C.getX(N,k),G=C.getY(N,k),V=C.getX(Y,H),W=C.getY(Y,H),U=C.getX(z,X),$=C.getY(z,X);this.batchTri(null,D,G,V,W,U,$,0,0,1,1,R,A,L,2)}M.length=0},batchStrokePath:function(p,g,m,C,P){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var M=p.length-1,E=0;E<M;E++){var w=p[E],R=p[E+1];this.batchLine(w.x,w.y,R.x,R.y,w.width/2,R.width/2,g,E,!m&&E===M-1,C,P)}},batchLine:function(p,g,m,C,P,M,E,w,R,A,L){this.renderer.pipelines.set(this);var F=this.calcMatrix;L&&L.multiply(A,F);var O=m-p,b=C-g,I=Math.sqrt(O*O+b*b);if(I!==0){var B=P*(C-g)/I,N=P*(p-m)/I,k=M*(C-g)/I,Y=M*(p-m)/I,H=m-k,z=C-Y,X=p-B,D=g-N,G=m+k,V=C+Y,W=p+B,U=g+N,$=F.getX(H,z),K=F.getY(H,z),Z=F.getX(X,D),J=F.getY(X,D),Q=F.getX(G,V),j=F.getY(G,V),_=F.getX(W,U),q=F.getY(W,U),st=this.strokeTint,ht=st.TL,lt=st.TR,ot=st.BL,tt=st.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,_,q,Z,J,$,K,Q,j,0,0,1,1,ht,lt,ot,tt,2),!(E<=2)){var at=this.prevQuad,nt=this.firstQuad;w>0&&at[4]?this.batchQuad(null,_,q,Z,J,at[0],at[1],at[2],at[3],0,0,1,1,ht,lt,ot,tt,2):(nt[0]=_,nt[1]=q,nt[2]=Z,nt[3]=J,nt[4]=1),R&&nt[4]?this.batchQuad(null,$,K,Q,j,nt[0],nt[1],nt[2],nt[3],0,0,1,1,ht,lt,ot,tt,2):(at[0]=$,at[1]=K,at[2]=Q,at[3]=j,at[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});r.exports=v},43439:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(4127),o=i(89924),a=i(29100),n=new d({Extends:a,initialize:function(c){c.vertShader=x(c,"vertShader",o),c.fragShader=x(c,"fragShader",f),c.attributes=x(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,c)},onRender:function(u,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(u,c,l,v,p,g,m,C,P,M,E,w){var R=u.color,A=u.intensity,L=u.radius,F=u.attenuation,O=R.r*A,b=R.g*A,I=R.b*A,B=c.alpha*u.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(l,v,E,w,L,F,O,b,I,B),this.batchLightVert(p,g,E,w,L,F,O,b,I,B),this.batchLightVert(m,C,E,w,L,F,O,b,I,B),this.batchLightVert(l,v,E,w,L,F,O,b,I,B),this.batchLightVert(m,C,E,w,L,F,O,b,I,B),this.batchLightVert(P,M,E,w,L,F,O,b,I,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(u,c,l,v,p,g,m,C,P,M){var E=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++w]=u,E[++w]=c,E[++w]=l,E[++w]=v,E[++w]=p,E[++w]=g,E[++w]=m,E[++w]=C,E[++w]=P,E[++w]=M,this.vertexCount++}});r.exports=n},84057:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(89422),f=i(95540),o=i(27681),a=i(49627),n=i(29100),u=new d({Extends:n,initialize:function(l){l.renderTarget=f(l,"renderTarget",1),l.fragShader=f(l,"fragShader",o),l.vertShader=f(l,"vertShader",a),l.attributes=f(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,l),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){n.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2;var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height),this.set1i("uRoundPixels",l.config.roundPixels);for(var v=this.renderTargets,p=0;p<v.length;p++)v[p].autoResize=!0},postBatch:function(c){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(c){this.bindAndDraw(c)},getController:function(c){return c!==void 0?c:this.controller?this.controller:this},copySprite:function(c,l,v){v===void 0&&(v=!1);var p=this.gl;p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,c.texture.webGLTexture);var g=p.getParameter(p.FRAMEBUFFER_BINDING);p.bindFramebuffer(p.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l.texture.webGLTexture,0),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),v&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,g))},copyFrame:function(c,l,v,p,g){this.manager.copyFrame(c,l,v,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,l,v){this.manager.drawFrame(c,l,v,this.colorMatrix)},blendFrames:function(c,l,v,p,g){this.manager.blendFrames(c,l,v,p,g)},blendFramesAdditive:function(c,l,v,p,g){this.manager.blendFramesAdditive(c,l,v,p,g)},clearFrame:function(c,l){this.manager.clearFrame(c,l)},blitFrame:function(c,l,v,p,g,m){this.manager.blitFrame(c,l,v,p,g,m)},copyFrameRect:function(c,l,v,p,g,m,C,P){this.manager.copyFrameRect(c,l,v,p,g,m,C,P)},bindAndDraw:function(c,l,v,p,g){v===void 0&&(v=!0),p===void 0&&(p=!0);var m=this.gl,C=this.renderer;this.bind(g),this.set1i("uMainSampler",0),l?(m.viewport(0,0,l.width,l.height),m.bindFramebuffer(m.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l.texture.webGLTexture,0),v&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||m.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture.webGLTexture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),l&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,C.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),n.prototype.destroy.call(this),this}});r.exports=u},43558:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(67502),f=i(83419),o=i(96293),a=i(95540),n=i(57516),u=i(27681),c=i(87841),l=i(32302),v=i(45561),p=i(60722),g=i(29100),m=new f({Extends:n,initialize:function(P){var M=a(P,"fragShader",u),E=a(P,"vertShader",p),w=a(P,"drawShader",u),R=[{name:"DrawSprite",fragShader:v,vertShader:p},{name:"CopySprite",fragShader:M,vertShader:E},{name:"DrawGame",fragShader:w,vertShader:p},{name:"ColorMatrix",fragShader:o}],A=a(P,"shaders",[]);P.shaders=R.concat(A),P.vertShader||(P.vertShader=E),P.batchSize=1,n.call(this,P),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){g.prototype.boot.call(this);var C=this.shaders,P=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new l(P,P.width,P.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var M=new ArrayBuffer(168);this.quadVertexData=M,this.quadVertexViewF32=new Float32Array(M),this.quadVertexBuffer=P.createVertexBuffer(M,this.gl.STATIC_DRAW),this.onResize(P.width,P.height),this.currentShader=this.copyShader,this.set2f("uResolution",P.width,P.height),this.set1i("uRoundPixels",P.config.roundPixels)},onResize:function(C,P){var M=this.quadVertexViewF32;M[1]=P,M[22]=P,M[14]=C,M[28]=C,M[35]=C,M[36]=P},batchQuad:function(C,P,M,E,w,R,A,L,F,O,b,I,B,N,k,Y,H,z,X){var D=Math.min(P,E,R,L),G=Math.min(M,w,A,F),V=Math.max(P,E,R,L),W=Math.max(M,w,A,F),U=V-D,$=W-G,K=this.spriteBounds.setTo(D,G,U,$),Z=C?C.preFX.padding:0,J=U+Z*2,Q=$+Z*2,j=Math.abs(Math.max(J,Q)),_=this.manager.getRenderTarget(j),q=this.targetBounds.setTo(0,0,_.width,_.height);x(q,K.centerX,K.centerY),this.tempSprite=C;var st=this.gl,ht=this.renderer;ht.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",ht.width,ht.height),this.set1i("uRoundPixels",ht.config.roundPixels),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,_),C.preFX.onFX(this));var lt=this.fsTarget;return this.flush(),st.viewport(0,0,ht.width,ht.height),st.bindFramebuffer(st.FRAMEBUFFER,lt.framebuffer.webGLFramebuffer),st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,lt.texture.webGLTexture,0),st.clearColor(0,0,0,0),st.clear(st.COLOR_BUFFER_BIT),this.setTexture2D(X),this.batchVert(P,M,O,b,0,z,N),this.batchVert(E,w,O,B,0,z,Y),this.batchVert(R,A,I,B,0,z,H),this.batchVert(P,M,O,b,0,z,N),this.batchVert(R,A,I,B,0,z,H),this.batchVert(L,F,I,b,0,z,k),this.flush(),this.flipProjectionMatrix(!1),st.activeTexture(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,_.texture.webGLTexture),st.copyTexSubImage2D(st.TEXTURE_2D,0,0,0,q.x,q.y,q.width,q.height),st.bindFramebuffer(st.FRAMEBUFFER,null),st.bindTexture(st.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(_,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,P,M,E,w,R,A){M===void 0&&(M=!0),E===void 0&&(E=!0),w===void 0&&(w=!1),A===void 0&&(A=this.copyShader);var L=this.gl,F=this.tempSprite;R&&(A=this.colorMatrixShader),this.currentShader=A;var O=this.setVertexBuffer(this.quadVertexBuffer);A.bind(O,!1);var b=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",b.width,b.height),this.set1i("uRoundPixels",b.config.roundPixels),F.preFX.onFXCopy(this),this.onCopySprite(C,P,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,C.texture.webGLTexture),C.height>P.height)L.viewport(0,0,C.width,C.height),this.setTargetUVs(C,P);else{var I=P.height-C.height;L.viewport(0,I,C.width,C.height),this.resetUVs()}if(L.bindFramebuffer(L.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,P.texture.webGLTexture,0),M&&(L.clearColor(0,0,0,Number(!E)),L.clear(L.COLOR_BUFFER_BIT)),w){var B=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}L.bufferData(L.ARRAY_BUFFER,this.quadVertexData,L.STATIC_DRAW),L.drawArrays(L.TRIANGLES,0,6),w&&this.renderer.setBlendMode(B),L.bindFramebuffer(L.FRAMEBUFFER,null)},copy:function(C,P){var M=this.gl;this.set1i("uMainSampler",0),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,C.texture.webGLTexture),M.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),M.bindFramebuffer(M.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,P.texture.webGLTexture,0),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.quadVertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null)},blendFrames:function(C,P,M,E,w){this.manager.blendFrames(C,P,M,E,w)},blendFramesAdditive:function(C,P,M,E,w){this.manager.blendFramesAdditive(C,P,M,E,w)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var P=this.gl,M=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var E=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,R=this.targetBounds.y,A=w+C.width,L=R+C.height,F=E.getX(w,R),O=E.getX(w,L),b=E.getX(A,L),I=E.getX(A,R),B=E.getY(w,R),N=E.getY(w,L),k=E.getY(A,L),Y=E.getY(A,R),H=16777215;this.batchVert(F,B,0,0,0,0,H),this.batchVert(O,N,0,1,0,0,H),this.batchVert(b,k,1,1,0,0,H),this.batchVert(F,B,0,0,0,0,H),this.batchVert(b,k,1,1,0,0,H),this.batchVert(I,Y,1,0,0,0,H),M.restoreFramebuffer(!1,!0),M.currentFramebuffer||P.viewport(0,0,M.width,M.height),M.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,P,M,E,w,R,A,L){var F=this.quadVertexViewF32;F[2]=C,F[3]=P,F[9]=M,F[10]=E,F[16]=w,F[17]=R,F[23]=C,F[24]=P,F[30]=w,F[31]=R,F[37]=A,F[38]=L},setTargetUVs:function(C,P){var M=P.height/C.height;M>.5?M=.5-(M-.5):M=.5+(.5-M),this.setUVs(0,M,0,1+M,1,1+M,1,M)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});r.exports=m},81041:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(57516),o=new d({Extends:f,initialize:function(n){n.topology=5,n.batchSize=x(n,"batchSize",256),f.call(this,n)}});r.exports=o},12385:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(57516),o=i(45561),a=i(60722),n=i(29100),u=new d({Extends:f,initialize:function(l){l.fragShader=x(l,"fragShader",o),l.vertShader=x(l,"vertShader",a),l.forceZero=!0,f.call(this,l)},boot:function(){n.prototype.boot.call(this);var c=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",c.width,c.height),this.set1i("uRoundPixels",c.config.roundPixels)}});r.exports=u},7589:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35407),x=i(10312),f=i(83419),o=i(89422),a=i(96293),n=i(36682),u=i(95540),c=i(48247),l=i(49627),v=i(29100),p=new f({Extends:v,initialize:function(m){m.renderTarget=u(m,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),m.vertShader=u(m,"vertShader",l),m.shaders=u(m,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:d},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:a}]),m.attributes=u(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,v.call(this,m),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,C,P,M){C===void 0&&(C=1),P===void 0&&(P=!0),M===void 0&&(M=!0);var E=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,g.texture.webGLTexture),m?(E.viewport(0,0,m.width,m.height),E.bindFramebuffer(E.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,m.texture.webGLTexture,0)):E.viewport(0,0,g.width,g.height),P&&(M?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blitFrame:function(g,m,C,P,M,E,w){C===void 0&&(C=1),P===void 0&&(P=!0),M===void 0&&(M=!0),E===void 0&&(E=!1),w===void 0&&(w=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,g.texture.webGLTexture),g.height>m.height)R.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var A=m.height-g.height;R.viewport(0,A,g.width,g.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,m.texture.webGLTexture,0),P&&(M?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),E){var L=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}w&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),E&&this.renderer.setBlendMode(L),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,C,P,M,E,w,R){w===void 0&&(w=!0),R===void 0&&(R=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,g.texture.webGLTexture,0),w&&(R?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,m.texture.webGLTexture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,C,P,M,E),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture.webGLTexture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6)},drawFrame:function(g,m,C,P){C===void 0&&(C=!0),P===void 0&&(P=this.colorMatrix);var M=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,g.texture.webGLTexture),m?(M.viewport(0,0,m.width,m.height),M.bindFramebuffer(M.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,m.texture.webGLTexture,0)):M.viewport(0,0,g.width,g.height),C?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFrames:function(g,m,C,P,M,E){P===void 0&&(P=1),M===void 0&&(M=!0),E===void 0&&(E=this.linearShader);var w=this.gl;this.setShader(E),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",P),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,g.texture.webGLTexture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,m.texture.webGLTexture),C?(w.bindFramebuffer(w.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,C.texture.webGLTexture,0),w.viewport(0,0,C.width,C.height)):w.viewport(0,0,g.width,g.height),M?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,C,P,M){this.blendFrames(g,m,C,P,M,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var C=this.gl;C.viewport(0,0,g.width,g.height),C.bindFramebuffer(C.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),m?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var P=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,P.webGLFramebuffer)},setUVs:function(g,m,C,P,M,E,w,R){var A=this.vertexViewF32;A[2]=g,A[3]=m,A[6]=C,A[7]=P,A[10]=M,A[11]=E,A[14]=g,A[15]=m,A[18]=M,A[19]=E,A[22]=w,A[23]=R},setTargetUVs:function(g,m){var C=m.height/g.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});r.exports=p},36060:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};r.exports=T},84817:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineafterflush"},36712:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebeforeflush"},40285:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebind"},65918:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineboot"},92852:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinedestroy"},56072:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinerebind"},57566:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineresize"},77085:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(99155),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(a,n){a=this.getController(a),this.set1f("amount",a.amount,n)}});r.exports=o},67329:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(24400),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(a){a=this.getController(a),this.set1f("strength",a.blurStrength),this.set3fv("color",a.glcolor)},onDraw:function(a){var n=this.getController(),u=this.fullFrame1,c=this.fullFrame2;this.copyFrame(a,c);for(var l=2/a.width*n.offsetX,v=2/a.height*n.offsetY,p=0;p<n.steps;p++)this.set2f("offset",l,0),this.copySprite(a,u),this.set2f("offset",0,v),this.copySprite(u,a);this.blendFrames(c,a,u,n.strength),this.copyToGame(u)}});r.exports=o},8861:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(41514),f=i(51078),o=i(94328),a=i(84057),n=new d({Extends:a,initialize:function(c){a.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:f},{name:"Gaussian13",fragShader:o}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(u){var c=this.getController(),l=this.gl,v=this.fullFrame1,p=l.getParameter(l.FRAMEBUFFER_BINDING);this.bind(this.shaders[c.quality]),l.activeTexture(l.TEXTURE0),l.viewport(0,0,u.width,u.height),this.set1i("uMainSampler",0),this.set2f("resolution",u.width,u.height),this.set1f("strength",c.strength),this.set3fv("color",c.glcolor);for(var g=0;g<c.steps;g++)this.set2f("offset",c.x,0),this.copySprite(u,v),this.set2f("offset",0,c.y),this.copySprite(v,u);l.bindFramebuffer(l.FRAMEBUFFER,p),l.bindTexture(l.TEXTURE_2D,null),this.copyToGame(u)}});r.exports=n},51051:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(90610),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(a,n,u,c){a=this.getController(a),this.set1f("radius",a.radius,n),this.set1f("amount",a.amount,n),this.set1f("contrast",a.contrast,n),this.set1f("strength",a.strength,n),this.set2f("blur",a.blurX,a.blurY,n),this.setBoolean("isTiltShift",a.isTiltShift,n),u&&c&&this.set2f("resolution",u,c,n)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});r.exports=o},89428:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(91899),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(a,n,u,c){a=this.getController(a),this.set1f("scale",a.scale,n),this.set1f("feather",a.feather,n),this.set1f("thickness",a.thickness,n),this.set3fv("color",a.glcolor,n),this.set4fv("backgroundColor",a.glcolor2,n),u&&c&&this.set2f("resolution",u,c,n)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});r.exports=o},88904:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(84057),f=new d({Extends:x,initialize:function(a){x.call(this,{game:a})},onDraw:function(o){var a=this.fullFrame1;this.controller?this.manager.drawFrame(o,a,!0,this.controller):this.drawFrame(o,a),this.copyToGame(a)}});r.exports=f},63563:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(47838),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(a){var n=this.game.textures.getFrame(a);n&&(this.glTexture=n.glTexture)},onDraw:function(a){var n=this.getController(),u=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(a,u),this.copyToGame(u)}});r.exports=o},94045:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=i(98656),o=i(84057),a=i(70554),n=new d({Extends:o,initialize:function(c,l){var v=x(l,"quality",.1),p=x(l,"distance",10);o.call(this,{game:c,fragShader:a.setGlowQuality(f,c,v,p)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(u,c,l,v){u=this.getController(u),this.set1f("outerStrength",u.outerStrength,c),this.set1f("innerStrength",u.innerStrength,c),this.set4fv("glowColor",u.glcolor,c),this.setBoolean("knockout",u.knockout,c),l&&v&&this.set2f("resolution",l,v,c)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});r.exports=n},74088:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(70463),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(a,n){a=this.getController(a),this.set1f("alpha",a.alpha,n),this.set1i("size",a.size,n),this.set3fv("color1",a.glcolor1,n),this.set3fv("color2",a.glcolor2,n),this.set2f("positionFrom",a.fromX,a.fromY,n),this.set2f("positionTo",a.toX,a.toY,n)}});r.exports=o},99636:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50831),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(a,n,u,c){a=this.getController(a),this.set1f("amount",a.amount,n),u&&c&&this.set2f("resolution",u,c,n)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});r.exports=o},34700:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(92595),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(a,n){a=this.getController(a);var u=a.samples;this.set1i("samples",u,n),this.set1f("intensity",a.intensity,n),this.set1f("decay",a.decay,n),this.set1f("power",a.power/u,n),this.set2f("lightPosition",a.x,a.y,n),this.set4fv("color",a.glcolor,n)}});r.exports=o},91157:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(72464),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(a,n,u,c){a=this.getController(a),this.setTime("time",n),this.set1f("speed",a.speed,n),this.set1f("lineWidth",a.lineWidth,n),this.set1f("gradient",a.gradient,n),this.setBoolean("reveal",a.reveal,n),u&&c&&this.set2f("resolution",u,c,n)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});r.exports=o},27797:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(39249),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(a,n){a=this.getController(a),this.set1f("radius",a.radius,n),this.set1f("strength",a.strength,n),this.set2f("position",a.x,a.y,n)}});r.exports=o},67603:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(2878),f=i(84057),o=new d({Extends:f,initialize:function(n){f.call(this,{game:n,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(a,n){a=this.getController(a);var u=a.progress,c=a.wipeWidth,l=a.direction,v=a.axis;this.set4f("config",u,c,l,v,n),this.setBoolean("reveal",a.reveal,n)}});r.exports=o},58918:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)};r.exports=d},96615:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36060),x=i(79291),f={FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)};f=x(!1,f,d),r.exports=f},35407:r=>{r.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:r=>{r.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:r=>{r.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:r=>{r.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:r=>{r.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:r=>{r.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:r=>{r.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:r=>{r.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:r=>{r.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:r=>{r.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:r=>{r.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:r=>{r.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:r=>{r.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:r=>{r.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:r=>{r.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:r=>{r.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:r=>{r.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:r=>{r.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:r=>{r.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:r=>{r.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:r=>{r.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:r=>{r.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n){this.webGLAttribLocation=-1,this.gl=o,this.program=a,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var f=this.gl;f.isContextLost()||(this.webGLAttribLocation=f.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});r.exports=x},26128:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u){this.webGLBuffer=null,this.gl=o,this.initialDataOrSize=a,this.bufferType=n,this.bufferUsage=u,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var f=this.gl;if(!f.isContextLost()){var o=this.bufferType,a=f.createBuffer();this.webGLBuffer=a,f.bindBuffer(o,this.webGLBuffer),f.bufferData(o,this.initialDataOrSize,this.bufferUsage),f.bindBuffer(o,null)}}},destroy:function(){var f=this.gl;f.isContextLost()||f.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});r.exports=x},84387:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},f=new d({initialize:function(a,n,u,c,l){this.webGLFramebuffer=null,this.gl=a,this.width=n,this.height=u,this.renderTexture=c,this.addDepthStencilBuffer=!!l,this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){var a=this.renderTexture,n=0,u=o.createFramebuffer();if(this.webGLFramebuffer=u,o.bindFramebuffer(o.FRAMEBUFFER,u),a.isRenderTexture=!0,a.isAlphaPremultiplied=!1,o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,a.webGLTexture,0),n=o.checkFramebufferStatus(o.FRAMEBUFFER),n!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(x[n]||n));if(this.addDepthStencilBuffer){var c=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,c),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,this.width,this.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,c)}o.bindFramebuffer(o.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var o=this.gl;if(!o.isContextLost()){o.bindFramebuffer(o.FRAMEBUFFER,this.webGLFramebuffer);var a=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);a!==null&&(o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,null,0),o.deleteTexture(a));var n=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);n!==null&&o.deleteRenderbuffer(n),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});r.exports=f},1482:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n){this.webGLProgram=null,this.gl=o,this.vertexSource=a,this.fragmentSource=n,this.createResource()},createResource:function(){var f=this.gl;if(!f.isContextLost()){var o=f.createProgram(),a=f.createShader(f.VERTEX_SHADER),n=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,this.vertexSource),f.shaderSource(n,this.fragmentSource),f.compileShader(a),f.compileShader(n);var u=`Shader failed:
`;if(!f.getShaderParameter(a,f.COMPILE_STATUS))throw new Error("Vertex "+u+f.getShaderInfoLog(a));if(!f.getShaderParameter(n,f.COMPILE_STATUS))throw new Error("Fragment "+u+f.getShaderInfoLog(n));if(f.attachShader(o,a),f.attachShader(o,n),f.linkProgram(o),!f.getProgramParameter(o,f.LINK_STATUS))throw new Error("Link "+u+f.getProgramInfoLog(o));f.useProgram(o),this.webGLProgram=o}},destroy:function(){!this.webGLProgram||(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});r.exports=x},82751:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50030),f=new d({initialize:function(a,n,u,c,l,v,p,g,m,C,P,M,E){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=a,this.mipLevel=n,this.minFilter=u,this.magFilter=c,this.wrapT=l,this.wrapS=v,this.format=p,this.pixels=g,this.width=m,this.height=C,this.pma=P==null?!0:P,this.forceSize=!!M,this.flipY=!!E,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){if(this.pixels instanceof f){this.webGLTexture=this.pixels.webGLTexture;return}var a=o.createTexture();a.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=a,this._processTexture()}},update:function(o,a,n,u,c,l,v,p,g){if(!(a===0||n===0)){this.pixels=o,this.width=a,this.height=n,this.flipY=u,this.wrapS=c,this.wrapT=l,this.minFilter=v,this.magFilter=p,this.format=g;var m=this.gl;m.isContextLost()||this._processTexture()}},_processTexture:function(){var o=this.gl;o.activeTexture(o.TEXTURE0);var a=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,this.webGLTexture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.minFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.magFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,this.wrapS),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,this.wrapT),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this.flipY);var n=this.pixels,u=this.mipLevel,c=this.width,l=this.height,v=this.format,p=!1;if(n==null)o.texImage2D(o.TEXTURE_2D,u,v,c,l,0,v,o.UNSIGNED_BYTE,null),p=x(c,l);else if(n.compressed){c=n.width,l=n.height,p=n.generateMipmap;for(var g=0;g<n.mipmaps.length;g++)o.compressedTexImage2D(o.TEXTURE_2D,g,n.internalFormat,n.mipmaps[g].width,n.mipmaps[g].height,0,n.mipmaps[g].data)}else n instanceof Uint8Array?(o.texImage2D(o.TEXTURE_2D,u,v,c,l,0,v,o.UNSIGNED_BYTE,n),p=x(c,l)):(this.forceSize||(c=n.width,l=n.height),o.texImage2D(o.TEXTURE_2D,u,v,v,o.UNSIGNED_BYTE,n),p=x(c,l));p&&o.generateMipmap(o.TEXTURE_2D),a?o.bindTexture(o.TEXTURE_2D,a):o.bindTexture(o.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(o){this.__SPECTOR_Metadata=o,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=o)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof f||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});r.exports=f},57183:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n){this.webGLUniformLocation=null,this.gl=o,this.program=a,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var f=this.gl;f.isContextLost()||(this.webGLUniformLocation=f.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});r.exports=x},9503:(r,T,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)};r.exports=d},76531:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13560),x=i(83419),f=i(50792),o=i(97480),a=i(8443),n=i(57811),u=i(74403),c=i(45818),l=i(29747),v=i(87841),p=i(86555),g=i(56583),m=i(26099),C=i(38058),P=new x({Extends:f,initialize:function(E){f.call(this),this.game=E,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=d.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=d.CENTER.NO_CENTER,this.orientation=d.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var M=this.game;this.canvas=M.canvas,this.fullscreen=M.device.fullscreen,this.scaleMode!==d.SCALE_MODE.RESIZE&&this.scaleMode!==d.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===d.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),M.events.on(a.PRE_STEP,this.step,this),M.events.once(a.READY,this.refresh,this),M.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(M){this.getParent(M),this.getParentBounds();var E=M.width,w=M.height,R=M.scaleMode,A=M.zoom,L=M.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var F=this.parentSize.width;F===0&&(F=window.innerWidth);var O=parseInt(E,10)/100;E=Math.floor(F*O)}if(typeof w=="string")if(w.substr(-1)!=="%")w=parseInt(w,10);else{var b=this.parentSize.height;b===0&&(b=window.innerHeight);var I=parseInt(w,10)/100;w=Math.floor(b*I)}this.scaleMode=R,this.autoRound=L,this.autoCenter=M.autoCenter,this.resizeInterval=M.resizeInterval,L&&(E=Math.floor(E),w=Math.floor(w)),this.gameSize.setSize(E,w),A===d.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),this.zoom=A,A!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,w),L&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),M.minWidth>0&&this.displaySize.setMin(M.minWidth*A,M.minHeight*A),M.maxWidth>0&&this.displaySize.setMax(M.maxWidth*A,M.maxHeight*A),this.displaySize.setSize(E,w),(M.snapWidth>0||M.snapHeight>0)&&this.displaySize.setSnap(M.snapWidth,M.snapHeight),this.orientation=c(E,w)},getParent:function(M){var E=M.parent;if(E!==null){if(this.parent=u(E),this.parentIsWindow=this.parent===document.body,M.expandParent&&M.scaleMode!==d.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}M.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(M.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var M=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=n(!0));var w=E.width,R=E.height;if(M.width!==w||M.height!==R)return M.setSize(w,R),!0;if(this.canvas){var A=this.canvasBounds,L=this.canvas.getBoundingClientRect();if(L.x!==A.x||L.y!==A.y)return!0}return!1},lockOrientation:function(M){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,M):!1},setParentSize:function(M,E){return this.parentSize.setSize(M,E),this.refresh()},setGameSize:function(M,E){var w=this.autoRound;w&&(M=Math.floor(M),E=Math.floor(E));var R=this.width,A=this.height;return this.gameSize.resize(M,E),this.baseSize.resize(M,E),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(M/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,A)},resize:function(M,E){var w=this.zoom,R=this.autoRound;R&&(M=Math.floor(M),E=Math.floor(E));var A=this.width,L=this.height;this.gameSize.resize(M,E),this.baseSize.resize(M,E),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(M*w,E*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,O=M*w,b=E*w;return R&&(O=Math.floor(O),b=Math.floor(b)),(O!==M||b!==E)&&(F.width=O+"px",F.height=b+"px"),this.refresh(A,L)},setZoom:function(M){return this.zoom=M,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(M,E){return M===void 0&&(M=0),E===void 0&&(E=M),this.displaySize.setSnap(M,E),this.refresh()},refresh:function(M,E){M===void 0&&(M=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var R=this.canvas.style,A=w.style;A.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",A.marginLeft=R.marginLeft,A.marginTop=R.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,M,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var M=c(this.width,this.height);M!==this.orientation&&(this.orientation=M,this.emit(o.ORIENTATION_CHANGE,M))}},updateScale:function(){var M=this.canvas.style,E=this.gameSize.width,w=this.gameSize.height,R,A,L=this.zoom,F=this.autoRound;if(this.scaleMode===d.SCALE_MODE.NONE)this.displaySize.setSize(E*L,w*L),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this._resetZoom&&(M.width=R+"px",M.height=A+"px",this._resetZoom=!1);else if(this.scaleMode===d.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this.canvas.width=R,this.canvas.height=A;else if(this.scaleMode===d.SCALE_MODE.EXPAND){this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),M.width=R+"px",M.height=A+"px";var O=this.parentSize.width/this.gameSize.width,b=this.parentSize.height/this.gameSize.height;O<b?this.baseSize.setSize(this.gameSize.width,this.parentSize.height/O):this.baseSize.setSize(this.displaySize.width/b,this.gameSize.height),R=this.baseSize.width,A=this.baseSize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this.canvas.width=R,this.canvas.height=A}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),M.width=R+"px",M.height=A+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var M=g(this.parentSize.width,this.gameSize.width,0,!0),E=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(M,E),1)},updateCenter:function(){var M=this.autoCenter;if(M!==d.CENTER.NO_CENTER){var E=this.canvas,w=E.style,R=E.getBoundingClientRect(),A=R.width,L=R.height,F=Math.floor((this.parentSize.width-A)/2),O=Math.floor((this.parentSize.height-L)/2);M===d.CENTER.CENTER_HORIZONTALLY?O=0:M===d.CENTER.CENTER_VERTICALLY&&(F=0),w.marginLeft=F+"px",w.marginTop=O+"px"}},updateBounds:function(){var M=this.canvasBounds,E=this.canvas.getBoundingClientRect();M.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),M.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),M.width=E.width,M.height=E.height},transformX:function(M){return(M-this.canvasBounds.left)*this.displayScale.x},transformY:function(M){return(M-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(M){M===void 0&&(M={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var w=this.getFullscreenTarget();E.keyboard?w[E.request](Element.ALLOW_KEYBOARD_INPUT):w[E.request](M)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(M){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,M)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var M=document.createElement("div");M.style.margin="0",M.style.padding="0",M.style.width="100%",M.style.height="100%",this.fullscreenTarget=M,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var M=this.fullscreenTarget;if(M&&M.parentNode){var E=M.parentNode;E.insertBefore(this.canvas,M),E.removeChild(M)}}},stopFullscreen:function(){var M=this.fullscreen;if(!M.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;M.active&&document[M.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(M){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(M)},startListeners:function(){var M=this,E=this.domlisteners;if(E.orientationChange=function(){M.updateBounds(),M._checkOrientation=!0,M.dirty=!0,M.refresh()},E.windowResize=function(){M.updateBounds(),M.dirty=!0},window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(R){return M.onFullScreenChange(R)},E.fullScreenError=function(R){return M.onFullScreenError(R)};var w=["webkit","moz",""];w.forEach(function(R){document.addEventListener(R+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(M,E){M instanceof C||(E=M,M=void 0),E===void 0&&(E=new v);var w=this.baseSize,R=this.parentSize,A=this.canvasBounds,L=this.displayScale,F=A.x>=0?0:-(A.x*L.x),O=A.y>=0?0:-(A.y*L.y),b;R.width>=A.width?b=w.width:b=w.width-(A.width-R.width)*L.x;var I;return R.height>=A.height?I=w.height:I=w.height-(A.height-R.height)*L.y,E.setTo(F,O,b,I),M&&(E.width/=M.zoomX,E.height/=M.zoomY,E.centerX=M.centerX+M.scrollX,E.centerY=M.centerY+M.scrollY),E},step:function(M,E){!this.parent||(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var M=this.domlisteners;window.removeEventListener("orientationchange",M.orientationChange,!1),window.removeEventListener("resize",M.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(w){document.removeEventListener(w+"fullscreenchange",M.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",M.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",M.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===d.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===d.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});r.exports=P},64743:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},81050:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)};r.exports=d},56139:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="enterfullscreen"},2336:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenfailed"},47412:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenunsupported"},51452:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="leavefullscreen"},20666:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="orientationchange"},47945:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"},97480:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=i(13560),f={Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)};f=d(!1,f,x.CENTER),f=d(!1,f,x.ORIENTATION),f=d(!1,f,x.SCALE_MODE),f=d(!1,f,x.ZOOM),r.exports=f},27397:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=i(35355),f=function(o){var a=o.game.config.defaultPhysicsSystem,n=d(o.settings,"physics",!1);if(!(!a&&!n)){var u=[];if(a&&u.push(x(a+"Physics")),n)for(var c in n)c=x(c.concat("Physics")),u.indexOf(c)===-1&&u.push(c);return u}};r.exports=f},52106:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=function(f){var o=f.plugins.getDefaultScenePlugins(),a=d(f.settings,"plugins",!1);return Array.isArray(a)?a:o||[]};r.exports=x},87033:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};r.exports=T},97482:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(2368),f=new d({initialize:function(a){this.sys=new x(this,a),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});r.exports=f},60903:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(89993),f=i(44594),o=i(8443),a=i(35154),n=i(54899),u=i(29747),c=i(97482),l=i(2368),v=new d({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,m){Array.isArray(m)||(m=[m]);for(var C=0;C<m.length;C++)this._pending.push({key:"default",scene:m[C],autoStart:C===0,data:{}})}g.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new c),this.game.events.emit(o.SYSTEM_READY,this.systemScene,this);var p,g,m,C;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,C=g.scene;var P;C instanceof c?P=this.createSceneFromInstance(m,C):typeof C=="object"?P=this.createSceneFromObject(m,C):typeof C=="function"&&(P=this.createSceneFromFunction(m,C)),m=P.sys.settings.key,this.keys[m]=P,this.scenes.push(P),this._data[m]&&(P.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||P.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,C;if(p){for(m=0;m<p;m++)C=this._pending[m],this.add(C.key,C.scene,C.autoStart,C.data);for(m=0;m<this._start.length;m++)C=this._start[m],this.start(C);this._start.length=0,this._pending.length=0}for(m=0;m<this._queue.length;m++)C=this._queue[m],this[C.op](C.keyA,C.keyB);this._queue.length=0}},add:function(p,g,m,C){if(m===void 0&&(m=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:C}),this.isBooted||(this._data[p]={data:C}),null;p=this.getKey(p,g);var P;return g instanceof c?P=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,P=this.createSceneFromObject(p,g)):typeof g=="function"&&(P=this.createSceneFromFunction(p,g)),P.sys.settings.data=C,p=P.sys.settings.key,this.keys[p]=P,this.scenes.push(P),(m||P.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),P},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),C=g.sys.settings.key;m>-1&&(delete this.keys[C],this.scenes.splice(m,1),this._start.indexOf(C)>-1&&(m=this._start.indexOf(C),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=u,p.init&&(p.init.call(p,m.data),m.status=x.INIT,m.isTransition&&g.events.emit(f.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var C;g.load&&(C=g.load,C.reset()),C&&p.preload?(p.preload.call(p),m.status=x.LOADING,C.once(n.COMPLETE,this.loadComplete,this),C.start()):this.create(p)},loadComplete:function(p){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var C=this.scenes[m].sys;C.settings.status>x.START&&C.settings.status<=x.RUNNING&&C.step(p,g),C.scenePlugin&&C.scenePlugin._target&&C.scenePlugin.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=x.LOADING&&m.settings.status<x.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=x.CREATING,p.create.call(p,m.data),m.status===x.DESTROYED)||(m.isTransition&&g.events.emit(f.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=x.RUNNING,g.events.emit(f.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var C=m.sys.settings.key;if(C!==""&&(p=C),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new l(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),C=m.sys.settings.key;C!==""?p=C:m.sys.settings.key=p,m.sys.init(this.game);for(var P=["init","preload","create","update","render"],M=0;M<P.length;M++){var E=a(g,P[M],null);E&&(m[P[M]]=E)}if(g.hasOwnProperty("extend")){for(var w in g.extend)if(!!g.extend.hasOwnProperty(w)){var R=g.extend[w];w==="data"&&m.hasOwnProperty("data")&&typeof R=="object"?m.data.merge(R):w!=="sys"&&(m[w]=R)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],C=this.scenes,P=0;P<C.length;P++){var M=C[P];M&&(!p||p&&M.sys.isActive())&&m.push(M)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(!m)return console.warn("Scene not found for key: "+p),this;var C=m.sys,P=C.settings.status;if(P>=x.START&&P<=x.CREATING)return this;if(P>=x.RUNNING&&P<=x.SLEEPING)C.shutdown(),C.sceneUpdate=u,C.start(g);else{C.sceneUpdate=u,C.start(g);var M;if(C.load&&(M=C.load),M&&C.settings.hasOwnProperty("pack")&&(M.reset(),M.addPack({payload:C.settings.pack})))return C.settings.status=x.LOADING,M.once(n.COMPLETE,this.payloadComplete,this),M.start(),this}return this.bootScene(m),this},stop:function(p,g){var m=this.getScene(p);if(m&&!m.sys.isTransitioning()&&m.sys.settings.status!==x.SHUTDOWN){var C=m.sys.load;C&&(C.off(n.COMPLETE,this.loadComplete,this),C.off(n.COMPLETE,this.payloadComplete,this)),m.sys.shutdown(g)}return this},switch:function(p,g){var m=this.getScene(p),C=this.getScene(g);return m&&C&&m!==C&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,C=this.getScene(p),P=this.getAt(m);this.scenes[g]=P,this.scenes[m]=C}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,C=this.getScene(p),P=this.getAt(m);this.scenes[g]=P,this.scenes[m]=C}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),C=this.getIndex(g);if(m!==-1&&C!==-1&&C<m){var P=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(m+(C>m),0,P)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),C=this.getIndex(g);if(m!==-1&&C!==-1&&C>m){var P=this.getAt(C);this.scenes.splice(C,1),m===0?this.scenes.unshift(P):this.scenes.splice(m-(C<m),0,P)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),C=this.getIndex(g);if(m!==C&&m!==-1&&C!==-1){var P=this.getAt(m);this.scenes[m]=this.scenes[C],this.scenes[C]=P}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var C=this.scenes[m].sys,P=C.settings.visible&&(C.settings.status===x.RUNNING||C.settings.status===x.PAUSED)?"[*] ":"[-] ";P+=C.settings.key+" ("+g[C.settings.status]+")",p.push(P)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.systemScene.sys.destroy(),this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});r.exports=v},52209:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(44594),o=i(95540),a=i(37277),n=new x({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},start:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",u,c),this},restart:function(u){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,u),this},transition:function(u){u===void 0&&(u={});var c=o(u,"target",!1),l=this.manager.getScene(c);if(!c||!this.checkValidTransition(l))return!1;var v=o(u,"duration",1e3);this._elapsed=0,this._target=l,this._duration=v,this._willSleep=o(u,"sleep",!1),this._willRemove=o(u,"remove",!1);var p=o(u,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=o(u,"onUpdateScope",this.scene));var g=o(u,"allowInput",!1);this.settings.transitionAllowInput=g;var m=l.sys.settings;m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=g,o(u,"moveAbove",!1)?this.manager.moveAbove(this.key,c):o(u,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),l.sys.isSleeping()?l.sys.wake(o(u,"data")):this.manager.start(c,o(u,"data"));var C=o(u,"onStart",null),P=o(u,"onStartScope",this.scene);return C&&C.call(P,this.scene,l,v),this.systems.events.emit(f.TRANSITION_OUT,l,v),!0},checkValidTransition:function(u){return!(!u||u.sys.isActive()||u.sys.isTransitioning()||u===this.scene||this.systems.isTransitioning())},step:function(u,c){this._elapsed+=c,this.transitionProgress=d(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var u=this._target.sys,c=this._target.sys.settings;u.events.emit(f.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(u,c,l,v){return this.manager.add(u,c,l,v)},launch:function(u,c){return u&&u!==this.key&&this.manager.queueOp("start",u,c),this},run:function(u,c){return u&&u!==this.key&&this.manager.queueOp("run",u,c),this},pause:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("pause",u,c),this},resume:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("resume",u,c),this},sleep:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("sleep",u,c),this},wake:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("wake",u,c),this},switch:function(u){return u!==this.key&&this.manager.queueOp("switch",this.key,u),this},stop:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("stop",u,c),this},setActive:function(u,c,l){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(u,l),this},setVisible:function(u,c){c===void 0&&(c=this.key);var l=this.manager.getScene(c);return l&&l.sys.setVisible(u),this},isSleeping:function(u){return u===void 0&&(u=this.key),this.manager.isSleeping(u)},isActive:function(u){return u===void 0&&(u=this.key),this.manager.isActive(u)},isPaused:function(u){return u===void 0&&(u=this.key),this.manager.isPaused(u)},isVisible:function(u){return u===void 0&&(u=this.key),this.manager.isVisible(u)},swapPosition:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.swapPosition(u,c),this},moveAbove:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.moveAbove(u,c),this},moveBelow:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.moveBelow(u,c),this},remove:function(u){return u===void 0&&(u=this.key),this.manager.remove(u),this},moveUp:function(u){return u===void 0&&(u=this.key),this.manager.moveUp(u),this},moveDown:function(u){return u===void 0&&(u=this.key),this.manager.moveDown(u),this},bringToTop:function(u){return u===void 0&&(u=this.key),this.manager.bringToTop(u),this},sendToBack:function(u){return u===void 0&&(u=this.key),this.manager.sendToBack(u),this},get:function(u){return this.manager.getScene(u)},getStatus:function(u){var c=this.manager.getScene(u);if(c)return c.sys.getStatus()},getIndex:function(u){return u===void 0&&(u=this.key),this.manager.getIndex(u)},shutdown:function(){var u=this.systems.events;u.off(f.SHUTDOWN,this.shutdown,this),u.off(f.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",n,"scenePlugin"),r.exports=n},55681:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89993),x=i(35154),f=i(46975),o=i(87033),a={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:d.PENDING,key:x(n,"key",""),active:x(n,"active",!1),visible:x(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(n,"pack",!1),cameras:x(n,"cameras",null),map:x(n,"map",f(o,x(n,"mapAdd",{}))),physics:x(n,"physics",{}),loader:x(n,"loader",{}),plugins:x(n,"plugins",!1),input:x(n,"input",{})}}};r.exports=a},2368:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(89993),f=i(42363),o=i(44594),a=i(27397),n=i(52106),u=i(29747),c=i(55681),l=new d({initialize:function(p,g){this.scene=p,this.game,this.renderer,this.config=g,this.settings=c.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(v){this.settings.status=x.INIT,this.sceneUpdate=u,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var p=v.plugins;this.plugins=p,p.addToScene(this,f.Global,[f.CoreScene,n(this),a(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(v,p){var g=this.events;g.emit(o.PRE_UPDATE,v,p),g.emit(o.UPDATE,v,p),this.sceneUpdate.call(this.scene,v,p),g.emit(o.POST_UPDATE,v,p)},render:function(v){var p=this.displayList;p.depthSort(),this.events.emit(o.PRE_RENDER,v),this.cameras.render(v,p),this.events.emit(o.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var p=this.settings,g=this.getStatus();return g!==x.CREATING&&g!==x.RUNNING?console.warn("Cannot pause non-running Scene",p.key):this.settings.active&&(p.status=x.PAUSED,p.active=!1,this.events.emit(o.PAUSE,this,v)),this},resume:function(v){var p=this.events,g=this.settings;return this.settings.active||(g.status=x.RUNNING,g.active=!0,p.emit(o.RESUME,this,v)),this},sleep:function(v){var p=this.settings,g=this.getStatus();return g!==x.CREATING&&g!==x.RUNNING?console.warn("Cannot sleep non-running Scene",p.key):(p.status=x.SLEEPING,p.active=!1,p.visible=!1,this.events.emit(o.SLEEP,this,v)),this},wake:function(v){var p=this.events,g=this.settings;return g.status=x.RUNNING,g.active=!0,g.visible=!0,p.emit(o.WAKE,this,v),g.isTransition&&p.emit(o.TRANSITION_WAKE,g.transitionFrom,g.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var v=this.settings.status;return v>x.PENDING&&v<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,p){return v?this.resume(p):this.pause(p)},start:function(v){var p=this.events,g=this.settings;v&&(g.data=v),g.status=x.START,g.active=!0,g.visible=!0,p.emit(o.START,this),p.emit(o.READY,this,v)},shutdown:function(v){var p=this.events,g=this.settings;p.off(o.TRANSITION_INIT),p.off(o.TRANSITION_START),p.off(o.TRANSITION_COMPLETE),p.off(o.TRANSITION_OUT),g.status=x.SHUTDOWN,g.active=!1,g.visible=!1,p.emit(o.SHUTDOWN,this,v)},destroy:function(){var v=this.events,p=this.settings;p.status=x.DESTROYED,p.active=!1,p.visible=!1,v.emit(o.DESTROY,this),v.removeAllListeners();for(var g=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<g.length;m++)this[g[m]]=null}});r.exports=l},89993:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};r.exports=T},69830:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"},7919:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},46763:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="create"},11763:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},71555:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},36735:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postupdate"},3809:r=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},90716:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"},58262:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},91633:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"},10319:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"},87132:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},81961:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"},90194:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleep"},6265:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},33178:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioncomplete"},43063:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioninit"},11259:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionout"},61611:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionstart"},45209:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionwake"},22966:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},21747:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wake"},44594:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89993),x=i(79291),f={Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)};f=x(!1,f,d),r.exports=f},30341:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(14463),o=i(79291),a=i(29747),n=new d({Extends:x,initialize:function(c,l,v){x.call(this),this.manager=c,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(console.error("addMarker "+u.name+" already exists in Sound"),!1):(u=o(!0,{name:"",start:0,duration:this.totalDuration-(u.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},u),this.markers[u.name]=u,!0)},updateMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(this.markers[u.name]=o(!0,this.markers[u.name],u),!0):(console.warn("Audio Marker: "+u.name+" missing in Sound: "+this.key),!1)},removeMarker:function(u){var c=this.markers[u];return c?(this.markers[u]=null,c):null},play:function(u,c){if(u===void 0&&(u=""),typeof u=="object"&&(c=u,u=""),typeof u!="string")return!1;if(!u)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[u])return console.warn("Marker: "+u+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[u],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var u=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,l=Math.pow(u,c);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.stop(),this.emit(f.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});r.exports=n},85034:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(41786),f=i(50792),o=i(14463),a=i(8443),n=i(46710),u=i(58731),c=i(29747),l=i(26099),v=new d({Extends:f,initialize:function(g){f.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new l,g.events.on(a.BLUR,this.onGameBlur,this),g.events.on(a.FOCUS,this.onGameFocus,this),g.events.on(a.PRE_STEP,this.update,this),g.events.once(a.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(p,g){g===void 0&&(g={});var m=this.add(p,g);m.spritemap=this.jsonCache.get(p).spritemap;for(var C in m.spritemap)if(!!m.spritemap.hasOwnProperty(C)){var P=x(g),M=m.spritemap[C];P.loop=M.hasOwnProperty("loop")?M.loop:!1,m.addMarker({name:C,start:M.start,duration:M.end-M.start,config:P})}return m},get:function(p){return u(this.sounds,"key",p)},getAll:function(p){return p?n(this.sounds,"key",p):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(p,g){var m=this.add(p);return m.once(o.COMPLETE,m.destroy,m),g?g.name?(m.addMarker(g),m.play(g.name)):m.play(g):m.play()},playAudioSprite:function(p,g,m){var C=this.addAudioSprite(p);return C.once(o.COMPLETE,C.destroy,C),C.play(g,m)},remove:function(p){var g=this.sounds.indexOf(p);return g!==-1?(p.destroy(),this.sounds.splice(g,1),!0):!1},removeAll:function(){this.sounds.forEach(function(p){p.destroy()}),this.sounds.length=0},removeByKey:function(p){for(var g=0,m=this.sounds.length-1;m>=0;m--){var C=this.sounds[m];C.key===p&&(C.destroy(),this.sounds.splice(m,1),g++)}return g},pauseAll:function(){this.forEachActiveSound(function(p){p.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(p){p.resume()}),this.emit(o.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(p){p.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(p){var g=0;return this.getAll(p).forEach(function(m){m.stop()&&g++}),g},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(p,g){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var m=this.sounds.length-1;m>=0;m--)this.sounds[m].pendingRemove&&this.sounds.splice(m,1);this.sounds.forEach(function(C){C.update(p,g)})},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(p,g){var m=this;this.sounds.forEach(function(C,P){C&&!C.pendingRemove&&p.call(g||m,C,P,m.sounds)})},setRate:function(p){return this.rate=p,this},rate:{get:function(){return this._rate},set:function(p){this._rate=p,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(o.GLOBAL_RATE,this,p)}},setDetune:function(p){return this.detune=p,this},detune:{get:function(){return this._detune},set:function(p){this._detune=p,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,p)}}});r.exports=v},14747:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33684),x=i(25960),f=i(57490),o={create:function(a){var n=a.config.audio,u=a.device.audio;return n.noAudio||!u.webAudio&&!u.audioData?new x(a):u.webAudio&&!n.disableWebAudio?new f(a):new d(a)}};r.exports=o},19723:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},98882:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decodedall"},57506:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decoded"},73146:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},11305:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"},40577:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"},30333:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"},20394:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"},21802:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"},1299:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="looped"},99190:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},97125:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"},89259:r=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pan"},79986:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"},17586:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},19618:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"},42306:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"},10387:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"},48959:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},9960:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seek"},19180:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stopall"},98328:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},50401:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"},52498:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"},14463:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),x=i(83419),f=i(14463),o=i(45319),a=new x({Extends:d,initialize:function(u,c,l){if(l===void 0&&(l={}),this.tags=u.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,d.call(this,u,c,l)},play:function(n,u){return this.manager.isLocked(this,"play",[n,u])||!d.prototype.play.call(this,n,u)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!d.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!d.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(f.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,u=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),u===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+u*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var u=this.tags[n];if(u.dataset.used==="false")return u.dataset.used="true",this.audio=u,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,p){return v.loop===p.loop?p.seek/p.duration-v.seek/v.duration:v.loop?1:-1});var l=c[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(u){console.warn(u)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){d.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(!!this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var u=this.currentMarker?this.currentMarker.start:0,c=u+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=c-this.manager.loopEndOffset?(this.audio.currentTime=u+Math.max(0,l-c),l=this.audio.currentTime):l<u&&(this.audio.currentTime+=u,l=this.audio.currentTime),l<this.previousTime&&this.emit(f.LOOPED,this);else if(l>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(f.COMPLETE,this);return}this.previousTime=l}},destroy:function(){d.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){d.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(f.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(f.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,f.RATE,n)&&(this.calculateRate(),this.emit(f.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,f.DETUNE,n)&&(this.calculateRate(),this.emit(f.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(f.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(f.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(f.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});r.exports=a},33684:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85034),x=i(83419),f=i(14463),o=i(64895),a=new x({Extends:d,initialize:function(u){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,d.call(this,u)},add:function(n,u){var c=new o(this,n,u);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(v,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var u=!1,c=function(){u=!0},l=function(){if(u){u=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",l);var v=[];if(n.game.cache.audio.entries.each(function(g,m){for(var C=0;C<m.length;C++){var P=m[C];P.dataset.locked==="true"&&v.push(P)}return!0}),v.length!==0){var p=v[v.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),n.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(f.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){d.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,u,c){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:u,value:c}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(u){u.updateMute()}),this.emit(f.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(u){u.updateVolume()}),this.emit(f.GLOBAL_VOLUME,this,n)}}});r.exports=a},23717:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),x=i(83419),f=i(50792),o=i(79291),a=i(29747),n=function(){return!1},u=function(){return null},c=function(){return this},l=new x({Extends:f,initialize:function(p,g,m){m===void 0&&(m={}),f.call(this),this.manager=p,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},m),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:u,play:n,pause:n,resume:n,stop:n,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:u,resetConfig:u,update:a,calculateRate:u,destroy:function(){d.prototype.destroy.call(this)}});r.exports=l},25960:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85034),x=i(83419),f=i(50792),o=i(4603),a=i(29747),n=new x({Extends:f,initialize:function(c){f.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(u,c){var l=new o(this,u,c);return this.sounds.push(l),l},addAudioSprite:function(u,c){var l=this.add(u,c);return l.spritemap={},l},get:function(u){return d.prototype.get.call(this,u)},getAll:function(u){return d.prototype.getAll.call(this,u)},play:function(u,c){return!1},playAudioSprite:function(u,c,l){return!1},remove:function(u){return d.prototype.remove.call(this,u)},removeAll:function(){return d.prototype.removeAll.call(this)},removeByKey:function(u){return d.prototype.removeByKey.call(this,u)},stopByKey:function(u){return d.prototype.stopByKey.call(this,u)},onBlur:a,onFocus:a,onGameBlur:a,onGameFocus:a,pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,unlock:a,forEachActiveSound:function(u,c){d.prototype.forEachActiveSound.call(this,u,c)},destroy:function(){d.prototype.destroy.call(this)}});r.exports=n},71741:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),x=i(83419),f=i(14463),o=i(95540),a=new x({Extends:d,initialize:function(u,c,l){if(l===void 0&&(l={}),this.audioBuffer=u.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=u.context.createGain(),this.volumeNode=u.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),u.context.createPanner&&(this.spatialNode=u.context.createPanner(),this.volumeNode.connect(this.spatialNode)),u.context.createStereoPanner?(this.pannerNode=u.context.createStereoPanner(),u.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(u.destination)):u.context.createPanner?this.spatialNode.connect(u.destination):this.volumeNode.connect(u.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,d.call(this,u,c,l)},play:function(n,u){return d.prototype.play.call(this,n,u)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(f.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(f.RESUME,this),!0)},stop:function(){return d.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(f.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,u=this.currentConfig.delay,c=this.manager.context.currentTime+u,l=(this.currentMarker?this.currentMarker.start:0)+n,v=this.duration-n;this.playTime=c-n,this.startTime=c,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,c),Math.max(0,l),Math.max(0,v)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),u=this.currentMarker?this.currentMarker.start:0,c=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,u),Math.max(0,c))},createBufferSource:function(){var n=this,u=this.manager.context.createBufferSource();return u.buffer=this.audioBuffer,u.connect(this.muteNode),u.onended=function(c){c.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},u},stopAndRemoveBufferSource:function(){if(this.source){var n=this.source;this.source=null,n.stop(),n.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var u=this.spatialNode;u.panningModel=o(n,"panningModel","equalpower"),u.distanceModel=o(n,"distanceModel","inverse"),u.orientationX.value=o(n,"orientationX",0),u.orientationY.value=o(n,"orientationY",0),u.orientationZ.value=o(n,"orientationZ",-1),u.refDistance=o(n,"refDistance",1),u.maxDistance=o(n,"maxDistance",1e4),u.rolloffFactor=o(n,"rolloffFactor",1),u.coneInnerAngle=o(n,"coneInnerAngle",360),u.coneOuterAngle=o(n,"coneOuterAngle",0),u.coneOuterGain=o(n,"coneOuterGain",0),this.spatialSource=o(n,"follow",null),this.spatialSource||(u.positionX.value=o(n,"x",0),u.positionY.value=o(n,"y",0),u.positionZ.value=o(n,"z",0))}d.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=o(this.spatialSource,"x",null),u=o(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),u&&u!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=u)}this.hasEnded?(d.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(f.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(f.LOOPED,this))},destroy:function(){this.pendingRemove||(d.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){d.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,u=0;u<this.rateUpdates.length;u++){var c=0;u<this.rateUpdates.length-1?c=this.rateUpdates[u+1].time:c=this.manager.context.currentTime-this.playTime,n+=(c-this.rateUpdates[u].time)*this.rateUpdates[u].rate}return n},getLoopTime:function(){for(var n=0,u=0;u<this.rateUpdates.length-1;u++)n+=(this.rateUpdates[u+1].time-this.rateUpdates[u].time)*this.rateUpdates[u].rate;var c=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+c.time+(this.duration-n)/c.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(f.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(f.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(f.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(f.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(f.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(f.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(f.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});r.exports=a},57490:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(53134),x=i(85034),f=i(83419),o=i(14463),a=i(8443),n=i(71741),u=i(95540),c=new f({Extends:x,initialize:function(v){this.context=this.createAudioContext(v),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),x.call(this,v),this.locked&&v.isBooted?this.unlock():v.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(l){var v=l.config.audio;if(v.context)return v.context.resume(),v.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,v){var p=new n(this,l,v);return this.sounds.push(p),p},decodeAudio:function(l,v){var p;Array.isArray(l)?p=l:p=[{key:l,data:v}];for(var g=this.game.cache.audio,m=p.length,C=0;C<p.length;C++){var P=p[C],M=P.key,E=P.data;typeof E=="string"&&(E=d(E));var w=function(A,L){g.add(A,L),this.emit(o.DECODED,A),m--,m===0&&this.emit(o.DECODED_ALL)}.bind(this,M),R=function(A,L){console.error("Error decoding audio: "+A+" - ",L?L.message:""),m--,m===0&&this.emit(o.DECODED_ALL)}.bind(this,M);this.context.decodeAudioData(E,w,R)}},setListenerPosition:function(l,v){return l===void 0&&(l=this.game.scale.width/2),v===void 0&&(v=this.game.scale.height/2),this.listenerPosition.set(l,v),this},unlock:function(){var l=this,v=document.body,p=function g(){if(l.context&&v){var m=v.removeEventListener.bind(v);l.context.resume().then(function(){m("touchstart",g),m("touchend",g),m("click",g),m("keydown",g),l.unlocked=!0},function(){m("touchstart",g),m("touchend",g),m("click",g),m("keydown",g)})}};v&&(v.addEventListener("touchstart",p,!1),v.addEventListener("touchend",p,!1),v.addEventListener("click",p,!1),v.addEventListener("keydown",p,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var l=this.context;l&&!this.locked&&(l.state==="suspended"||l.state==="interrupted")&&l.resume()},update:function(l,v){var p=this.context.listener;if(p&&p.positionX!==void 0){var g=u(this.listenerPosition,"x",null),m=u(this.listenerPosition,"y",null);g&&g!==this._spatialx&&(this._spatialx=p.positionX.value=g),m&&m!==this._spatialy&&(this._spatialy=p.positionY.value=m)}x.prototype.update.call(this,l,v),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var l=this;this.context.close().then(function(){l.context=null})}x.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(o.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(o.GLOBAL_VOLUME,this,l)}}});r.exports=c},73162:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37105),x=i(83419),f=i(29747),o=i(19186),a=new x({initialize:function(u){this.parent=u,this.list=[],this.position=0,this.addCallback=f,this.removeCallback=f,this._sortKey=""},add:function(n,u){return u?d.Add(this.list,n):d.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,u,c){return c?d.AddAt(this.list,n,u):d.AddAt(this.list,n,u,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,u){return n?(u===void 0&&(u=function(c,l){return c[n]-l[n]}),o(this.list,u),this):this},getByName:function(n){return d.GetFirst(this.list,"name",n)},getRandom:function(n,u){return d.GetRandom(this.list,n,u)},getFirst:function(n,u,c,l){return d.GetFirst(this.list,n,u,c,l)},getAll:function(n,u,c,l){return d.GetAll(this.list,n,u,c,l)},count:function(n,u){return d.CountAllMatching(this.list,n,u)},swap:function(n,u){d.Swap(this.list,n,u)},moveTo:function(n,u){return d.MoveTo(this.list,n,u)},moveAbove:function(n,u){return d.MoveAbove(this.list,n,u)},moveBelow:function(n,u){return d.MoveBelow(this.list,n,u)},remove:function(n,u){return u?d.Remove(this.list,n):d.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,u){return u?d.RemoveAt(this.list,n):d.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,u,c){return c?d.RemoveBetween(this.list,n,u):d.RemoveBetween(this.list,n,u,this.removeCallback,this)},removeAll:function(n){for(var u=this.list.length;u--;)this.remove(this.list[u],n);return this},bringToTop:function(n){return d.BringToTop(this.list,n)},sendToBack:function(n){return d.SendToBack(this.list,n)},moveUp:function(n){return d.MoveUp(this.list,n),n},moveDown:function(n){return d.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(n,u){return d.Replace(this.list,n,u)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,u,c,l){return d.SetAll(this.list,n,u,c,l),this},each:function(n,u){for(var c=[null],l=2;l<arguments.length;l++)c.push(arguments[l]);for(l=0;l<this.list.length;l++)c[0]=this.list[l],n.apply(u,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});r.exports=a},90330:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o){this.entries={},this.size=0,this.setAll(o)},setAll:function(f){if(Array.isArray(f))for(var o=0;o<f.length;o++)this.set(f[o][0],f[o][1]);return this},set:function(f,o){return this.has(f)||this.size++,this.entries[f]=o,this},get:function(f){if(this.has(f))return this.entries[f]},getArray:function(){var f=[],o=this.entries;for(var a in o)f.push(o[a]);return f},has:function(f){return this.entries.hasOwnProperty(f)},delete:function(f){return this.has(f)&&(delete this.entries[f],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(f){delete this.entries[f]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var f=[],o=this.entries;for(var a in o)f.push(o[a]);return f},dump:function(){var f=this.entries;console.group("Map");for(var o in f)console.log(o,f[o]);console.groupEnd()},each:function(f){var o=this.entries;for(var a in o)if(f(a,o[a])===!1)break;return this},contains:function(f){var o=this.entries;for(var a in o)if(o[a]===f)return!0;return!1},merge:function(f,o){o===void 0&&(o=!1);var a=this.entries,n=f.entries;for(var u in n)a.hasOwnProperty(u)&&o?a[u]=n[u]:this.set(u,n[u]);return this}});r.exports=x},25774:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(82348),o=new d({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(a){return this._active.indexOf(a)>-1},isPending:function(a){return this._toProcess>0&&this._pending.indexOf(a)>-1},isDestroying:function(a){return this._destroy.indexOf(a)>-1},add:function(a){return this.checkQueue&&this.isActive(a)&&!this.isDestroying(a)||this.isPending(a)||(this._pending.push(a),this._toProcess++),a},remove:function(a){if(this.isPending(a)){var n=this._pending,u=n.indexOf(a);u!==-1&&n.splice(u,1)}else this.isActive(a)&&(this._destroy.push(a),this._toProcess++);return a},removeAll:function(){for(var a=this._active,n=this._destroy,u=a.length;u--;)n.push(a[u]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var a=this._destroy,n=this._active,u,c;for(u=0;u<a.length;u++){c=a[u];var l=n.indexOf(c);l!==-1&&(n.splice(l,1),this.emit(f.PROCESS_QUEUE_REMOVE,c))}for(a.length=0,a=this._pending,u=0;u<a.length;u++)c=a[u],(!this.checkQueue||this.checkQueue&&n.indexOf(c)===-1)&&(n.push(c),this.emit(f.PROCESS_QUEUE_ADD,c));return a.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});r.exports=o},59542:(r,T,i)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43886);function x(E){if(!(this instanceof x))return new x(E);this._maxEntries=Math.max(4,E||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(E){var w=this.data,R=[],A=this.toBBox;if(!C(E,w))return R;for(var L=[],F,O,b,I;w;){for(F=0,O=w.children.length;F<O;F++)b=w.children[F],I=w.leaf?A(b):b,C(E,I)&&(w.leaf?R.push(b):m(E,I)?this._all(b,R):L.push(b));w=L.pop()}return R},collides:function(E){var w=this.data,R=this.toBBox;if(!C(E,w))return!1;for(var A=[],L,F,O,b;w;){for(L=0,F=w.children.length;L<F;L++)if(O=w.children[L],b=w.leaf?R(O):O,C(E,b)){if(w.leaf||m(E,b))return!0;A.push(O)}w=A.pop()}return!1},load:function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var w=0,R=E.length;w<R;w++)this.insert(E[w]);return this}var A=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var L=this.data;this.data=A,A=L}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(E){return E&&this._insert(E,this.data.height-1),this},clear:function(){return this.data=P([]),this},remove:function(E,w){if(!E)return this;for(var R=this.data,A=this.toBBox(E),L=[],F=[],O,b,I,B;R||L.length;){if(R||(R=L.pop(),b=L[L.length-1],O=F.pop(),B=!0),R.leaf&&(I=f(E,R.children,w),I!==-1))return R.children.splice(I,1),L.push(R),this._condense(L),this;!B&&!R.leaf&&m(R,A)?(L.push(R),F.push(O),O=0,b=R,R=R.children[0]):b?(O++,R=b.children[O],B=!1):R=null}return this},toBBox:function(E){return E},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(E){return this.data=E,this},_all:function(E,w){for(var R=[];E;)E.leaf?w.push.apply(w,E.children):R.push.apply(R,E.children),E=R.pop();return w},_build:function(E,w,R,A){var L=R-w+1,F=this._maxEntries,O;if(L<=F)return O=P(E.slice(w,R+1)),o(O,this.toBBox),O;A||(A=Math.ceil(Math.log(L)/Math.log(F)),F=Math.ceil(L/Math.pow(F,A-1))),O=P([]),O.leaf=!1,O.height=A;var b=Math.ceil(L/F),I=b*Math.ceil(Math.sqrt(F)),B,N,k,Y;for(M(E,w,R,I,this.compareMinX),B=w;B<=R;B+=I)for(k=Math.min(B+I-1,R),M(E,B,k,b,this.compareMinY),N=B;N<=k;N+=b)Y=Math.min(N+b-1,k),O.children.push(this._build(E,N,Y,A-1));return o(O,this.toBBox),O},_chooseSubtree:function(E,w,R,A){for(var L,F,O,b,I,B,N,k;A.push(w),!(w.leaf||A.length-1===R);){for(N=k=1/0,L=0,F=w.children.length;L<F;L++)O=w.children[L],I=l(O),B=p(E,O)-I,B<k?(k=B,N=I<N?I:N,b=O):B===k&&I<N&&(N=I,b=O);w=b||w.children[0]}return w},_insert:function(E,w,R){var A=this.toBBox,L=R?E:A(E),F=[],O=this._chooseSubtree(L,this.data,w,F);for(O.children.push(E),n(O,L);w>=0&&F[w].children.length>this._maxEntries;)this._split(F,w),w--;this._adjustParentBBoxes(L,F,w)},_split:function(E,w){var R=E[w],A=R.children.length,L=this._minEntries;this._chooseSplitAxis(R,L,A);var F=this._chooseSplitIndex(R,L,A),O=P(R.children.splice(F,R.children.length-F));O.height=R.height,O.leaf=R.leaf,o(R,this.toBBox),o(O,this.toBBox),w?E[w-1].children.push(O):this._splitRoot(R,O)},_splitRoot:function(E,w){this.data=P([E,w]),this.data.height=E.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(E,w,R){var A,L,F,O,b,I,B,N;for(I=B=1/0,A=w;A<=R-w;A++)L=a(E,0,A,this.toBBox),F=a(E,A,R,this.toBBox),O=g(L,F),b=l(L)+l(F),O<I?(I=O,N=A,B=b<B?b:B):O===I&&b<B&&(B=b,N=A);return N},_chooseSplitAxis:function(E,w,R){var A=E.leaf?this.compareMinX:u,L=E.leaf?this.compareMinY:c,F=this._allDistMargin(E,w,R,A),O=this._allDistMargin(E,w,R,L);F<O&&E.children.sort(A)},_allDistMargin:function(E,w,R,A){E.children.sort(A);var L=this.toBBox,F=a(E,0,w,L),O=a(E,R-w,R,L),b=v(F)+v(O),I,B;for(I=w;I<R-w;I++)B=E.children[I],n(F,E.leaf?L(B):B),b+=v(F);for(I=R-w-1;I>=w;I--)B=E.children[I],n(O,E.leaf?L(B):B),b+=v(O);return b},_adjustParentBBoxes:function(E,w,R){for(var A=R;A>=0;A--)n(w[A],E)},_condense:function(E){for(var w=E.length-1,R;w>=0;w--)E[w].children.length===0?w>0?(R=E[w-1].children,R.splice(R.indexOf(E[w]),1)):this.clear():o(E[w],this.toBBox)},compareMinX:function(E,w){return E.left-w.left},compareMinY:function(E,w){return E.top-w.top},toBBox:function(E){return{minX:E.left,minY:E.top,maxX:E.right,maxY:E.bottom}}};function f(E,w,R){if(!R)return w.indexOf(E);for(var A=0;A<w.length;A++)if(R(E,w[A]))return A;return-1}function o(E,w){a(E,0,E.children.length,w,E)}function a(E,w,R,A,L){L||(L=P(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var F=w,O;F<R;F++)O=E.children[F],n(L,E.leaf?A(O):O);return L}function n(E,w){return E.minX=Math.min(E.minX,w.minX),E.minY=Math.min(E.minY,w.minY),E.maxX=Math.max(E.maxX,w.maxX),E.maxY=Math.max(E.maxY,w.maxY),E}function u(E,w){return E.minX-w.minX}function c(E,w){return E.minY-w.minY}function l(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function v(E){return E.maxX-E.minX+(E.maxY-E.minY)}function p(E,w){return(Math.max(w.maxX,E.maxX)-Math.min(w.minX,E.minX))*(Math.max(w.maxY,E.maxY)-Math.min(w.minY,E.minY))}function g(E,w){var R=Math.max(E.minX,w.minX),A=Math.max(E.minY,w.minY),L=Math.min(E.maxX,w.maxX),F=Math.min(E.maxY,w.maxY);return Math.max(0,L-R)*Math.max(0,F-A)}function m(E,w){return E.minX<=w.minX&&E.minY<=w.minY&&w.maxX<=E.maxX&&w.maxY<=E.maxY}function C(E,w){return w.minX<=E.maxX&&w.minY<=E.maxY&&w.maxX>=E.minX&&w.maxY>=E.minY}function P(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(E,w,R,A,L){for(var F=[w,R],O;F.length;)R=F.pop(),w=F.pop(),!(R-w<=A)&&(O=w+Math.ceil((R-w)/A/2)*A,d(E,O,w,R,L),F.push(w,O,O,R))}r.exports=x},35072:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var a=0;a<o.length;a++)this.set(o[a])},set:function(f){return this.entries.indexOf(f)===-1&&this.entries.push(f),this},get:function(f,o){for(var a=0;a<this.entries.length;a++){var n=this.entries[a];if(n[f]===o)return n}},getArray:function(){return this.entries.slice(0)},delete:function(f){var o=this.entries.indexOf(f);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var f=0;f<this.entries.length;f++){var o=this.entries[f];console.log(o)}console.groupEnd()},each:function(f,o){var a,n=this.entries.slice(),u=n.length;if(o)for(a=0;a<u&&f.call(o,n[a],a)!==!1;a++);else for(a=0;a<u&&f(n[a],a)!==!1;a++);return this},iterate:function(f,o){var a,n=this.entries.length;if(o)for(a=0;a<n&&f.call(o,this.entries[a],a)!==!1;a++);else for(a=0;a<n&&f(this.entries[a],a)!==!1;a++);return this},iterateLocal:function(f){var o,a=[];for(o=1;o<arguments.length;o++)a.push(arguments[o]);var n=this.entries.length;for(o=0;o<n;o++){var u=this.entries[o];u[f].apply(u,a)}return this},clear:function(){return this.entries.length=0,this},contains:function(f){return this.entries.indexOf(f)>-1},union:function(f){var o=new x;return f.entries.forEach(function(a){o.set(a)}),this.entries.forEach(function(a){o.set(a)}),o},intersect:function(f){var o=new x;return this.entries.forEach(function(a){f.contains(a)&&o.set(a)}),o},difference:function(f){var o=new x;return this.entries.forEach(function(a){f.contains(a)||o.set(a)}),o},size:{get:function(){return this.entries.length},set:function(f){return f<this.entries.length?this.entries.length=f:this.entries.length}}});r.exports=x},86555:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),x=i(83419),f=i(56583),o=i(26099),a=new x({initialize:function(u,c,l,v){u===void 0&&(u=0),c===void 0&&(c=u),l===void 0&&(l=0),v===void 0&&(v=null),this._width=u,this._height=c,this._parent=v,this.aspectMode=l,this.aspectRatio=c===0?1:u/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this.snapTo.set(n,u),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this.minWidth=d(n,0,this.maxWidth),this.minHeight=d(u,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,u){return n===void 0&&(n=Number.MAX_VALUE),u===void 0&&(u=n),this.maxWidth=d(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=d(u,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,u){switch(n===void 0&&(n=0),u===void 0&&(u=n),this.aspectMode){case a.NONE:this._width=this.getNewWidth(f(n,this.snapTo.x)),this._height=this.getNewHeight(f(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(f(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(f(u,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(n,u,!0);break;case a.ENVELOP:this.constrain(n,u,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,u){return this._width=this.getNewWidth(f(n,this.snapTo.x)),this._height=this.getNewHeight(f(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,u){return u===void 0&&(u=!0),n=d(n,this.minWidth,this.maxWidth),u&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,u){return u===void 0&&(u=!0),n=d(n,this.minHeight,this.maxHeight),u&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,u,c){n===void 0&&(n=0),u===void 0&&(u=n),c===void 0&&(c=!0),n=this.getNewWidth(n),u=this.getNewHeight(u);var l=this.snapTo,v=u===0?1:n/u;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(n=f(n,l.x),u=n/this.aspectRatio,l.y>0&&(u=f(u,l.y),n=u*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(u=f(u,l.y),n=u*this.aspectRatio,l.x>0&&(n=f(n,l.x),u=n*(1/this.aspectRatio))),this._width=n,this._height=u,this},fitTo:function(n,u){return this.constrain(n,u,!0)},envelop:function(n,u){return this.constrain(n,u,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,r.exports=a},15238:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},56187:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},82348:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(45319),f=i(40987),o=i(8054),a=i(50030),n=i(79237),u=new d({Extends:n,initialize:function(l,v,p,g,m){n.call(this,l,v,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(c,l,v,p){return p===void 0&&(p=!0),this.context.drawImage(v,c,l),p&&this.update(),this},drawFrame:function(c,l,v,p,g){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=!0);var m=this.manager.getFrame(c,l);if(m){var C=m.canvasData,P=m.cutWidth,M=m.cutHeight,E=m.source.resolution;this.context.drawImage(m.source.image,C.x,C.y,P,M,v,p,P/E,M/E),g&&this.update()}return this},setPixel:function(c,l,v,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),l=Math.abs(Math.floor(l));var C=this.getIndex(c,l);if(C>-1){var P=this.context.getImageData(c,l,1,1);P.data[0]=v,P.data[1]=p,P.data[2]=g,P.data[3]=m,this.context.putImageData(P,c,l)}return this},putData:function(c,l,v,p,g,m,C){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),C===void 0&&(C=c.height),this.context.putImageData(c,l,v,p,g,m,C),this},getData:function(c,l,v,p){c=x(Math.floor(c),0,this.width-1),l=x(Math.floor(l),0,this.height-1),v=x(v,1,this.width-c),p=x(p,1,this.height-l);var g=this.context.getImageData(c,l,v,p);return g},getPixel:function(c,l,v){v||(v=new f);var p=this.getIndex(c,l);if(p>-1){var g=this.data,m=g[p+0],C=g[p+1],P=g[p+2],M=g[p+3];v.setTo(m,C,P,M)}return v},getPixels:function(c,l,v,p){c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=this.width),p===void 0&&(p=v),c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l));for(var g=x(c,0,this.width),m=x(c+v,0,this.width),C=x(l,0,this.height),P=x(l+p,0,this.height),M=new f,E=[],w=C;w<P;w++){for(var R=[],A=g;A<m;A++)M=this.getPixel(A,w,M),R.push({x:A,y:w,color:M.color,alpha:M.alphaGL});E.push(R)}return E},getIndex:function(c,l){return c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l)),c<this.width&&l<this.height?(c+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,l,v,p,g){return c===void 0&&(c=0),l===void 0&&(l=0),v===void 0&&(v=this.width),p===void 0&&(p=this.height),g===void 0&&(g=!0),this.context.clearRect(c,l,v,p),g&&this.update(),this},setSize:function(c,l){return l===void 0&&(l=c),(c!==this.width||l!==this.height)&&(this.canvas.width=c,this.canvas.height=l,this._source.width=c,this._source.height=l,this._source.isPowerOf2=a(c,l),this.frames.__BASE.setSize(c,l,0,0),this.width=c,this.height=l,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});r.exports=u},81320:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),x=i(71911),f=i(27919),o=i(83419),a=i(8054),n=i(4327),u=i(95540),c=i(36060),l=i(32302),v=i(79237),p=i(70554),g=new o({Extends:v,initialize:function(C,P,M,E){M===void 0&&(M=256),E===void 0&&(E=256),this.type="DynamicTexture";var w=C.game.renderer,R=w&&w.type===a.CANVAS,A=R?f.create2D(this,M,E):[this];v.call(this,C,P,A,M,E),this.add("__BASE",0,0,0,M,E),this.renderer=w,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=R?A:null,this.context=R?A.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,M,E).setScene(C.game.scene.systemScene,!1),this.renderTarget=R?null:new l(w,M,E,1,0,!1,!0,!0,!1),this.pipeline=R?null:w.pipelines.get(c.SINGLE_PIPELINE),this.setSize(M,E)},setSize:function(m,C){C===void 0&&(C=m);var P=this.get(),M=P.source;if(m!==this.width||C!==this.height){this.canvas&&(this.canvas.width=m,this.canvas.height=C);var E=this.renderTarget;E&&(E.willResize(m,C)&&E.resize(m,C),E.texture!==M.glTexture&&this.renderer.deleteTexture(M.glTexture),this.setFromRenderTarget()),this.camera.setSize(m,C),M.width=m,M.height=C,P.setSize(m,C),this.width=m,this.height=C}else{var w=this.getSourceImage();P.cutX+m>w.width&&(m=w.width-P.cutX),P.cutY+C>w.height&&(C=w.height-P.cutY),P.setSize(m,C,P.cutX,P.cutY)}return this},setFromRenderTarget:function(){var m=this.get(),C=m.source,P=this.renderTarget;return C.isRenderTexture=!0,C.isGLTexture=!0,C.glTexture=P.texture,this},setIsSpriteTexture:function(m){return this.isSpriteTexture=m,this},fill:function(m,C,P,M,E,w){var R=this.camera,A=this.renderer;C===void 0&&(C=1),P===void 0&&(P=0),M===void 0&&(M=0),E===void 0&&(E=this.width),w===void 0&&(w=this.height);var L=m>>16&255,F=m>>8&255,O=m&255,b=this.renderTarget;if(R.preRender(),b){b.bind(!0);var I=this.pipeline.manager.set(this.pipeline),B=A.width/b.width,N=A.height/b.height,k=b.height-(M+w);I.drawFillRect(P*B,k*N,E*B,w*N,p.getTintFromFloats(O/255,F/255,L/255,1),C),b.unbind(!0)}else{var Y=this.context;A.setContext(Y),Y.globalCompositeOperation="source-over",Y.fillStyle="rgba("+L+","+F+","+O+","+C+")",Y.fillRect(P,M,E,w),A.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var m=this.context,C=this.renderTarget;C?C.clear():m&&(m.save(),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,this.width,this.height),m.restore()),this.dirty=!1}return this},stamp:function(m,C,P,M,E){P===void 0&&(P=0),M===void 0&&(M=0);var w=u(E,"alpha",1),R=u(E,"tint",16777215),A=u(E,"angle",0),L=u(E,"rotation",0),F=u(E,"scale",1),O=u(E,"scaleX",F),b=u(E,"scaleY",F),I=u(E,"originX",.5),B=u(E,"originY",.5),N=u(E,"blendMode",0),k=u(E,"erase",!1),Y=u(E,"skipBatch",!1),H=this.manager.resetStamp(w,R);return H.setAngle(0),A!==0?H.setAngle(A):L!==0&&H.setRotation(L),H.setScale(O,b),H.setTexture(m,C),H.setOrigin(I,B),H.setBlendMode(N),k&&(this._eraseMode=!0),Y?this.batchGameObject(H,P,M):this.draw(H,P,M),k&&(this._eraseMode=!1),this},erase:function(m,C,P){return this._eraseMode=!0,this.draw(m,C,P),this._eraseMode=!1,this},draw:function(m,C,P,M,E){return this.beginDraw(),this.batchDraw(m,C,P,M,E),this.endDraw(),this},drawFrame:function(m,C,P,M,E,w){return this.beginDraw(),this.batchDrawFrame(m,C,P,M,E,w),this.endDraw(),this},repeat:function(m,C,P,M,E,w,R,A,L){if(P===void 0&&(P=0),M===void 0&&(M=0),E===void 0&&(E=this.width),w===void 0&&(w=this.height),R===void 0&&(R=1),A===void 0&&(A=16777215),L===void 0&&(L=!1),m instanceof n?C=m:C=this.manager.getFrame(m,C),!C)return this;var F=this.manager.resetStamp(R,A);F.setFrame(C),F.setOrigin(0);var O=C.width,b=C.height;E=Math.floor(E),w=Math.floor(w);var I=Math.ceil(E/O),B=Math.ceil(w/b),N=I*O-E,k=B*b-w;N>0&&(N=O-N),k>0&&(k=b-k),P<0&&(I+=Math.ceil(Math.abs(P)/O)),M<0&&(B+=Math.ceil(Math.abs(M)/b));var Y=P,H=M,z=!1,X=this.manager.stampCrop.setTo(0,0,O,b);L||this.beginDraw();for(var D=0;D<B;D++){if(H+b<0){H+=b;continue}for(var G=0;G<I;G++){if(z=!1,Y+O<0){Y+=O;continue}else Y<0&&(z=!0,X.width=O+Y,X.x=O-X.width);H<0&&(z=!0,X.height=b+H,X.y=b-X.height),N>0&&G===I-1&&(z=!0,X.width=N),k>0&&D===B-1&&(z=!0,X.height=k),z&&F.setCrop(X),this.batchGameObject(F,Y,H),F.isCropped=!1,X.setTo(0,0,O,b),Y+=O}Y=P,H+=b}return L||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var m=this.camera,C=this.renderer,P=this.renderTarget;m.preRender(),P?C.beginCapture(P.width,P.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(m,C,P,M,E){return Array.isArray(m)||(m=[m]),this.batchList(m,C,P,M,E),this},batchDrawFrame:function(m,C,P,M,E,w){P===void 0&&(P=0),M===void 0&&(M=0),E===void 0&&(E=1),w===void 0&&(w=16777215);var R=this.manager.getFrame(m,C);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,P,M,w,E,this.camera.matrix,null):this.batchTextureFrame(R,P,M,E,w)),this},endDraw:function(m){if(m===void 0&&(m=this._eraseMode),this.isDrawing){var C=this.renderer,P=this.renderTarget;if(P){var M=C.endCapture(),E=C.pipelines.setUtility();E.blitFrame(M,P,1,!1,!1,m,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(m,C,P,M,E){var w=m.length;if(w!==0)for(var R=0;R<w;R++){var A=m[R];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,C,P):A.isParent||A.list?this.batchGroup(A.getChildren(),C,P):typeof A=="string"?this.batchTextureFrameKey(A,null,C,P,M,E):A instanceof n?this.batchTextureFrame(A,C,P,M,E):Array.isArray(A)&&this.batchList(A,C,P,M,E))}},batchGroup:function(m,C,P){C===void 0&&(C=0),P===void 0&&(P=0);for(var M=0;M<m.length;M++){var E=m[M];E.willRender(this.camera)&&this.batchGameObject(E,E.x+C,E.y+P)}},batchGameObject:function(m,C,P){C===void 0&&(C=m.x),P===void 0&&(P=m.y);var M=m.x,E=m.y,w=this.camera,R=this.renderer,A=this._eraseMode,L=m.mask;if(m.setPosition(C,P),this.canvas){if(A){var F=m.blendMode;m.blendMode=d.ERASE}L&&L.preRenderCanvas(R,m,w),m.renderCanvas(R,m,w,null),L&&L.postRenderCanvas(R,m,w),A&&(m.blendMode=F)}else R&&(L&&L.preRenderWebGL(R,m,w),A||R.setBlendMode(m.blendMode),m.renderWebGL(R,m,w),L&&L.postRenderWebGL(R,w,this.renderTarget));m.setPosition(M,E)},batchTextureFrameKey:function(m,C,P,M,E,w){var R=this.manager.getFrame(m,C);R&&this.batchTextureFrame(R,P,M,E,w)},batchTextureFrame:function(m,C,P,M,E){C===void 0&&(C=0),P===void 0&&(P=0),M===void 0&&(M=1),E===void 0&&(E=16777215);var w=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(m,C,P,E,M,w,null);else{var A=this.context,L=m.canvasData,F=m.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=M,w.setToContext(A),L.width>0&&L.height>0&&A.drawImage(F,L.x,L.y,L.width,L.height,C,P,L.width,L.height),A.restore()}},snapshotArea:function(m,C,P,M,E,w,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!1,m,C,P,M,w,R):this.renderer.snapshotCanvas(this.canvas,E,!1,m,C,P,M,w,R),this},snapshot:function(m,C,P){return this.snapshotArea(0,0,this.width,this.height,m,C,P)},snapshotPixel:function(m,C,P){return this.snapshotArea(m,C,1,1,P,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(m,C,P,M){var E=this.manager.resetStamp();E.setTexture(this),E.setOrigin(0),E.renderWebGL(m,E,P,M)},renderCanvas:function(){},destroy:function(){var m=this.manager.stamp;m&&m.texture===this&&this.manager.resetStamp(),v.prototype.destroy.call(this),f.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});r.exports=g},4327:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(45319),f=i(79291),o=new d({initialize:function(n,u,c,l,v,p,g){this.texture=n,this.name=u,this.source=n.source[c],this.sourceIndex=c,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(p,g,l,v)},setSize:function(a,n,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.cutX=u,this.cutY=c,this.cutWidth=a,this.cutHeight=n,this.width=a,this.height=n,this.halfWidth=Math.floor(a*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(a/2),this.centerY=Math.floor(n/2);var l=this.data,v=l.cut;v.x=u,v.y=c,v.w=a,v.h=n,v.r=u+a,v.b=c+n,l.sourceSize.w=a,l.sourceSize.h=n,l.spriteSourceSize.w=a,l.spriteSourceSize.h=n,l.radius=.5*Math.sqrt(a*a+n*n);var p=l.drawImage;return p.x=u,p.y=c,p.width=a,p.height=n,this.updateUVs()},setTrim:function(a,n,u,c,l,v){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=a,p.sourceSize.h=n,g.x=u,g.y=c,g.w=l,g.h=v,g.r=u+l,g.b=c+v,this.x=u,this.y=c,this.width=l,this.height=v,this.halfWidth=l*.5,this.halfHeight=v*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(v/2),this.updateUVs()},setScale9:function(a,n,u,c){var l=this.data;return l.scale9=!0,l.is3Slice=n===0&&c===this.height,l.scale9Borders.x=a,l.scale9Borders.y=n,l.scale9Borders.w=u,l.scale9Borders.h=c,this},setCropUVs:function(a,n,u,c,l,v,p){var g=this.cutX,m=this.cutY,C=this.cutWidth,P=this.cutHeight,M=this.realWidth,E=this.realHeight;n=x(n,0,M),u=x(u,0,E),c=x(c,0,M-n),l=x(l,0,E-u);var w=g+n,R=m+u,A=c,L=l,F=this.data;if(F.trim){var O=F.spriteSourceSize;c=x(c,0,C-n),l=x(l,0,P-u);var b=n+c,I=u+l,B=!(O.r<n||O.b<u||O.x>b||O.y>I);if(B){var N=Math.max(O.x,n),k=Math.max(O.y,u),Y=Math.min(O.r,b)-N,H=Math.min(O.b,I)-k;A=Y,L=H,v?w=g+(C-(N-O.x)-Y):w=g+(N-O.x),p?R=m+(P-(k-O.y)-H):R=m+(k-O.y),n=N,u=k,c=Y,l=H}else w=0,R=0,A=0,L=0}else v&&(w=g+(C-n-c)),p&&(R=m+(P-u-l));var z=this.source.width,X=this.source.height;return a.u0=Math.max(0,w/z),a.v0=Math.max(0,R/X),a.u1=Math.min(1,(w+A)/z),a.v1=Math.min(1,(R+L)/X),a.x=n,a.y=u,a.cx=w,a.cy=R,a.cw=A,a.ch=L,a.width=c,a.height=l,a.flipX=v,a.flipY=p,a},updateCropUVs:function(a,n,u){return this.setCropUVs(a,a.x,a.y,a.width,a.height,n,u)},setUVs:function(a,n,u,c,l,v){var p=this.data.drawImage;return p.width=a,p.height=n,this.u0=u,this.v0=c,this.u1=l,this.v1=v,this},updateUVs:function(){var a=this.cutX,n=this.cutY,u=this.cutWidth,c=this.cutHeight,l=this.data.drawImage;l.width=u,l.height=c;var v=this.source.width,p=this.source.height;return this.u0=a/v,this.v0=n/p,this.u1=(a+u)/v,this.v1=(n+c)/p,this},updateUVsInverted:function(){var a=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/a,this.v0=this.cutY/n,this.u1=this.cutX/a,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var a=new o(this.texture,this.name,this.sourceIndex);return a.cutX=this.cutX,a.cutY=this.cutY,a.cutWidth=this.cutWidth,a.cutHeight=this.cutHeight,a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a.halfWidth=this.halfWidth,a.halfHeight=this.halfHeight,a.centerX=this.centerX,a.centerY=this.centerY,a.rotated=this.rotated,a.data=f(!0,a.data,this.data),a.updateUVs(),a},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});r.exports=o},79237:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(4327),f=i(11876),o='Texture "%s" has no frame "%s"',a=new d({initialize:function(u,c,l,v,p){Array.isArray(l)||(l=[l]),this.manager=u,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<l.length;g++)this.source.push(new f(this,l[g],v,p))},add:function(n,u,c,l,v,p){if(this.has(n))return null;var g=new x(this,n,u,c,l,v,p);return this.frames[n]=g,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,g},remove:function(n){if(this.has(n)){var u=this.get(n);return u.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var u=this.frames[n];return u||(console.warn(o,this.key,n),u=this.frames[this.firstFrame]),u},getTextureSourceIndex:function(n){for(var u=0;u<this.source.length;u++)if(this.source[u]===n)return u;return-1},getFramesFromTextureSource:function(n,u){u===void 0&&(u=!1);var c=[];for(var l in this.frames)if(!(l==="__BASE"&&!u)){var v=this.frames[l];v.sourceIndex===n&&c.push(v)}return c},getFrameBounds:function(n){n===void 0&&(n=0);for(var u=this.getFramesFromTextureSource(n),c=1/0,l=1/0,v=0,p=0,g=0;g<u.length;g++){var m=u[g];m.cutX<c&&(c=m.cutX),m.cutY<l&&(l=m.cutY),m.cutX+m.cutWidth>v&&(v=m.cutX+m.cutWidth),m.cutY+m.cutHeight>p&&(p=m.cutY+m.cutHeight)}return{x:c,y:l,width:v-c,height:p-l}},getFrameNames:function(n){n===void 0&&(n=!1);var u=Object.keys(this.frames);if(!n){var c=u.indexOf("__BASE");c!==-1&&u.splice(c,1)}return u},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var u=this.frames[n];return u?u.source.image:(console.warn(o,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var u=this.frames[n],c;return u?c=u.sourceIndex:(console.warn(o,this.key,n),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var c=this.source[u];this.dataSource.push(new f(this,n[u],c.width,c.height))}},setFilter:function(n){var u;for(u=0;u<this.source.length;u++)this.source[u].setFilter(n);for(u=0;u<this.dataSource.length;u++)this.dataSource[u].setFilter(n)},destroy:function(){var n,u=this.source,c=this.dataSource;for(n=0;n<u.length;n++)u[n]&&u[n].destroy();for(n=0;n<c.length;n++)c[n]&&c[n].destroy();for(var l in this.frames){var v=this.frames[l];v&&v.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});r.exports=a},17130:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=i(57382),f=i(83419),o=i(40987),a=i(8054),n=i(81320),u=i(50792),c=i(69442),l=i(4327),v=i(8443),p=i(99584),g=i(35154),m=i(88571),C=i(41212),P=i(61309),M=i(87841),E=i(79237),w=new f({Extends:u,initialize:function(A){u.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=d.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new M,this.silentWarnings=!1,A.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var R=this.game.config;this.addBase64("__DEFAULT",R.defaultImage),this.addBase64("__MISSING",R.missingImage),this.addBase64("__WHITE",R.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(v.DESTROY,this.destroy,this),this.game.events.once(v.SYSTEM_READY,function(A){this.stamp=new m(A).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(R){return this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var A=R.key;return this.list.hasOwnProperty(A)&&(R.destroy(),this.emit(c.REMOVE,A),this.emit(c.REMOVE_KEY+A)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,A){if(this.checkKey(R)){var L=this,F=new Image;F.onerror=function(){L.emit(c.ERROR,R)},F.onload=function(){var O=L.create(R,F);P.Image(O,0),L.emit(c.ADD,R,O),L.emit(c.ADD_KEY+R,O),L.emit(c.LOAD,R,O)},F.src=A}return this},getBase64:function(R,A,L,F){L===void 0&&(L="image/png"),F===void 0&&(F=.92);var O="",b=this.getFrame(R,A);if(b&&(b.source.isRenderTexture||b.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(b){var I=b.canvasData,B=d.create2D(this,I.width,I.height),N=B.getContext("2d",{willReadFrequently:!0});I.width>0&&I.height>0&&N.drawImage(b.source.image,I.x,I.y,I.width,I.height,0,0,I.width,I.height),O=B.toDataURL(L,F),d.remove(B)}return O},addImage:function(R,A,L){var F=null;return this.checkKey(R)&&(F=this.create(R,A),P.Image(F,0),L&&F.setDataSource(L),this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addGLTexture:function(R,A){var L=null;if(this.checkKey(R)){var F=A.width,O=A.height;L=this.create(R,A,F,O),L.add("__BASE",0,0,0,F,O),this.emit(c.ADD,R,L),this.emit(c.ADD_KEY+R,L)}return L},addCompressedTexture:function(R,A,L){var F=null;if(this.checkKey(R)){if(F=this.create(R,A),F.add("__BASE",0,0,0,A.width,A.height),L){var O=function(I,B,N){Array.isArray(N.textures)||Array.isArray(N.frames)?P.JSONArray(I,B,N):P.JSONHash(I,B,N)};if(Array.isArray(L))for(var b=0;b<L.length;b++)O(F,b,L[b]);else O(F,0,L)}this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)}return F},addRenderTexture:function(R,A){var L=null;return this.checkKey(R)&&(L=this.create(R,A),L.add("__BASE",0,0,0,A.width,A.height),this.emit(c.ADD,R,L),this.emit(c.ADD_KEY+R,L)),L},generate:function(R,A){if(this.checkKey(R)){var L=d.create(this,1,1);return A.canvas=L,p(A),this.addCanvas(R,L)}else return null},createCanvas:function(R,A,L){if(A===void 0&&(A=256),L===void 0&&(L=256),this.checkKey(R)){var F=d.create(this,A,L,a.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,A,L){L===void 0&&(L=!1);var F=null;return L?F=new x(this,R,A,A.width,A.height):this.checkKey(R)&&(F=new x(this,R,A,A.width,A.height),this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addDynamicTexture:function(R,A,L){var F=null;return typeof R=="string"&&!this.exists(R)?F=new n(this,R,A,L):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,A,L,F){return Array.isArray(L.textures)||Array.isArray(L.frames)?this.addAtlasJSONArray(R,A,L,F):this.addAtlasJSONHash(R,A,L,F)},addAtlasJSONArray:function(R,A,L,F){var O=null;if(A instanceof E?(R=A.key,O=A):this.checkKey(R)&&(O=this.create(R,A)),O){if(Array.isArray(L))for(var b=L.length===1,I=0;I<O.source.length;I++){var B=b?L[0]:L[I];P.JSONArray(O,I,B)}else P.JSONArray(O,0,L);F&&O.setDataSource(F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)}return O},addAtlasJSONHash:function(R,A,L,F){var O=null;if(A instanceof E?(R=A.key,O=A):this.checkKey(R)&&(O=this.create(R,A)),O){if(Array.isArray(L))for(var b=0;b<L.length;b++)P.JSONHash(O,b,L[b]);else P.JSONHash(O,0,L);F&&O.setDataSource(F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)}return O},addAtlasXML:function(R,A,L,F){var O=null;return A instanceof E?(R=A.key,O=A):this.checkKey(R)&&(O=this.create(R,A)),O&&(P.AtlasXML(O,0,L),F&&O.setDataSource(F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)),O},addUnityAtlas:function(R,A,L,F){var O=null;return A instanceof E?(R=A.key,O=A):this.checkKey(R)&&(O=this.create(R,A)),O&&(P.UnityYAML(O,0,L),F&&O.setDataSource(F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)),O},addSpriteSheet:function(R,A,L,F){var O=null;if(A instanceof E?(R=A.key,O=A):this.checkKey(R)&&(O=this.create(R,A)),O){var b=O.source[0].width,I=O.source[0].height;P.SpriteSheet(O,0,0,0,b,I,L),F&&O.setDataSource(F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)}return O},addSpriteSheetFromAtlas:function(R,A){if(!this.checkKey(R))return null;var L=g(A,"atlas",null),F=g(A,"frame",null);if(!(!L||!F)){var O=this.get(L),b=O.get(F);if(b){var I=b.source.image;I||(I=b.source.glTexture);var B=this.create(R,I);return b.trimmed?P.SpriteSheetFromAtlas(B,b,A):P.SpriteSheet(B,0,b.cutX,b.cutY,b.cutWidth,b.cutHeight,A),this.emit(c.ADD,R,B),this.emit(c.ADD_KEY+R,B),B}}},addUint8Array:function(R,A,L,F){if(!this.checkKey(R)||A.length/4!==L*F)return null;var O=this.create(R,A,L,F);return O.add("__BASE",0,0,0,L,F),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O),O},create:function(R,A,L,F){var O=null;return this.checkKey(R)&&(O=new E(this,R,A,L,F),this.list[R]=O),O},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof E?R:R instanceof l?R.texture:this.list.__MISSING},cloneFrame:function(R,A){if(this.list[R])return this.list[R].get(A).clone()},getFrame:function(R,A){if(this.list[R])return this.list[R].get(A)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(C(R))return this.getFrame(R.key,R.frame);if(R instanceof E)return R.get();if(R instanceof l)return R}else return},getTextureKeys:function(){var R=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&A!=="__NORMAL"&&R.push(A);return R},getPixel:function(R,A,L,F){var O=this.getFrame(L,F);if(O){R-=O.x,A-=O.y;var b=O.data.cut;if(R+=b.x,A+=b.y,R>=b.x&&R<b.r&&A>=b.y&&A<b.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(O.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return new o(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(R,A,L,F){var O=this.getFrame(L,F);if(O){R-=O.x,A-=O.y;var b=O.data.cut;if(R+=b.x,A+=b.y,R>=b.x&&R<b.r&&A>=b.y&&A<b.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(O.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(R,A,L){return this.list[A]&&(R.texture=this.list[A],R.frame=R.texture.get(L)),R},renameTexture:function(R,A){var L=this.get(R);return L&&R!==A?(L.key=A,this.list[A]=L,delete this.list[R],!0):!1},each:function(R,A){for(var L=[null],F=1;F<arguments.length;F++)L.push(arguments[F]);for(var O in this.list)L[0]=this.list[O],R.apply(A,L)},resetStamp:function(R,A){R===void 0&&(R=1),A===void 0&&(A=16777215);var L=this.stamp;return L.setCrop(),L.setPosition(0),L.setAngle(0),L.setScale(1),L.setAlpha(R),L.setTint(A),L.setTexture("__WHITE"),L},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,d.remove(this._tempCanvas)}});r.exports=w},11876:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),x=i(83419),f=i(50030),o=i(29795),a=i(82751),n=new x({initialize:function(c,l,v,p,g){g===void 0&&(g=!1);var m=c.manager.game;this.renderer=m.renderer,this.texture=c,this.source=l,this.image=l.compressed?null:l,this.compressionAlgorithm=l.compressed?l.format:null,this.resolution=1,this.width=v||l.naturalWidth||l.videoWidth||l.width||0,this.height=p||l.naturalHeight||l.videoHeight||l.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=l instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&l instanceof HTMLVideoElement,this.isRenderTexture=l.type==="RenderTexture"||l.type==="DynamicTexture",this.isGLTexture=l instanceof a,this.isPowerOf2=f(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(m)},init:function(u){var c=this.renderer;if(c){var l=this.source;if(c.gl){var v=this.image,p=this.flipY,g=this.width,m=this.height,C=this.scaleMode;this.isCanvas?this.glTexture=c.createCanvasTexture(v,!1,p):this.isVideo?this.glTexture=c.createVideoTexture(v,!1,p):this.isRenderTexture?this.glTexture=c.createTextureFromSource(null,g,m,C):this.isGLTexture?this.glTexture=l:this.compressionAlgorithm?this.glTexture=c.createTextureFromSource(l,void 0,void 0,C):l instanceof Uint8Array?this.glTexture=c.createUint8ArrayTexture(l,g,m,C):this.glTexture=c.createTextureFromSource(v,g,m,C)}else this.isRenderTexture&&(this.image=l.canvas)}u.config.antialias||this.setFilter(1)},setFilter:function(u){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,u),this.scaleMode=u},setFlipY:function(u){return u===void 0&&(u=!0),u===this.flipY?this:(this.flipY=u,this.update(),this)},update:function(){var u=this.renderer,c=this.image,l=this.flipY,v=u.gl;v&&this.isCanvas?u.updateCanvasTexture(c,this.glTexture,l):v&&this.isVideo&&u.updateVideoTexture(c,this.glTexture,l)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&d.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});r.exports=n},19673:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};r.exports=T},44538:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture"},63486:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture-"},94851:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onerror"},29099:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onload"},8678:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},86415:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture"},30879:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture-"},69442:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=i(19673),f={CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:x,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)};f=d(!1,f,x),r.exports=f},89905:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var f=i.source[d];i.add("__BASE",d,0,0,f.width,f.height);for(var o=x.getElementsByTagName("SubTexture"),a,n=0;n<o.length;n++){var u=o[n].attributes,c=u.name.value,l=parseInt(u.x.value,10),v=parseInt(u.y.value,10),p=parseInt(u.width.value,10),g=parseInt(u.height.value,10);if(a=i.add(c,d,l,v,p,g),u.frameX){var m=Math.abs(parseInt(u.frameX.value,10)),C=Math.abs(parseInt(u.frameY.value,10)),P=parseInt(u.frameWidth.value,10),M=parseInt(u.frameHeight.value,10);a.setTrim(p,g,m,C,P,M)}}return i};r.exports=T},72893:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.source[d];return i.add("__BASE",d,0,0,x.width,x.height),i};r.exports=T},4832:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.source[d];return i.add("__BASE",d,0,0,x.width,x.height),i};r.exports=T},78566:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),x=function(f,o,a){if(!a.frames&&!a.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=f.source[o];f.add("__BASE",o,0,0,n.width,n.height);for(var u=Array.isArray(a.textures)?a.textures[o].frames:a.frames,c,l=0;l<u.length;l++){var v=u[l];if(c=f.add(v.filename,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+v.filename);continue}v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),v.scale9Borders&&c.setScale9(v.scale9Borders.x,v.scale9Borders.y,v.scale9Borders.w,v.scale9Borders.h),c.customData=d(v)}for(var g in a)g!=="frames"&&(Array.isArray(a[g])?f.customData[g]=a[g].slice(0):f.customData[g]=a[g]);return f};r.exports=x},39711:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),x=function(f,o,a){if(!a.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=f.source[o];f.add("__BASE",o,0,0,n.width,n.height);var u=a.frames,c;for(var l in u)if(!!u.hasOwnProperty(l)){var v=u[l];if(c=f.add(l,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+l);continue}v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),v.scale9Borders&&c.setScale9(v.scale9Borders.x,v.scale9Borders.y,v.scale9Borders.w,v.scale9Borders.h),c.customData=d(v)}for(var g in a)g!=="frames"&&(Array.isArray(a[g])?f.customData[g]=a[g].slice(0):f.customData[g]=a[g]);return f};r.exports=x},31403:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=[171,75,84,88,32,49,49,187,13,10,26,10],x,f=new Uint8Array(i,0,12);for(x=0;x<f.length;x++)if(f[x]!==d[x]){console.warn("KTXParser - Invalid file format");return}var o=Uint32Array.BYTES_PER_ELEMENT,a=new DataView(i,12,13*o),n=a.getUint32(0,!0)===67305985,u=a.getUint32(1*o,n);if(u!==0){console.warn("KTXParser - Only compressed formats supported");return}var c=a.getUint32(4*o,n),l=a.getUint32(6*o,n),v=a.getUint32(7*o,n),p=Math.max(1,a.getUint32(11*o,n)),g=a.getUint32(12*o,n),m=new Array(p),C=12+13*4+g,P=l,M=v;for(x=0;x<p;x++){var E=new Int32Array(i,C,1)[0];C+=4,m[x]={data:new Uint8Array(i,C,E),width:P,height:M},P=Math.max(1,P>>1),M=Math.max(1,M>>1),C+=E}return{mipmaps:m,width:l,height:v,internalFormat:c,compressed:!0,generateMipmap:!1}};r.exports=T},82038:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(A,L,F,O,b,I,B){return B===void 0&&(B=16),Math.floor((A+F)/b)*Math.floor((L+O)/I)*B}function i(A,L){return A=Math.max(A,16),L=Math.max(L,8),A*L/4}function d(A,L){return A=Math.max(A,8),L=Math.max(L,8),A*L/2}function x(A,L){return Math.ceil(A/4)*Math.ceil(L/4)*16}function f(A,L){return T(A,L,3,3,4,4,8)}function o(A,L){return T(A,L,3,3,4,4)}function a(A,L){return T(A,L,4,3,5,4)}function n(A,L){return T(A,L,4,4,5,5)}function u(A,L){return T(A,L,5,4,6,5)}function c(A,L){return T(A,L,5,5,6,6)}function l(A,L){return T(A,L,7,4,8,5)}function v(A,L){return T(A,L,7,5,8,6)}function p(A,L){return T(A,L,7,7,8,8)}function g(A,L){return T(A,L,9,4,10,5)}function m(A,L){return T(A,L,9,5,10,6)}function C(A,L){return T(A,L,9,7,10,8)}function P(A,L){return T(A,L,9,9,10,10)}function M(A,L){return T(A,L,11,9,12,10)}function E(A,L){return T(A,L,11,11,12,12)}var w={0:{sizeFunc:i,glFormat:[35841]},1:{sizeFunc:i,glFormat:[35843]},2:{sizeFunc:d,glFormat:[35840]},3:{sizeFunc:d,glFormat:[35842]},6:{sizeFunc:f,glFormat:[36196]},7:{sizeFunc:f,glFormat:[33776,35916]},8:{sizeFunc:o,glFormat:[33777,35917]},9:{sizeFunc:o,glFormat:[33778,35918]},11:{sizeFunc:o,glFormat:[33779,35919]},14:{sizeFunc:x,glFormat:[36494,36495]},15:{sizeFunc:x,glFormat:[36492,36493]},22:{sizeFunc:f,glFormat:[37492,37493]},23:{sizeFunc:o,glFormat:[37496,37497]},24:{sizeFunc:f,glFormat:[37494,37495]},25:{sizeFunc:f,glFormat:[37488]},26:{sizeFunc:o,glFormat:[37490]},27:{sizeFunc:o,glFormat:[37808,37840]},28:{sizeFunc:a,glFormat:[37809,37841]},29:{sizeFunc:n,glFormat:[37810,37842]},30:{sizeFunc:u,glFormat:[37811,37843]},31:{sizeFunc:c,glFormat:[37812,37844]},32:{sizeFunc:l,glFormat:[37813,37845]},33:{sizeFunc:v,glFormat:[37814,37846]},34:{sizeFunc:p,glFormat:[37815,37847]},35:{sizeFunc:g,glFormat:[37816,37848]},36:{sizeFunc:m,glFormat:[37817,37849]},37:{sizeFunc:C,glFormat:[37818,37850]},38:{sizeFunc:P,glFormat:[37819,37851]},39:{sizeFunc:M,glFormat:[37820,37852]},40:{sizeFunc:E,glFormat:[37821,37853]}},R=function(A){for(var L=new Uint32Array(A,0,13),F=L[0],O=F===55727696,b=O?L[2]:L[3],I=L[4],B=w[b].glFormat[I],N=w[b].sizeFunc,k=L[11],Y=L[7],H=L[6],z=52+L[12],X=new Uint8Array(A,z),D=new Array(k),G=0,V=Y,W=H,U=0;U<k;U++){var $=N(V,W);D[U]={data:new Uint8Array(X.buffer,X.byteOffset+G,$),width:V,height:W},V=Math.max(1,V>>1),W=Math.max(1,W>>1),G+=$}return{mipmaps:D,width:Y,height:H,internalFormat:B,compressed:!0,generateMipmap:!1}};r.exports=R},75549:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=function(f,o,a,n,u,c,l){var v=d(l,"frameWidth",null),p=d(l,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=f.source[o];f.add("__BASE",o,0,0,g.width,g.height);var m=d(l,"startFrame",0),C=d(l,"endFrame",-1),P=d(l,"margin",0),M=d(l,"spacing",0),E=Math.floor((u-P+M)/(v+M)),w=Math.floor((c-P+M)/(p+M)),R=E*w;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",f.key),(m>R||m<-R)&&(m=0),m<0&&(m=R+m),(C===-1||C>R||C<m)&&(C=R);for(var A=P,L=P,F=0,O=0,b=0,I=0;I<R;I++){F=0,O=0;var B=A+v,N=L+p;B>u&&(F=B-u),N>c&&(O=N-c),I>=m&&I<=C&&(f.add(b,o,a+A,n+L,v-F,p-O),b++),A+=v+M,A+v>u&&(A=P,L+=p+M)}return f};r.exports=x},47534:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=function(f,o,a){var n=d(a,"frameWidth",null),u=d(a,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=f.source[0];f.add("__BASE",0,0,0,c.width,c.height),d(a,"startFrame",0),d(a,"endFrame",-1);for(var l=d(a,"margin",0),v=d(a,"spacing",0),p=o.cutX,g=o.cutY,m=o.cutWidth,C=o.cutHeight,P=o.realWidth,M=o.realHeight,E=Math.floor((P-l+v)/(n+v)),w=Math.floor((M-l+v)/(u+v)),R=o.x,A=n-R,L=n-(P-m-R),F=o.y,O=u-F,b=u-(M-C-F),I,B=l,N=l,k=0,Y=0,H=0;H<w;H++){for(var z=H===0,X=H===w-1,D=0;D<E;D++){var G=D===0,V=D===E-1;if(I=f.add(k,Y,p+B,g+N,n,u),G||z||V||X){var W=G?R:0,U=z?F:0,$=0,K=0;G&&($+=n-A),V&&($+=n-L),z&&(K+=u-O),X&&(K+=u-b);var Z=n-$,J=u-K;I.cutWidth=Z,I.cutHeight=J,I.setTrim(n,u,W,U,Z,J)}B+=v,G?B+=A:V?B+=L:B+=n,k++}B=l,N+=v,z?N+=O:X?N+=b:N+=u}return f};r.exports=x},86147:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,i=function(x,f,o,a){var n=T-a.y-a.height;x.add(o,f,a.x,n,a.width,a.height)},d=function(x,f,o){var a=x.source[f];x.add("__BASE",f,0,0,a.width,a.height),T=a.height;for(var n=o.split(`
`),u=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",l="",v={x:0,y:0,width:0,height:0},p=0;p<n.length;p++){var g=n[p].match(u);if(!!g){var m=g[1]==="- ",C=g[2],P=g[3];if(m&&(l!==c&&(i(x,f,l,v),c=l),v={x:0,y:0,width:0,height:0}),C==="name"){l=P;continue}switch(C){case"x":case"y":case"width":case"height":v[C]=parseInt(P,10);break}}}return l!==c&&i(x,f,l,v),x};r.exports=d},55222:(r,T,i)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(50030),x=function(c){for(var l=c.mipmaps,v=1;v<l.length;v++){var p=l[v].width,g=l[v].height;if(!d(p,g))return console.warn("Mip level "+v+" is not a power-of-two size: "+p+"x"+g),!1}var m=u[c.internalFormat];return m?m(c):(console.warn("No format checker found for internal format "+c.internalFormat+". Assuming valid."),!0)};function f(c){for(var l=c.mipmaps,v=0;v<l.length;v++){var p=l[v].width,g=l[v].height;if((p<<v)%4!==0||(g<<v)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+v+" is "+p+"x"+g),!1}return!0}function o(){return!0}function a(c){var l=c.mipmaps,v=l[0];return d(v.width,v.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+v.width+"x"+v.height),!1)}function n(c){var l=c.mipmaps,v=l[0];return v.width%4!==0||v.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+v.width+"x"+v.height+" pixels"),!1):!0}var u={37488:o,37489:o,37490:o,37491:o,37492:o,37493:o,37494:o,37495:o,37496:o,37497:o,36196:o,37808:o,37809:o,37810:o,37811:o,37812:o,37813:o,37814:o,37815:o,37816:o,37817:o,37818:o,37819:o,37820:o,37821:o,37840:o,37841:o,37842:o,37843:o,37844:o,37845:o,37846:o,37847:o,37848:o,37849:o,37850:o,37851:o,37852:o,37853:o,36492:f,36493:f,36494:f,36495:f,36283:f,36284:f,36285:f,36286:f,35840:a,35841:a,35842:a,35843:a,33776:f,33777:f,33778:f,33779:f,35916:n,35917:n,35918:n,35919:n};r.exports=x},61309:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o,a,n,u,c,l,v){(n===void 0||n<=0)&&(n=32),(u===void 0||u<=0)&&(u=32),c===void 0&&(c=0),l===void 0&&(l=0),this.name=o,this.firstgid=a|0,this.imageWidth=n|0,this.imageHeight=u|0,this.imageMargin=c|0,this.imageSpacing=l|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(f){return f>=this.firstgid&&f<this.firstgid+this.total},addImage:function(f,o){return this.images.push({gid:f,image:o}),this.total++,this}});r.exports=x},27462:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=new d({initialize:function(o){if(this.gids=[],o!==void 0)for(var a=0;a<o.length;++a)for(var n=o[a],u=0;u<n.total;++u)this.gids[n.firstgid+u]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(f){this.gids=f?this._gids:void 0}},getTypeIncludingTile:function(f){if(f.type!==void 0&&f.type!=="")return f.type;if(!(!this.gids||f.gid===void 0)){var o=this.gids[f.gid];if(!!o){var a=o.getTileData(f.gid);if(!!a)return a.type}}},setTextureAndFrame:function(f,o,a,n){if(o===null&&this.gids&&n.gid!==void 0){var u=this.gids[n.gid];u&&(o===null&&u.image!==void 0&&(o=u.image.key),a===null&&(a=n.gid-u.firstgid),f.scene.textures.getFrame(o,a)||(o=null,a=null))}f.setTexture(o,a)},setPropertiesFromTiledObject:function(f,o){if(this.gids!==void 0&&o.gid!==void 0){var a=this.gids[o.gid];a!==void 0&&this.setFromJSON(f,a.getTileProperties(o.gid))}this.setFromJSON(f,o.properties)},setFromJSON:function(f,o){if(!!o){if(Array.isArray(o)){for(var a=0;a<o.length;a++){var n=o[a];f[n.name]!==void 0?f[n.name]=n.value:f.setData(n.name,n.value)}return}for(var u in o)f[u]!==void 0?f[u]=o[u]:f.setData(u,o[u])}}});r.exports=x},31989:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),x=i(87010),f=i(46177),o=i(49075),a=function(n,u,c,l,v,p,g,m){c===void 0&&(c=32),l===void 0&&(l=32),v===void 0&&(v=10),p===void 0&&(p=10),m===void 0&&(m=!1);var C=null;if(Array.isArray(g)){var P=u!==void 0?u:"map";C=f(P,d.ARRAY_2D,g,c,l,m)}else if(u!==void 0){var M=n.cache.tilemap.get(u);M?C=f(u,M.format,M.data,c,l,m):console.warn("No map data found for key "+u)}return C===null&&(C=new x({tileWidth:c,tileHeight:l,width:v,height:p})),new o(n,C)};r.exports=a},23029:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(31401),f=i(91907),o=i(62644),a=i(93232),n=new d({Mixins:[x.AlphaSingle,x.Flip,x.Visible],initialize:function(c,l,v,p,g,m,C,P){this.layer=c,this.index=l,this.x=v,this.y=p,this.width=g,this.height=m,this.right,this.bottom,this.baseWidth=C!==void 0?C:g,this.baseHeight=P!==void 0?P:m,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(u,c){return!(u<this.pixelX||c<this.pixelY||u>this.right||c>this.bottom)},copy:function(u){return this.index=u.index,this.alpha=u.alpha,this.properties=o(u.properties),this.visible=u.visible,this.setFlip(u.flipX,u.flipY),this.tint=u.tint,this.rotation=u.rotation,this.collideUp=u.collideUp,this.collideDown=u.collideDown,this.collideLeft=u.collideLeft,this.collideRight=u.collideRight,this.collisionCallback=u.collisionCallback,this.collisionCallbackContext=u.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(u){var c=this.tilemapLayer;if(c){var l=c.tileToWorldXY(this.x,this.y,void 0,u);return l.x}return this.x*this.baseWidth},getRight:function(u){var c=this.tilemapLayer;return c?this.getLeft(u)+this.width*c.scaleX:this.getLeft(u)+this.width},getTop:function(u){var c=this.tilemapLayer;if(c){var l=c.tileToWorldXY(this.x,this.y,void 0,u);return l.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(u){var c=this.tilemapLayer;return c?this.getTop(u)+this.height*c.scaleY:this.getTop(u)+this.height},getBounds:function(u,c){return c===void 0&&(c=new a),c.x=this.getLeft(u),c.y=this.getTop(u),c.width=this.getRight(u)-c.x,c.height=this.getBottom(u)-c.y,c},getCenterX:function(u){return(this.getLeft(u)+this.getRight(u))/2},getCenterY:function(u){return(this.getTop(u)+this.getBottom(u))/2},intersects:function(u,c,l,v){return!(l<=this.pixelX||v<=this.pixelY||u>=this.right||c>=this.bottom)},isInteresting:function(u,c){return u&&c?this.canCollide||this.hasInterestingFace:u?this.collides:c?this.hasInterestingFace:!1},resetCollision:function(u){if(u===void 0&&(u=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,u){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(u,c,l,v,p){if(c===void 0&&(c=u),l===void 0&&(l=u),v===void 0&&(v=u),p===void 0&&(p=!0),this.collideLeft=u,this.collideRight=c,this.collideUp=l,this.collideDown=v,this.faceLeft=u,this.faceRight=c,this.faceTop=l,this.faceBottom=v,p){var g=this.tilemapLayer;g&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(u,c){return u===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=u,this.collisionCallbackContext=c),this},setSize:function(u,c,l,v){return u!==void 0&&(this.width=u),c!==void 0&&(this.height=c),l!==void 0&&(this.baseWidth=l),v!==void 0&&(this.baseHeight=v),this.updatePixelXY(),this},updatePixelXY:function(){var u=this.layer.orientation;if(u===f.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(u===f.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(u===f.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(u===f.HEXAGONAL){var c=this.layer.staggerAxis,l=this.layer.staggerIndex,v=this.layer.hexSideLength,p,g;c==="y"?(g=(this.baseHeight-v)/2+v,l==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*g):c==="x"&&(p=(this.baseWidth-v)/2+v,this.pixelX=this.x*p,l==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var u=this.layer.tilemapLayer;if(u){var c=u.gidMap[this.index];if(c)return c}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var u=this.tilemapLayer;return u?u.tilemap:null}}});r.exports=n},49075:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84101),x=i(83419),f=i(39506),o=i(80341),a=i(95540),n=i(14977),u=i(27462),c=i(91907),l=i(36305),v=i(19133),p=i(68287),g=i(23029),m=i(81086),C=i(20442),P=i(33629),M=new x({initialize:function(w,R){this.scene=w,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(A),WorldToTileX:m.GetWorldToTileXFunction(A),WorldToTileY:m.GetWorldToTileYFunction(A),TileToWorldXY:m.GetTileToWorldXYFunction(A),TileToWorldX:m.GetTileToWorldXFunction(A),TileToWorldY:m.GetTileToWorldYFunction(A),GetTileCorners:m.GetTileCornersFunction(A)}},setRenderOrder:function(E){var w=["right-down","left-down","right-up","left-up"];return typeof E=="number"&&(E=w[E]),w.indexOf(E)>-1&&(this.renderOrder=E),this},addTilesetImage:function(E,w,R,A,L,F,O,b){if(E===void 0)return null;w==null&&(w=E);var I=this.scene.sys.textures;if(!I.exists(w))return console.warn('Texture key "%s" not found',w),null;var B=I.get(w),N=this.getTilesetIndex(E);if(N===null&&this.format===o.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',E,this.tilesets),null;var k=this.tilesets[N];return k?(k.setTileSize(R,A),k.setSpacing(L,F),k.setImage(B),k):(R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight),L===void 0&&(L=0),F===void 0&&(F=0),O===void 0&&(O=0),b===void 0&&(b={x:0,y:0}),k=new P(E,O,R,A,L,F,void 0,void 0,b),k.setImage(B),this.tilesets.push(k),this.tiles=d(this),k)},copy:function(E,w,R,A,L,F,O,b){return b=this.getLayer(b),b!==null?(m.Copy(E,w,R,A,L,F,O,b),this):null},createBlankLayer:function(E,w,R,A,L,F,O,b){R===void 0&&(R=0),A===void 0&&(A=0),L===void 0&&(L=this.width),F===void 0&&(F=this.height),O===void 0&&(O=this.tileWidth),b===void 0&&(b=this.tileHeight);var I=this.getLayerIndex(E);if(I!==null)return console.warn("Invalid Tilemap Layer ID: "+E),null;for(var B=new n({name:E,tileWidth:O,tileHeight:b,width:L,height:F,orientation:this.orientation}),N,k=0;k<F;k++){N=[];for(var Y=0;Y<L;Y++)N.push(new g(B,-1,Y,k,O,b,this.tileWidth,this.tileHeight));B.data.push(N)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var H=new C(this.scene,this,this.currentLayerIndex,w,R,A);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(E,w,R,A){var L=this.getLayerIndex(E);if(L===null)return console.warn("Invalid Tilemap Layer ID: "+E),typeof E=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[L];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+E),null;this.currentLayerIndex=L,R===void 0&&(R=F.x),A===void 0&&(A=F.y);var O=new C(this.scene,this,L,w,R,A);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(E,w,R){R===void 0&&(R=!0);var A=[],L=this.getObjectLayer(E);if(!L)return console.warn("createFromObjects: Invalid objectLayerName given: "+E),A;var F=new u(R?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var O=L.objects,b=0;b<w.length;b++){var I=w[b],B=a(I,"id",null),N=a(I,"gid",null),k=a(I,"name",null),Y=a(I,"type",null);F.enabled=!a(I,"ignoreTileset",null);for(var H,z=[],X=0;X<O.length;X++)H=O[X],(B===null&&N===null&&k===null&&Y===null||B!==null&&H.id===B||N!==null&&H.gid===N||k!==null&&H.name===k||Y!==null&&F.getTypeIncludingTile(H)===Y)&&z.push(H);for(var D=a(I,"classType",p),G=a(I,"scene",this.scene),V=a(I,"container",null),W=a(I,"key",null),U=a(I,"frame",null),$=0;$<z.length;$++){H=z[$];var K=new D(G);if(K.setName(H.name),K.setPosition(H.x,H.y),F.setTextureAndFrame(K,W,U,H),H.width&&(K.displayWidth=H.width),H.height&&(K.displayHeight=H.height),this.orientation===c.ISOMETRIC){var Z=this.tileWidth/this.tileHeight,J={x:K.x-K.y,y:(K.x+K.y)/Z};K.x=J.x,K.y=J.y}var Q={x:K.originX*H.width,y:(K.originY-(H.gid?1:0))*H.height};if(H.rotation){var j=f(H.rotation);l(Q,j),K.rotation=j}K.x+=Q.x,K.y+=Q.y,(H.flippedHorizontal!==void 0||H.flippedVertical!==void 0)&&K.setFlip(H.flippedHorizontal,H.flippedVertical),H.visible||(K.visible=!1),F.setPropertiesFromTiledObject(K,H),V?V.add(K):G.add.existing(K),A.push(K)}}return A},createFromTiles:function(E,w,R,A,L,F){return F=this.getLayer(F),F===null?null:m.CreateFromTiles(E,w,R,A,L,F)},fill:function(E,w,R,A,L,F,O){return F===void 0&&(F=!0),O=this.getLayer(O),O===null?null:(m.Fill(E,w,R,A,L,F,O),this)},filterObjects:function(E,w,R){if(typeof E=="string"){var A=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+A),null}return E.objects.filter(w,R)},filterTiles:function(E,w,R,A,L,F,O,b){return b=this.getLayer(b),b===null?null:m.FilterTiles(E,w,R,A,L,F,O,b)},findByIndex:function(E,w,R,A){return A=this.getLayer(A),A===null?null:m.FindByIndex(E,w,R,A)},findObject:function(E,w,R){if(typeof E=="string"){var A=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+A),null}return E.objects.find(w,R)||null},findTile:function(E,w,R,A,L,F,O,b){return b=this.getLayer(b),b===null?null:m.FindTile(E,w,R,A,L,F,O,b)},forEachTile:function(E,w,R,A,L,F,O,b){return b=this.getLayer(b),b===null?null:(m.ForEachTile(E,w,R,A,L,F,O,b),this)},getImageIndex:function(E){return this.getIndex(this.images,E)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(E){return E.name})},getIndex:function(E,w){for(var R=0;R<E.length;R++)if(E[R].name===w)return R;return null},getLayer:function(E){var w=this.getLayerIndex(E);return w!==null?this.layers[w]:null},getObjectLayer:function(E){var w=this.getIndex(this.objects,E);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(E){return E.name})},getLayerIndex:function(E){return E===void 0?this.currentLayerIndex:typeof E=="string"?this.getLayerIndexByName(E):typeof E=="number"&&E<this.layers.length?E:E instanceof C&&E.tilemap===this?E.layerIndex:null},getLayerIndexByName:function(E){return this.getIndex(this.layers,E)},getTileAt:function(E,w,R,A){return A=this.getLayer(A),A===null?null:m.GetTileAt(E,w,R,A)},getTileAtWorldXY:function(E,w,R,A,L){return L=this.getLayer(L),L===null?null:m.GetTileAtWorldXY(E,w,R,A,L)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(E){return E.name})},getTilesWithin:function(E,w,R,A,L,F){return F=this.getLayer(F),F===null?null:m.GetTilesWithin(E,w,R,A,L,F)},getTilesWithinShape:function(E,w,R,A){return A=this.getLayer(A),A===null?null:m.GetTilesWithinShape(E,w,R,A)},getTilesWithinWorldXY:function(E,w,R,A,L,F,O){return O=this.getLayer(O),O===null?null:m.GetTilesWithinWorldXY(E,w,R,A,L,F,O)},getTileset:function(E){var w=this.getIndex(this.tilesets,E);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(E){return this.getIndex(this.tilesets,E)},hasTileAt:function(E,w,R){return R=this.getLayer(R),R===null?null:m.HasTileAt(E,w,R)},hasTileAtWorldXY:function(E,w,R,A){return A=this.getLayer(A),A===null?null:m.HasTileAtWorldXY(E,w,R,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(E){this.setLayer(E)}},putTileAt:function(E,w,R,A,L){return A===void 0&&(A=!0),L=this.getLayer(L),L===null?null:m.PutTileAt(E,w,R,A,L)},putTileAtWorldXY:function(E,w,R,A,L,F){return A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:m.PutTileAtWorldXY(E,w,R,A,L,F)},putTilesAt:function(E,w,R,A,L){return A===void 0&&(A=!0),L=this.getLayer(L),L===null?null:(m.PutTilesAt(E,w,R,A,L),this)},randomize:function(E,w,R,A,L,F){return F=this.getLayer(F),F===null?null:(m.Randomize(E,w,R,A,L,F),this)},calculateFacesAt:function(E,w,R){return R=this.getLayer(R),R===null?null:(m.CalculateFacesAt(E,w,R),this)},calculateFacesWithin:function(E,w,R,A,L){return L=this.getLayer(L),L===null?null:(m.CalculateFacesWithin(E,w,R,A,L),this)},removeLayer:function(E){var w=this.getLayerIndex(E);if(w!==null){v(this.layers,w);for(var R=w;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(E){var w=this.getLayerIndex(E);return w!==null?(E=this.layers[w],E.tilemapLayer.destroy(),v(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var E=this.layers,w=0;w<E.length;w++)E[w].tilemapLayer&&E[w].tilemapLayer.destroy(!1);return E.length=0,this.currentLayerIndex=0,this},removeTile:function(E,w,R){w===void 0&&(w=-1),R===void 0&&(R=!0);var A=[];Array.isArray(E)||(E=[E]);for(var L=0;L<E.length;L++){var F=E[L];A.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),w>-1&&this.putTileAt(w,F.x,F.y,R,F.tilemapLayer)}return A},removeTileAt:function(E,w,R,A,L){return R===void 0&&(R=!0),A===void 0&&(A=!0),L=this.getLayer(L),L===null?null:m.RemoveTileAt(E,w,R,A,L)},removeTileAtWorldXY:function(E,w,R,A,L,F){return R===void 0&&(R=!0),A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:m.RemoveTileAtWorldXY(E,w,R,A,L,F)},renderDebug:function(E,w,R){return R=this.getLayer(R),R===null?null:(this.orientation===c.ORTHOGONAL&&m.RenderDebug(E,w,R),this)},renderDebugFull:function(E,w){for(var R=this.layers,A=0;A<R.length;A++)m.RenderDebug(E,w,R[A]);return this},replaceByIndex:function(E,w,R,A,L,F,O){return O=this.getLayer(O),O===null?null:(m.ReplaceByIndex(E,w,R,A,L,F,O),this)},setCollision:function(E,w,R,A,L){return w===void 0&&(w=!0),R===void 0&&(R=!0),L===void 0&&(L=!0),A=this.getLayer(A),A===null?null:(m.SetCollision(E,w,R,A,L),this)},setCollisionBetween:function(E,w,R,A,L){return R===void 0&&(R=!0),A===void 0&&(A=!0),L=this.getLayer(L),L===null?null:(m.SetCollisionBetween(E,w,R,A,L),this)},setCollisionByProperty:function(E,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(m.SetCollisionByProperty(E,w,R,A),this)},setCollisionByExclusion:function(E,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(m.SetCollisionByExclusion(E,w,R,A),this)},setCollisionFromCollisionGroup:function(E,w,R){return E===void 0&&(E=!0),w===void 0&&(w=!0),R=this.getLayer(R),R===null?null:(m.SetCollisionFromCollisionGroup(E,w,R),this)},setTileIndexCallback:function(E,w,R,A){return A=this.getLayer(A),A===null?null:(m.SetTileIndexCallback(E,w,R,A),this)},setTileLocationCallback:function(E,w,R,A,L,F,O){return O=this.getLayer(O),O===null?null:(m.SetTileLocationCallback(E,w,R,A,L,F,O),this)},setLayer:function(E){var w=this.getLayerIndex(E);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(E,w){this.tileWidth=E,this.tileHeight=w,this.widthInPixels=this.width*E,this.heightInPixels=this.height*w;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=E,this.layers[R].baseTileHeight=w;for(var A=this.layers[R].data,L=this.layers[R].width,F=this.layers[R].height,O=0;O<F;O++)for(var b=0;b<L;b++){var I=A[O][b];I!==null&&I.setSize(void 0,void 0,E,w)}}return this},setLayerTileSize:function(E,w,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=E,R.tileHeight=w;for(var A=R.data,L=R.width,F=R.height,O=0;O<F;O++)for(var b=0;b<L;b++){var I=A[O][b];I!==null&&I.setSize(E,w)}return this},shuffle:function(E,w,R,A,L){return L=this.getLayer(L),L===null?null:(m.Shuffle(E,w,R,A,L),this)},swapByIndex:function(E,w,R,A,L,F,O){return O=this.getLayer(O),O===null?null:(m.SwapByIndex(E,w,R,A,L,F,O),this)},tileToWorldX:function(E,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(E,w,R)},tileToWorldY:function(E,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(E,w,R)},tileToWorldXY:function(E,w,R,A,L){return L=this.getLayer(L),L===null?null:this._convert.TileToWorldXY(E,w,R,A,L)},getTileCorners:function(E,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(E,w,R,A)},weightedRandomize:function(E,w,R,A,L,F){return F=this.getLayer(F),F===null?null:(m.WeightedRandomize(w,R,A,L,E,F),this)},worldToTileX:function(E,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(E,w,R,A)},worldToTileY:function(E,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(E,w,R,A)},worldToTileXY:function(E,w,R,A,L,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(E,w,R,A,L,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});r.exports=M},45939:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),x=i(31989);d.register("tilemap",function(f){var o=f!==void 0?f:{};return x(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},46029:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),x=i(31989);d.register("tilemap",function(f,o,a,n,u,c,l){return f===null&&(f=void 0),o===null&&(o=void 0),a===null&&(a=void 0),n===null&&(n=void 0),u===null&&(u=void 0),x(this.scene,f,o,a,n,u,c,l)})},20442:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(78389),f=i(31401),o=i(95643),a=i(81086),n=i(19218),u=i(26099),c=new d({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.Transform,f.Visible,f.ScrollFactor,x,n],initialize:function(v,p,g,m,C,P){o.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=p,this.layerIndex=g,this.layer=p.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new u,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(m),this.setAlpha(this.layer.alpha),this.setPosition(C,P),this.setOrigin(0,0),this.setSize(p.tileWidth*this.layer.width,p.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(l){var v=[],p=[],g=this.tilemap;Array.isArray(l)||(l=[l]);for(var m=0;m<l.length;m++){var C=l[m];if(typeof C=="string"&&(C=g.getTileset(C)),C){p.push(C);for(var P=C.firstgid,M=0;M<C.total;M++)v[P+M]=C}}this.gidMap=v,this.tileset=p},setRenderOrder:function(l){var v=["right-down","left-down","right-up","left-up"];return typeof l=="string"&&(l=v.indexOf(l)),l>=0&&l<4&&(this._renderOrder=l),this},calculateFacesAt:function(l,v){return a.CalculateFacesAt(l,v,this.layer),this},calculateFacesWithin:function(l,v,p,g){return a.CalculateFacesWithin(l,v,p,g,this.layer),this},createFromTiles:function(l,v,p,g,m){return a.CreateFromTiles(l,v,p,g,m,this.layer)},cull:function(l){return this.cullCallback(this.layer,l,this.culledTiles,this._renderOrder)},copy:function(l,v,p,g,m,C,P){return a.Copy(l,v,p,g,m,C,P,this.layer),this},fill:function(l,v,p,g,m,C){return a.Fill(l,v,p,g,m,C,this.layer),this},filterTiles:function(l,v,p,g,m,C,P){return a.FilterTiles(l,v,p,g,m,C,P,this.layer)},findByIndex:function(l,v,p){return a.FindByIndex(l,v,p,this.layer)},findTile:function(l,v,p,g,m,C,P){return a.FindTile(l,v,p,g,m,C,P,this.layer)},forEachTile:function(l,v,p,g,m,C,P){return a.ForEachTile(l,v,p,g,m,C,P,this.layer),this},setTint:function(l,v,p,g,m,C){l===void 0&&(l=16777215);var P=function(M){M.tint=l,M.tintFill=!1};return this.forEachTile(P,this,v,p,g,m,C)},setTintFill:function(l,v,p,g,m,C){l===void 0&&(l=16777215);var P=function(M){M.tint=l,M.tintFill=!0};return this.forEachTile(P,this,v,p,g,m,C)},getTileAt:function(l,v,p){return a.GetTileAt(l,v,p,this.layer)},getTileAtWorldXY:function(l,v,p,g){return a.GetTileAtWorldXY(l,v,p,g,this.layer)},getIsoTileAtWorldXY:function(l,v,p,g,m){p===void 0&&(p=!0);var C=this.tempVec;return a.IsometricWorldToTileXY(l,v,!0,C,m,this.layer,p),this.getTileAt(C.x,C.y,g)},getTilesWithin:function(l,v,p,g,m){return a.GetTilesWithin(l,v,p,g,m,this.layer)},getTilesWithinShape:function(l,v,p){return a.GetTilesWithinShape(l,v,p,this.layer)},getTilesWithinWorldXY:function(l,v,p,g,m,C){return a.GetTilesWithinWorldXY(l,v,p,g,m,C,this.layer)},hasTileAt:function(l,v){return a.HasTileAt(l,v,this.layer)},hasTileAtWorldXY:function(l,v,p){return a.HasTileAtWorldXY(l,v,p,this.layer)},putTileAt:function(l,v,p,g){return a.PutTileAt(l,v,p,g,this.layer)},putTileAtWorldXY:function(l,v,p,g,m){return a.PutTileAtWorldXY(l,v,p,g,m,this.layer)},putTilesAt:function(l,v,p,g){return a.PutTilesAt(l,v,p,g,this.layer),this},randomize:function(l,v,p,g,m){return a.Randomize(l,v,p,g,m,this.layer),this},removeTileAt:function(l,v,p,g){return a.RemoveTileAt(l,v,p,g,this.layer)},removeTileAtWorldXY:function(l,v,p,g,m){return a.RemoveTileAtWorldXY(l,v,p,g,m,this.layer)},renderDebug:function(l,v){return a.RenderDebug(l,v,this.layer),this},replaceByIndex:function(l,v,p,g,m,C){return a.ReplaceByIndex(l,v,p,g,m,C,this.layer),this},setSkipCull:function(l){return l===void 0&&(l=!0),this.skipCull=l,this},setCullPadding:function(l,v){return l===void 0&&(l=1),v===void 0&&(v=1),this.cullPaddingX=l,this.cullPaddingY=v,this},setCollision:function(l,v,p,g){return a.SetCollision(l,v,p,this.layer,g),this},setCollisionBetween:function(l,v,p,g){return a.SetCollisionBetween(l,v,p,g,this.layer),this},setCollisionByProperty:function(l,v,p){return a.SetCollisionByProperty(l,v,p,this.layer),this},setCollisionByExclusion:function(l,v,p){return a.SetCollisionByExclusion(l,v,p,this.layer),this},setCollisionFromCollisionGroup:function(l,v){return a.SetCollisionFromCollisionGroup(l,v,this.layer),this},setTileIndexCallback:function(l,v,p){return a.SetTileIndexCallback(l,v,p,this.layer),this},setTileLocationCallback:function(l,v,p,g,m,C){return a.SetTileLocationCallback(l,v,p,g,m,C,this.layer),this},shuffle:function(l,v,p,g){return a.Shuffle(l,v,p,g,this.layer),this},swapByIndex:function(l,v,p,g,m,C){return a.SwapByIndex(l,v,p,g,m,C,this.layer),this},tileToWorldX:function(l,v){return this.tilemap.tileToWorldX(l,v,this)},tileToWorldY:function(l,v){return this.tilemap.tileToWorldY(l,v,this)},tileToWorldXY:function(l,v,p,g){return this.tilemap.tileToWorldXY(l,v,p,g,this)},getTileCorners:function(l,v,p){return this.tilemap.getTileCorners(l,v,p,this)},weightedRandomize:function(l,v,p,g,m){return a.WeightedRandomize(v,p,g,m,l,this.layer),this},worldToTileX:function(l,v,p){return this.tilemap.worldToTileX(l,v,p,this)},worldToTileY:function(l,v,p){return this.tilemap.worldToTileY(l,v,p,this)},worldToTileXY:function(l,v,p,g,m){return this.tilemap.worldToTileXY(l,v,p,g,m,this)},destroy:function(l){l===void 0&&(l=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),l&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))}});r.exports=c},16153:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),x=new d,f=new d,o=new d,a=function(n,u,c,l){var v=u.cull(c),p=v.length,g=c.alpha*u.alpha;if(!(p===0||g<=0)){var m=x,C=f,P=o;C.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),m.copyFrom(c.matrix);var M=n.currentContext,E=u.gidMap;M.save(),l?(m.multiplyWithOffset(l,-c.scrollX*u.scrollFactorX,-c.scrollY*u.scrollFactorY),C.e=u.x,C.f=u.y,m.multiply(C,P),P.copyToContext(M)):(C.e-=c.scrollX*u.scrollFactorX,C.f-=c.scrollY*u.scrollFactorY,C.copyToContext(M)),(!n.antialias||u.scaleX>1||u.scaleY>1)&&(M.imageSmoothingEnabled=!1);for(var w=0;w<p;w++){var R=v[w],A=E[R.index];if(!!A){var L=A.image.getSourceImage(),F=A.getTileTextureCoordinates(R.index),O=A.tileWidth,b=A.tileHeight;if(!(F===null||O===0||b===0)){var I=O*.5,B=b*.5;F.x+=A.tileOffset.x,F.y+=A.tileOffset.y,M.save(),M.translate(R.pixelX+I,R.pixelY+B),R.rotation!==0&&M.rotate(R.rotation),(R.flipX||R.flipY)&&M.scale(R.flipX?-1:1,R.flipY?-1:1),M.globalAlpha=g*R.alpha,M.drawImage(L,F.x,F.y,O,b,-I,-B,O,b),M.restore()}}}M.restore()}};r.exports=a},19218:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),x=d,f=d;x=i(99558),f=i(16153),r.exports={renderWebGL:x,renderCanvas:f}},99558:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),x=function(f,o,a){var n=o.cull(a),u=n.length,c=a.alpha*o.alpha;if(!(u===0||c<=0)){var l=o.gidMap,v=f.pipelines.set(o.pipeline,o),p=d.getTintAppendFloatAlpha,g=o.scrollFactorX,m=o.scrollFactorY,C=o.x,P=o.y,M=o.scaleX,E=o.scaleY;f.pipelines.preBatch(o);for(var w=0;w<u;w++){var R=n[w],A=l[R.index];if(!!A){var L=A.getTileTextureCoordinates(R.index),F=A.tileWidth,O=A.tileHeight;if(!(!L||F===0||O===0)){var b=F*.5,I=O*.5,B=A.glTexture,N=v.setTexture2D(B,o),k=F,Y=O,H=L.x,z=L.y,X=A.tileOffset.x,D=A.tileOffset.y,G=p(R.tint,c*R.alpha);v.batchTexture(o,B,B.width,B.height,C+R.pixelX*M+(b*M-X),P+R.pixelY*E+(I*E-D),F,O,M,E,R.rotation,R.flipX,R.flipY,g,m,b,I,H,z,k,Y,G,G,G,G,R.tintFill,0,0,a,null,!0,N,!0)}}}f.pipelines.postBatch(o)}};r.exports=x},33629:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(26099),f=new d({initialize:function(a,n,u,c,l,v,p,g,m){(u===void 0||u<=0)&&(u=32),(c===void 0||c<=0)&&(c=32),l===void 0&&(l=0),v===void 0&&(v=0),p===void 0&&(p={}),g===void 0&&(g={}),this.name=a,this.firstgid=n,this.tileWidth=u,this.tileHeight=c,this.tileMargin=l,this.tileSpacing=v,this.tileProperties=p,this.tileData=g,this.tileOffset=new x,m!==void 0&&this.tileOffset.set(m.x,m.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(o){return this.containsTileIndex(o)?this.tileProperties[o-this.firstgid]:null},getTileData:function(o){return this.containsTileIndex(o)?this.tileData[o-this.firstgid]:null},getTileCollisionGroup:function(o){var a=this.getTileData(o);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},getTileTextureCoordinates:function(o){return this.containsTileIndex(o)?this.texCoordinates[o-this.firstgid]:null},setImage:function(o){this.image=o;var a=o.get(),n=o.getFrameBounds();return this.glTexture=a.source.glTexture,a.width>n.width||a.height>n.height?this.updateTileData(a.width,a.height):this.updateTileData(n.width,n.height,n.x,n.y),this},setTileSize:function(o,a){return o!==void 0&&(this.tileWidth=o),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(o,a){return o!==void 0&&(this.tileMargin=o),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(o,a,n,u){n===void 0&&(n=0),u===void 0&&(u=0);var c=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(o-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(c%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),c=Math.floor(c),l=Math.floor(l),this.rows=c,this.columns=l,this.total=c*l,this.texCoordinates.length=0;for(var v=this.tileMargin+n,p=this.tileMargin+u,g=0;g<this.rows;g++){for(var m=0;m<this.columns;m++)this.texCoordinates.push({x:v,y:p}),v+=this.tileWidth+this.tileSpacing;v=this.tileMargin+n,p+=this.tileHeight+this.tileSpacing}return this}});r.exports=f},72023:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),x=function(f,o,a){var n=d(f,o,!0,a),u=d(f,o-1,!0,a),c=d(f,o+1,!0,a),l=d(f-1,o,!0,a),v=d(f+1,o,!0,a),p=n&&n.collides;return p&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),u&&u.collides&&(p&&(n.faceTop=!1),u.faceBottom=!p),c&&c.collides&&(p&&(n.faceBottom=!1),c.faceTop=!p),l&&l.collides&&(p&&(n.faceLeft=!1),l.faceRight=!p),v&&v.collides&&(p&&(n.faceRight=!1),v.faceLeft=!p),n&&!n.collides&&n.resetFaces(),n};r.exports=x},42573:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),x=i(7386),f=function(o,a,n,u,c){for(var l=null,v=null,p=null,g=null,m=x(o,a,n,u,null,c),C=0;C<m.length;C++){var P=m[C];P&&(P.collides?(l=d(P.x,P.y-1,!0,c),v=d(P.x,P.y+1,!0,c),p=d(P.x-1,P.y,!0,c),g=d(P.x+1,P.y,!0,c),P.faceTop=!(l&&l.collides),P.faceBottom=!(v&&v.collides),P.faceLeft=!(p&&p.collides),P.faceRight=!(g&&g.collides)):P.resetFaces())}};r.exports=f},33528:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=new d,f=function(o,a,n,u){var c=n.tilemapLayer,l=c.cullPaddingX,v=c.cullPaddingY,p=c.tilemap.tileToWorldXY(o,a,x,u,c);return p.x>u.worldView.x+c.scaleX*n.tileWidth*(-l-.5)&&p.x<u.worldView.right+c.scaleX*n.tileWidth*(l-.5)&&p.y>u.worldView.y+c.scaleY*n.tileHeight*(-v-1)&&p.y<u.worldView.bottom+c.scaleY*n.tileHeight*(v-.5)};r.exports=f},1785:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42573),x=i(7386),f=i(62991),o=i(23029),a=function(n,u,c,l,v,p,g,m){g===void 0&&(g=!0);var C=x(n,u,c,l,null,m),P=[];C.forEach(function(F){var O=new o(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);O.copy(F),P.push(O)});for(var M=v-n,E=p-u,w=0;w<P.length;w++){var R=P[w],A=R.x+M,L=R.y+E;f(A,L,m)&&m.data[L][A]&&(R.x=A,R.y=L,R.updatePixelXY(),m.data[L][A]=R)}g&&d(v-1,p-1,c+2,l+2,m),C.length=0,P.length=0};r.exports=a},78419:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),x=i(7386),f=i(27987),o=function(a,n,u,c,l,v){u||(u={}),Array.isArray(a)||(a=[a]);var p=v.tilemapLayer;c||(c=p.scene),l||(l=c.cameras.main);var g=v.width,m=v.height,C=x(0,0,g,m,null,v),P=[],M,E=function(L,F,O){for(var b=0;b<O.length;b++){var I=O[b];L.hasOwnProperty(I)||(L[I]=F[I])}};for(M=0;M<C.length;M++){var w=C[M],R=d(u);if(a.indexOf(w.index)!==-1){var A=p.tileToWorldXY(w.x,w.y,void 0,l,v);R.x=A.x,R.y=A.y,E(R,w,["rotation","flipX","flipY","alpha","visible","tint"]),R.hasOwnProperty("origin")||(R.x+=w.width*.5,R.y+=w.height*.5),R.hasOwnProperty("useSpriteSheet")&&(R.key=w.tileset.image,R.frame=w.index-1),P.push(c.make.sprite(R))}}if(Array.isArray(n))for(M=0;M<a.length;M++)f(a[M],n[M],0,0,g,m,v);else if(n!==null)for(M=0;M<a.length;M++)f(a[M],n,0,0,g,m,v);return P};r.exports=o},19545:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),x=i(63448),f=i(56583),o=new d,a=function(n,u){var c=n.tilemapLayer.tilemap,l=n.tilemapLayer,v=Math.floor(c.tileWidth*l.scaleX),p=Math.floor(c.tileHeight*l.scaleY),g=f(u.worldView.x-l.x,v,0,!0)-l.cullPaddingX,m=x(u.worldView.right-l.x,v,0,!0)+l.cullPaddingX,C=f(u.worldView.y-l.y,p,0,!0)-l.cullPaddingY,P=x(u.worldView.bottom-l.y,p,0,!0)+l.cullPaddingY;return o.setTo(g,C,m-g,P-C)};r.exports=a},30003:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19545),x=i(32483),f=function(o,a,n,u){n===void 0&&(n=[]),u===void 0&&(u=0),n.length=0;var c=o.tilemapLayer,l=d(o,a);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),x(o,l,u,n),n};r.exports=f},35137:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(42573),f=i(20576),o=function(a,n,u,c,l,v,p){for(var g=p.collideIndexes.indexOf(a)!==-1,m=d(n,u,c,l,null,p),C=0;C<m.length;C++)m[C].index=a,f(m[C],g);v&&x(n-1,u-1,c+2,l+2,p)};r.exports=o},40253:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l,v){var p=d(a,n,u,c,l,v);return p.filter(f,o)};r.exports=x},52692:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d===void 0&&(d=0),x===void 0&&(x=!1);var o=0,a,n,u;if(x){for(n=f.height-1;n>=0;n--)for(a=f.width-1;a>=0;a--)if(u=f.data[n][a],u&&u.index===i){if(o===d)return u;o+=1}}else for(n=0;n<f.height;n++)for(a=0;a<f.width;a++)if(u=f.data[n][a],u&&u.index===i){if(o===d)return u;o+=1}return null};r.exports=T},66151:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l,v){var p=d(a,n,u,c,l,v);return p.find(f,o)||null};r.exports=x},97560:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l,v){var p=d(a,n,u,c,l,v);p.forEach(f,o)};r.exports=x},43305:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(30003),f=i(9474),o=i(14018),a=i(29747),n=i(54503),u=function(c){return c===d.ORTHOGONAL?x:c===d.HEXAGONAL?f:c===d.STAGGERED?n:c===d.ISOMETRIC?o:a};r.exports=u},7423:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62991),x=function(f,o,a,n){if(a===void 0&&(a=!1),d(f,o,n)){var u=n.data[o][f]||null;return u?u.index===-1?a?u:null:u:null}else return null};r.exports=x},60540:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),x=i(26099),f=new x,o=function(a,n,u,c,l){return l.tilemapLayer.worldToTileXY(a,n,!0,f,c),d(f.x,f.y,u,l)};r.exports=o},55826:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n){var u=n.baseTileWidth,c=n.baseTileHeight,l=n.tilemapLayer,v=0,p=0;l&&(a||(a=l.scene.cameras.main),v=l.x+a.scrollX*(1-l.scrollFactorX),p=l.y+a.scrollY*(1-l.scrollFactorY),u*=l.scaleX,c*=l.scaleY);var g=v+f*u,m=p+o*c;return[new d(g,m),new d(g+u,m),new d(g+u,m+c),new d(g,m+c)]};r.exports=x},11758:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(27229),f=i(29747),o=i(55826),a=function(n){return n===d.ORTHOGONAL?o:n===d.ISOMETRIC?f:n===d.HEXAGONAL?x:(n===d.STAGGERED,f)};r.exports=a},39167:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(29747),f=i(97281),o=function(a){return a===d.ORTHOGONAL?f:x};r.exports=o},62e3:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(19951),f=i(14127),o=i(29747),a=i(97202),n=i(70326),u=function(c){return c===d.ORTHOGONAL?n:c===d.ISOMETRIC?f:c===d.HEXAGONAL?x:c===d.STAGGERED?a:o};r.exports=u},5984:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(29747),f=i(28054),o=i(29650),a=function(n){return n===d.ORTHOGONAL?o:n===d.STAGGERED?f:x};r.exports=a},7386:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=function(f,o,a,n,u,c){f===void 0&&(f=0),o===void 0&&(o=0),a===void 0&&(a=c.width),n===void 0&&(n=c.height),u||(u={});var l=d(u,"isNotEmpty",!1),v=d(u,"isColliding",!1),p=d(u,"hasInterestingFace",!1);f<0&&(a+=f,f=0),o<0&&(n+=o,o=0),f+a>c.width&&(a=Math.max(c.width-f,0)),o+n>c.height&&(n=Math.max(c.height-o,0));for(var g=[],m=o;m<o+n;m++)for(var C=f;C<f+a;C++){var P=c.data[m][C];if(P!==null){if(l&&P.index===-1||v&&!P.collides||p&&!P.hasInterestingFace)continue;g.push(P)}}return g};r.exports=x},91141:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55738),x=i(7386),f=i(91865),o=i(29747),a=i(26099),n=function(p,g){return f.RectangleToTriangle(g,p)},u=new a,c=new a,l=new a,v=function(p,g,m,C){if(p===void 0)return[];var P=o;p instanceof d.Circle?P=f.CircleToRectangle:p instanceof d.Rectangle?P=f.RectangleToRectangle:p instanceof d.Triangle?P=n:p instanceof d.Line&&(P=f.LineToRectangle),C.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var M=c.x,E=c.y;C.tilemapLayer.worldToTileXY(p.right,p.bottom,!1,l,m);var w=Math.ceil(l.x),R=Math.ceil(l.y),A=Math.max(w-M,1),L=Math.max(R-E,1),F=x(M,E,A,L,g,C),O=C.tileWidth,b=C.tileHeight;C.tilemapLayer&&(O*=C.tilemapLayer.scaleX,b*=C.tilemapLayer.scaleY);for(var I=[],B=new d.Rectangle(0,0,O,b),N=0;N<F.length;N++){var k=F[N];C.tilemapLayer.tileToWorldXY(k.x,k.y,u,m),B.x=u.x,B.y=u.y,P(p,B)&&I.push(k)}return I};r.exports=v},96523:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(26099),f=new x,o=new x,a=function(n,u,c,l,v,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(n,u,!0,f,p,g);var C=f.x,P=f.y;m(n+c,u+l,!1,o,p,g);var M=Math.ceil(o.x),E=Math.ceil(o.y);return d(C,P,M-C,E-P,v,g)};r.exports=a},96113:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(20242),f=i(10095),o=function(a){return a===d.ORTHOGONAL?f:x};r.exports=o},16926:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(86625),f=i(96897),o=i(29747),a=i(15108),n=i(85896),u=function(c){return c===d.ORTHOGONAL?n:c===d.ISOMETRIC?f:c===d.HEXAGONAL?x:c===d.STAGGERED?a:o};r.exports=u},55762:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=i(20242),f=i(51900),o=i(63288),a=function(n){return n===d.ORTHOGONAL?o:n===d.STAGGERED?f:x};r.exports=a},45091:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62991),x=function(f,o,a){if(d(f,o,a)){var n=a.data[o][f];return n!==null&&n.index>-1}else return!1};r.exports=x},24152:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45091),x=i(26099),f=new x,o=function(a,n,u,c){c.tilemapLayer.worldToTileXY(a,n,!0,f,u);var l=f.x,v=f.y;return d(l,v,c)};r.exports=o},90454:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63448),x=i(56583),f=function(o,a){var n=o.tilemapLayer.tilemap,u=o.tilemapLayer,c=Math.floor(n.tileWidth*u.scaleX),l=Math.floor(n.tileHeight*u.scaleY),v=o.hexSideLength,p,g,m,C;if(o.staggerAxis==="y"){var P=(l-v)/2+v;p=x(a.worldView.x-u.x,c,0,!0)-u.cullPaddingX,g=d(a.worldView.right-u.x,c,0,!0)+u.cullPaddingX,m=x(a.worldView.y-u.y,P,0,!0)-u.cullPaddingY,C=d(a.worldView.bottom-u.y,P,0,!0)+u.cullPaddingY}else{var M=(c-v)/2+v;p=x(a.worldView.x-u.x,M,0,!0)-u.cullPaddingX,g=d(a.worldView.right-u.x,M,0,!0)+u.cullPaddingX,m=x(a.worldView.y-u.y,l,0,!0)-u.cullPaddingY,C=d(a.worldView.bottom-u.y,l,0,!0)+u.cullPaddingY}return{left:p,right:g,top:m,bottom:C}};r.exports=f},9474:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90454),x=i(32483),f=function(o,a,n,u){n===void 0&&(n=[]),u===void 0&&(u=0),n.length=0;var c=o.tilemapLayer,l=d(o,a);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),x(o,l,u,n),n};r.exports=f},27229:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19951),x=i(26099),f=new x,o=function(a,n,u,c){var l=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(l*=p.scaleX,v*=p.scaleY);var g=d(a,n,f,u,c),m=[],C=.5773502691896257,P,M;c.staggerAxis==="y"?(P=C*l,M=v/2):(P=l/2,M=C*v);for(var E=0;E<6;E++){var w=2*Math.PI*(.5-E)/6;m.push(new x(g.x+P*Math.cos(w),g.y+M*Math.sin(w)))}return m};r.exports=o},19951:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u){a||(a=new d);var c=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(n||(n=v.scene.cameras.main),p=v.x+n.scrollX*(1-v.scrollFactorX),g=v.y+n.scrollY*(1-v.scrollFactorY),c*=v.scaleX,l*=v.scaleY);var m=c/2,C=l/2,P,M;return u.staggerAxis==="y"?(P=p+c*f+c,M=g+1.5*o*C+C,o%2===0&&(this.staggerIndex==="odd"?P-=m:P+=m)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(P=p+1.5*f*m+m,M=g+l*f+l,f%2===0&&(this.staggerIndex==="odd"?M-=C:M+=C)),a.set(P,M)};r.exports=x},86625:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u,c){n||(n=new d);var l=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),f=f-(p.x+u.scrollX*(1-p.scrollFactorX)),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),l*=p.scaleX,v*=p.scaleY);var g=.5773502691896257,m=-.3333333333333333,C=0,P=.6666666666666666,M=l/2,E=v/2,w,R,A,L,F;c.staggerAxis==="y"?(w=(f-M)/(g*l),R=(o-E)/E,A=g*w+m*R,L=C*w+P*R):(w=(f-M)/M,R=(o-E)/(g*v),A=m*w+g*R,L=P*w+C*R),F=-A-L;var O=Math.round(A),b=Math.round(L),I=Math.round(F),B=Math.abs(O-A),N=Math.abs(b-L),k=Math.abs(I-F);B>N&&B>k?O=-b-I:N>k&&(b=-O-I);var Y,H=b;return c.staggerIndex==="odd"?Y=H%2===0?b/2+O:b/2+O-.5:Y=H%2===0?b/2+O:b/2+O+.5,n.set(Y,H)};r.exports=x},62991:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i>=0&&i<x.width&&d>=0&&d<x.height};r.exports=T},14018:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33528),x=function(f,o,a,n){a===void 0&&(a=[]),n===void 0&&(n=0),a.length=0;var u=f.tilemapLayer,c=f.data,l=f.width,v=f.height,p=u.skipCull,g=0,m=l,C=0,P=v,M,E,w;if(n===0)for(E=C;E<P;E++)for(M=g;M<m;M++)w=c[E][M],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!p&&!d(M,E,f,o)||a.push(w));else if(n===1)for(E=C;E<P;E++)for(M=m;M>=g;M--)w=c[E][M],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!p&&!d(M,E,f,o)||a.push(w));else if(n===2)for(E=P;E>=C;E--)for(M=g;M<m;M++)w=c[E][M],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!p&&!d(M,E,f,o)||a.push(w));else if(n===3)for(E=P;E>=C;E--)for(M=m;M>=g;M--)w=c[E][M],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!p&&!d(M,E,f,o)||a.push(w));return u.tilesDrawn=a.length,u.tilesTotal=l*v,a};r.exports=x},14127:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u){a||(a=new d);var c=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(n||(n=v.scene.cameras.main),p=v.x+n.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+n.scrollY*(1-v.scrollFactorY),l*=v.scaleY);var m=p+(f-o)*(c/2),C=g+(f+o)*(l/2);return a.set(m,C)};r.exports=x},96897:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u,c,l){n||(n=new d);var v=c.baseTileWidth,p=c.baseTileHeight,g=c.tilemapLayer;g&&(u||(u=g.scene.cameras.main),o=o-(g.y+u.scrollY*(1-g.scrollFactorY)),p*=g.scaleY,f=f-(g.x+u.scrollX*(1-g.scrollFactorX)),v*=g.scaleX);var m=v/2,C=p/2;f=f-m,l||(o=o-p);var P=.5*(f/m+o/C),M=.5*(-f/m+o/C);return a&&(P=Math.floor(P),M=Math.floor(M)),n.set(P,M)};r.exports=x},71558:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23029),x=i(62991),f=i(72023),o=i(20576),a=function(n,u,c,l,v){if(l===void 0&&(l=!0),!x(u,c,v))return null;var p,g=v.data[c][u],m=g&&g.collides;n instanceof d?(v.data[c][u]===null&&(v.data[c][u]=new d(v,n.index,u,c,v.tileWidth,v.tileHeight)),v.data[c][u].copy(n)):(p=n,v.data[c][u]===null?v.data[c][u]=new d(v,p,u,c,v.tileWidth,v.tileHeight):v.data[c][u].index=p);var C=v.data[c][u],P=v.collideIndexes.indexOf(C.index)!==-1;if(p=n instanceof d?n.index:n,p===-1)C.width=v.tileWidth,C.height=v.tileHeight;else{var M=v.tilemapLayer.tilemap,E=M.tiles,w=E[p][2],R=M.tilesets[w];C.width=R.tileWidth,C.height=R.tileHeight}return o(C,P),l&&m!==C.collides&&f(u,c,v),C};r.exports=a},26303:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71558),x=i(26099),f=new x,o=function(a,n,u,c,l,v){return v.tilemapLayer.worldToTileXY(n,u,!0,f,l,v),d(a,f.x,f.y,c,v)};r.exports=o},14051:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42573),x=i(71558),f=function(o,a,n,u,c){if(u===void 0&&(u=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var l=o.length,v=o[0].length,p=0;p<l;p++)for(var g=0;g<v;g++){var m=o[p][g];x(m,a+g,n+p,!1,c)}u&&d(a-1,n-1,v+2,l+2,c)};r.exports=f},77389:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(26546),f=function(o,a,n,u,c,l){var v,p=d(o,a,n,u,{},l);if(!c)for(c=[],v=0;v<p.length;v++)c.indexOf(p[v].index)===-1&&c.push(p[v].index);for(v=0;v<p.length;v++)p[v].index=x(c)};r.exports=f},63557:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23029),x=i(62991),f=i(72023),o=function(a,n,u,c,l){if(u===void 0&&(u=!0),c===void 0&&(c=!0),!x(a,n,l))return null;var v=l.data[n][a];if(v)l.data[n][a]=u?null:new d(l,-1,a,n,l.tileWidth,l.tileHeight);else return null;return c&&v&&v.collides&&f(a,n,l),v};r.exports=o},94178:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63557),x=i(26099),f=new x,o=function(a,n,u,c,l,v){return v.tilemapLayer.worldToTileXY(a,n,!0,f,l,v),d(f.x,f.y,u,c,v)};r.exports=o},15533:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(3956),f=new x(105,210,231,150),o=new x(243,134,48,200),a=new x(40,39,37,150),n=function(u,c,l){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:f,p=c.collidingTileColor!==void 0?c.collidingTileColor:o,g=c.faceColor!==void 0?c.faceColor:a,m=d(0,0,l.width,l.height,null,l);u.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),u.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var C=0;C<m.length;C++){var P=m[C],M=P.width,E=P.height,w=P.pixelX,R=P.pixelY,A=P.collides?p:v;A!==null&&(u.fillStyle(A.color,A.alpha/255),u.fillRect(w,R,M,E)),w+=1,R+=1,M-=2,E-=2,g!==null&&(u.lineStyle(1,g.color,g.alpha/255),P.faceTop&&u.lineBetween(w,R,w+M,R),P.faceRight&&u.lineBetween(w+M,R,w+M,R+E),P.faceBottom&&u.lineBetween(w,R+E,w+M,R+E),P.faceLeft&&u.lineBetween(w,R,w,R+E))}};r.exports=n},27987:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l){for(var v=d(a,n,u,c,null,l),p=0;p<v.length;p++)v[p]&&v[p].index===f&&(v[p].index=o)};r.exports=x},32483:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=i.data,a=i.width,n=i.height,u=i.tilemapLayer,c=Math.max(0,d.left),l=Math.min(a,d.right),v=Math.max(0,d.top),p=Math.min(n,d.bottom),g,m,C;if(x===0)for(m=v;m<p;m++)for(g=c;o[m]&&g<l;g++)C=o[m][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(x===1)for(m=v;m<p;m++)for(g=l;o[m]&&g>=c;g--)C=o[m][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(x===2)for(m=p;m>=v;m--)for(g=c;o[m]&&g<l;g++)C=o[m][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(x===3)for(m=p;m>=v;m--)for(g=l;o[m]&&g>=c;g--)C=o[m][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);return u.tilesDrawn=f.length,u.tilesTotal=a*n,f};r.exports=T},57068:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),x=i(42573),f=i(9589),o=function(a,n,u,c,l){n===void 0&&(n=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++)f(a[v],n,c);if(l)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&a.indexOf(m.index)!==-1&&d(m,n)}u&&x(0,0,c.width,c.height,c)};r.exports=o},37266:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),x=i(42573),f=i(9589),o=function(a,n,u,c,l,v){if(u===void 0&&(u=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(a>n)){for(var p=a;p<=n;p++)f(p,u,l);if(v)for(var g=0;g<l.height;g++)for(var m=0;m<l.width;m++){var C=l.data[g][m];C&&C.index>=a&&C.index<=n&&d(C,u)}c&&x(0,0,l.width,l.height,l)}};r.exports=o},75661:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),x=i(42573),f=i(9589),o=function(a,n,u,c){n===void 0&&(n=!0),u===void 0&&(u=!0),Array.isArray(a)||(a=[a]);for(var l=0;l<c.height;l++)for(var v=0;v<c.width;v++){var p=c.data[l][v];p&&a.indexOf(p.index)===-1&&(d(p,n),f(p.index,n,c))}u&&x(0,0,c.width,c.height,c)};r.exports=o},64740:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),x=i(42573),f=i(97022),o=function(a,n,u,c){n===void 0&&(n=!0),u===void 0&&(u=!0);for(var l=0;l<c.height;l++)for(var v=0;v<c.width;v++){var p=c.data[l][v];if(!!p){for(var g in a)if(!!f(p.properties,g)){var m=a[g];Array.isArray(m)||(m=[m]);for(var C=0;C<m.length;C++)p.properties[g]===m[C]&&d(p,n)}}}u&&x(0,0,c.width,c.height,c)};r.exports=o},63307:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),x=i(42573),f=function(o,a,n){o===void 0&&(o=!0),a===void 0&&(a=!0);for(var u=0;u<n.height;u++)for(var c=0;c<n.width;c++){var l=n.data[u][c];if(!!l){var v=l.getCollisionGroup();v&&v.objects&&v.objects.length>0&&d(l,o)}}a&&x(0,0,n.width,n.height,n)};r.exports=f},9589:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=x.collideIndexes.indexOf(i);d&&f===-1?x.collideIndexes.push(i):!d&&f!==-1&&x.collideIndexes.splice(f,1)};r.exports=T},20576:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d?i.setCollision(!0,!0,!0,!0,!1):i.resetCollision(!1)};r.exports=T},79583:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){if(typeof i=="number")f.callbacks[i]=d!==null?{callback:d,callbackContext:x}:void 0;else for(var o=0,a=i.length;o<a;o++)f.callbacks[i[o]]=d!==null?{callback:d,callbackContext:x}:void 0};r.exports=T},93254:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l){for(var v=d(f,o,a,n,null,l),p=0;p<v.length;p++)v[p].setCollisionCallback(u,c)};r.exports=x},32903:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(33680),f=function(o,a,n,u,c){var l=d(o,a,n,u,null,c),v=l.map(function(g){return g.index});x(v);for(var p=0;p<l.length;p++)l[p].index=v[p]};r.exports=f},61325:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63448),x=i(56583),f=function(o,a){var n=o.tilemapLayer.tilemap,u=o.tilemapLayer,c=Math.floor(n.tileWidth*u.scaleX),l=Math.floor(n.tileHeight*u.scaleY),v=x(a.worldView.x-u.x,c,0,!0)-u.cullPaddingX,p=d(a.worldView.right-u.x,c,0,!0)+u.cullPaddingX,g=x(a.worldView.y-u.y,l/2,0,!0)-u.cullPaddingY,m=d(a.worldView.bottom-u.y,l/2,0,!0)+u.cullPaddingY;return{left:v,right:p,top:g,bottom:m}};r.exports=f},54503:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61325),x=i(32483),f=function(o,a,n,u){n===void 0&&(n=[]),u===void 0&&(u=0),n.length=0;var c=o.tilemapLayer,l=d(o,a);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),x(o,l,u,n),n};r.exports=f},97202:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u){a||(a=new d);var c=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(n||(n=v.scene.cameras.main),p=v.x+n.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+n.scrollY*(1-v.scrollFactorY),l*=v.scaleY);var m=p+f*c+o%2*(c/2),C=g+o*(l/2);return a.set(m,C)};r.exports=x},28054:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=x.baseTileHeight,o=x.tilemapLayer,a=0;return o&&(d===void 0&&(d=o.scene.cameras.main),a=o.y+d.scrollY*(1-o.scrollFactorY),f*=o.scaleY),a+i*(f/2)+f};r.exports=T},15108:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u,c){n||(n=new d);var l=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,f=f-(p.x+u.scrollX*(1-p.scrollFactorX)),l*=p.scaleX);var g=a?Math.floor(o/(v/2)):o/(v/2),m=a?Math.floor((f+g%2*.5*l)/l):(f+g%2*.5*l)/l;return n.set(m,g)};r.exports=x},51900:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=f.baseTileHeight,a=f.tilemapLayer;return a&&(x||(x=a.scene.cameras.main),i=i-(a.y+x.scrollY*(1-a.scrollFactorY)),o*=a.scaleY),d?Math.floor(i/(o/2)):i/(o/2)};r.exports=T},86560:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=function(f,o,a,n,u,c,l){for(var v=d(a,n,u,c,null,l),p=0;p<v.length;p++)v[p]&&(v[p].index===f?v[p].index=o:v[p].index===o&&(v[p].index=f))};r.exports=x},97281:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=x.baseTileWidth,o=x.tilemapLayer,a=0;return o&&(d||(d=o.scene.cameras.main),a=o.x+d.scrollX*(1-o.scrollFactorX),f*=o.scaleX),a+i*f};r.exports=T},70326:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97281),x=i(29650),f=i(26099),o=function(a,n,u,c,l){return u||(u=new f(0,0)),u.x=d(a,c,l),u.y=x(n,c,l),u};r.exports=o},29650:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=x.baseTileHeight,o=x.tilemapLayer,a=0;return o&&(d||(d=o.scene.cameras.main),a=o.y+d.scrollY*(1-o.scrollFactorY),f*=o.scaleY),a+i*f};r.exports=T},77366:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),x=i(75508),f=function(o,a,n,u,c,l){if(!!c){var v,p=d(o,a,n,u,null,l),g=0;for(v=0;v<c.length;v++)g+=c[v].weight;if(!(g<=0))for(v=0;v<p.length;v++){for(var m=x.RND.frac()*g,C=0,P=-1,M=0;M<c.length;M++)if(C+=c[M].weight,m<=C){var E=c[M].index;P=Array.isArray(E)?E[Math.floor(x.RND.frac()*E.length)]:E;break}p[v].index=P}}};r.exports=f},10095:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85896),x=i(26099),f=new x,o=function(a,n,u,c){return d(a,0,n,f,u,c),f.x};r.exports=o},85896:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),x=function(f,o,a,n,u,c){a===void 0&&(a=!0),n||(n=new d);var l=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),f=f-(p.x+u.scrollX*(1-p.scrollFactorX)),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),l*=p.scaleX,v*=p.scaleY);var g=f/l,m=o/v;return a&&(g=Math.floor(g),m=Math.floor(m)),n.set(g,m)};r.exports=x},63288:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85896),x=i(26099),f=new x,o=function(a,n,u,c){return d(0,a,n,f,u,c),f.y};r.exports=o},81086:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ORIENTATION:i(91907)};r.exports=d},62501:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=i(21829),f={Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)};f=d(!1,f,x.ORIENTATION),r.exports=f},14977:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(91907),f=i(95540),o=new d({initialize:function(n){n===void 0&&(n={}),this.name=f(n,"name","layer"),this.id=f(n,"id",0),this.x=f(n,"x",0),this.y=f(n,"y",0),this.width=f(n,"width",0),this.height=f(n,"height",0),this.tileWidth=f(n,"tileWidth",0),this.tileHeight=f(n,"tileHeight",0),this.baseTileWidth=f(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=f(n,"baseTileHeight",this.tileHeight),this.orientation=f(n,"orientation",x.ORTHOGONAL),this.widthInPixels=f(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=f(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=f(n,"alpha",1),this.visible=f(n,"visible",!0),this.properties=f(n,"properties",[]),this.indexes=f(n,"indexes",[]),this.collideIndexes=f(n,"collideIndexes",[]),this.callbacks=f(n,"callbacks",[]),this.bodies=f(n,"bodies",[]),this.data=f(n,"data",[]),this.tilemapLayer=f(n,"tilemapLayer",null),this.hexSideLength=f(n,"hexSideLength",0),this.staggerAxis=f(n,"staggerAxis","y"),this.staggerIndex=f(n,"staggerIndex","odd")}});r.exports=o},87010:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(91907),f=i(95540),o=new d({initialize:function(n){n===void 0&&(n={}),this.name=f(n,"name","map"),this.width=f(n,"width",0),this.height=f(n,"height",0),this.infinite=f(n,"infinite",!1),this.tileWidth=f(n,"tileWidth",0),this.tileHeight=f(n,"tileHeight",0),this.widthInPixels=f(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=f(n,"heightInPixels",this.height*this.tileHeight),this.format=f(n,"format",null),this.orientation=f(n,"orientation",x.ORTHOGONAL),this.renderOrder=f(n,"renderOrder","right-down"),this.version=f(n,"version","1"),this.properties=f(n,"properties",{}),this.layers=f(n,"layers",[]),this.images=f(n,"images",[]),this.objects=f(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=f(n,"collision",{}),this.tilesets=f(n,"tilesets",[]),this.imageCollections=f(n,"imageCollections",[]),this.tiles=f(n,"tiles",[]),this.hexSideLength=f(n,"hexSideLength",0),this.staggerAxis=f(n,"staggerAxis","y"),this.staggerIndex=f(n,"staggerIndex","odd")}});r.exports=o},48700:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=new d({initialize:function(a){a===void 0&&(a={}),this.name=x(a,"name","object layer"),this.id=x(a,"id",0),this.opacity=x(a,"opacity",1),this.properties=x(a,"properties",{}),this.propertyTypes=x(a,"propertytypes",{}),this.type=x(a,"type","objectgroup"),this.visible=x(a,"visible",!0),this.objects=x(a,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});r.exports=f},6641:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),x=function(f){return f=f.toLowerCase(),f==="isometric"?d.ISOMETRIC:f==="staggered"?d.STAGGERED:f==="hexagonal"?d.HEXAGONAL:d.ORTHOGONAL};r.exports=x},46177:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),x=i(2342),f=i(82593),o=i(46594),a=i(87021),n=function(u,c,l,v,p,g){var m;switch(c){case d.ARRAY_2D:m=x(u,l,v,p,g);break;case d.CSV:m=f(u,l,v,p,g);break;case d.TILED_JSON:m=o(u,l,g);break;case d.WELTMEISTER:m=a(u,l,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};r.exports=n},2342:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),x=i(14977),f=i(87010),o=i(23029),a=function(n,u,c,l,v){for(var p=new x({tileWidth:c,tileHeight:l}),g=new f({name:n,tileWidth:c,tileHeight:l,format:d.ARRAY_2D,layers:[p]}),m=[],C=u.length,P=0,M=0;M<u.length;M++){m[M]=[];for(var E=u[M],w=0;w<E.length;w++){var R=parseInt(E[w],10);isNaN(R)||R===-1?m[M][w]=v?null:new o(p,-1,w,M,c,l):m[M][w]=new o(p,R,w,M,c,l)}P===0&&(P=E.length)}return g.width=p.width=P,g.height=p.height=C,g.widthInPixels=p.widthInPixels=P*c,g.heightInPixels=p.heightInPixels=C*l,p.data=m,g};r.exports=a},82593:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),x=i(2342),f=function(o,a,n,u,c){var l=a.trim().split(`
`).map(function(p){return p.split(",")}),v=x(o,l,n,u,c);return v.format=d.CSV,v};r.exports=f},6656:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14977),x=i(23029),f=function(o,a){for(var n=[],u=0;u<o.layer.length;u++){for(var c=o.layer[u],l=new d({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var C=c.data[g][m]-1,P;C>-1?P=new x(l,C,m,g,c.tilesize,c.tilesize):P=a?null:new x(l,-1,m,g,c.tilesize,c.tilesize),v.push(P)}p.push(v),v=[]}l.data=p,n.push(l)}return n};r.exports=f},96483:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),x=function(f){for(var o=[],a=[],n=0;n<f.layer.length;n++){var u=f.layer[n],c=u.tilesetName;c!==""&&a.indexOf(c)===-1&&(a.push(c),o.push(new d(c,0,u.tilesize,u.tilesize,0,0)))}return o};r.exports=x},87021:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),x=i(87010),f=i(6656),o=i(96483),a=function(n,u,c){if(u.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var l=0,v=0,p=0;p<u.layer.length;p++)u.layer[p].width>l&&(l=u.layer[p].width),u.layer[p].height>v&&(v=u.layer[p].height);var g=new x({width:l,height:v,name:n,tileWidth:u.layer[0].tilesize,tileHeight:u.layer[0].tilesize,format:d.WELTMEISTER});return g.layers=f(u,c),g.tilesets=o(u),g};r.exports=a},52833:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),x=function(f){for(var o,a,n,u,c,l=0;l<f.layers.length;l++){o=f.layers[l],u=null;for(var v=0;v<o.data.length;v++){c=o.data[v];for(var p=0;p<c.length;p++)a=c[p],!(a===null||a.index<0)&&(n=f.tiles[a.index][2],u=f.tilesets[n],a.width=u.tileWidth,a.height=u.tileHeight,u.tileProperties&&u.tileProperties[a.index-u.firstgid]&&(a.properties=d(a.properties,u.tileProperties[a.index-u.firstgid])))}}};r.exports=x},41868:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=window.atob(i),x=d.length,f=new Array(x/4),o=0;o<x;o+=4)f[o/4]=(d.charCodeAt(o)|d.charCodeAt(o+1)<<8|d.charCodeAt(o+2)<<16|d.charCodeAt(o+3)<<24)>>>0;return f};r.exports=T},84101:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),x=function(f){var o,a,n=[];for(o=0;o<f.imageCollections.length;o++)for(var u=f.imageCollections[o],c=u.images,l=0;l<c.length;l++){var v=c[l];a=new d(v.image,v.gid,u.imageWidth,u.imageHeight,0,0),a.updateTileData(u.imageWidth,u.imageHeight),f.tilesets.push(a)}for(o=0;o<f.tilesets.length;o++){a=f.tilesets[o];for(var p=a.tileMargin,g=a.tileMargin,m=0,C=0,P=0,M=a.firstgid;M<a.firstgid+a.total&&(n[M]=[p,g,o],p+=a.tileWidth+a.tileSpacing,m++,!(m===a.total||(C++,C===a.columns&&(p=a.tileMargin,g+=a.tileHeight+a.tileSpacing,C=0,P++,P===a.rows))));M++);}return n};r.exports=x},79677:(r,T,i)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=function(f,o,a){if(!o)return{i:0,layers:f.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=o.x+d(o,"startx",0)*f.tilewidth+d(o,"offsetx",0),u=o.y+d(o,"starty",0)*f.tileheight+d(o,"offsety",0);return{i:0,layers:o.layers,name:a.name+o.name+"/",opacity:a.opacity*o.opacity,visible:a.visible&&o.visible,x:a.x+n,y:a.y+u}};r.exports=x},29920:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,i=1073741824,d=536870912,x=function(f){var o=Boolean(f&T),a=Boolean(f&i),n=Boolean(f&d);f=f&~(T|i|d);var u=0,c=!1;return o&&a&&n?(u=Math.PI/2,c=!0):o&&a&&!n?(u=Math.PI,c=!1):o&&!a&&n?(u=Math.PI/2,c=!1):o&&!a&&!n?(u=0,c=!0):!o&&a&&n?(u=3*Math.PI/2,c=!1):!o&&a&&!n?(u=Math.PI,c=!0):!o&&!a&&n?(u=3*Math.PI/2,c=!0):!o&&!a&&!n&&(u=0,c=!1),{gid:f,flippedHorizontal:o,flippedVertical:a,flippedAntiDiagonal:n,rotation:u,flipped:c}};r.exports=x},12635:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=i(79677),f=function(o){for(var a=[],n=[],u=x(o);u.i<u.layers.length||n.length>0;){if(u.i>=u.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=n.pop();continue}var c=u.layers[u.i];if(u.i++,c.type!=="imagelayer"){if(c.type==="group"){var l=x(o,c,u);n.push(u),u=l}continue}var v=d(c,"offsetx",0)+d(c,"startx",0),p=d(c,"offsety",0)+d(c,"starty",0);a.push({name:u.name+c.name,image:c.image,x:u.x+v+c.x,y:u.y+p+c.y,alpha:u.opacity*c.opacity,visible:u.visible&&c.visible,properties:d(c,"properties",{})})}return a};r.exports=f},46594:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(51233),x=i(84101),f=i(91907),o=i(62644),a=i(80341),n=i(6641),u=i(87010),c=i(12635),l=i(22611),v=i(28200),p=i(24619),g=function(m,C,P){var M=o(C),E=new u({width:M.width,height:M.height,name:m,tileWidth:M.tilewidth,tileHeight:M.tileheight,orientation:n(M.orientation),format:a.TILED_JSON,version:M.version,properties:M.properties,renderOrder:M.renderorder,infinite:M.infinite});E.orientation===f.HEXAGONAL&&(E.hexSideLength=M.hexsidelength,E.staggerAxis=M.staggeraxis,E.staggerIndex=M.staggerindex),E.layers=v(M,P),E.images=c(M);var w=p(M);return E.tilesets=w.tilesets,E.imageCollections=w.imageCollections,E.objects=l(M),E.tiles=x(E),d(E),E};r.exports=g},52205:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(18254),x=i(29920),f=function(n){return{x:n.x,y:n.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],a=function(n,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var l=d(n,o);if(l.x+=u,l.y+=c,n.gid){var v=x(n.gid);l.gid=v.gid,l.flippedHorizontal=v.flippedHorizontal,l.flippedVertical=v.flippedVertical,l.flippedAntiDiagonal=v.flippedAntiDiagonal}else n.polyline?l.polyline=n.polyline.map(f):n.polygon?l.polygon=n.polygon.map(f):n.ellipse?l.ellipse=n.ellipse:n.text?l.text=n.text:n.point?l.point=!0:l.rectangle=!0;return l};r.exports=a},22611:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),x=i(52205),f=i(48700),o=i(79677),a=function(n){for(var u=[],c=[],l=o(n);l.i<l.layers.length||c.length>0;){if(l.i>=l.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=c.pop();continue}var v=l.layers[l.i];if(l.i++,v.opacity*=l.opacity,v.visible=l.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var p=o(n,v,l);c.push(l),l=p}continue}v.name=l.name+v.name;for(var g=l.x+d(v,"startx",0)+d(v,"offsetx",0),m=l.y+d(v,"starty",0)+d(v,"offsety",0),C=[],P=0;P<v.objects.length;P++){var M=x(v.objects[P],g,m);C.push(M)}var E=new f(v);E.objects=C,u.push(E)}return u};r.exports=a},28200:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41868),x=i(91907),f=i(79677),o=i(6641),a=i(95540),n=i(14977),u=i(29920),c=i(23029),l=function(v,p){for(var g=a(v,"infinite",!1),m=[],C=[],P=f(v);P.i<P.layers.length||C.length>0;){if(P.i>=P.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}P=C.pop();continue}var M=P.layers[P.i];if(P.i++,M.type!=="tilelayer"){if(M.type==="group"){var E=f(v,M,P);C.push(P),P=E}continue}if(M.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+M.name+"'");continue}else if(M.encoding&&M.encoding==="base64"){if(M.chunks)for(var w=0;w<M.chunks.length;w++)M.chunks[w].data=d(M.chunks[w].data);M.data&&(M.data=d(M.data)),delete M.encoding}var R,A,L,F,O=[],b=0;if(g){var I=a(M,"startx",0)+M.x,B=a(M,"starty",0)+M.y;R=new n({name:P.name+M.name,id:M.id,x:P.x+a(M,"offsetx",0)+I*v.tilewidth,y:P.y+a(M,"offsety",0)+B*v.tileheight,width:M.width,height:M.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:P.opacity*M.opacity,visible:P.visible&&M.visible,properties:a(M,"properties",[]),orientation:o(v.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=v.hexsidelength,R.staggerAxis=v.staggeraxis,R.staggerIndex=v.staggerindex);for(var N=0;N<M.height;N++){O[N]=[null];for(var k=0;k<M.width;k++)O[N][k]=null}for(N=0,K=M.chunks.length;N<K;N++)for(var Y=M.chunks[N],H=Y.x-I,z=Y.y-B,X=0,D=0,G=Y.data.length;D<G;D++){var V=b+H,W=X+z;A=u(Y.data[D]),A.gid>0?(L=new c(R,A.gid,V,W,v.tilewidth,v.tileheight),L.rotation=A.rotation,L.flipX=A.flipped,O[W][V]=L):(F=p?null:new c(R,-1,V,W,v.tilewidth,v.tileheight),O[W][V]=F),b++,b===Y.width&&(X++,b=0)}}else{R=new n({name:P.name+M.name,id:M.id,x:P.x+a(M,"offsetx",0)+M.x,y:P.y+a(M,"offsety",0)+M.y,width:M.width,height:M.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:P.opacity*M.opacity,visible:P.visible&&M.visible,properties:a(M,"properties",[]),orientation:o(v.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=v.hexsidelength,R.staggerAxis=v.staggeraxis,R.staggerIndex=v.staggerindex);for(var U=[],$=0,K=M.data.length;$<K;$++)A=u(M.data[$]),A.gid>0?(L=new c(R,A.gid,b,O.length,v.tilewidth,v.tileheight),L.rotation=A.rotation,L.flipX=A.flipped,U.push(L)):(F=p?null:new c(R,-1,b,O.length,v.tilewidth,v.tileheight),U.push(F)),b++,b===M.width&&(O.push(U),b=0,U=[])}R.data=O,m.push(R)}return m};r.exports=l},24619:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),x=i(16536),f=i(52205),o=i(57880),a=function(n){for(var u=[],c=[],l=null,v,p=0;p<n.tilesets.length;p++){var g=n.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new d(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,void 0,void 0,g.tileoffset);if(n.version>1){var C=void 0,P=void 0;if(Array.isArray(g.tiles)){C=C||{},P=P||{};for(var M=0;M<g.tiles.length;M++){var E=g.tiles[M];if(E.properties){var w={};E.properties.forEach(function(N){w[N.name]=N.value}),P[E.id]=w}if(E.objectgroup&&((C[E.id]||(C[E.id]={})).objectgroup=E.objectgroup,E.objectgroup.objects)){var R=E.objectgroup.objects.map(function(N){return f(N)});C[E.id].objectgroup.objects=R}E.animation&&((C[E.id]||(C[E.id]={})).animation=E.animation),E.type&&((C[E.id]||(C[E.id]={})).type=E.type)}}Array.isArray(g.wangsets)&&(C=C||{},P=P||{},o(g.wangsets,C)),C&&(m.tileData=C,m.tileProperties=P)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(v in m.tileData){var A=m.tileData[v].objectgroup;if(A&&A.objects){var L=A.objects.map(function(N){return f(N)});m.tileData[v].objectgroup.objects=L}}}m.updateTileData(g.imagewidth,g.imageheight),u.push(m)}else{var F=new x(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),O=0;for(M=0;M<g.tiles.length;M++){E=g.tiles[M];var b=E.image,I=parseInt(E.id,10),B=g.firstgid+I;F.addImage(B,b),O=Math.max(I,O)}F.maxId=O,c.push(F)}l&&(l.lastgid=g.firstgid-1),l=g}return{tilesets:u,imageCollections:c}};r.exports=a},57880:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){for(var x=0;x<i.length;x++){var f=i[x],o=x;if(f.name&&f.name!==""&&(o=f.name),Array.isArray(f.wangtiles)&&f.wangtiles.length>0){var a={},n={},u,c,l;if(Array.isArray(f.edgecolors))for(u=0;u<f.edgecolors.length;u++)l=1+u,c=f.edgecolors[u],c.name!==""&&(a[l]=c.name);if(Array.isArray(f.cornercolors))for(u=0;u<f.cornercolors.length;u++)l=1+u,c=f.cornercolors[u],c.name!==""&&(n[l]=c.name);if(Array.isArray(f.colors))for(u=0;u<f.colors.length;u++)c=f.colors[u],l=1+u,c.name!==""&&(a[l]=n[l]=c.name);for(var v=[a,n,a,n,a,n,a,n],p=0;p<f.wangtiles.length;p++){var g=f.wangtiles[p],m=d[g.tileid]||(d[g.tileid]={});m=m.wangid||(m.wangid={});for(var C=[],P=0;P<Math.min(v.length,g.wangid.length);P++){if(c=g.wangid[P],c===0){C.push(void 0);continue}var M=v[P][c];if(M!==void 0){C.push(M);continue}C.push(c)}m[o]=C}}}};r.exports=T},96761:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(37277),f=i(44594),o=i(94880),a=i(72905),n=new d({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var u=this.systems.events;u.on(f.PRE_UPDATE,this.preUpdate,this),u.on(f.UPDATE,this.update,this),u.once(f.SHUTDOWN,this.shutdown,this)},addEvent:function(u){var c;return u instanceof o?(c=u,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new o(u),this._pendingInsertion.push(c),c},delayedCall:function(u,c,l,v){return this.addEvent({delay:u,callback:c,args:l,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var l=u[c];a(this._pendingRemoval,l),a(this._pendingInsertion,l),a(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var u=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(u===0&&c===0)){var l,v;for(l=0;l<u;l++){v=this._pendingRemoval[l];var p=this._active.indexOf(v);p>-1&&this._active.splice(p,1),v.destroy()}for(l=0;l<c;l++)v=this._pendingInsertion[l],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(u,c){if(this.now=u,!this.paused){c*=this.timeScale;for(var l=0;l<this._active.length;l++){var v=this._active[l];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var p=v.elapsed-v.delay;if(v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0){if(v.repeatCount--,p>=v.delay)for(;p>=v.delay&&v.repeatCount>0;)v.callback&&v.callback.apply(v.callbackScope,v.args),p-=v.delay,v.repeatCount--;v.elapsed=p,v.hasDispatched=!1}else v.hasDispatched&&this._pendingRemoval.push(v)}}}},shutdown:function(){var u;for(u=0;u<this._pendingInsertion.length;u++)this._pendingInsertion[u].destroy();for(u=0;u<this._active.length;u++)this._active[u].destroy();for(u=0;u<this._pendingRemoval.length;u++)this._pendingRemoval[u].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(f.PRE_UPDATE,this.preUpdate,this),c.off(f.UPDATE,this.update,this),c.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",n,"time"),r.exports=n},96120:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(39429),o=i(95540),a=i(44594),n=i(89809),u=new d({Extends:x,initialize:function(l,v){x.call(this),this.scene=l,this.systems=l.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var p=this.systems.events;p.on(a.PRE_UPDATE,this.preUpdate,this),p.on(a.UPDATE,this.update,this),p.once(a.SHUTDOWN,this.destroy,this),v&&this.add(v)},preUpdate:function(c,l){this.paused||(this.elapsed+=l)},update:function(){if(!(this.paused||this.complete)){var c,l=this.events,v=!1,p=this.systems,g;for(c=0;c<l.length;c++){var m=l[c];if(!m.complete&&m.time<=this.elapsed){if(m.complete=!0,this.totalComplete++,g=m.target?m.target:this,m.if&&!m.if.call(g,m))continue;if(m.once&&(v=!0),m.set&&m.target)for(var C in m.set)m.target[C]=m.set[C];this.iteration&&m.repeat++,m.loop&&m.repeat&&m.loop.call(g),m.tween&&p.tweens.add(m.tween),m.sound&&(typeof m.sound=="string"?p.sound.play(m.sound):p.sound.play(m.sound.key,m.sound.config)),m.event&&this.emit(m.event,g),m.run&&m.run.call(g),m.stop&&this.stop()}}if(v)for(c=0;c<l.length;c++)l[c].complete&&l[c].once&&(l.splice(c,1),c--);this.totalComplete>=l.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(n.COMPLETE,this)}},play:function(c){return c===void 0&&(c=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,c&&this.reset(),this},pause:function(){return this.paused=!0,this},repeat:function(c){return(c===void 0||c===!0)&&(c=-1),c===!1&&(c=0),this.loop=c,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(c){c===void 0&&(c=!1),this.elapsed=0,c||(this.iteration=0);for(var l=0;l<this.events.length;l++)this.events[l].complete=!1,c||(this.events[l].repeat=0);return this.play(!1)},add:function(c){Array.isArray(c)||(c=[c]);var l=this.events,v=0;l.length>0&&(v=l[l.length-1].time);for(var p=0;p<c.length;p++){var g=c[p],m=o(g,"at",0),C=o(g,"in",null);C!==null&&(m=this.elapsed+C);var P=o(g,"from",null);P!==null&&(m=v+P),l.push({complete:!1,time:m,repeat:0,if:o(g,"if",null),run:o(g,"run",null),loop:o(g,"loop",null),event:o(g,"event",null),target:o(g,"target",null),set:o(g,"set",null),tween:o(g,"tween",null),sound:o(g,"sound",null),once:o(g,"once",!1),stop:o(g,"stop",!1)}),v=m}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var c=Math.min(this.totalComplete,this.events.length);return c/this.events.length},destroy:function(){var c=this.systems.events;c.off(a.PRE_UPDATE,this.preUpdate,this),c.off(a.UPDATE,this.update,this),c.off(a.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});f.register("timeline",function(c){return new u(this.scene,c)}),r.exports=u},94880:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(95540),f=new d({initialize:function(a){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(a)},reset:function(o){if(this.delay=x(o,"delay",0),this.repeat=x(o,"repeat",0),this.loop=x(o,"loop",!1),this.callback=x(o,"callback",void 0),this.callbackScope=x(o,"callbackScope",this),this.args=x(o,"args",[]),this.timeScale=x(o,"timeScale",1),this.startAt=x(o,"startAt",0),this.paused=x(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,a=this.elapsed+this.delay*(this.repeat-this.repeatCount);return a/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});r.exports=f},35945:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},89809:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:i(35945)}},90291:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),x=i(83419),f=i(43491),o=i(88032),a=i(37277),n=i(44594),u=i(93109),c=i(86081),l=i(8357),v=i(43960),p=i(26012),g=new x({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(m){Array.isArray(m)||(m=[m]);for(var C=[],P=0;P<m.length;P++){var M=m[P];M instanceof c||M instanceof v?C.push(M):Array.isArray(M.tweens)?C.push(p(this,M)):C.push(l(this,M))}return C.length===1?C[0]:C},add:function(m){var C=m,P=this.tweens;return C instanceof c||C instanceof v||(Array.isArray(C.tweens)?C=p(this,C):C=l(this,C)),P.push(C.reset()),C},addMultiple:function(m){for(var C,P=[],M=this.tweens,E=0;E<m.length;E++)C=m[E],C instanceof c||C instanceof v||(Array.isArray(C.tweens)?C=p(this,C):C=l(this,C)),M.push(C.reset()),P.push(C);return P},chain:function(m){var C=p(this,m);return this.tweens.push(C.init()),C},getChainedTweens:function(m){return m.getChainedTweens()},has:function(m){return this.tweens.indexOf(m)>-1},existing:function(m){return this.has(m)||this.tweens.push(m.reset()),this},addCounter:function(m){var C=o(this,m);return this.tweens.push(C.reset()),C},stagger:function(m,C){return u(m,C)},setLagSmooth:function(m,C){return m===void 0&&(m=1/1e-8),C===void 0&&(C=0),this.maxLag=m,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(m){return m===void 0&&(m=240),this.gap=1e3/m,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(m){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var P=this.prevTime-this.startTime,M=P-this.nextTime,E=P-this.time*1e3;return M>0||m?(P/=1e3,this.time=P,this.nextTime+=M+(M>=this.gap?4:this.gap-M)):E=0,E},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(m){m===void 0&&(m=!1);var C=this.getDelta(m);if(!(C<=0)){this.processing=!0;var P,M,E=[],w=this.tweens;for(P=0;P<w.length;P++)M=w[P],M.update(C)&&E.push(M);var R=E.length;if(R&&w.length>0){for(P=0;P<R;P++){M=E[P];var A=w.indexOf(M);A>-1&&(M.isPendingRemove()||M.isDestroyed())&&(w.splice(A,1),M.destroy())}E.length=0}this.processing=!1}},remove:function(m){return this.processing?m.setPendingRemoveState():(d(this.tweens,m),m.setRemovedState()),this},reset:function(m){return this.existing(m),m.seek(),m.setActiveState(),this},makeActive:function(m){return this.existing(m),m.setActiveState(),this},each:function(m,C){var P,M=[null];for(P=1;P<arguments.length;P++)M.push(arguments[P]);return this.tweens.forEach(function(E){M[0]=E,m.apply(C,M)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(m){var C=[],P=this.tweens;Array.isArray(m)?m=f(m):m=[m];for(var M=m.length,E=0;E<P.length;E++)for(var w=P[E],R=0;R<M;R++)!w.isDestroyed()&&w.hasTarget(m[R])&&C.push(w);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(m){return this.timeScale=m,this},isTweening:function(m){for(var C=this.tweens,P,M=0;M<C.length;M++)if(P=C[M],P.isPlaying()&&P.hasTarget(m))return!0;return!1},killAll:function(){for(var m=this.processing?this.getTweens():this.tweens,C=0;C<m.length;C++)m[C].destroy();return this.processing||(m.length=0),this},killTweensOf:function(m){for(var C=this.getTweensOf(m),P=0;P<C.length;P++)C[P].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});a.register("TweenManager",g,"tweens"),r.exports=g},57355:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){return i&&i.hasOwnProperty(d)?i[d]:x};r.exports=T},6113:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62640),x=i(35355),f=function(o,a){var n=d.Power0;if(typeof o=="string")if(d.hasOwnProperty(o))n=d[o];else{var u="";if(o.indexOf(".")){u=o.substring(o.indexOf(".")+1);var c=u.toLowerCase();c==="in"?u="easeIn":c==="out"?u="easeOut":c==="inout"&&(u="easeInOut")}o=x(o.substring(0,o.indexOf(".")+1)+u),d.hasOwnProperty(o)&&(n=d[o])}else typeof o=="function"&&(n=o);if(!a)return n;var l=a.slice(0);return l.unshift(0),function(v){return l[0]=v,n.apply(this,l)}};r.exports=f},91389:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89318),x=i(77259),f=i(28392),o={bezier:d,catmull:x,catmullrom:x,linear:f},a=function(n){if(n===null)return null;var u=o.linear;return typeof n=="string"?o.hasOwnProperty(n)&&(u=o[n]):typeof n=="function"&&(u=n),u};r.exports=a},55292:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f;if(i.hasOwnProperty(d)){var o=typeof i[d];o==="function"?f=function(a,n,u,c,l,v){return i[d](a,n,u,c,l,v)}:f=function(){return i[d]}}else typeof x=="function"?f=x:f=function(){return x};return f};r.exports=T},82985:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81076),x=function(f){var o,a=[];if(f.hasOwnProperty("props"))for(o in f.props)o.substring(0,1)!=="_"&&a.push({key:o,value:f.props[o]});else for(o in f)d.indexOf(o)===-1&&o.substring(0,1)!=="_"&&a.push({key:o,value:f[o]});return a};r.exports=x},62329:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),x=function(f){var o=d(f,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};r.exports=x},17777:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),x=i(99472);function f(c){return!!c.getActive&&typeof c.getActive=="function"}function o(c){return!!c.getStart&&typeof c.getStart=="function"}function a(c){return!!c.getEnd&&typeof c.getEnd=="function"}function n(c){return o(c)||a(c)||f(c)}var u=function(c,l){var v,p=function(Y,H,z){return z},g=function(Y,H,z){return z},m=null,C=typeof l;if(C==="number")p=function(){return l};else if(Array.isArray(l))g=function(){return l[0]},p=function(){return l[l.length-1]};else if(C==="string"){var P=l.toLowerCase(),M=P.substring(0,6)==="random",E=P.substring(0,3)==="int";if(M||E){var w=P.indexOf("("),R=P.indexOf(")"),A=P.indexOf(",");if(w&&R&&A){var L=parseFloat(P.substring(w+1,A)),F=parseFloat(P.substring(A+1,R));M?p=function(){return x(L,F)}:p=function(){return d(L,F)}}else throw new Error("invalid random() format")}else{P=P[0];var O=parseFloat(l.substr(2));switch(P){case"+":p=function(Y,H,z){return z+O};break;case"-":p=function(Y,H,z){return z-O};break;case"*":p=function(Y,H,z){return z*O};break;case"/":p=function(Y,H,z){return z/O};break;default:p=function(){return parseFloat(l)}}}}else if(C==="function")p=l;else if(C==="object")if(n(l))f(l)&&(m=l.getActive),a(l)&&(p=l.getEnd),o(l)&&(g=l.getStart);else if(l.hasOwnProperty("value"))v=u(c,l.value);else{var b=l.hasOwnProperty("to"),I=l.hasOwnProperty("from"),B=l.hasOwnProperty("start");if(b&&(I||B)){if(v=u(c,l.to),B){var N=u(c,l.start);v.getActive=N.getEnd}if(I){var k=u(c,l.from);v.getStart=k.getEnd}}}return v||(v={getActive:m,getEnd:p,getStart:g}),v};r.exports=u},88032:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),x=i(69902),f=i(23568),o=i(57355),a=i(6113),n=i(55292),u=i(35154),c=i(17777),l=i(269),v=i(86081),p=function(g,m,C){if(m instanceof v)return m.parent=g,m;C===void 0?C=x:C=l(x,C);var P=u(m,"from",0),M=u(m,"to",1),E=[{value:P}],w=u(m,"delay",C.delay),R=u(m,"easeParams",C.easeParams),A=u(m,"ease",C.ease),L=c("value",M),F=new v(g,E),O=F.add(0,"value",L.getEnd,L.getStart,L.getActive,a(u(m,"ease",A),u(m,"easeParams",R)),n(m,"delay",w),u(m,"duration",C.duration),o(m,"yoyo",C.yoyo),u(m,"hold",C.hold),u(m,"repeat",C.repeat),u(m,"repeatDelay",C.repeatDelay),!1,!1);O.start=P,O.current=P,F.completeDelay=f(m,"completeDelay",0),F.loop=Math.round(f(m,"loop",0)),F.loopDelay=Math.round(f(m,"loopDelay",0)),F.paused=o(m,"paused",!1),F.persist=o(m,"persist",!1),F.callbackScope=u(m,"callbackScope",F);for(var b=d.TYPES,I=0;I<b.length;I++){var B=b[I],N=u(m,B,!1);if(N){var k=u(m,B+"Params",[]);F.setCallback(B,N,k)}}return F};r.exports=p},93109:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6113),x=i(35154),f=i(36383),o=function(a,n){n===void 0&&(n={});var u,c=x(n,"start",0),l=x(n,"ease",null),v=x(n,"grid",null),p=x(n,"from",0),g=p==="first",m=p==="center",C=p==="last",P=typeof p=="number",M=Array.isArray(a),E=parseFloat(M?a[0]:a),w=M?parseFloat(a[1]):0,R=Math.max(E,w);if(M&&(c+=E),v){var A=v[0],L=v[1],F=0,O=0,b=0,I=0,B=[];C?(F=A-1,O=L-1):P?(F=p%A,O=Math.floor(p/A)):m&&(F=(A-1)/2,O=(L-1)/2);for(var N=f.MIN_SAFE_INTEGER,k=0;k<L;k++){B[k]=[];for(var Y=0;Y<A;Y++){b=F-Y,I=O-k;var H=Math.sqrt(b*b+I*I);H>N&&(N=H),B[k][Y]=H}}}var z=l?d(l):null;return v?u=function(X,D,G,V){var W=0,U=V%A,$=Math.floor(V/A);U>=0&&U<A&&$>=0&&$<L&&(W=B[$][U]);var K;if(M){var Z=w-E;z?K=W/N*Z*z(W/N):K=W/N*Z}else z?K=W*E*z(W/N):K=W*E;return K+c}:u=function(X,D,G,V,W){W--;var U;g?U=V:m?U=Math.abs(W/2-V):C?U=W-V:P&&(U=Math.abs(p-V));var $;if(M){var K;m?K=(w-E)/W*(U*2):K=(w-E)/W*U,z?$=K*z(U/W):$=K}else z?$=W*R*z(U/W):$=U*E;return $+c},u};r.exports=o},8357:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),x=i(69902),f=i(23568),o=i(57355),a=i(6113),n=i(91389),u=i(55292),c=i(82985),l=i(62329),v=i(35154),p=i(17777),g=i(269),m=i(86081),C=function(P,M,E){if(M instanceof m)return M.parent=P,M;E===void 0?E=x:E=g(x,E);var w=l(M);!w&&E.targets&&(w=E.targets);for(var R=c(M),A=v(M,"delay",E.delay),L=v(M,"duration",E.duration),F=v(M,"easeParams",E.easeParams),O=v(M,"ease",E.ease),b=v(M,"hold",E.hold),I=v(M,"repeat",E.repeat),B=v(M,"repeatDelay",E.repeatDelay),N=o(M,"yoyo",E.yoyo),k=o(M,"flipX",E.flipX),Y=o(M,"flipY",E.flipY),H=v(M,"interpolation",E.interpolation),z=function(Q,j,_,q){if(_==="texture"){var st=q,ht=void 0;Array.isArray(q)?(st=q[0],ht=q[1]):q.hasOwnProperty("value")?(st=q.value,Array.isArray(q.value)?(st=q.value[0],ht=q.value[1]):typeof q.value=="string"&&(st=q.value)):typeof q=="string"&&(st=q),Q.addFrame(j,st,ht,u(q,"delay",A),v(q,"duration",L),v(q,"hold",b),v(q,"repeat",I),v(q,"repeatDelay",B),o(q,"flipX",k),o(q,"flipY",Y))}else{var lt=p(_,q),ot=n(v(q,"interpolation",H));Q.add(j,_,lt.getEnd,lt.getStart,lt.getActive,a(v(q,"ease",O),v(q,"easeParams",F)),u(q,"delay",A),v(q,"duration",L),o(q,"yoyo",N),v(q,"hold",b),v(q,"repeat",I),v(q,"repeatDelay",B),o(q,"flipX",k),o(q,"flipY",Y),ot,ot?q:null)}},X=new m(P,w),D=0;D<R.length;D++)for(var G=R[D].key,V=R[D].value,W=0;W<w.length;W++)G==="scale"&&!w[W].hasOwnProperty("scale")?(z(X,W,"scaleX",V),z(X,W,"scaleY",V)):z(X,W,G,V);X.completeDelay=f(M,"completeDelay",0),X.loop=Math.round(f(M,"loop",0)),X.loopDelay=Math.round(f(M,"loopDelay",0)),X.paused=o(M,"paused",!1),X.persist=o(M,"persist",!1),X.callbackScope=v(M,"callbackScope",X);for(var U=d.TYPES,$=0;$<U.length;$++){var K=U[$],Z=v(M,K,!1);if(Z){var J=v(M,K+"Params",[]);X.setCallback(K,Z,J)}}return X};r.exports=C},26012:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),x=i(23568),f=i(57355),o=i(62329),a=i(35154),n=i(8357),u=i(43960),c=function(l,v){if(v instanceof u)return v.parent=l,v;var p=new u(l);p.startDelay=a(v,"delay",0),p.completeDelay=x(v,"completeDelay",0),p.loop=Math.round(x(v,"loop",a(v,"repeat",0))),p.loopDelay=Math.round(x(v,"loopDelay",a(v,"repeatDelay",0))),p.paused=f(v,"paused",!1),p.persist=f(v,"persist",!1),p.callbackScope=a(v,"callbackScope",p);var g,m=d.TYPES;for(g=0;g<m.length;g++){var C=m[g],P=a(v,C,!1);if(P){var M=a(v,C+"Params",[]);p.setCallback(C,P,M)}}var E=a(v,"tweens",null);if(Array.isArray(E)){var w=[],R=o(v),A=void 0;for(R&&(A={targets:R}),g=0;g<E.length;g++)w.push(n(p,E[g],A));p.add(w)}return p};r.exports=c},30231:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="active"},98540:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},67233:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},2859:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},98336:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="repeat"},25764:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},32193:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},84371:r=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},70766:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},55659:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="yoyo"},842:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)};r.exports=d},70402:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(50792),f=i(842),o=i(86353),a=new d({Extends:x,initialize:function(u){x.call(this),this.parent=u,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(f.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(f.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(f.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(f.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(f.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,u,c){return c===void 0&&(c=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:u,params:c}),this},setPendingState:function(){this.state=o.PENDING},setActiveState:function(){this.state=o.ACTIVE},setLoopDelayState:function(){this.state=o.LOOP_DELAY},setCompleteDelayState:function(){this.state=o.COMPLETE_DELAY},setStartDelayState:function(){this.state=o.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=o.PENDING_REMOVE},setRemovedState:function(){this.state=o.REMOVED},setFinishedState:function(){this.state=o.FINISHED},setDestroyedState:function(){this.state=o.DESTROYED},isPending:function(){return this.state===o.PENDING},isActive:function(){return this.state===o.ACTIVE},isLoopDelayed:function(){return this.state===o.LOOP_DELAY},isCompleteDelayed:function(){return this.state===o.COMPLETE_DELAY},isStartDelayed:function(){return this.state===o.START_DELAY},isPendingRemove:function(){return this.state===o.PENDING_REMOVE},isRemoved:function(){return this.state===o.REMOVED},isFinished:function(){return this.state===o.FINISHED},isDestroyed:function(){return this.state===o.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});a.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],r.exports=a},95042:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),x=i(842),f=i(86353),o=new d({initialize:function(n,u,c,l,v,p,g,m,C,P){this.tween=n,this.targetIndex=u,this.duration=l,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=v,this.hold=p,this.repeat=g,this.repeatDelay=m,this.repeatCounter=0,this.flipX=C,this.flipY=P,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(a){a===void 0&&(a=this.current),this.tween.targets[this.targetIndex][this.key]=a},setCreatedState:function(){this.state=f.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=f.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=f.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=f.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=f.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=f.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=f.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=f.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===f.CREATED},isDelayed:function(){return this.state===f.DELAY},isPendingRender:function(){return this.state===f.PENDING_RENDER},isPlayingForward:function(){return this.state===f.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===f.PLAYING_BACKWARD},isHolding:function(){return this.state===f.HOLD_DELAY},isRepeating:function(){return this.state===f.REPEAT_DELAY},isComplete:function(){return this.state===f.COMPLETE},setStateFromEnd:function(a){this.yoyo?this.onRepeat(a,!0,!0):this.repeatCounter>0?this.onRepeat(a,!0,!1):this.setCompleteState()},setStateFromStart:function(a){this.repeatCounter>0?this.onRepeat(a,!1):this.setCompleteState()},reset:function(){var a=this.tween,n=a.totalTargets,u=this.targetIndex,c=a.targets[u],l=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(c,l,0,u,n,a),this.repeatCounter=this.repeat===-1?f.MAX:this.repeat,this.setPendingRenderState();var v=this.duration+this.hold;this.yoyo&&(v+=this.duration);var p=v+this.repeatDelay;this.totalDuration=this.delay+v,this.repeat===-1?(this.totalDuration+=p*f.MAX,a.isInfinite=!0):this.repeat>0&&(this.totalDuration+=p*this.repeat),this.totalDuration>a.duration&&(a.duration=this.totalDuration),this.delay<a.startDelay&&(a.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(a,n,u){var c=this.tween,l=c.totalTargets,v=this.targetIndex,p=c.targets[v],g=this.key,m=g!=="texture";if(this.elapsed=a,this.progress=a/this.duration,this.flipX&&p.toggleFlipX(),this.flipY&&p.toggleFlipY(),m&&(n||u)&&(this.start=this.getStartValue(p,g,this.start,v,l,c)),u){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,m&&(this.end=this.getEndValue(p,g,this.start,v,l,c)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-a,m&&(this.current=this.start,p[g]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});r.exports=o},69902:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};r.exports=T},81076:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),x=i(83419),f=i(842),o=i(44603),a=i(39429),n=i(36383),u=i(86353),c=i(48177),l=i(42220),v=new x({Extends:d,initialize:function(g,m){d.call(this,g),this.targets=m,this.totalTargets=m.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(p,g,m,C,P,M,E,w,R,A,L,F,O,b,I,B){var N=new c(this,p,g,m,C,P,M,E,w,R,A,L,F,O,b,I,B);return this.totalData=this.data.push(N),N},addFrame:function(p,g,m,C,P,M,E,w,R,A){var L=new l(this,p,g,m,C,P,M,E,w,R,A);return this.totalData=this.data.push(L),L},getValue:function(p){p===void 0&&(p=0);var g=null;return this.data&&(g=this.data[p].current),g},hasTarget:function(p){return this.targets&&this.targets.indexOf(p)!==-1},updateTo:function(p,g,m){if(m===void 0&&(m=!1),p!=="texture")for(var C=0;C<this.totalData;C++){var P=this.data[C];P.key===p&&(P.isPlayingForward()||P.isPlayingBackward())&&(P.end=g,m&&(P.start=P.current))}return this},restart:function(){switch(this.state){case u.REMOVED:case u.FINISHED:this.seek(),this.parent.makeActive(this);break;case u.PENDING:case u.PENDING_REMOVE:this.parent.reset(this);break;case u.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,d.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(p,g,m){if(p===void 0&&(p=0),g===void 0&&(g=16.6),m===void 0&&(m=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;m||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,p>0){for(var P=Math.floor(p/g),M=p-P*g,E=0;E<P;E++)this.update(g);M>0&&this.update(M)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(p){p===void 0&&(p=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var g=this.data,m=0;m<this.totalData;m++)g[m].reset(p);this.duration=Math.max(this.duration,.01);var C=this.duration,P=this.completeDelay,M=this.loopCounter,E=this.loopDelay;M>0?this.totalDuration=C+P+(C+E)*M:this.totalDuration=C+P},reset:function(p){return p===void 0&&(p=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=u.MAX),p||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")),this},update:function(p){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(p*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(p),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(p),!1;this.hasStarted||(this.startDelay-=p,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(f.TWEEN_START,"onStart"),p=0));var g=!1;if(this.isActive())for(var m=this.data,C=0;C<this.totalData;C++)m[C].update(p)&&(g=!0);this.elapsed+=p,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=p,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),g||this.nextState();var P=this.isPendingRemove();return P&&this.persist&&(this.setFinishedState(),P=!1),P},forward:function(p){return this.update(p),this},rewind:function(p){return this.update(-p),this},dispatchEvent:function(p,g){if(!this.isSeeking){this.emit(p,this,this.targets);var m=this.callbacks[g];m&&m.func.apply(this.callbackScope,[this,this.targets].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.targets=null}});a.register("tween",function(p){return this.scene.sys.tweens.add(p)}),o.register("tween",function(p){return this.scene.sys.tweens.create(p)}),r.exports=v},43960:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),x=i(70402),f=i(83419),o=i(842),a=i(44603),n=i(39429),u=i(86353),c=new f({Extends:x,initialize:function(v){x.call(this,v),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?u.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive"),this},add:function(l){var v=this.parent.create(l);Array.isArray(v)||(v=[v]);for(var p=this.data,g=0;g<v.length;g++){var m=v[g];m.parent=this,p.push(m.reset())}return this.totalData=p.length,this},remove:function(l){return d(this.data,l),l.setRemovedState(),l===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(l){for(var v=this.data,p=0;p<this.totalData;p++)if(v[p].hasTarget(l))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(l){return l.seek(),l.setActiveState(),this},makeActive:function(l){return l.reset(),l.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var l=this.data,v=this.totalData,p=0;p<v;p++)l[p].reset(!1);this.currentIndex=0,this.currentTween=l[0]},update:function(l){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;l*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(l):this.isCompleteDelayed()?this.updateCompleteDelay(l):this.isStartDelayed()&&(l=this.updateStartCountdown(l));var v=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(l)&&this.nextTween()&&this.nextState(),v=this.isPendingRemove(),v&&this.persist&&(this.setFinishedState(),v=!1)),v},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(l){this.currentIndex=l,this.currentTween=this.data[l],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(l,v){this.emit(l,this);var p=this.callbacks[v];p&&p.func.apply(this.callbackScope,[this].concat(p.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(l){return this.scene.sys.tweens.chain(l)}),a.register("tweenchain",function(l){return this.scene.sys.tweens.create(l)}),r.exports=c},48177:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95042),x=i(45319),f=i(83419),o=i(842),a=new f({Extends:d,initialize:function(u,c,l,v,p,g,m,C,P,M,E,w,R,A,L,F,O){d.call(this,u,c,C,P,M,E,w,R,A,L),this.key=l,this.getActiveValue=g,this.getEndValue=v,this.getStartValue=p,this.ease=m,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=O},reset:function(n){d.prototype.reset.call(this);var u=this.tween.targets[this.targetIndex],c=this.key;n&&(u[c]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(u[c]=this.getActiveValue(u,c,0))},update:function(n){var u=this.tween,c=u.totalTargets,l=this.targetIndex,v=u.targets[l],p=this.key;if(!v)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(v,p,v[p],l,c,u),this.end=this.getEndValue(v,p,this.start,l,c,u),this.current=this.start,v[p]=this.start,this.setPlayingForwardState(),!0;var g=this.isPlayingForward(),m=this.isPlayingBackward();if(g||m){var C=this.elapsed,P=this.duration,M=0,E=!1;C+=n,C>=P?(M=C-P,C=P,E=!0):C<0&&(C=0);var w=x(C/P,0,1);if(this.elapsed=C,this.progress=w,this.previous=this.current,E)g?(this.current=this.end,v[p]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(M)):(this.current=this.start,v[p]=this.start,this.setStateFromStart(M));else{g||(w=1-w);var R=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,v[p]=this.current}this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,u){var c=this.tween;if(!c.isSeeking){var l=c.targets[this.targetIndex],v=this.key,p=this.current,g=this.previous;c.emit(n,c,v,l,p,g);var m=c.callbacks[u];m&&m.func.apply(c.callbackScope,[c,l,v,p,g].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});r.exports=a},42220:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95042),x=i(45319),f=i(83419),o=i(842),a=new f({Extends:d,initialize:function(u,c,l,v,p,g,m,C,P,M,E){d.call(this,u,c,p,g,!1,m,C,P,M,E),this.key="texture",this.startTexture=null,this.endTexture=l,this.startFrame=null,this.endFrame=v,this.yoyo=C!==0},reset:function(n){d.prototype.reset.call(this);var u=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=u.texture.key,this.startFrame=u.frame.name),n&&u.setTexture(this.startTexture,this.startFrame)},update:function(n){var u=this.tween,c=this.targetIndex,l=u.targets[c];if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&l.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),p=this.isPlayingBackward();if(v||p){var g=this.elapsed,m=this.duration,C=0,P=!1;g+=n,g>=m?(C=g-m,g=m,P=!0):g<0&&(g=0);var M=x(g/m,0,1);this.elapsed=g,this.progress=M,P&&(v?(l.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(l.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,u){var c=this.tween;if(!c.isSeeking){var l=c.targets[this.targetIndex],v=this.key;c.emit(n,c,v,l);var p=c.callbacks[u];p&&p.func.apply(c.callbackScope,[c,l,v].concat(p.params))}},destroy:function(){d.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});r.exports=a},86353:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};r.exports=T},83419:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}function i(a,n,u){var c=u?a[n]:Object.getOwnPropertyDescriptor(a,n);return!u&&c.value&&typeof c.value=="object"&&(c=c.value),c&&T(c)?(typeof c.enumerable>"u"&&(c.enumerable=!0),typeof c.configurable>"u"&&(c.configurable=!0),c):!1}function d(a,n){var u=Object.getOwnPropertyDescriptor(a,n);return u?(u.value&&typeof u.value=="object"&&(u=u.value),u.configurable===!1):!1}function x(a,n,u,c){for(var l in n)if(!!n.hasOwnProperty(l)){var v=i(n,l,u);if(v!==!1){var p=c||a;if(d(p.prototype,l)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(a.prototype,l,v)}else a.prototype[l]=n[l]}}function f(a,n){if(!!n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++)x(a,n[u].prototype||n[u])}}function o(a){a||(a={});var n,u;if(a.initialize){if(typeof a.initialize!="function")throw new Error("initialize must be a function");n=a.initialize,delete a.initialize}else if(a.Extends){var c=a.Extends;n=function(){c.apply(this,arguments)}}else n=function(){};a.Extends?(n.prototype=Object.create(a.Extends.prototype),n.prototype.constructor=n,u=a.Extends,delete a.Extends):n.prototype.constructor=n;var l=null;return a.Mixins&&(l=a.Mixins,delete a.Mixins),f(n,l),x(n,a,!0,u),n}o.extend=x,o.mixin=f,o.ignoreFinals=!1,r.exports=o},29747:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};r.exports=T},20242:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};r.exports=T},71146:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o){if(o===void 0&&(o=i),x>0){var a=x-i.length;if(a<=0)return null}if(!Array.isArray(d))return i.indexOf(d)===-1?(i.push(d),f&&f.call(o,d),d):null;for(var n=d.length-1;n>=0;)i.indexOf(d[n])!==-1&&d.splice(n,1),n--;if(n=d.length,n===0)return null;x>0&&n>a&&(d.splice(a),n=a);for(var u=0;u<n;u++){var c=d[u];i.push(c),f&&f.call(o,c)}return d};r.exports=T},51067:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f,o,a){if(x===void 0&&(x=0),a===void 0&&(a=i),f>0){var n=f-i.length;if(n<=0)return null}if(!Array.isArray(d))return i.indexOf(d)===-1?(i.splice(x,0,d),o&&o.call(a,d),d):null;for(var u=d.length-1;u>=0;)i.indexOf(d[u])!==-1&&d.pop(),u--;if(u=d.length,u===0)return null;f>0&&u>n&&(d.splice(n),u=n);for(var c=u-1;c>=0;c--){var l=d[c];i.splice(x,0,l),o&&o.call(a,l)}return d};r.exports=T},66905:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.indexOf(d);return x!==-1&&x<i.length&&(i.splice(x,1),i.push(d)),d};r.exports=T},21612:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){n===void 0&&(n=0),u===void 0&&(u=f.length);var c=0;if(d(f,n,u))for(var l=n;l<u;l++){var v=f[l];v[o]===a&&c++}return c};r.exports=x},95428:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f,o=[null];for(f=3;f<arguments.length;f++)o.push(arguments[f]);for(f=0;f<i.length;f++)o[0]=i[f],d.apply(x,o);return i};r.exports=T},36914:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){if(n===void 0&&(n=0),u===void 0&&(u=f.length),d(f,n,u)){var c,l=[null];for(c=5;c<arguments.length;c++)l.push(arguments[c]);for(c=n;c<u;c++)l[0]=f[c],o.apply(a,l)}return f};r.exports=x},81957:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d.length){if(d.length===1)return d[0]}else return NaN;var f=1,o,a;if(x){if(i<d[0][x])return d[0];for(;d[f][x]<i;)f++}else for(;d[f]<i;)f++;return f>d.length&&(f=d.length),x?(o=d[f-1][x],a=d[f][x],a-i<=i-o?d[f]:d[f-1]):(o=d[f-1],a=d[f],a-i<=i-o?a:o)};r.exports=T},43491:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=[]);for(var x=0;x<i.length;x++)Array.isArray(i[x])?T(i[x],d):d.push(i[x]);return d};r.exports=T},46710:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){n===void 0&&(n=0),u===void 0&&(u=f.length);var c=[];if(d(f,n,u))for(var l=n;l<u;l++){var v=f[l];(!o||o&&a===void 0&&v.hasOwnProperty(o)||o&&a!==void 0&&v[o]===a)&&c.push(v)}return c};r.exports=x},58731:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){if(n===void 0&&(n=0),u===void 0&&(u=f.length),d(f,n,u))for(var c=n;c<u;c++){var l=f[c];if(!o||o&&a===void 0&&l.hasOwnProperty(o)||o&&a!==void 0&&l[o]===a)return l}return null};r.exports=x},26546:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){d===void 0&&(d=0),x===void 0&&(x=i.length);var f=d+Math.floor(Math.random()*x);return i[f]===void 0?null:i[f]};r.exports=T},85835:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===x)return i;var f=i.indexOf(d),o=i.indexOf(x);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return f>o||(i.splice(f,1),o===i.length-1?i.push(d):i.splice(o,0,d)),i};r.exports=T},83371:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===x)return i;var f=i.indexOf(d),o=i.indexOf(x);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return f<o||(i.splice(f,1),o===0?i.unshift(d):i.splice(o,0,d)),i};r.exports=T},70864:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.indexOf(d);if(x>0){var f=i[x-1],o=i.indexOf(f);i[x]=f,i[o]=d}return i};r.exports=T},69693:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=i.indexOf(d);if(f===-1||x<0||x>=i.length)throw new Error("Supplied index out of bounds");return f!==x&&(i.splice(f,1),i.splice(x,0,d)),d};r.exports=T},40853:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.indexOf(d);if(x!==-1&&x<i.length-1){var f=i[x+1],o=i.indexOf(f);i[x]=f,i[o]=d}return i};r.exports=T},20283:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=[],a,n=!1;if((x||f)&&(n=!0,x||(x=""),f||(f="")),d<i)for(a=i;a>=d;a--)n?o.push(x+a.toString()+f):o.push(a);else for(a=i;a<=d;a++)n?o.push(x+a.toString()+f):o.push(a);return o};r.exports=T},593:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2284),x=function(f,o,a){f===void 0&&(f=0),o===void 0&&(o=null),a===void 0&&(a=1),o===null&&(o=f,f=0);for(var n=[],u=Math.max(d((o-f)/(a||1)),0),c=0;c<u;c++)n.push(f),f+=a;return n};r.exports=x},43886:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(x,f,o){var a=x[f];x[f]=x[o],x[o]=a}function i(x,f){return x<f?-1:x>f?1:0}var d=function(x,f,o,a,n){for(o===void 0&&(o=0),a===void 0&&(a=x.length-1),n===void 0&&(n=i);a>o;){if(a-o>600){var u=a-o+1,c=f-o+1,l=Math.log(u),v=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*v*(u-v)/u)*(c-u/2<0?-1:1),g=Math.max(o,Math.floor(f-c*v/u+p)),m=Math.min(a,Math.floor(f+(u-c)*v/u+p));d(x,f,g,m,n)}var C=x[f],P=o,M=a;for(T(x,o,f),n(x[a],C)>0&&T(x,o,a);P<M;){for(T(x,P,M),P++,M--;n(x[P],C)<0;)P++;for(;n(x[M],C)>0;)M--}n(x[o],C)===0?T(x,o,M):(M++,T(x,M,a)),M<=f&&(o=M+1),f<=M&&(a=M-1)}};r.exports=d},88492:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),x=i(33680),f=function(a,n,u){for(var c=[],l=0;l<a.length;l++)for(var v=0;v<n.length;v++)for(var p=0;p<u;p++)c.push({a:a[l],b:n[v]});return c},o=function(a,n,u){var c=d(u,"max",0),l=d(u,"qty",1),v=d(u,"random",!1),p=d(u,"randomB",!1),g=d(u,"repeat",0),m=d(u,"yoyo",!1),C=[];if(p&&x(n),g===-1)if(c===0)g=0;else{var P=a.length*n.length*l;m&&(P*=2),g=Math.ceil(c/P)}for(var M=0;M<=g;M++){var E=f(a,n,l);v&&x(E),C=C.concat(E),m&&(E.reverse(),C=C.concat(E))}return c&&C.splice(c),C};r.exports=o},72905:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),x=function(f,o,a,n){n===void 0&&(n=f);var u;if(!Array.isArray(o))return u=f.indexOf(o),u!==-1?(d(f,u),a&&a.call(n,o),o):null;for(var c=o.length-1,l=[];c>=0;){var v=o[c];u=f.indexOf(v),u!==-1&&(d(f,u),l.push(v),a&&a.call(n,v)),c--}return l};r.exports=x},60248:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),x=function(f,o,a,n){if(n===void 0&&(n=f),o<0||o>f.length-1)throw new Error("Index out of bounds");var u=d(f,o);return a&&a.call(n,u),u};r.exports=x},81409:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){if(o===void 0&&(o=0),a===void 0&&(a=f.length),u===void 0&&(u=f),d(f,o,a)){var c=a-o,l=f.splice(o,c);if(n)for(var v=0;v<l.length;v++){var p=l[v];n.call(u,p)}return l}else return[]};r.exports=x},31856:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),x=function(f,o,a){o===void 0&&(o=0),a===void 0&&(a=f.length);var n=o+Math.floor(Math.random()*a);return d(f,n)};r.exports=x},42169:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=i.indexOf(d),o=i.indexOf(x);return f!==-1&&o===-1?(i[f]=x,!0):!1};r.exports=T},86003:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=1);for(var x=null,f=0;f<d;f++)x=i.shift(),i.push(x);return x};r.exports=T},49498:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){d===void 0&&(d=1);for(var x=null,f=0;f<d;f++)x=i.pop(),i.unshift(x);return x};r.exports=T},82011:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){var o=i.length;if(d<0||d>o||d>=x||x>o){if(f)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};r.exports=T},89545:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){var x=i.indexOf(d);return x!==-1&&x>0&&(i.splice(x,1),i.unshift(d)),d};r.exports=T},17810:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),x=function(f,o,a,n,u){if(n===void 0&&(n=0),u===void 0&&(u=f.length),d(f,n,u))for(var c=n;c<u;c++){var l=f[c];l.hasOwnProperty(o)&&(l[o]=a)}return f};r.exports=x},33680:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=i.length-1;d>0;d--){var x=Math.floor(Math.random()*(d+1)),f=i[d];i[d]=i[x],i[x]=f}return i};r.exports=T},90126:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d=/\D/g;return i.sort(function(x,f){return parseInt(x.replace(d,""),10)-parseInt(f.replace(d,""),10)}),i};r.exports=T},19133:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){if(!(d>=i.length)){for(var x=i.length-1,f=i[d],o=d;o<x;o++)i[o]=i[o+1];return i.length=x,f}};r.exports=T},19186:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82264);function x(n,u){return String(n).localeCompare(u)}function f(n,u){var c=n.length;if(c<=1)return n;for(var l=new Array(c),v=1;v<c;v*=2){o(n,u,v,l);var p=n;n=l,l=p}return n}function o(n,u,c,l){var v=n.length,p=0,g=c*2,m,C,P,M,E;for(m=0;m<v;m+=g)for(C=m+c,P=C+c,C>v&&(C=v),P>v&&(P=v),M=m,E=C;;)if(M<C&&E<P)u(n[M],n[E])<=0?l[p++]=n[M++]:l[p++]=n[E++];else if(M<C)l[p++]=n[M++];else if(E<P)l[p++]=n[E++];else break}var a=function(n,u){if(u===void 0&&(u=x),!n||n.length<2)return n;if(d.features.stableSort)return n.sort(u);var c=f(n,u);return c!==n&&o(c,null,n.length,n),n};r.exports=a},25630:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(d===x)return i;var f=i.indexOf(d),o=i.indexOf(x);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return i[f]=x,i[o]=d,i};r.exports=T},37105:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){if(!Array.isArray(i)||!Array.isArray(i[0]))return!1;for(var d=i[0].length,x=1;x<i.length;x++)if(i[x].length!==d)return!1;return!0};r.exports=T},63362:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41836),x=i(86922),f=function(o){var a="";if(!x(o))return a;for(var n=0;n<o.length;n++){for(var u=0;u<o[n].length;u++){var c=o[n][u].toString();c!=="undefined"?a+=d(c,2):a+="?",u<o[n].length-1&&(a+=" |")}if(n<o.length-1){a+=`
`;for(var l=0;l<o[n].length;l++)a+="---",l<o[n].length-1&&(a+="+");a+=`
`}}return a};r.exports=f},92598:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.reverse()};r.exports=T},21224:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=0;d<i.length;d++)i[d].reverse();return i};r.exports=T},98717:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),x=function(f){return d(f,180)};r.exports=x},44657:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),x=function(f,o){o===void 0&&(o=1);for(var a=0;a<o;a++)f=d(f,90);return f};r.exports=x},37829:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(86922),x=i(2429),f=function(o,a){if(a===void 0&&(a=90),!d(o))return null;if(typeof a!="string"&&(a=(a%360+360)%360),a===90||a===-270||a==="rotateLeft")o=x(o),o.reverse();else if(a===-90||a===270||a==="rotateRight")o.reverse(),o=x(o);else if(Math.abs(a)===180||a==="rotate180"){for(var n=0;n<o.length;n++)o[n].reverse();o.reverse()}return o};r.exports=f},92632:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),x=function(f,o){o===void 0&&(o=1);for(var a=0;a<o;a++)f=d(f,-90);return f};r.exports=x},69512:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(86003),x=i(49498),f=function(o,a,n){if(a===void 0&&(a=0),n===void 0&&(n=0),n!==0&&(n<0?d(o,Math.abs(n)):x(o,n)),a!==0)for(var u=0;u<o.length;u++){var c=o[u];a<0?d(c,Math.abs(a)):x(c,a)}return o};r.exports=f},2429:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){for(var d=i.length,x=i[0].length,f=new Array(x),o=0;o<x;o++){f[o]=new Array(d);for(var a=d-1;a>-1;a--)f[o][a]=i[a][o]}return f};r.exports=T},54915:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(d,x){for(var f=new Uint8Array(d),o=f.length,a=x?"data:"+x+";base64,":"",n=0;n<o;n+=3)a+=T[f[n]>>2],a+=T[(f[n]&3)<<4|f[n+1]>>4],a+=T[(f[n+1]&15)<<2|f[n+2]>>6],a+=T[f[n+2]&63];return o%3===2?a=a.substring(0,a.length-1)+"=":o%3===1&&(a=a.substring(0,a.length-2)+"=="),a};r.exports=i},53134:r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),d=0;d<T.length;d++)i[T.charCodeAt(d)]=d;var x=function(f){f=f.substr(f.indexOf(",")+1);var o=f.length,a=o*.75,n=0,u,c,l,v;f[o-1]==="="&&(a--,f[o-2]==="="&&a--);for(var p=new ArrayBuffer(a),g=new Uint8Array(p),m=0;m<o;m+=4)u=i[f.charCodeAt(m)],c=i[f.charCodeAt(m+1)],l=i[f.charCodeAt(m+2)],v=i[f.charCodeAt(m+3)],g[n++]=u<<2|c>>4,g[n++]=(c&15)<<4|l>>2,g[n++]=(l&3)<<6|v&63;return p};r.exports=x},65839:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d={};for(var x in i)Array.isArray(i[x])?d[x]=i[x].slice(0):d[x]=i[x];return d};r.exports=T},62644:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){var d,x,f;if(typeof i!="object"||i===null)return i;d=Array.isArray(i)?[]:{};for(f in i)x=i[f],d[f]=T(x);return d};r.exports=T},79291:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41212),x=function(){var f,o,a,n,u,c,l=arguments[0]||{},v=1,p=arguments.length,g=!1;for(typeof l=="boolean"&&(g=l,l=arguments[1]||{},v=2),p===v&&(l=this,--v);v<p;v++)if((f=arguments[v])!=null)for(o in f)a=l[o],n=f[o],l!==n&&(g&&n&&(d(n)||(u=Array.isArray(n)))?(u?(u=!1,c=a&&Array.isArray(a)?a:[]):c=a&&d(a)?a:{},l[o]=x(g,c,n)):n!==void 0&&(l[o]=n));return l};r.exports=x},23568:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(75508),x=i(35154),f=function(o,a,n){var u=x(o,a,null);if(u===null)return n;if(Array.isArray(u))return d.RND.pick(u);if(typeof u=="object"){if(u.hasOwnProperty("randInt"))return d.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return d.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if(typeof u=="function")return u(a);return u};r.exports=f},95540:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){var f=typeof i;return!i||f==="number"||f==="string"?x:i.hasOwnProperty(d)&&i[d]!==void 0?i[d]:x};r.exports=T},82840:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),x=i(45319),f=function(o,a,n,u,c){c===void 0&&(c=n);var l=d(o,a,c);return x(l,n,u)};r.exports=f},35154:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){if(!i&&!f||typeof i=="number")return x;if(i&&i.hasOwnProperty(d))return i[d];if(f&&f.hasOwnProperty(d))return f[d];if(d.indexOf(".")!==-1){for(var o=d.split("."),a=i,n=f,u=x,c=x,l=!0,v=!0,p=0;p<o.length;p++)a&&a.hasOwnProperty(o[p])?(u=a[o[p]],a=a[o[p]]):l=!1,n&&n.hasOwnProperty(o[p])?(c=n[o[p]],n=n[o[p]]):v=!1;return l?u:v?c:x}else return x};r.exports=T},69036:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){for(var x=0;x<d.length;x++)if(!i.hasOwnProperty(d[x]))return!1;return!0};r.exports=T},1985:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){for(var x=0;x<d.length;x++)if(i.hasOwnProperty(d[x]))return!0;return!1};r.exports=T},97022:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.hasOwnProperty(d)};r.exports=T},41212:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){if(!i||typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};r.exports=T},46975:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),x=function(f,o){var a=d(f);for(var n in o)a.hasOwnProperty(n)||(a[n]=o[n]);return a};r.exports=x},269:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),x=function(f,o){var a=d(f);for(var n in o)a.hasOwnProperty(n)&&(a[n]=o[n]);return a};r.exports=x},18254:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97022),x=function(f,o){for(var a={},n=0;n<o.length;n++){var u=o[n];d(f,u)&&(a[u]=f[u])}return a};r.exports=x},61622:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(d))return i[d]=x,!0;if(d.indexOf(".")!==-1){for(var f=d.split("."),o=i,a=i,n=0;n<f.length;n++)if(o.hasOwnProperty(f[n]))a=o,o=o[f[n]];else return!1;return a[f[f.length-1]]=x,!0}return!1};r.exports=T},1183:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return i.replace(/%([0-9]+)/g,function(x,f){return d[Number(f)-1]})};r.exports=T},41836:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d,x,f){d===void 0&&(d=0),x===void 0&&(x=" "),f===void 0&&(f=3),i=i.toString();var o=0;if(d+1>=i.length)switch(f){case 1:i=new Array(d+1-i.length).join(x)+i;break;case 3:var a=Math.ceil((o=d-i.length)/2),n=o-a;i=new Array(n+1).join(x)+i+new Array(a+1).join(x);break;default:i=i+new Array(d+1-i.length).join(x);break}return i};r.exports=T},33628:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i,d){return d===0?i.slice(1):i.slice(0,d-1)+i.slice(d)};r.exports=T},27671:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i.split("").reverse().join("")};r.exports=T},45650:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var d=Math.random()*16|0,x=i==="x"?d:d&3|8;return x.toString(16)})};r.exports=T},35355:r=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(i){return i&&i[0].toUpperCase()+i.slice(1)};r.exports=T},31749:(r,T,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},h={};function y(r){var T=h[r];if(T!==void 0)return T.exports;var i=h[r]={exports:{}};return s[r](i,i.exports,y),i.exports}y.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var S=y(85454);return S})())})(jg);const nd=jg.exports;class it{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,s){it.prototype[t]=s}}var hC=function(e){return e===void 0&&(e=oC),this.getFrameNameCallback=e,this},oC=function(e,t,s){return s==="__BASE"?`${e},${t}`:`${s}:${e},${t}`};function fe(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>fe(s));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let s in e)e.hasOwnProperty(s)&&(t[s]=fe(e[s]));return t}var lC=function(e,t,s,h){Array.isArray(t)&&(h=s,s=t,t=void 0),t==null&&(t="__BASE"),typeof s=="number"&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],h=[arguments[4],void 0,arguments[5]]):s===void 0&&h===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(s=this.columns.data,h=this.rows.data):(s=fe(s),h=fe(h)),this.textureKey=e,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=h,this.rows.count=h?h.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var y=this.scene.sys.textures.get(e);if(!y)return this.clear(),this;if(!s||!h)return this.clear(),this;for(var S=y.get(t),r=S.width,T=0,i=0,d=s.length;i<d;i++)s[i]===void 0?T++:typeof s[i]=="number"?r-=s[i]:r-=s[i].width;for(var x=T>0?r/T:0,f=S.height,o=0,i=0,d=h.length;i<d;i++)h[i]===void 0?o++:typeof h[i]=="number"?f-=h[i]:f-=h[i].width;for(var a=o?f/o:0,n,u,c,l,v,p=0,g=0,m=0,C=h.length;m<C;m++){h[m]===void 0&&(h[m]=a),typeof h[m]=="number"&&(h[m]={height:h[m],stretch:m%2}),n=h[m],c=n.height,this.rows.stretch+=n.stretch|0,this.rows.minHeight+=n.stretch>0?0:c,p=0;for(var i=0,P=s.length;i<P;i++){if(s[i]===void 0&&(s[i]=x),typeof s[i]=="number"&&(s[i]={width:s[i],stretch:i%2}),u=s[i],l=u.width,m===0&&(this.columns.stretch+=u.stretch|0,this.columns.minWidth+=u.stretch>0?0:l),l>=1&&c>=1){v=this.getFrameNameCallback(i,m,t);var M=typeof v;(M==="string"||M==="number")&&y.add(v,0,p+S.cutX,g+S.cutY,l,c)}p+=l}g+=c}return this.updateTexture(),this},uC=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,h=this.width-t,y=this.height-s,S=h>=0?this.maxFixedPartScaleX:this.width/t,r=y>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var T=Math.min(S,r);if(S>T){var i=(S-T)*t;h>=0?h+=i:h=i,S=T}if(r>T){var d=(r-T)*s;y>=0?y+=d:y=d,r=T}}this.columns.scale=S,this.rows.scale=r;var x;h>0?x=this.columns.stretch>0?h/this.columns.stretch:0:x=0;var f;y>0?f=this.rows.stretch>0?y/this.rows.stretch:0:f=0;var o,a,n,u,c,l=0,v=0,p;this._beginDraw();for(var g=0,m=this.rows.count;g<m;g++){n=this.rows.data[g],c=n.stretch===0?n.height*r:f*n.stretch,l=0;for(var C=0,P=this.columns.count;C<P;C++)a=this.columns.data[C],u=a.stretch===0?a.width*S:x*a.stretch,o=this.getFrameNameCallback(C,g,this.baseFrameName),e.has(o)&&u>0&&c>0&&(n.stretch===0&&a.stretch===0||this.getStretchMode(C,g)===0?p=0:p=1,p===0?this._drawImage(this.textureKey,o,l,v,u,c):this._drawTileSprite(this.textureKey,o,l,v,u,c)),l+=u;v+=c}this._endDraw()};const dC=Phaser.Utils.Objects.IsPlainObject,sc=Phaser.Utils.Objects.GetValue;var fC=function(e){return dC(e)?(this.stretchMode.edge=Jo(sc(e,"edge",0)),this.stretchMode.internal=Jo(sc(e,"internal",0))):(e=Jo(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},Jo=function(e){return typeof e=="string"&&(e=cC[e]),e};const cC={scale:0,repeat:1};var vC=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},pC=function(e,t){return vC.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},gC=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},mC=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},te=function(){};const xC={_beginDraw:te,_drawImage:te,_drawTileSprite:te,_endDraw:te,setGetFrameNameCallback:hC,setBaseTexture:lC,updateTexture:uC,setStretchMode:fC,getStretchMode:pC,setPreserveRatio:gC,setMaxFixedPartScale:mC},nn=Phaser.Utils.Objects.IsPlainObject,Tt=Phaser.Utils.Objects.GetValue;var qg=function(e,t){class s extends e{constructor(y,S,r,T,i,d,x,f,o,a){if(nn(S)?(a=S,S=Tt(a,"x",0),r=Tt(a,"y",0),T=Tt(a,"width",1),i=Tt(a,"height",1),d=Tt(a,"key",void 0),x=Tt(a,"baseFrame",void 0),f=Tt(a,"columns",void 0),o=Tt(a,"rows",void 0)):nn(T)?(a=T,T=Tt(a,"width",1),i=Tt(a,"height",1),d=Tt(a,"key",void 0),x=Tt(a,"baseFrame",void 0),f=Tt(a,"columns",void 0),o=Tt(a,"rows",void 0)):nn(d)?(a=d,d=Tt(a,"key",void 0),x=Tt(a,"baseFrame",void 0),f=Tt(a,"columns",void 0),o=Tt(a,"rows",void 0)):nn(x)?(a=x,x=Tt(a,"baseFrame",void 0),f=Tt(a,"columns",void 0),o=Tt(a,"rows",void 0)):Array.isArray(x)?(a=o,o=f,f=x,x=Tt(a,"baseFrame",void 0)):nn(f)&&(a=f,f=Tt(a,"columns",void 0),o=Tt(a,"rows",void 0)),x===void 0&&(x=Tt(a,"frame",void 0)),f===void 0){var n=Tt(a,"leftWidth",void 0),u=Tt(a,"rightWidth",void 0);n!==void 0&&u!==void 0&&(f=[n,void 0,u])}if(o===void 0){var c=Tt(a,"topHeight",void 0),l=Tt(a,"bottomHeight",void 0);c!==void 0&&l!==void 0&&(o=[c,void 0,l])}super(y),this.type=t,this.setPosition(S,r).setSize(T,i).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(Tt(a,"getFrameNameCallback",void 0)),this.setStretchMode(Tt(a,"stretchMode",0)),this.setPreserveRatio(Tt(a,"preserveRatio",!0));var v=Tt(a,"maxFixedPartScale",1),p=Tt(a,"maxFixedPartScaleX",v),g=Tt(a,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setBaseTexture(d,x,f,o)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(y,S){return this.width===y&&this.height===S?this:(super.resize?super.resize(y,S):super.setSize(y,S),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(s.prototype,xC),s};const yC=Phaser.Game;var rc=function(e){return e instanceof yC};const CC=Phaser.Scene;var Qs=function(e){return e instanceof CC},qs=function(e){if(e==null||typeof e!="object")return null;if(rc(e))return e;if(rc(e.game))return e.game;if(Qs(e))return e.sys.game;if(Qs(e.scene))return e.scene.sys.game};const TC=Phaser.GameObjects;var qi=void 0,_g=function(e,t){if(qi||(qi={},qs(e).events.once("destroy",function(){for(var h in qi)qi[h].destroy();qi=void 0})),!qi.hasOwnProperty(t)){var s=qs(e).scene.systemScene,e=new TC[t](s);e.setOrigin(0),qi[t]=e}return qi[t]},SC=function(e,t,s,h,y,S){var r=_g(this,"Image").setTexture(e,t).setDisplaySize(y,S);this.draw(r,s,h)},PC=function(e,t,s,h,y,S){var r=_g(this,"TileSprite").setTexture(e,t).setSize(y,S);this.draw(r,s,h)};const EC=Phaser.GameObjects.RenderTexture;class qh extends qg(EC,"rexNinePatch"){}var MC={_drawImage:SC,_drawTileSprite:PC};Object.assign(qh.prototype,MC);var t0=function(e){return e==null||e===""||e.length===0},wC=function(e,t,s){var h=e;if(!t0(t)){typeof t=="string"&&(t=t.split("."));for(var y,S=0,r=t.length;S<r;S++){if(y=t[S],h[y]==null||typeof h[y]!="object"){var T;S===r-1?s===void 0?T={}:T=s:T={},h[y]=T}h=h[y]}}return h},et=function(e,t,s,h){if(h===void 0&&(h="."),typeof e=="object"){if(t0(t)){if(s==null)return;typeof s=="object"&&(e=s)}else{typeof t=="string"&&(t=t.split(h));var y=t.pop(),S=wC(e,t);S[y]=s}return e}};it.register("ninePatch",function(e,t,s,h,y,S,r,T){var i=new qh(this.scene,e,t,s,h,y,S,r,T);return this.scene.add.existing(i),i});et(window,"RexPlugins.UI.NinePatch",qh);const RC=Phaser.GameObjects.GetCalcMatrix;var AC=function(e,t,s,h){var y=t.getRenderList();if(y.length!==0){s.addToRenderList(t);var S=e.pipelines.set(t.pipeline),r=t.frame.glTexture,T=S.setGameObject(t),i=s.roundPixels,d=RC(t,s,h),x=S.calcMatrix.copyFrom(d.calc),f=t._displayOriginX,o=t._displayOriginY,a=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var n=0,u=y.length;n<u;n++)y[n].webglRender(S,x,a,f,o,r,T,i);e.pipelines.postBatch(t)}};const LC=Phaser.Renderer.Canvas.SetTransform;var OC=function(e,t,s,h){var y=e.currentContext,S=t.getRenderList();if(!(S.length===0||!LC(e,y,t,s,h))){s.addToRenderList(t);var r=s.roundPixels,T=-t._displayOriginX,i=-t._displayOriginY;y.translate(T,i);for(var d=0,x=S.length;d<x;d++)S[d].canvasRender(y,T,i,r);y.restore()}};const FC={renderWebGL:AC,renderCanvas:OC};var bC=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},nc=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=t),this},DC=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const IC=Phaser.Utils.Array.Remove;var BC=function(e){return this.poolManager&&this.poolManager.free(e),IC(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},ac=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},GC=function(){return this.lastAppendedChildren},NC=function(){return this.children.list};const zC={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var e0={setTexture:bC,resize:nc,setSize:nc,addChild:DC,removeChild:BC,removeChildren:ac,clear:ac,getLastAppendedChildren:GC,getChildren:NC};Object.assign(e0,zC);class wi{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const VC=Phaser.Utils.Objects.GetValue;var kC={};class XC{constructor(t){this.pools=VC(t,"pools",kC)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new wi),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,h=t.length;s<h;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const WC=60;var hc=!1,_h=function(e){if(!hc){e===void 0&&(e=WC);var t=parseInt(Phaser.VERSION.match(/\.(\d+)\./)[1]);t<e&&console.error(`Minimum supported version : 3.${e}`),hc=!0}};_h();const YC=Phaser.GameObjects.GameObject,UC=Phaser.Utils.Objects.IsPlainObject,an=Phaser.Utils.Objects.GetValue,HC=Phaser.Structs.List,$C=Phaser.Utils.Array.StableSort;class i0 extends YC{constructor(t,s,h,y,S,r){UC(s)&&(r=s,s=an(r,"x",0),h=an(r,"y",0),y=an(r,"texture"),S=an(r,"frame")),s===void 0&&(s=0),h===void 0&&(h=0),super(t,"rexBlitter"),this.children=new HC,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var T=an(r,"reuseBob",!0);this.poolManager=T?new XC(r):void 0,this.setTexture(y,S),this.setPosition(s,h),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,h=0,y=s.length;h<y;h++){var S=s[h];KC(S)&&(this.renderList.push(S),t||(t=S.depth!==0))}t&&$C(this.renderList,ZC),this.displayListDirty=!1}return this.renderList}}var KC=function(e){return e.active&&e.visible&&e.alpha>0},ZC=function(e,t){return e._depth-t._depth};const Ye=Phaser.GameObjects.Components;Phaser.Class.mixin(i0,[Ye.Alpha,Ye.BlendMode,Ye.ComputedSize,Ye.Depth,Ye.GetBounds,Ye.Mask,Ye.Origin,Ye.Pipeline,Ye.PostPipeline,Ye.ScrollFactor,Ye.Transform,Ye.Visible,FC,e0]);const s0="image";var wt=function(e,t,s){if(!e||typeof e=="number")return s;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return s}for(var h=t,y=e,S=s,r=0;r<h.length;r++)if(t=h[r],y.hasOwnProperty(t))S=y[t],y=S;else{S=s;break}return S},Xi=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e};const to={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var s=e;for(e in s)this.data[e]=s[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:wt(this.data,e,t)},incData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)+t),this},mulData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)*t),this},clearData(){return this.data&&Xi(this.data),this}};class r0{constructor(t,s){this.type=s,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(r0.prototype,to);const JC=Phaser.Math.DegToRad,QC=Phaser.Math.RadToDeg,hr=Phaser.Utils.Objects.GetValue;class jC extends r0{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setRotation(t){return this.rotation=t,this}get angle(){return QC(this.rotation)}set angle(t){this.rotation=JC(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,s){return s===void 0&&(s=!1),this.displayWidth=t,s&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,s){return s===void 0&&(s=!1),this.displayHeight=t,s&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,s){return s===void 0&&(s=t),this.setOriginX(t).setOriginY(s),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=hr(t,"width",void 0),h=hr(t,"height",void 0),y=hr(t,"scale",void 0),S=hr(t,"scaleX",y),r=hr(t,"scaleY",y);s!==void 0?h===void 0&&r===void 0?this.setWidth(s,!0):this.setWidth(s):S!==void 0?this.setScaleX(S):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),h!==void 0?s===void 0&&S===void 0?this.setHeight(h,!0):this.setHeight(h):r!==void 0?this.setScaleY(r):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var T=hr(t,"origin",void 0);return T!==void 0?this.setOrigin(T):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,s,h,y,S,r,T,i){}canvasRender(t,s,h,y){}}const qC=Phaser.GameObjects.Components.TransformMatrix,_C=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var ya=new qC,t1=function(e,t,s,h,y,S,r,T){var i=this._width,d=this._height,x=i*this.originX,f=d*this.originY,o=this.x-h,a=this.y-y,n=1,u=1;this.flipX&&(o+=i-x*2,n=-1),this.flipY&&(a+=d-f*2,u=-1),ya.applyITRS(o,a,this.rotation,this.scaleX*n,this.scaleY*u),t.multiply(ya,ya);var c=-x,l=-f,v=c+i,p=l+d,g=ya.setQuad(c,l,v,p,T),m=this.frame.u0,C=this.frame.v0,P=this.frame.u1,M=this.frame.v1,E=_C(this.tint,this.alpha*s);e.batchQuad(this.parent,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],m,C,P,M,E,E,E,E,this.tintFill,S,r)},e1=function(e,t,s,h){e.save();var y=this._width,S=this._height,r=y*this.originX,T=S*this.originY,i=this.x-r,d=this.y-T,x=1,f=1;this.flipX&&(i+=y,x=-1),this.flipY&&(d+=S,f=-1),h&&(i=Math.round(i),d=Math.round(d)),e.translate(i,d),e.rotate(this.rotation),e.scale(this.scaleX*x,this.scaleY*f);var o=this.frame;e.drawImage(o.source.image,o.cutX,o.cutY,y,S,0,0,y,S),e.restore()};const i1=Phaser.Utils.Objects.IsPlainObject;class n0 extends jC{constructor(t,s){super(t,s0),this.setFrame(s)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!i1(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var s1={webglRender:t1,canvasRender:e1};Object.assign(n0.prototype,s1);var a0=function(e,t){typeof t=="string"&&(t={frame:t});var s=e.poolManager?e.poolManager.allocate(s0):null;return s===null?s=new n0(e):s.setParent(e).setActive(),s.modifyPorperties(t),e.addChild(s),s},r1=function(e,t,s,h,y,S){a0(this,{frame:t,x:s,y:h,width:y,height:S})},n1=function(e,t,s,h,y,S){var r=this.texture.get(t),T=r.width,i=r.height,d=Math.floor(y/T),x=Math.floor(S/i);s+=(y-d*T)/2,h+=(S-x*i)/2;for(var f=0;f<d;f++)for(var o=0;o<x;o++)a0(this,{frame:t,x:s+f*T,y:h+o*i})};const a1={_drawImage:r1,_drawTileSprite:n1};class ad extends qg(i0,"rexNinePatch2"){setBaseTexture(t,s,h,y){return this.setTexture(t,s),super.setBaseTexture(t,s,h,y),this}}Object.assign(ad.prototype,a1);it.register("ninePatch2",function(e,t,s,h,y,S,r,T){var i=new ad(this.scene,e,t,s,h,y,S,r,T);return this.scene.add.existing(i),i});et(window,"RexPlugins.UI.NinePatch2",ad);var h1=Phaser.Renderer.WebGL.Utils,h0=function(e,t,s,h,y,S){for(var r=h1.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*h),T=s.pathData,i=s.pathIndexes,d=0;d<i.length;d+=3){var x=i[d]*2,f=i[d+1]*2,o=i[d+2]*2,a=T[x+0]-y,n=T[x+1]-S,u=T[f+0]-y,c=T[f+1]-S,l=T[o+0]-y,v=T[o+1]-S,p=t.getX(a,n),g=t.getY(a,n),m=t.getX(u,c),C=t.getY(u,c),P=t.getX(l,v),M=t.getY(l,v);e.batchTri(s,p,g,m,C,P,M,0,0,1,1,r,r,r,2)}},o1=Phaser.Renderer.WebGL.Utils,eo=function(e,t,s,h,y){var S=e.strokeTint,r=o1.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);S.TL=r,S.TR=r,S.BL=r,S.BR=r;var T=t.pathData,i=T.length-1,d=t.lineWidth,x=d/2,f=T[0]-h,o=T[1]-y;t.closePath||(i-=2);for(var a=2;a<i;a+=2){var n=T[a]-h,u=T[a+1]-y;e.batchLine(f,o,n,u,x,x,d,a-2,t.closePath?a===i-1:!1),f=n,o=u}};const l1=Phaser.GameObjects.GetCalcMatrix;var u1=function(e,t,s,h){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var y=e.pipelines.set(t.pipeline),S=l1(t,s,h),r=y.calcMatrix.copyFrom(S.calc),T=t._displayOriginX,i=t._displayOriginY,d=s.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&h0(y,r,t,d,T,i),t.isStroked&&eo(y,t,d,T,i),e.pipelines.postBatch(t)},Hn=function(e,t,s,h){var y=s||t.fillColor,S=h||t.fillAlpha,r=(y&16711680)>>>16,T=(y&65280)>>>8,i=y&255;e.fillStyle="rgba("+r+","+T+","+i+","+S+")"},$n=function(e,t,s,h){var y=s||t.strokeColor,S=h||t.strokeAlpha,r=(y&16711680)>>>16,T=(y&65280)>>>8,i=y&255;e.strokeStyle="rgba("+r+","+T+","+i+","+S+")",e.lineWidth=t.lineWidth};const d1=Phaser.Renderer.Canvas.SetTransform;var f1=function(e,t,s,h){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var y=e.currentContext;if(d1(e,y,t,s,h)){var S=t._displayOriginX,r=t._displayOriginY,T=t.pathData,i=T.length-1,d=T[0]-S,x=T[1]-r;y.beginPath(),y.moveTo(d,x),t.closePath||(i-=2);for(var f=2;f<i;f+=2){var o=T[f]-S,a=T[f+1]-r;y.lineTo(o,a)}y.closePath(),t.isFilled&&(Hn(y,t),y.fill()),t.isStroked&&($n(y,t),y.stroke()),y.restore()}};const c1={renderWebGL:u1,renderCanvas:f1},v1=Phaser.GameObjects.Shape;class hd extends v1{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,h){return h===void 0&&(h=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=h,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=t,h.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}}Object.assign(hd.prototype,c1);const ls=Phaser.Utils.Objects.GetValue;class o0{constructor(t,s,h,y,S){t===void 0&&(t=0),s===void 0&&(s=t),h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,s,h,y,S)}setTo(t,s,h,y,S){return this.setPosition(t,s),this.setRadius(S),this.setSize(h,y),this}setPosition(t,s){return this.x=t,this.y=s,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,s){return this.width=t,this.height=s,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var s,h;typeof t=="number"?(s=t,h=t):(s=ls(t,"x",0),h=ls(t,"y",0));var y=this.cornerRadius;y.tl=Ca(ls(t,"tl",void 0),s,h),y.tr=Ca(ls(t,"tr",void 0),s,h),y.bl=Ca(ls(t,"bl",void 0),s,h),y.br=Ca(ls(t,"br",void 0),s,h)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Ta(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Ta(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Ta(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Ta(this.cornerRadius.br,t)}}var Ca=function(e,t,s){return e===void 0?e={x:t,y:s}:typeof e=="number"&&(e={x:e,y:e}),l0(e),e},Ta=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=ls(t,"x",0),e.y=ls(t,"y",0)),l0(e)},l0=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},ne=function(e,t,s){var h=s.length;if(h>=2){var y=s[h-2],S=s[h-1];if(e===y&&t===S)return s}return s.push(e,t),s};const oc=Phaser.Math.DegToRad;var ae=function(e,t,s,h,y,S,r,T,i){r&&S>y?S-=360:!r&&S<y&&(S+=360);var d=S-y,x=oc(d)/T;y=oc(y);for(var f=0;f<=T;f++){var o=y+x*f,a=e+s*Math.cos(o),n=t+h*Math.sin(o);ne(a,n,i)}return i};const p1=Phaser.Utils.Objects.IsPlainObject,lc=Phaser.Utils.Objects.GetValue,g1=Phaser.Geom.Polygon.Earcut;class tr extends hd{constructor(t,s,h,y,S,r,T,i){var d,x,f,o;if(p1(s)){var a=s;s=a.x,h=a.y,y=a.width,S=a.height,r=a.radius,T=a.color,i=a.alpha,d=a.strokeColor,x=a.strokeAlpha,f=a.strokeWidth,o=a.shape}s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=y),r===void 0&&(r=0),o===void 0&&(o=0);var n=new o0;if(super(t,"rexRoundRectangleShape",n),this.setShapeType(o),this.shapeType===0){var u=lc(r,"radius",r);n.setTo(0,0,y,S,u)}else{var u={x:y/2,y:S/2};n.setTo(0,0,y,S,u)}var c=lc(r,"iteration",void 0);this.setIteration(c),this.setPosition(s,h),this.setFillStyle(T,i),d!==void 0&&f===void 0&&(f=2),this.setStrokeStyle(f,d,x),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,s=this.pathData;s.length=0;var h=t.width,y=t.height,S=t.cornerRadius,r,T=this.iteration+1;if(r=S.tl,Sa(r))if(r.convex){var i=r.x,d=r.y;ae(i,d,r.x,r.y,180,270,!1,T,s)}else{var i=0,d=0;ae(i,d,r.x,r.y,90,0,!0,T,s)}else ne(0,0,s);if(r=S.tr,Sa(r))if(r.convex){var i=h-r.x,d=r.y;ae(i,d,r.x,r.y,270,360,!1,T,s)}else{var i=h,d=0;ae(i,d,r.x,r.y,180,90,!0,T,s)}else ne(h,0,s);if(r=S.br,Sa(r))if(r.convex){var i=h-r.x,d=y-r.y;ae(i,d,r.x,r.y,0,90,!1,T,s)}else{var i=h,d=y;ae(i,d,r.x,r.y,270,180,!0,T,s)}else ne(h,y,s);if(r=S.bl,Sa(r))if(r.convex){var i=r.x,d=y-r.y;ae(i,d,r.x,r.y,90,180,!1,T,s)}else{var i=0,d=y;ae(i,d,r.x,r.y,360,270,!0,T,s)}else ne(0,y,s);return s.push(s[0],s[1]),this.pathIndexes=g1(s),this}setShapeType(t){return typeof t=="string"&&(t=m1[t]),this.shapeType=t,this}setSize(t,s){return s===void 0&&(s=t),this.geom.width===t&&this.geom.height===s?this:(this.geom.setSize(t,s),this.shapeType===1&&this.setRadius({x:t/2,y:s/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,s),this)}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var Sa=function(e){return e.x>0&&e.y>0};const m1={rectangle:0,circle:1};it.register("roundRectangle",function(e,t,s,h,y,S,r){var T=new tr(this.scene,e,t,s,h,y,S,r);return this.scene.add.existing(T),T});et(window,"RexPlugins.UI.RoundRectangle",tr);const x1=Phaser.Renderer.WebGL.Utils;var y1=function(e,t,s,h){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var y=t.frame,S=y.width,r=y.height,T=x1.getTintAppendFloatAlpha,i=e.pipelines.set(t.pipeline,t),d=i.setTexture2D(y.glTexture,t);e.pipelines.preBatch(t),i.batchTexture(t,y.glTexture,S,r,t.x,t.y,S/t.resolution,r/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,r,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,h,!1,d),e.pipelines.postBatch(t)}},C1=function(e,t,s,h){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),e.batchSprite(t,t.frame,s,h))};const T1={renderWebGL:y1,renderCanvas:C1},S1=Phaser.Display.Color,P1={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,s,h,y,S,r,T,i,d){var x=this.scene.sys.textures.getFrame(e,t);if(!x)return this;var f=x.cutWidth,o=x.cutHeight;s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=f),S===void 0&&(S=o),r===void 0&&(r=0),T===void 0&&(T=0),i===void 0&&(i=f),d===void 0&&(d=o);var a=x.cutX+r,n=x.cutY+T;return this.context.drawImage(x.source.image,a,n,i,d,s,h,y,S),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,s){s===void 0&&(s=new S1);var h=this.context.getImageData(e,t,1,1);return s.setTo(h.data[0],h.data[1],h.data[2],h.data[3]),s},setPixel(e,t,s,h,y,S){if(typeof s!="number"){var r=s;s=r.red,h=r.green,y=r.blue,S=r.alpha}S===void 0&&(S=s!==0||h!==0||y!==0?255:0);var T=this.context.createImageData(1,1);return T.data[0]=s,T.data[1]=h,T.data[2]=y,T.data[3]=S,this.context.putImageData(T,e,t),this.dirty=!0,this}};var u0=function(e,t,s,h,y,S,r){var T=e.sys.textures,i=e.renderer;h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=t.width),r===void 0&&(r=t.height);var d;T.exists(s)?d=T.get(s):d=T.createCanvas(s,S,r);var x=d.getSourceImage();x.width!==S&&(x.width=S),x.height!==r&&(x.height=r);var f=x.getContext("2d",{willReadFrequently:!0});f.clearRect(0,0,S,r),f.drawImage(t,h,y,S,r),i.gl&&d&&i.canvasToTexture(x,d.source[0].glTexture,!0,0)};const E1={updateTexture(e,t){e&&(t?e.call(t,this.canvas,this.context):e(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(e,t,s,h,y){var S=this.canvas;return h===void 0?h=S.width:h*=this.resolution,y===void 0?y=S.height:y*=this.resolution,u0(this.scene,S,e,t,s,h,y),this},loadTexture(e,t){var s=this.scene.sys.textures.getFrame(e,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};_h();const uc=Phaser.Display.Canvas.CanvasPool,M1=Phaser.GameObjects.GameObject,w1=Phaser.Utils.String.UUID;class Ts extends M1{constructor(t,s,h,y,S){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=y,this._height=S,y=Math.max(Math.ceil(y*this.resolution),1),S=Math.max(Math.ceil(S*this.resolution),1),this.canvas=uc.create(this,y,S),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(s,h),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=w1(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){uc.remove(this.canvas),this.canvas=null,this.context=null;var t=this.texture;t&&t.destroy()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,s){return this._width===t&&this._height===s?this:(this._width=t,this._height=s,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas.width=t,this.canvas.height=s,this.frame.setSize(t,s),this.dirty=!0,this)}setSize(t,s){return this.setCanvasSize(t,s),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,s){return this.displayWidth=t,this.displayHeight=s,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,s){return this.setSize(t,s),this}}const Ee=Phaser.GameObjects.Components;Phaser.Class.mixin(Ts,[Ee.Alpha,Ee.BlendMode,Ee.Crop,Ee.Depth,Ee.Flip,Ee.GetBounds,Ee.Mask,Ee.Origin,Ee.Pipeline,Ee.PostPipeline,Ee.ScrollFactor,Ee.Tint,Ee.Transform,Ee.Visible,T1,P1,E1]);const R1=Phaser.Utils.String.Pad;var pt=function(e,t,s){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${R1(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,s);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}};const dc=Phaser.Math.DegToRad;var d0=function(e,t,s,h,y,S,r){var T=new o0(t,s,h,y,S),i=T.minWidth,d=T.minHeight,x=h>=i?1:h/i,f=y>=d?1:y/d,o=T.cornerRadius,a,n,u,c,l,v,p;e.save(),e.beginPath(),e.translate(t,s),a=o.tl,Ea(a)?(n=a.x*x,u=a.y*f,Pa(a)?(c=n,l=u,_i(e,c,l,n,u,180,270,!1,r)):(c=0,l=0,_i(e,c,l,n,u,90,0,!0,r)),v=0,p=u):(e.lineTo(0,0),v=0,p=0),a=o.tr,Ea(a)?(n=a.x*x,u=a.y*f,Pa(a)?(c=h-n,l=u,_i(e,c,l,n,u,270,360,!1,r)):(c=h,l=0,_i(e,c,l,n,u,180,90,!0,r))):e.lineTo(h,0),a=o.br,Ea(a)?(n=a.x*x,u=a.y*f,Pa(a)?(c=h-n,l=y-u,_i(e,c,l,n,u,0,90,!1,r)):(c=h,l=y,_i(e,c,l,n,u,270,180,!0,r))):e.lineTo(h,y),a=o.bl,Ea(a)?(n=a.x*x,u=a.y*f,Pa(a)?(c=n,l=y-u,_i(e,c,l,n,u,90,180,!1,r)):(c=0,l=y,_i(e,c,l,n,u,360,270,!0,r))):e.lineTo(0,y),e.lineTo(v,p),e.closePath(),e.restore()},Pa=function(e){return!e.hasOwnProperty("convex")||e.convex},Ea=function(e){return e.x>0&&e.y>0},_i=function(e,t,s,h,y,S,r,T,i){if(T&&r>S?r-=360:!T&&r<S&&(r+=360),S=dc(S),r=dc(r),i==null)e.ellipse(t,s,h,y,0,S,r,T);else{i+=1;for(var d,x,f,o=(r-S)/i,a=0;a<=i;a++)f=S+o*a,d=t+h*Math.cos(f),x=s+y*Math.sin(f),e.lineTo(d,x)}},A1=function(e,t,s,h,y,S,r,T,i,d,x,f,o){if(d0(t,s,h,y,S,r,o),T!=null){if(x!=null){var a;f?a=t.createLinearGradient(0,0,y,0):a=t.createLinearGradient(0,0,0,S),a.addColorStop(0,T),a.addColorStop(1,x),T=a}t.fillStyle=T,t.fill()}i!=null&&d>0&&(t.strokeStyle=i,t.lineWidth=d,t.stroke())},od=function(e,t,s,h,y,S,r,T){if(!(t==null&&s==null)){var i=e.canvas.width,d=e.canvas.height;s==null&&(h=0);var x=h/2;i=Math.max(1,i-h),d=Math.max(1,d-h),A1(e.canvas,e.context,x,x,i,d,y,t,s,h,S,r,T)}},L1=function(){od(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const fc=Phaser.Utils.Objects.GetValue;class f0 extends Ts{constructor(t,s,h,y,S,r,T,i,d,x,f){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=y),r===void 0&&(r=0),super(t,s,h,y,S),this.type="rexRoundRectangleCanvas";var o=fc(r,"radius",r),a=fc(r,"iteration",void 0);this.setRadius(o),this.setIteration(a),this.setFillStyle(T,x,f),this.setStrokeStyle(i,d)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=pt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=pt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,s,h){return h===void 0&&(h=!0),this.fillStyle=t,this.fillColor2=s,this.isHorizontalGradient=h,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=pt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,s){return this.strokeStyle=t,this.lineWidth=s,this}updateTexture(){return this.clear(),L1.call(this),super.updateTexture(),this}}it.register("roundRectangleCanvas",function(e,t,s,h,y,S,r,T,i,d){var x=new f0(this.scene,e,t,s,h,y,S,r,T,i,d);return this.scene.add.existing(x),x});et(window,"RexPlugins.UI.RoundRectangleCanvas",f0);var Rt=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},ts=function(e,t,s){!t||Rt(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return s.x},set:function(h){s.x=h,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return s.y},set:function(h){s.y=h,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return s.t},set:function(h){s.t=h,e.dirty=!0}}))};const O1={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,s,h){var y=this.geom.topSidePoints;if(Array.isArray(e))for(var y=e,S,r=0,T=y.length;r<T;r++)S=y[r],this.geom.insertTopSidePoint(S.t,S.x,S.y),ts(this,S.key,y[y.length-1]);else this.geom.insertTopSidePoint(e,t,s),ts(this,h,y[y.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,s,h){var y=this.geom.rightSidePoints;if(Array.isArray(e))for(var y=e,S,r=0,T=y.length;r<T;r++)S=y[r],this.geom.insertRightSidePoint(S.t,S.x,S.y),ts(this,S.key,y[y.length-1]);else this.geom.insertRightSidePoint(e,t,s),ts(this,h,y[y.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,s,h){var y=this.geom.bottomSidePoints;if(Array.isArray(e))for(var y=e,S,r=0,T=y.length;r<T;r++)S=y[r],this.geom.insertBottomSidePoint(S.t,S.x,S.y),ts(this,S.key,y[y.length-1]);else this.geom.insertBottomSidePoint(e,t,s),ts(this,h,y[y.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,s,h){var y=this.geom.leftSidePoints;if(Array.isArray(e))for(var y=e,S,r=0,T=y.length;r<T;r++)S=y[r],this.geom.insertLeftSidePoint(S.t,S.x,S.y),ts(this,S.key,y[y.length-1]);else this.geom.insertLeftSidePoint(e,t,s),ts(this,h,y[y.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class F1{constructor(t,s,h,y){t===void 0&&(t=0),s===void 0&&(s=t),h===void 0&&(h=0),y===void 0&&(y=0),this.setTo(t,s,h,y),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,s,h,y){return this.setPosition(t,s),this.setSize(h,y),this}setPosition(t,s){return this.x=t,this.y=s,this}setSize(t,s){return this.width=t,this.height=s,this}setTLPosition(t,s){return this.tlx=t,this.tly=s,this}setTRPosition(t,s){return this.trx=t,this.try=s,this}setBLPosition(t,s){return this.blx=t,this.bly=s,this}setBRPosition(t,s){return this.brx=t,this.bry=s,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,s,h){return Ma(this.topSidePoints,t,s,h),this}insertRightSidePoint(t,s,h){return Ma(this.rightSidePoints,t,s,h),this}insertBottomSidePoint(t,s,h){return Ma(this.bottomSidePoints,t,s,h),this}insertLeftSidePoint(t,s,h){return Ma(this.leftSidePoints,t,s,h),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var Ma=function(e,t,s,h){if(typeof t!="number"){var y=t;t=y.t,s=y.x,h=y.y}e.push({t,x:s,y:h})};const b1=Phaser.Utils.Objects.IsPlainObject,Ue=Phaser.Utils.Objects.GetValue,es=Phaser.Math.Linear,D1=Phaser.Geom.Polygon.Earcut;class ld extends hd{constructor(t,s,h,y,S,r,T){var i,d,x;if(b1(s)){var f=s;s=f.x,h=f.y,y=f.width,S=f.height,r=f.color,T=f.alpha,i=f.strokeColor,d=f.strokeAlpha,x=f.strokeWidth}s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=y);var o=new F1;super(t,"rexQuadShape",o),o.setTo(0,0,y,S),this.setPosition(s,h),this.setFillStyle(r,T),i!==void 0&&x===void 0&&(x=2),this.setStrokeStyle(x,i,d),this.setTLPosition(Ue(f,"tlx",0),Ue(f,"tly",0)).setTRPosition(Ue(f,"trx",0),Ue(f,"try",0)).setBLPosition(Ue(f,"blx",0),Ue(f,"bly",0)).setBRPosition(Ue(f,"brx",0),Ue(f,"bry",0));var a=Ue(f,"leftSidePoints");a&&this.insertLeftSidePoint(a);var n=Ue(f,"topSidePoints");n&&this.insertTopSidePoint(n);var u=Ue(f,"rightSidePoints");u&&this.insertRightSidePoint(u);var c=Ue(f,"bottomSidePoints");c&&this.insertBottomSidePoint(c),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,s=this.pathData;s.length=0;var h=t.width,y=t.height,S=0+t.tlx,r=0+t.tly,T=h+t.trx,i=0+t.try,d=h+t.brx,x=y+t.bry,f=0+t.blx,o=y+t.bly,a=t.topSidePoints,n=t.rightSidePoints,u=t.bottomSidePoints,c=t.leftSidePoints;ne(S,r,s),wa(a);for(var l=0,v=a.length;l<v;l++){var p=a[l],g=es(S,T,p.t)+p.x,m=es(r,i,p.t)+p.y;ne(g,m,s)}ne(T,i,s),wa(n);for(var l=0,v=n.length;l<v;l++){var p=n[l],g=es(T,d,p.t)+p.x,m=es(i,x,p.t)+p.y;ne(g,m,s)}ne(d,x,s),wa(u);for(var l=u.length-1;l>=0;l--){var p=u[l],g=es(f,d,p.t)+p.x,m=es(o,x,p.t)+p.y;ne(g,m,s)}ne(f,o,s),wa(c);for(var l=c.length-1;l>=0;l--){var p=c[l],g=es(S,f,p.t)+p.x,m=es(r,o,p.t)+p.y;ne(g,m,s)}return s.push(s[0],s[1]),this.pathIndexes=D1(s),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var wa=function(e){e.length<=1||e.sort(function(t,s){return t.t-s.t})};Object.assign(ld.prototype,O1);it.register("QuadShape",function(e,t,s,h,y,S){var r=new ld(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.QuadShape",ld);var I1=Phaser.Renderer.WebGL.Utils,B1=function(e,t,s,h){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var y=t.frame,S=y.width,r=y.height,T=I1.getTintAppendFloatAlpha,i=e.pipelines.set(t.pipeline,t),d=i.setTexture2D(y.glTexture,t);e.pipelines.preBatch(t),i.batchTexture(t,y.glTexture,S,r,t.x,t.y,S/t.style.resolution,r/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,r,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,h,!1,d),e.pipelines.postBatch(t)}},G1=function(e,t,s,h){t.width===0||t.height===0||(s.addToRenderList(t),e.batchSprite(t,t.frame,s,h))};const N1={renderWebGL:B1,renderCanvas:G1},Qo=Phaser.Display.Canvas.CanvasPool;var z1=function(e,t,s){s===void 0&&(s={});var h=Qo.create(this),y=h.getContext("2d",{willReadFrequently:!0});e.syncFont(h,y);var S=y.measureText(t),r=Math.ceil(S.width*e.baselineX),T=r,i=2*T;if(T=T*e.baselineY|0,h.width=r,h.height=i,y.fillStyle="#f00",y.fillRect(0,0,r,i),y.font=e._font,y.textBaseline="alphabetic",y.fillStyle="#000",y.fillText(e.testString,0,T),s.left=0,r===0||i===0||!y.getImageData(0,0,r,i))return Qo.remove(h),s;for(var d=y.getImageData(0,0,r,i).data,x=!1,f=0;f<r;f++){for(var o=0;o<i;o++){var a=(o*r+f)*4;if(d[a]!==255){s.left=f,x=!0;break}}if(x)break}return Qo.remove(h),s};_h();const V1=Phaser.GameObjects.GameObject;class c0 extends V1{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,h){return this.style.setBackgroundColor(t,s,h)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,h,y,S,r){return this.style.setShadow(t,s,h,y,S,r)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.lineSpacing=t,this.updateText(!1),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return z1(this.style,t,s)}}const ye=Phaser.GameObjects.Components;Phaser.Class.mixin(c0,[ye.Alpha,ye.BlendMode,ye.ComputedSize,ye.Crop,ye.Depth,ye.Flip,ye.GetBounds,ye.Mask,ye.Origin,ye.Pipeline,ye.PostPipeline,ye.ScrollFactor,ye.Tint,ye.Transform,ye.Visible,N1]);var k1={backgroundColor:["backgroundColor",null,pt],backgroundColor2:["backgroundColor2",null,pt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,pt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",pt],stroke:["stroke","#fff",pt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",pt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",pt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",pt],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Ra=Phaser.Display.Canvas.CanvasPool;var cc=function(e){var t=Ra.create(this),s=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,s);var h=s.measureText(e.testString);if("actualBoundingBoxAscent"in h){var y=h.actualBoundingBoxAscent,S=h.actualBoundingBoxDescent,d={ascent:y,descent:S,fontSize:y+S};return Ra.remove(t),d}var r=Math.ceil(h.width*e.baselineX),T=r,i=2*T;T=T*e.baselineY|0,t.width=r,t.height=i,s.fillStyle="#f00",s.fillRect(0,0,r,i),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,T);var d={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,r,i))return d.ascent=T,d.descent=T+6,d.fontSize=d.ascent+d.descent,Ra.remove(t),d;var x=s.getImageData(0,0,r,i).data,f=x.length,o=r*4,a,n,u=0,c=!1;for(a=0;a<T;a++){for(n=0;n<o;n+=4)if(x[u+n]!==255){c=!0;break}if(!c)u+=o;else break}for(d.ascent=T-a,u=f-o,c=!1,a=i;a>T;a--){for(n=0;n<o;n+=4)if(x[u+n]!==255){c=!0;break}if(!c)u-=o;else break}return d.descent=a-T,d.fontSize=d.ascent+d.descent,Ra.remove(t),d},Qt={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Gh={none:Qt.NO_WRAP,word:Qt.WORD_WRAP,char:Qt.CHAR_WRAP,character:Qt.CHAR_WRAP,mix:Qt.MIX_WRAP},X1=Phaser.Utils.Objects.GetAdvancedValue,Be=Phaser.Utils.Objects.GetValue;class ud{constructor(t,s,h){this.parent=t,h===void 0&&(h=k1),this.propertyMap=h,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(s,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Qt.NO_WRAP&&this.wrapWidth===0}setStyle(t,s,h){if(s===void 0&&(s=!0),h===void 0&&(h=!1),t&&t.hasOwnProperty("wordWrap")){var y=t.wordWrap;y.hasOwnProperty("width")&&(t.wrap={mode:"word",width:y.width})}if(t&&t.hasOwnProperty("wrap")){var S=t.wrap;if(S.hasOwnProperty("mode")){var r=S.mode;typeof r=="string"&&(S.mode=Gh[r])}else S.hasOwnProperty("width")&&(S.mode=1)}t&&t.rtl&&h&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var T=this.propertyMap;for(var i in T){var d=T[i],x=d[0],f=h?d[1]:this[i],o=d[2];if(i==="wrapCallback"||i==="wrapCallbackScope")this[i]=Be(t,x,f);else{var a=X1(t,x,f);o&&(a=o(a)),this[i]=a}}var n=Be(t,"font",null);n===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=n;var u=Be(t,"fill",null);u!==null&&(this.color=pt(u));var c=Be(t,"metrics",!1);return c?this.metrics={ascent:Be(c,"ascent",0),descent:Be(c,"descent",0),fontSize:Be(c,"fontSize",0)}:(s||!this.metrics)&&(this.metrics=cc(this)),s?this.parent.updateText():this.parent}syncFont(t,s){s.font=this._font}syncStyle(t,s){s.textBaseline="alphabetic",s.fillStyle=this.color,s.strokeStyle=this.stroke,s.lineWidth=this.strokeThickness,s.lineCap="round",s.lineJoin="round"}syncShadow(t,s){s?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=cc(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Be(t,"fontFamily","Courier"),this.fontSize=Be(t,"fontSize","16px"),this.fontStyle=Be(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,s){return this.fixedWidth=t,this.fixedHeight=s,t&&(this.parent.width=t),s&&(this.parent.height=s),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,s,h){return h===void 0&&(h=!0),this.backgroundColor=pt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=pt(s,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=h,this.update(!1)}setBackgroundStrokeColor(t,s){return this.backgroundStrokeColor=pt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=s,this.update(!1)}setBackgroundCornerRadius(t,s){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=s,this.update(!1)}setFill(t){return this.color=pt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=pt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,s){return t===void 0?this.strokeThickness=0:(s===void 0&&(s=this.strokeThickness),this.stroke=pt(t,this.parent.canvas,this.parent.context),this.strokeThickness=s),this.update(!0)}setShadow(t,s,h,y,S,r){return t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h="#000"),y===void 0&&(y=0),S===void 0&&(S=!1),r===void 0&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=s,this.shadowColor=pt(h,this.parent.canvas,this.parent.context),this.shadowBlur=y,this.shadowStroke=S,this.shadowFill=r,this.update(!1)}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.shadowOffsetX=t,this.shadowOffsetY=s,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=pt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,s,h){return t===void 0&&(t="#000"),s===void 0&&(s=0),h===void 0&&(h=0),this.underlineColor=pt(t,this.parent.canvas,this.parent.context),this.underlineThickness=s,this.underlineOffset=h,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=pt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,s,h){return t===void 0&&(t="#000"),s===void 0&&(s=0),h===void 0&&(h=0),this.strikethroughColor=pt(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=s,this.strikethroughOffset=h,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=pt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Gh[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,s){return t===void 0&&(t="left"),s===void 0&&(s="top"),this.halign=t,this.valign=s,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,s){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,s&&(typeof s=="string"?(this.fontFamily=s,this.fontSize="",this.fontStyle=""):(this.fontFamily=Be(s,"fontFamily",this.fontFamily),this.fontSize=Be(s,"fontSize",this.fontSize),this.fontStyle=Be(s,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.parent.lineSpacing}toJSON(){var t={},s=this.propertyMap;for(var h in s)t[h]=this[h];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const W1={draw(e,t,s,h){var y=this.penManager;this.hitAreaManager.clear();var S=this.context;S.save();var r=this.defaultStyle;this.clear(),od(this,r.backgroundColor,r.backgroundStrokeColor,r.backgroundStrokeLineWidth,r.backgroundCornerRadius,r.backgroundColor2,r.backgroundHorizontalGradient,r.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var T=r.halign,i=r.valign,d,x=r.lineHeight,f=y.lines,o=f.length,a=r.maxLines,n,u,c;a>0&&o>a?(n=a,i==="center"?u=Math.floor((o-n)/2):i==="bottom"?u=o-n:u=0):(n=o,u=0),c=u+n;var l,v,p=this.rtl,g=p?this.parent.width:void 0;i==="center"?v=Math.max((h-n*x)/2,0):i==="bottom"?v=Math.max(h-n*x-2,0):v=0,v+=t;for(var m=u;m<c;m++)if(d=y.getLineWidth(m),d!==0){for(var C=f[m],P=C.length,M=T,E=0;E<P;E++){var w=C[E].prop.align;if(w!==void 0){M=w;break}}M==="center"?l=(s-d)/2:M==="right"?l=p?0:s-d:l=p?s-d:0,l+=e;for(var E=0;E<P;E++)this.drawPen(C[E],l,v,g)}S.restore()},drawPen(e,t,s,h){t+=e.x,s+=e.y+(e.prop.y||0),h!==void 0&&(t=h-t);var y=this.canvas,S=this.context;S.save();var r=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(r.bgcolor!==null&&e.width>0){var T=this.defaultStyle.metrics,i=s-T.ascent,d=T.fontSize;this.drawRectangle(t,i,e.width,d,r.bgcolor,r)}if(r.underlineThickness>0&&e.width>0){var x=s+r.underlineOffset-r.underlineThickness/2;this.drawLine(t,x,e.width,r.underlineThickness,r.underlineColor,r)}if(e.isTextPen&&(r.buildFont(),r.syncFont(y,S),r.syncStyle(y,S),this.drawText(t,s,e.text,r)),e.isImagePen&&this.drawImage(t,s,e.prop.img,e.prop.color,r),r.strikethroughThickness>0&&e.width>0){var x=s+r.strikethroughOffset-r.strikethroughThickness/2;this.drawLine(t,x,e.width,r.strikethroughThickness,r.strikethroughColor,r)}if(S.restore(),e.hasAreaMarker&&e.width>0){var f,o=e.prop.area;if(o)f={key:o};else{var a=e.prop.url;f={key:`url:${a}`,url:a}}this.hitAreaManager.add(t,s-this.startYOffset,e.width,this.defaultStyle.lineHeight,f)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,s,h,y,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;r.fillStyle=y,r.fillRect(e,t,s,h)},drawLine(e,t,s,h,y,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;S.syncShadow(r,S.shadowStroke);var T=r.lineCap;r.lineCap="butt",r.strokeStyle=y,r.lineWidth=h,r.beginPath(),r.moveTo(e,t),r.lineTo(e+s,t),r.stroke(),r.lineCap=T},drawText(e,t,s,h){this.autoRound&&(e=Math.round(e),t=Math.round(t));var y=this.context;h.stroke&&h.stroke!=="none"&&h.strokeThickness>0&&(h.syncShadow(y,h.shadowStroke),y.strokeText(s,e,t)),h.color&&h.color!=="none"&&(h.syncShadow(y,h.shadowFill),y.fillText(s,e,t))},drawImage(e,t,s,h,y){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,e,t,h,this.autoRound)}},Ls=Phaser.Utils.Objects.GetValue,Y1=Qt.NO_NEWLINE,vc=Qt.RAW_NEWLINE;class U1{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Ls(t,"text",""),this.x=Ls(t,"x",0),this.y=Ls(t,"y",0),this.width=Ls(t,"width",0);var s=Ls(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=Ls(t,"newLineMode",0),this.startIndex=Ls(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===vc&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==Y1&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===vc&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Ri=function(e,t){var s=Array.isArray(e);if(t===void 0?t=s?[]:{}:Xi(t),s){t.length=e.length;for(var h=0,y=e.length;h<y;h++)t[h]=e[h]}else for(var S in e)t[S]=e[S];return t};const pc=Phaser.Utils.Objects.GetFastValue,gc=Qt.NO_NEWLINE,H1=Qt.WRAPPED_NEWLINE;class dd{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=pc(t,"tagToText",te),this.tagToTextScope=pc(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,h,y,S,r){var T=this.pensPool.pop();return T==null&&(T=new U1),Os.text=t,Os.x=s,Os.y=h,Os.width=y,Os.prop=S,Os.newLineMode=r,T.resetFromJSON(Os),this.addPen(T),this}addImagePen(t,s,h,y){return this.addTextPen("",t,s,h,y,gc),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,h=t?t.y:0,y=t?Ri(t.prop):null;return this.addTextPen("",s,h,0,y,H1),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var h=this.lastLine;h==null&&(h=this.linesPool.pop()||[],this.lines.push(h)),h.push(t),t.newLineMode!==gc&&(h=this.linesPool.pop()||[],this.lines.push(h)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new dd),t.clear();for(var s=0,h=this.lines.length;s<h;s++)for(var y=this.lines[s],S=0,r=y.length;S<r;S++){var T=y[S];t.addPen(T.text,T.x,T.y,T.width,Ri(T.prop),T.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,h=!1,y;for(s=t;s>=0&&(y=this.lines[s],h=y!=null&&y.length>0,!h);s--);if(!h)return 0;var S=y[y.length-1];return S.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var h=s[s.length-1];if(h==null)return 0;var y=h.lastX;return y}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,h=0,y=this.lines.length;h<y;h++)t=this.getLineWidth(h),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,h=this.lines.length;s<h;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,h=0,y=s.length;h<y;h++)t+=s[h].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,h=0,y=this.pens.length;h<y;h++)t+=s[h].rawTextLength;return t}getSliceTagText(t,s,h){var y=this.lastPen;if(y==null)return"";var S=y.endIndex;(t===void 0||t===0)&&(t=-1),(s===void 0||s===S)&&(s=S+1),h===void 0&&(h=!1);for(var r="",T,i,d,x,f,o,a,n=0,u=this.pens.length;n<u&&(T=this.pens[n],x=T.endIndex,!(!(x<=t)&&(T=this.pens[n],i=h?T.wrapText:T.plainText,o=T.prop,d=T.startIndex,f=d>=t&&x<=s,f||(i=i.substring(t-d,s-d)),this.tagToTextScope?r+=this.tagToText.call(this.tagToTextScope,i,o,a):r+=this.tagToText(i,o,a),a=o,x>=s)));n++);return r}get length(){return this.lines.length}set length(t){this.clear()}}var Os={};const $1=Phaser.Geom.Rectangle;var mc=new wi;class K1{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)Xi(this.hitAreas[t].data);return mc.pushMultiple(this.hitAreas),this}add(t,s,h,y,S){var r=mc.pop();return r===null?r=new $1(t,s,h,y):r.setTo(t,s,h,y),r.data=S,this.hitAreas.push(r),this}getFirst(t,s){for(var h=0,y=this.hitAreas.length;h<y;h++){var S=this.hitAreas[h];if(S.contains(t,s))return S}return null}getByKey(t){for(var s=0,h=this.hitAreas.length;s<h;s++){var y=this.hitAreas[s];if(y.data.key===t)return y}return null}drawBounds(t,s,h){s===void 0&&(s=16777215),h&&t.save().scaleCanvas(h.scaleX,h.scaleY).rotateCanvas(h.rotation).translateCanvas(h.x,h.y);for(var y=0,S=this.hitAreas.length;y<S;y++){var r=this.hitAreas[y];t.lineStyle(1,s).strokeRect(r.x,r.y,r.width,r.height)}return h&&t.restore(),this}}var Z1=function(){this.parent.on("pointerdown",J1,this).on("pointerup",Q1,this).on("pointermove",jo,this).on("pointerover",jo,this).on("pointerout",function(e,t){jo.call(this,e,null,null,t)},this)},J1=function(e,t,s,h){var y=this.hitAreaManager.getFirst(t,s);if(y!==null){var S=y.data.key;zr.call(this,"areadown",S,e,t,s,h),y.data.isDown=!0}},Q1=function(e,t,s,h){var y=this.hitAreaManager.getFirst(t,s);if(y!==null){var S=y.data,r=S.key;if(zr.call(this,"areaup",r,e,t,s,h),S.isDown){zr.call(this,"areaclick",r,e,t,s,h);var T=S.url;T&&window.open(T,"_blank")}S.isDown=!1}},jo=function(e,t,s,h){if(t===null){this.lastHitAreaKey!==null&&(zr.call(this,"areaout",this.lastHitAreaKey,e,t,s,h),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var y=this.hitAreaManager.getFirst(t,s),S=y?y.data.key:null;if(this.lastHitAreaKey!==S){if(this.lastHitAreaKey!==null){zr.call(this,"areaout",this.lastHitAreaKey,e,t,s,h);var r=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&!!r.data.url&&(this.scene.input.manager.canvas.style.cursor=""),r.isDown=!1}S!==null&&(zr.call(this,"areaover",S,e,t,s,h),this.urlTagCursorStyle&&!!y.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=S}},zr=function(e,t,s,h,y,S){this.parent.emit(`${e}-${t}`,s,h,y,S),this.parent.emit(e,t,s,h,y,S)},j1=/^[\x00-\x7F]+$/,Dn=function(e){return j1.test(e)};const q1=Qt.NO_NEWLINE,_1=Qt.RAW_NEWLINE,qo=Qt.WRAPPED_NEWLINE,xc=Qt.NO_WRAP,tT=Qt.WORD_WRAP,v0=Qt.CHAR_WRAP,eT=Qt.SPLITREGEXP;var p0=function(e,t,s,h,y,S){h<=0&&(s=xc);var r=[];if(!e||!e.length)return r;for(var T=s===xc,i=e.split(eT),d,x,f,o=0,a=i.length;o<a;o++){if(d=i[o],f=o===a-1?q1:_1,T){var n=t(d);r.push(S.getLine(d,n,f));continue}if(x=o===0?h-y:h,d.length<=100){var n=t(d);if(n<=x){r.push(S.getLine(d,n,f));continue}}for(var u=iT(d,s),c,l,v="",p=0,g,m=0,C=u.length;m<C;m++){if(c=u[m],l=t(c),l>h&&sT(c)){v!==""?r.push(S.getLine(v,p,qo)):m===0&&y>0&&r.push(S.getLine("",0,qo)),r.push(...p0(c,t,v0,h,0,S));var P=r.pop();v=P.text,p=P.width,S.freeLine(P),v===" "&&(v="",p=0);continue}g=p+l,g>x?(r.push(S.getLine(v,p,qo)),v=c,p=l,x=h):(v+=c,p=g),m===C-1&&r.push(S.getLine(v,p,f))}}return r},iT=function(e,t){var s;switch(t){case tT:s=[],e=e.split(" ");for(var h=0,y=e.length;h<y;h++){var S=e[h];h<y-1?s.push(S+" "):S!==""&&s.push(S)}break;case v0:s=e.split("");break;default:s=[],e=e.split(" ");for(var h=0,y=e.length;h<y;h++){var S=e[h];h<y-1?Dn(S)?s.push(S+" "):(s.push(...S.split("")),s.push(" ")):S!==""&&(Dn(S)?s.push(S):s.push(...S.split("")))}break}return s},sT=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const _o=Phaser.Utils.Objects.GetValue,rT=Qt.NO_WRAP,nT=Qt.NO_NEWLINE;class g0{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=_o(t,"context",null),this.canvas=this.context.canvas,this.parser=_o(t,"parser",null),this.defaultStyle=_o(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new K1,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var s=this.context;this.getTextWidth=function(h){return s.measureText(h).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,h,y,S){if(S===void 0&&(S=this.penManager),S.clear(),t==="")return S;var r=this.parent.style;if(r.isWrapFitMode){var T=this.parent.padding;h=r.fixedWidth-T.left-T.right}for(var i=this.canvas,d=this.context,x=function(O){return d.measureText(O).width},f=0,o=0,a=r.wrapCallback,n=r.wrapCallbackScope,u=!0,c,l,v,p=this.parser.splitText(t),g,m,C=this.wrapTextLinesPool,P=0,M=p.length;P<M;P++)if(g=this.parser.tagTextToProp(p[P],l),c=g.plainText,l=g.prop,l.img){var E=this.imageManager.getOuterWidth(l.img);h>0&&s!==rT&&h<f+E&&(S.addNewLinePen(),o+=y,f=0),S.addImagePen(f,o,E,Ri(l)),f+=E}else if(c!==""){if(d.save(),v=this.parser.propToContextStyle(this.defaultStyle,l),v.buildFont(),v.syncFont(i,d),v.syncStyle(i,d),!a)m=p0(c,x,s,h,f,C);else{m=a.call(n,c,x,h,f),typeof m=="string"&&(m=m.split(`
`));for(var A,w=0,R=m.length;w<R;w++)A=m[w],typeof A=="string"?m[w]=C.getLine(A,x(A),w<R-1?2:0):u=!1}for(var A,w=0,R=m.length;w<R;w++)A=m[w],S.addTextPen(A.text,f,o,A.width,Ri(l),A.newLineMode),A.newLineMode!==nT?(f=0,o+=y):f+=A.width;u&&C.freeLines(m),m=null,d.restore()}for(var P=0,M=this.lines.length;P<M;P++){var L=this.lines[P],F=L[L.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return S}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new dd({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,h){var y;if(t==null)y=this.penManager.plainText;else{var S=this.parser.splitText(t,1);y="";for(var r=0,T=S.length;r<T;r++)y+=S[r]}return(s!=null||h!=null)&&(s==null&&(s=0),h==null&&(h=y.length),y=y.substring(s,h)),y}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var h=this.defaultStyle;return this.updatePenManager(t,h.wrapMode,h.wrapWidth,h.lineHeight,s),s}getText(t,s,h,y){if(t==null)return this.penManager.getSliceTagText(s,h,y);var S=this.tmpPenManager,r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,S),S.getSliceTagText(s,h,y)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var aT={setInteractive:Z1};Object.assign(g0.prototype,W1,aT);class yc extends wi{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,s,h){var y=this.pop();return y===null&&(y={}),y.text=t,y.width=s,y.newLineMode=h,y}}const hT=Phaser.Utils.Objects.IsPlainObject,or=Phaser.Utils.Objects.GetValue;var tl=function(e,t){hT(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var s=t.key,h=t.frame,y=t.width,S=t.height;if(y===void 0||S===void 0){var r=this.textureManager.getFrame(s,h),T=r?r.cutWidth:0,i=r?r.cutHeight:0;y===void 0&&S===void 0?(y=T,S=i):y===void 0?y=T*(S/i):S===void 0&&(S=i*(y/T))}this.images[e]={key:s,frame:h,width:y,height:S,y:or(t,"y",0),left:or(t,"left",0),right:or(t,"right",0),originX:or(t,"originX",0),originY:or(t,"originY",0),tintFill:or(t,"tintFill",!1)}};const Cc=Phaser.Display.Canvas.CanvasPool;var m0=function(e,t,s,h,y,S,r,T){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=e.cutWidth),S===void 0&&(S=e.cutHeight),T===void 0&&(T=!1),T&&(s=Math.round(s),h=Math.round(h));var i=t.getContext("2d",{willReadFrequently:!0});if(r){var d=Cc.create(null,y,S,Phaser.CANVAS,!0),x=d.getContext("2d",{willReadFrequently:!0});x.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,y,S),x.globalCompositeOperation="source-in",x.fillStyle=r,x.fillRect(0,0,y,S),i.drawImage(d,0,0,y,S,s,h,y,S),Cc.remove(d)}else i.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,s,h,y,S)},oT=function(e,t,s,h,y,S){var r=this.get(e);if(!!r){var T=this.textureManager.getFrame(r.key,r.frame),i=r.width,d=r.height;s+=r.left-r.originX*i,h+=r.y-r.originY*d,r.tintFill||(y=void 0),m0(T,t.canvas,s,h,i,d,y,S)}};class fd{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")tl.call(this,t,s);else if(Array.isArray(t))for(var h=t,y=0,S=h.length;y<S;y++)tl.call(this,h[y]);else{var h=t;for(var t in h)tl.call(this,t,h[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var lT={draw:oT};Object.assign(fd.prototype,lT);var x0=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var s;return t?s=`${this.text}
${e}`:s=`${this.text}${e}`,s!=this.text&&this.setText(s),this};const uT=Phaser.Utils.Objects.IsPlainObject,Tc=Phaser.DOM.AddToDOM,Sc=Phaser.Display.Canvas.CanvasPool,dT=Phaser.GameObjects.GameObject,Me=Phaser.Utils.Objects.GetValue,fT=Phaser.DOM.RemoveFromDOM,cT=Qt.SPLITREGEXP,vT=Phaser.Utils.String.UUID;var lr=null,el=null,il=null;class cd extends c0{constructor(t,s,h,y,S,r,T){if(uT(s)){var i=s;s=Me(i,"x",0),h=Me(i,"y",0),y=Me(i,"text",""),S=Me(i,"style")}if(s===void 0&&(s=0),h===void 0&&(h=0),super(t,r),this.renderer=t.sys.game.renderer,this.setPosition(s,h),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=Sc.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,S){if(S.hasOwnProperty("align")){var d=S.align;delete S.align,S.halign=d}S.hasOwnProperty("stroke")&&!S.hasOwnProperty("strokeThickness")&&(S.strokeThickness=1)}this.style=new ud(this,S);var x=Me(S,"images",void 0);x&&this.addImage(x),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=vT(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var f=Me(S,"sharedPool",!0),o,a,n;f?(lr||(lr={},el=new wi,il=new yc,this.scene.game.events.once("destroy",function(){lr=null,el=null,il=null})),lr.hasOwnProperty(r)||(lr[r]=new wi),o=lr[r],a=el,n=il):(o=new wi,a=new wi,n=new yc),this.canvasText=new g0({parent:this,context:this.context,parser:T,style:this.style,pensPool:o,linesPool:a,wrapTextLinesPool:n}),this.parser=T,this.initRTL(),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),this.setText(y),this.setUrlTagCursorStyle(Me(S,"urlTagCursorStyle","pointer")),Me(S,"interactive",!1)&&this.setInteractive()}preDestroy(){fT(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Sc.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Tc(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var s=this.style;if(s.rtl===t)return this;if(s.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Tc(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),s.halign==="left"?s.halign="right":s.halign==="right"&&(s.halign="left"),this._imageManager){var h=this._imageManager.images;for(var y in h)h[y].originX=1-h[y].originX}return this}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,s,h,y){if(typeof t=="object"){var S=t,r=Me(S,"x",null);r!==null?(t=r,h=r):(t=Me(S,"left",0),h=Me(S,"right",t));var T=Me(S,"y",null);T!==null?(s=T,y=T):(s=Me(S,"top",0),y=Me(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),h===void 0&&(h=t),y===void 0&&(y=s);return this.padding.left=t,this.padding.top=s,this.padding.right=h,this.padding.bottom=y,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,h=this.style;t&&s.updatePenManager(this._text,h.wrapMode,h.wrapWidth,h.lineHeight);var y=this.padding,S,r,T=Math.ceil(s.linesWidth);h.fixedWidth===0?(this.width=T+y.left+y.right,S=T):(this.width=h.fixedWidth,S=this.width-y.left-y.right,S<T&&(S=T)),h.fixedHeight===0?(this.height=s.linesHeight+y.top+y.bottom,r=s.linesHeight):(this.height=h.fixedHeight,r=this.height-y.top-y.bottom,r<s.linesHeight&&(r=s.linesHeight));var i=this.width,d=this.height;this.updateDisplayOrigin();var x=h.resolution;i*=x,d*=x,i=Math.max(Math.ceil(i),1),d=Math.max(Math.ceil(d),1);var f=this.canvas,o=this.context;f.width!==i||f.height!==d?(f.width=i,f.height=d,this.frame.setSize(i,d)):o.clearRect(0,0,i,d),o.save(),o.scale(x,x);var a=this.style.rtl?y.right:y.left,n=y.top;s.draw(a,n,S,r),o.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,h){var y=!!this.input;return dT.prototype.setInteractive.call(this,t,s,h),y||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,h){return typeof t=="number"&&(h=s,s=t,t=void 0),t=this.canvasText.getText(t,s,h,!0),t.split(cT)}getPlainText(t,s,h){return typeof t=="number"&&(h=s,s=t,t=void 0),this.canvasText.getPlainText(t,s,h)}getText(t,s,h,y){return typeof t=="number"&&(y=h,h=s,s=t,t=void 0),y===void 0&&(y=!1),this.canvasText.getText(t,s,h,y)}getSubString(t,s,h){return typeof t=="number"&&(h=s,s=t,t=void 0),this.getText(t,s,h)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new fd(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,h,y,S){var r=this.canvas;return y===void 0?y=r.width:y*=this.resolution,S===void 0?S=r.height:S*=this.resolution,u0(this.scene,r,t,s,h,y,S),this}}var pT={appendText:x0};Object.assign(cd.prototype,pT);var gT=function(e,t){for(var s=this.tagRegex,h=[],y=0,S=!1,r=!1;;){var T=s.RE_SPLITTEXT.exec(e);if(!T)break;var i=T[0];if(r)if(s.RE_ESC_CLOSE.test(i))r=!1;else continue;else if(S)if(s.RE_RAW_CLOSE.test(i))S=!1;else continue;else s.RE_ESC_OPEN.test(i)?r=!0:s.RE_RAW_OPEN.test(i)&&(S=!0);var d=s.RE_SPLITTEXT.lastIndex,x=d-i.length;if(y<x){var f=e.substring(y,x);h.push(f)}t===void 0&&h.push(i),y=d}var o=e.length;return y<o&&h.push(e.substring(y,o)),h};const Ht=!1,zt=!0;var mT={plainText:null,prevProp:null},xT=function(e,t){var s=this.tagRegex;t==null&&(t={});var h="";if(t.img&&gt(t,Ht,"img"),t.esc)s.RE_ESC_CLOSE.test(e)?gt(t,Ht,"esc"):h=e;else if(t.raw)s.RE_RAW_CLOSE.test(e)?gt(t,Ht,"raw"):h=e;else if(s.RE_ESC_OPEN.test(e))gt(t,zt,"esc",!0);else if(s.RE_ESC_CLOSE.test(e))gt(t,Ht,"esc");else if(s.RE_RAW_OPEN.test(e))gt(t,zt,"raw",!0);else if(s.RE_RAW_CLOSE.test(e))gt(t,Ht,"raw");else if(s.RE_BLOD_OPEN.test(e))gt(t,zt,"b",!0);else if(s.RE_BLOD_CLOSE.test(e))gt(t,Ht,"b");else if(s.RE_ITALICS_OPEN.test(e))gt(t,zt,"i",!0);else if(s.RE_ITALICS_CLOSE.test(e))gt(t,Ht,"i");else if(s.RE_WEIGHT_OPEN.test(e)){var y=e.match(s.RE_WEIGHT_OPEN);gt(t,zt,"weight",y[1])}else if(s.RE_WEIGHT_CLOSE.test(e))gt(t,Ht,"weight");else if(s.RE_SIZE_OPEN.test(e)){var y=e.match(s.RE_SIZE_OPEN);gt(t,zt,"size",`${y[1]}px`)}else if(s.RE_SIZE_CLOSE.test(e))gt(t,Ht,"size");else if(s.RE_COLOR_OPEN.test(e)){var y=e.match(s.RE_COLOR_OPEN);gt(t,zt,"color",y[1])}else if(s.RE_COLOR_CLOSE.test(e))gt(t,Ht,"color");else if(s.RE_UNDERLINE_OPEN.test(e))gt(t,zt,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(e)){var y=e.match(s.RE_UNDERLINE_OPENC);gt(t,zt,"u",y[1])}else if(s.RE_UNDERLINE_CLOSE.test(e))gt(t,Ht,"u");else if(s.RE_STRIKETHROUGH_OPEN.test(e))gt(t,zt,"s",!0);else if(s.RE_STRIKETHROUGH_OPENC.test(e)){var y=e.match(s.RE_STRIKETHROUGH_OPENC);gt(t,zt,"s",y[1])}else if(s.RE_STRIKETHROUGH_CLOSE.test(e))gt(t,Ht,"s");else if(s.RE_SHADOW_OPEN.test(e))gt(t,zt,"shadow",!0);else if(s.RE_SHADOW_OPENC.test(e)){var y=e.match(s.RE_SHADOW_OPENC);gt(t,zt,"shadow",y[1])}else if(s.RE_SHADOW_CLOSE.test(e))gt(t,Ht,"shadow");else if(s.RE_STROKE_OPEN.test(e))gt(t,zt,"stroke",!0);else if(s.RE_STROKE_OPENC.test(e)){var y=e.match(s.RE_STROKE_OPENC);gt(t,zt,"stroke",y[1])}else if(s.RE_STROKE_CLOSE.test(e))gt(t,Ht,"stroke");else if(s.RE_BGCOLOR_OPEN.test(e)){var y=e.match(s.RE_BGCOLOR_OPEN);gt(t,zt,"bgcolor",y[1])}else if(s.RE_BGCOLOR_CLOSE.test(e))gt(t,Ht,"bgcolor");else if(s.RE_OFFSETY_OPEN.test(e)){var y=e.match(s.RE_OFFSETY_OPEN);gt(t,zt,"y",parseFloat(y[1]))}else if(s.RE_OFFSETY_CLOSE.test(e))gt(t,Ht,"y");else if(s.RE_IMAGE_OPEN.test(e)){var y=e.match(s.RE_IMAGE_OPEN);gt(t,zt,"img",y[1])}else if(s.RE_IMAGE_CLOSE.test(e))gt(t,Ht,"img");else if(s.RE_AREA_OPEN.test(e)){var y=e.match(s.RE_AREA_OPEN);gt(t,zt,"area",y[1])}else if(s.RE_AREA_CLOSE.test(e))gt(t,Ht,"area");else if(s.RE_URL_OPEN.test(e)){var y=e.match(s.RE_URL_OPEN);gt(t,zt,"url",y[1])}else if(s.RE_URL_CLOSE.test(e))gt(t,Ht,"url");else if(s.RE_ALIGN_OPEN.test(e)){var y=e.match(s.RE_ALIGN_OPEN);gt(t,zt,"align",y[1])}else if(s.RE_ALIGN_CLOSE.test(e))gt(t,Ht,"align");else if(s.RE_ID_OPEN.test(e)){var y=e.match(s.RE_ID_OPEN);gt(t,zt,"id",y[1])}else s.RE_ID_CLOSE.test(e)?gt(t,Ht,"id"):h=e;var S=mT;return S.plainText=h,S.prop=t,S},gt=function(e,t,s,h){return t===zt?e[s]=h:e.hasOwnProperty(s)&&delete e[s],e},yT=function(e,t){var s=TT;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var h=t.size;typeof h=="number"&&(h=`${h}px`),s.fontSize=h}else s.fontSize=e.fontSize;s.fontStyle=CT(t),t.hasOwnProperty("color")?s.color=t.color:s.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=e.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=e.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=e.shadowColor,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=e.underlineColor,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(s.strikethroughColor=e.strikethroughColor,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor=t.s,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor="#000",s.strikethroughThickness=0,s.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?s.bgcolor=t.bgcolor:s.bgcolor=null,s},CT=function(e){var t=e.b,s=e.weight,h=e.i;return t||s||h?h?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},TT=new ud,ST=function(e,t,s){s==null&&(s=PT);var h=this.delimiters[0],y=this.delimiters[1],S=[];for(var r in s)t.hasOwnProperty(r)||S.push(`${h}/${r}${y}`);for(var r in t){var T=t[r];if(r!=="img"){if(s[r]===T)continue}switch(r){case"size":S.push(`${h}size=${T.replace("px","")}${y}`);break;case"color":case"weight":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":S.push(`${h}${r}=${T}${y}`);break;case"u":case"s":T===!0?S.push(`${h}${r}${y}`):S.push(`${h}${r}=${T}${y}`);break;default:S.push(`${h}${r}${y}`);break}}return S.push(e),S.join("")},PT={},Xr=function(e){return e.replace(ET,"\\$&").replace(MT,"\\x2d")},ET=/[|\\{}()[\]^$+*?.]/g,MT=/-/g,Pc,Ec,xt={},Vt=function(e,t,s,h){return h===void 0?`${e}${s}${t}`:`${e}${s}=(${h})${t}`},ie=function(e,t,s){return`${e}/${s}${t}`},wT=function(e){return`[^${e}]+`},sl="[-.0-9]+",RT=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],ur=RT.join("|"),y0=function(e,t){if(t===void 0){var s=e;e=s[0],t=s[1]}if(Pc===e&&Ec===t)return!1;Pc=e,Ec=t,e=Xr(e),t=Xr(t);var h=wT(t),y="esc",S=Vt(e,t,y),r=ie(e,t,y),T="raw",i=Vt(e,t,T),d=ie(e,t,T),x="b",f=Vt(e,t,x),o=ie(e,t,x),a="i",n=Vt(e,t,a),u=ie(e,t,a),c="weight",l=Vt(e,t,c,sl),v=ie(e,t,c),p="size",g=Vt(e,t,p,sl),m=ie(e,t,p),C="color",P=Vt(e,t,C,ur),M=ie(e,t,C),E="u",w=Vt(e,t,E),R=Vt(e,t,E,ur),A=ie(e,t,E),L="s",F=Vt(e,t,L),O=Vt(e,t,L,ur),b=ie(e,t,L),I="shadow",B=Vt(e,t,I),N=Vt(e,t,I,ur),k=ie(e,t,I),Y="stroke",H=Vt(e,t,Y),z=Vt(e,t,Y,ur),X=ie(e,t,Y),D="bgcolor",G=Vt(e,t,D,ur),V=ie(e,t,D),W="y",U=Vt(e,t,W,sl),$=ie(e,t,W),K="img",Z=Vt(e,t,K,h),J=ie(e,t,K),Q="area",j=Vt(e,t,Q,h),_=ie(e,t,Q),q="url",st=Vt(e,t,q,h),ht=ie(e,t,q),lt="align",ot=Vt(e,t,lt,h),tt=ie(e,t,lt),at="id",nt=Vt(e,t,at,h),vt=ie(e,t,at);return xt.RE_ESC_OPEN=new RegExp(S,"i"),xt.RE_ESC_CLOSE=new RegExp(r,"i"),xt.RE_RAW_OPEN=new RegExp(i,"i"),xt.RE_RAW_CLOSE=new RegExp(d,"i"),xt.RE_BLOD_OPEN=new RegExp(f,"i"),xt.RE_BLOD_CLOSE=new RegExp(o,"i"),xt.RE_ITALICS_OPEN=new RegExp(n,"i"),xt.RE_ITALICS_CLOSE=new RegExp(u,"i"),xt.RE_WEIGHT_OPEN=new RegExp(l,"i"),xt.RE_WEIGHT_CLOSE=new RegExp(v,"i"),xt.RE_SIZE_OPEN=new RegExp(g,"i"),xt.RE_SIZE_CLOSE=new RegExp(m,"i"),xt.RE_COLOR_OPEN=new RegExp(P,"i"),xt.RE_COLOR_CLOSE=new RegExp(M,"i"),xt.RE_UNDERLINE_OPEN=new RegExp(w,"i"),xt.RE_UNDERLINE_OPENC=new RegExp(R,"i"),xt.RE_UNDERLINE_CLOSE=new RegExp(A,"i"),xt.RE_STRIKETHROUGH_OPEN=new RegExp(F,"i"),xt.RE_STRIKETHROUGH_OPENC=new RegExp(O,"i"),xt.RE_STRIKETHROUGH_CLOSE=new RegExp(b,"i"),xt.RE_SHADOW_OPEN=new RegExp(B,"i"),xt.RE_SHADOW_OPENC=new RegExp(N,"i"),xt.RE_SHADOW_CLOSE=new RegExp(k,"i"),xt.RE_STROKE_OPEN=new RegExp(H,"i"),xt.RE_STROKE_OPENC=new RegExp(z,"i"),xt.RE_STROKE_CLOSE=new RegExp(X,"i"),xt.RE_BGCOLOR_OPEN=new RegExp(G,"i"),xt.RE_BGCOLOR_CLOSE=new RegExp(V,"i"),xt.RE_OFFSETY_OPEN=new RegExp(U,"i"),xt.RE_OFFSETY_CLOSE=new RegExp($,"i"),xt.RE_IMAGE_OPEN=new RegExp(Z,"i"),xt.RE_IMAGE_CLOSE=new RegExp(J,"i"),xt.RE_AREA_OPEN=new RegExp(j,"i"),xt.RE_AREA_CLOSE=new RegExp(_,"i"),xt.RE_URL_OPEN=new RegExp(st,"i"),xt.RE_URL_CLOSE=new RegExp(ht,"i"),xt.RE_ALIGN_OPEN=new RegExp(ot,"i"),xt.RE_ALIGN_CLOSE=new RegExp(tt,"i"),xt.RE_ID_OPEN=new RegExp(nt,"i"),xt.RE_ID_CLOSE=new RegExp(vt,"i"),xt.RE_SPLITTEXT=new RegExp([i,d,S,r,f,o,n,u,l,v,g,m,P,M,w,R,A,F,O,b,B,N,k,H,z,X,G,V,U,$,Z,J,j,_,st,ht,ot,tt,nt,vt].join("|"),"ig"),!0},Mc=function(e,t){return e!==void 0&&y0(e,t),Object.assign({},xt)};const AT=Phaser.Utils.Objects.GetValue;class C0{constructor(t){var s=AT(t,"delimiters","[]");this.tagRegex=Mc(s),this.delimiters=s}getStrokeThinkness(t,s){var h;return s.hasOwnProperty("stroke")?h=t.strokeThickness:h=0,h}setDelimiters(t,s){return y0(t,s)&&(this.tagRegex=Mc()),this}}var LT={splitText:gT,tagTextToProp:xT,propToContextStyle:yT,propToTagText:ST};Object.assign(C0.prototype,LT);class vd extends cd{constructor(t,s,h,y,S){var r=new C0(S);super(t,s,h,y,S,"rexBBCodeText",r)}setDelimiters(t,s){return this.parse.setDelimiters(t,s),this}}it.register("BBCodeText",function(e,t,s,h){var y=new vd(this.scene,e,t,s,h);return this.scene.add.existing(y),y});et(window,"RexPlugins.UI.BBCodeText",vd);var OT={plainText:null,prevProp:null},FT=new ud;class bT{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,s){this.tags[t]=s}getTag(t){return this.tags[t]}splitText(t,s){for(var h=[],y=0;;){var S=rl.exec(t);if(!S)break;var r=S[0],T=rl.lastIndex-r.length;if(y<T&&h.push(t.substring(y,T)),s===void 0)h.push(r);else if(s===1){if(Rc.test(r)){var i=r.match(Ac);h.push(i[2])}else if(Lc.test(r)){var i=r.match(Oc);h.push(i[2])}}y=rl.lastIndex}var d=t.length;return y<d&&h.push(t.substring(y,d)),h}tagTextToProp(t,s){var h,y;if(Rc.test(t)){var S=t.match(Ac);if(S!=null){var r=S[1],T=this.tags;T.hasOwnProperty(r)?y=T[r]:y={},y._class=r,h=S[2]}}else if(Lc.test(t)){var S=t.match(Oc);if(S!=null){var i=S[1];y=DT(i),y._style=i,h=S[2]}}h==null&&(h=t),y==null&&(y={});var d=OT;return d.plainText=h,d.prop=y,d}propToContextStyle(t,s){var h=FT;if(s.hasOwnProperty("img"))h.image=s.img;else{if(h.image=null,s.hasOwnProperty("family")||s.hasOwnProperty("fontFamily")||s.hasOwnProperty("font-family")){var y=s.hasOwnProperty("family")?s.family:s.hasOwnProperty("fontFamily")?s.fontFamily:s["font-family"];h.fontFamily=y}else h.fontFamily=t.fontFamily;if(s.hasOwnProperty("size")||s.hasOwnProperty("fontSize")||s.hasOwnProperty("font-size")){var S=s.hasOwnProperty("size")?s.size:s.hasOwnProperty("fontSize")?s.fontSize:s["font-size"];typeof S=="number"&&(S=`${S}px`),h.fontSize=S}else h.fontSize=t.fontSize;if(s.hasOwnProperty("style")||s.hasOwnProperty("fontStyle")||s.hasOwnProperty("font-style")){var r=s.hasOwnProperty("style")?s.style:s.hasOwnProperty("fontStyle")?s.fontStyle:s["font-style"];h.fontStyle=r}else h.fontStyle=t.fontStyle;if(s.hasOwnProperty("color")||s.hasOwnProperty("font-color")){var T=s.hasOwnProperty("color")?s.color:s["font-color"];h.color=T}else h.color=t.color;if(s.hasOwnProperty("stroke")){var i=s.stroke;h.stroke=i.hasOwnProperty("color")?i.color:t.stroke,h.strokeThickness=i.hasOwnProperty("thickness")?i.thickness:t.strokeThickness}else h.stroke=t.stroke,h.strokeThickness=t.strokeThickness}if(s.hasOwnProperty("shadow")){var d=s.shadow;h.shadowColor=d.hasOwnProperty("color")?d.color:t.shadowColor,h.shadowOffsetX=d.hasOwnProperty("offsetX")?d.offsetX:t.shadowOffsetX,h.shadowOffsetY=d.hasOwnProperty("offsetY")?d.offsetY:t.shadowOffsetY,h.shadowBlur=d.hasOwnProperty("blur")?d.blur:t.shadowBlur,h.shadowStroke=!0,h.shadowFill=!0}else h.shadowColor=t.shadowColor,h.shadowOffsetX=t.shadowOffsetX,h.shadowOffsetY=t.shadowOffsetY,h.shadowBlur=t.shadowBlur,h.shadowStroke=t.shadowStroke,h.shadowFill=t.shadowFill;if(s.hasOwnProperty("u")||s.hasOwnProperty("underline")){var x=s.hasOwnProperty("u")?s.u:s.underline;h.underlineColor=x.hasOwnProperty("color")?x.color:t.underlineColor,h.underlineThickness=x.hasOwnProperty("thickness")?x.thickness:t.underlineThickness,h.underlineOffset=x.hasOwnProperty("offset")?x.offset:t.underlineOffset}else h.underlineColor=t.underlineColor,h.underlineThickness=t.underlineThickness,h.underlineOffset=t.underlineOffset;if(s.hasOwnProperty("s")||s.hasOwnProperty("strikethrough")){var f=s.hasOwnProperty("s")?s.s:s.strikethrough;h.strikethroughColor=f.hasOwnProperty("color")?f.color:t.strikethroughColor,h.strikethroughThickness=f.hasOwnProperty("thickness")?f.thickness:t.strikethroughThickness,h.strikethroughOffset=f.hasOwnProperty("offset")?f.offset:t.strikethroughOffset}else h.strikethroughColor=t.strikethroughColor,h.strikethroughThickness=t.strikethroughThickness,h.strikethroughOffset=t.strikethroughOffset;return h}getStrokeThinkness(t,s){var h;if(s.hasOwnProperty("stroke")){var y=s.stroke;h=y.hasOwnProperty("thickness")?y.thickness:t.strokeThickness}else h=t.strokeThickness;return h}propToTagText(t,s,h){return s.hasOwnProperty("_class")?t===""&&this.isTextTag(s._class)?"":`<class='${s._class}'>${t}</class>`:s.hasOwnProperty("_style")?`<style='${s._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var s=this.tags[t];return s?s.img==null:!1}}var DT=function(e){e=e.split(";");for(var t={},s,h,y,S=0,r=e.length;S<r;S++)if(s=e[S].split(":"),h=s[0],y=s[1],!(wc(h)||wc(y))){switch(h){case"stroke":var T=y.split(" "),i=T.length;y={},i>=1&&(y.color=T[0]),i>=2&&(y.thickness=parseInt(T[1].replace("px","")));break;case"shadow":var T=y.split(" "),i=T.length;y={},i>=1&&(y.color=T[0]),i>=2&&(y.offsetX=parseInt(T[1].replace("px",""))),i>=3&&(y.offsetY=parseInt(T[2].replace("px",""))),i>=4&&(y.blur=parseInt(T[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var T=y.split(" "),i=T.length;y={},i>=1&&(y.color=T[0]),i>=2&&(y.thickness=parseInt(T[1].replace("px",""))),i>=3&&(y.offset=parseInt(T[2].replace("px",""))),h==="underline"?h="u":h==="strikethrough"&&(h="s");break;case"y":y=parseFloat(y);break}t[h]=y}return t},wc=function(e){return e=e.replace(IT,""),e.length===0},rl=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Rc=/<\s*class=/i,Ac=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Lc=/<\s*style=/i,Oc=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,IT=/^\s+|\s+$/;const BT=Phaser.Utils.Objects.GetValue;class T0 extends cd{constructor(t,s,h,y,S){var r=BT(S,"tags",void 0),T=new bT(r);super(t,s,h,y,S,"rexTagText",T)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}it.register("tagText",function(e,t,s,h){var y=new T0(this.scene,e,t,s,h);return this.scene.add.existing(y),y});et(window,"RexPlugins.UI.TagText",T0);const Aa=Phaser.Utils.Objects.GetValue;var Ah=function(e,t){return t===void 0?e:e[t]},gs=function(e,t,s){e===void 0&&(e={}),t===void 0&&(t=0);var h=typeof t;return h==="string"?e[t]=s:h==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Aa(t,"left",0),e.right=Aa(t,"right",0),e.top=Aa(t,"top",0),e.bottom=Aa(t,"bottom",0)),e};class pd{constructor(t,s){this.setParent(t),this.type=s,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,s){return!1}}Object.assign(pd.prototype,to);const GT={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),e.translate(t,s),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}},NT=Phaser.Math.RotateAround;var zT=function(e,t,s,h){return h===void 0?h={}:h===!0&&(nl===void 0&&(nl={}),h=nl),h.x=(e-s.drawX)/s.scaleX,h.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&NT(h,0,0,-s.rotation),h},nl;const VT=Phaser.Geom.Rectangle;var kT=function(e,t){if(this.width===0||this.height===0)return!1;var s=zT(e,t,this,!0);return XT(this).contains(s.x,s.y)},XT=function(e){La===void 0&&(La=new VT);var t=e.drawTLX,s=e.drawTLY;return La.setTo(t,s,e.drawTRX-t,e.drawBLY-s),La},La;const WT=Phaser.Math.RotateAround;var S0=function(e,t,s,h){return h===void 0?h={}:h===!0&&(al===void 0&&(al={}),h=al),h.x=t,h.y=s,e.rotation!==0&&WT(h,0,0,e.rotation),h.x=h.x*e.scaleX+e.drawX,h.y=h.y*e.scaleY+e.drawY,h},al;const Fc=Phaser.GameObjects.Components.TransformMatrix;var YT=function(e,t,s,h){h===void 0?h={}:h===!0&&(h=UT);var y=t-e.width*e.originX,S=s-e.height*e.originY;return hn===void 0&&(hn=new Fc,bc=new Fc),e.parentContainer?e.getWorldTransformMatrix(hn,bc):hn.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),hn.transformPoint(y,S,h),h},hn,bc,UT={},HT=function(e,t,s,h,y){var S=S0(t,s,h,!0),r=YT(e,S.x,S.y,y);return r},P0=function(e,t,s,h,y){typeof s!="number"&&(y=s,s=0,h=0);var S=t.drawCenterX+s,r=t.drawCenterY+h;return HT(e,t,S,r,y)},$T=function(e,t,s){return P0(this.parent,this,e,t,s)},E0={contains:kT,getWorldPosition:$T};Object.assign(E0,GT);const KT=Phaser.Math.DegToRad,ZT=Phaser.Math.RadToDeg,Oa=Phaser.Utils.Objects.GetValue;class er extends pd{constructor(t,s){super(t,s),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,s){return s===void 0&&(s=t),this.scrollFactorX=t,this.scrollFactorY=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return ZT(this._rotation)}set angle(t){this.rotation=KT(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Oa(t,"width",void 0),h=Oa(t,"height",void 0),y=Oa(t,"scaleX",void 0),S=Oa(t,"scaleY",void 0);return s!==void 0?h===void 0&&S===void 0?this.setWidth(s,!0):this.setWidth(s):y!==void 0&&this.setScaleX(y),h!==void 0?s===void 0&&y===void 0?this.setHeight(h,!0):this.setHeight(h):S!==void 0&&this.setScaleY(S),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(er.prototype,E0);var ps=function(e,t,s){return t.hasOwnProperty(e)?t[e]:s[e]};const Fs=Phaser.Utils.Objects.GetValue;class JT extends er{constructor(t,s){super(t,"background"),this.setScrollFactor(0),this.setColor(Fs(s,"color",null),Fs(s,"color2",null),Fs(s,"horizontalGradient",!0)),this.setStroke(Fs(s,"stroke",null),Fs(s,"strokeThickness",2)),this.setCornerRadius(Fs(s,"cornerRadius",0),Fs(s,"cornerIteration",null))}set color(t){t=pt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=pt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,h){return h===void 0&&(h=!0),this.color=t,this.color2=s,this.horizontalGradient=h,this}set stroke(t){t=pt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,ps("color2",t,this),ps("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,ps("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,ps("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){od(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const is=Phaser.Utils.Objects.GetValue;class QT extends er{constructor(t,s){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(is(s,"color",null),is(s,"color2",null),is(s,"horizontalGradient",!0)),this.setStroke(is(s,"stroke",null),is(s,"strokeThickness",2))}set color(t){t=pt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=pt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,h){return h===void 0&&(h=!0),this.color=t,this.color2=s,this.horizontalGradient=h,this}set stroke(t){t=pt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,is(t,"color2",null),is(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,is(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,h=t.top,y=this.parent.width-t.left-t.right,S=this.parent.height-t.top-t.bottom,r=this.context;if(this.color!=null){var T;if(this.color2!=null){var i;this.horizontalGradient?i=r.createLinearGradient(0,0,y,0):i=r.createLinearGradient(0,0,0,S),i.addColorStop(0,this.color),i.addColorStop(1,this.color2),T=i}else T=this.color;r.fillStyle=T,r.fillRect(s,h,y,S)}this.stroke!=null&&this.strokeThickness>0&&(r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.strokeRect(s,h,y,S))}}const jt=Phaser.Utils.Objects.GetValue;class io{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(jt(t,"bold",!1)),this.setItalic(jt(t,"italic",!1)),this.setFontSize(jt(t,"fontSize","16px")),this.setFontFamily(jt(t,"fontFamily","Courier")),this.setColor(jt(t,"color","#fff")),this.setStrokeStyle(jt(t,"stroke",null),jt(t,"strokeThickness",0)),this.setShadow(jt(t,"shadowColor",null),jt(t,"shadowOffsetX",0),jt(t,"shadowOffsetY",0),jt(t,"shadowBlur",0)),this.setOffset(jt(t,"offsetX",0),jt(t,"offsetY",0)),this.setSpace(jt(t,"leftSpace",0),jt(t,"rightSpace",0)),this.setAlign(jt(t,"align",void 0)),this.setBackgroundColor(jt(t,"backgroundColor",null)),this.setBackgroundHeight(jt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(jt(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(ps("stroke",t,this),ps("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(ps("shadowOffsetX",t,this),ps("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new io(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=pt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=pt(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=pt(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,h,y){return this.setShadowColor(t).setShadowOffset(s,h).setShadowBlur(y),this}setBackgroundColor(t){return this.backgroundColor=pt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,h=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=h?this.stroke:"#000",t.lineWidth=h?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var jT=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},qT=function(e,t){var s=this.padding,h=s.left,y=s.right,S=s.top,r=s.bottom;return gs(s,e,t),this.dirty=this.dirty||h!=s.left||y!=s.right||S!=s.top||r!=s.bottom,this},_T=function(e){return Ah(this.padding,e)},tS=function(e){return this.textStyle.modify(e),this},eS=function(e){return this.defaultTextStyle.modify(e),this},iS=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},sS=function(e){return this.testString=e,this};const rS=Phaser.Utils.Array.Remove;var nS=function(e){return this.poolManager.free(e),rS(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},aS=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const hS=Phaser.Utils.Array.Remove;var oS=function(e){return hS(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},lS=function(){return this.setText(),this},uS=function(e,t){var s=Array.isArray(e);return t===void 0||t===this.children.length?s?this.children.push(...e):this.children.push(e):s?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const Ui="text",M0="image",w0="drawer",R0="space",gd="command";var A0=function(e){return e.type===Ui&&e.text===`
`},L0=function(e){return e.type===Ui&&e.text==="\f"},dS=function(e){return e.type===Ui&&e.text===" "},Wr=function(e){return e.type===Ui},fS=function(e){return e.type===gd};class O0 extends er{constructor(t,s,h){super(t,Ui),this.updateTextFlag=!1,this.style=new io(this,h),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var h,y;"actualBoundingBoxAscent"in s?(h=s.actualBoundingBoxAscent,y=s.actualBoundingBoxDescent):(h=0,y=0),this.textHeight=h+y,this.ascent=h,this.descent=y}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var h=this.drawTLX,y=this.drawTRX-h,S=s.backgroundBottomY;S==null&&(S=this.drawBLY);var r=s.backgroundHeight;r==null&&(r=S-this.drawTLY);var T=S-r;t.fillRect(h,T,y,r)}var i=s.hasFill,d=s.hasStroke;!i&&!d||(s.syncFont(t).syncStyle(t),d&&(s.syncShadow(t),t.strokeText(this.text,0,0)),i&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var cS=function(e,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(Ui);return s===null?s=new O0(this,e,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),s},vS=function(e,t){t&&this.textStyle.modify(t);for(var s=[],h=0,y=e.length;h<y;h++){var S=e.charAt(h),r=this.poolManager.allocate(Ui);r===null?r=new O0(this,S,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(S),s.push(r)}return s},Kn=function(e,t){var s=this.createCharChildren(e,t);return this.addChild(s),this},pS=function(e,t){return e===void 0&&(e=""),this.removeChildren(),Kn.call(this,e,t),this.dirty=!0,this},gS=function(e,t,s){var h=this.createCharChildren(t,s);return e=this.getCharChildIndex(e,!0),this.addChild(h,e),this},mS=function(e,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var h=this.getCharChildIndex(e,!0);if(h===void 0)break;this.removeChild(this.children[h])}return this},xS=function(e){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,e),t};Phaser.Display.Canvas.CanvasPool;class yS extends er{constructor(t,s,h){super(t,M0),this.setTexture(s,h),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){m0(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var CS=function(e,t,s){var h=this.poolManager.allocate(M0);return h===null?h=new yS(this,e,t):h.setParent(this).setActive().setTexture(e,t),h.modifyPorperties(s),h},F0=function(e,t,s){var h=this.createImageChild(e,t,s);return this.addChild(h),this};class TS extends er{constructor(t,s,h,y){super(t,w0),this.setRenderCallback(s),this.setDrawerSize(h,y)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var SS=function(e,t,s){var h=this.poolManager.allocate(w0);return h===null?h=new TS(this,e,t,s):h.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,s),h},PS=function(e,t,s){var h=this.createDrawerChild(e,t,s);return this.addChild(h),this};class ES extends er{constructor(t,s){super(t,R0),this.setSpaceWidth(s)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}}var MS=function(e){var t=this.poolManager.allocate(R0);return t===null?t=new ES(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},b0=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class wS extends pd{constructor(t,s,h,y,S){super(t,gd),this.setName(s).setParameter(y).setCallback(h,S)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var RS=function(e,t,s,h){var y=this.poolManager.allocate(gd);return y===null?y=new wS(this,e,t,s,h):y.setParent(this).setActive().setName(e).setCallback(t,h).setParameter(s),y},dt=function(e,t,s,h){var y=this.createCommandChild(e,t,s,h);return this.addChild(y),this},AS=function(e){return e===void 0?e={}:typeof e=="object"&&(e=fe(e)),this.wrapConfig=e,this},D0=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)};const LS={none:0,word:1,char:2,character:2,mix:3};var OS=function(e,t,s,h){h===void 0&&(h={word:[],width:0}),h.word.length=0;for(var y=s===2,S=s===3,r=!y&&!S,T=e.length,i=t,d=h.word,x=0,f=!1;i<T;){var o=e[i];if(!o.renderable){d.push(o),i++;continue}var a=o.type===Ui?o.text:null;if(a===null||a===`
`||a==="\f"){i===t&&(d.push(o),x+=o.outerWidth);break}if(r){if(d.push(o),x+=o.outerWidth,a===" ")break;i++}else if(y){d.push(o),x+=o.outerWidth;break}else if(S)if(Dn(a)){if(d.push(o),x+=o.outerWidth,a===" ")break;i++,f=!0}else{if(f)break;d.push(o),x+=o.outerWidth;var n=e[i+1];n&&n.type===Ui&&n.text===" "&&(d.push(n),x+=n.outerWidth);break}}return h.width=x,h},I0=function(e){for(var t=0,s=e.length;t<s;t++){var h=e[t];if(h.align!==void 0)return h.align}},B0=function(e,t,s){if(!(t===0&&s===0))for(var h=0,y=e.length;h<y;h++){var S=e[h];!S.renderable||(S.x+=t,S.y+=s)}},FS=function(e,t,s){for(var h=e.hAlign,y=e.vAlign,S=e.justifyPercentage,r=e.lines,T,i,d=0,x=r.length;d<x;d++){var f=r[d],o=f.width,a=f.children,n=I0(a);switch(n===void 0&&(n=h),n){case 0:case"left":T=0;break;case 1:case"center":var u=t-o;T=u/2;break;case 2:case"right":var u=t-o;T=u;break;case 3:case"justify":case"justify-left":var u=t-o,c=u/t;c<S&&hl(a,u),T=0;break;case 4:case"justify-center":var u=t-o,c=u/t;c<S?(hl(a,u),T=0):T=u/2;break;case 5:case"justify-right":var u=t-o,c=u/t;c<S?(hl(a,u),T=0):T=u;break;default:T=0;break}var l=e.linesHeight;switch(y){case 1:case"center":i=(s-l)/2;break;case 2:case"bottom":i=s-l;break;default:i=0;break}B0(a,T,i)}},hl=function(e,t){for(var s=t/e.length,h=0,y=e.length;h<y;h++){var S=e[h];!S.renderable||(S.x+=s*h)}},Dc=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,s=e.actualBoundingBoxDescent):(t=0,s=0),Fa.ascent=t,Fa.descent=s,Fa.height=t+s,Fa},Fa={};const Ce=Phaser.Utils.Objects.GetValue;var bS=function(e){var t=Ce(e,"start",0);gs(this.wrapPadding,Ce(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,h=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,y=Ce(e,"lineHeight"),S=Ce(e,"ascent",y),r;if(y===void 0){var T=Ce(e,"useDefaultTextHeight",!1);if(r=Ce(e,"maxLines",0),this.fixedHeight>0&&!T){var $=this.fixedHeight-s;if(r>0)y=$/r;else{var i=Dc.call(this);y=i.height,S=i.ascent,r=Math.floor(($-S)/y)}}else{var i=Dc.call(this);y=i.height,S=i.ascent}}else if(this.fixedHeight>0){if(r=Ce(e,"maxLines"),r===void 0){var $=this.fixedHeight-s;r=Math.floor($/y)}}else r=Ce(e,"maxLines",0);S===void 0&&(S=y);var d=r===0,x=Ce(e,"wrapMode");if(x===void 0){var f=Ce(e,"charWrap",!1);x=f?"char":"word"}typeof x=="string"&&(x=LS[x]);var o=Ce(e,"wrapWidth",void 0);o===void 0&&(this.fixedWidth>0?o=this.fixedWidth-h:(o=1/0,x=0));for(var a=Ce(e,"letterSpacing",0),n=Ce(e,"hAlign",0),u=Ce(e,"vAlign",0),c=Ce(e,"justifyPercentage",.25),l=D0({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:a,maxLines:r,hAlign:n,vAlign:u,justifyPercentage:c,ascent:S,lineHeight:y,wrapWidth:o,wrapMode:x}),v=this.children,p=0,g=v.length;p<g;p++)v[p].setActive(!1);o+=a;for(var m=this.padding.left+this.wrapPadding.left,C=this.padding.top+this.wrapPadding.top+S,P=m,M=C,E=o,w=t,R=v.length,A=l.children,L=l.lines,F=[],O=0,b=0,I,B=!1;w<R;){I=OS(v,w,x,I);var N=I.word,k=N.length,Y=I.width+k*a;w+=k;var H=A0(N[0]);B=L0(N[0]);var z=H||B;if(E<Y||z){if(z){var X=N[0];X.setActive().setPosition(P,M),A.push(X),F.push(X)}P=m,M+=y,E=o,L.push({children:F,width:O}),b=Math.max(b,O),O=0,F=[];var D=B||!d&&L.length===r;if(D)break;if(z)continue}E-=Y,O+=Y;for(var p=0,g=N.length;p<g;p++){var G=N[p];G.setActive(),A.push(G),F.push(G),G.renderable&&(G.setPosition(P,M),P+=G.outerWidth+a)}}F.length>0&&(L.push({children:F,width:O}),b=Math.max(b,O)),l.start+=A.length,l.isLastPage=!B&&l.start===R,l.maxLineWidth=b,l.linesHeight=L.length*y;var V=this.fixedWidth>0?this.fixedWidth:l.maxLineWidth+h,W=this.fixedHeight>0?this.fixedHeight:l.linesHeight+s,U=V-h,$=W-s;FS(l,U,$),this.setCanvasSize(V,W);for(var p=0,g=A.length;p<g;p++){var G=A[p];!G.renderable||(G.x0=G.x,G.y0=G.y)}return l};const DS=Phaser.Utils.Objects.Merge;var IS=function(e){return e===void 0&&(e={}),bS.call(this,DS(e,this.wrapConfig))},BS=function(e,t,s){var h=e.hAlign,y=e.vAlign,S,r,T=e.rtl,i=e.lines,d=e.lineWidth,x=e.linesWidth;switch(h){case 1:case"center":S=(t-x)/2;break;case 2:case"right":S=t-x;break;default:S=0;break}T&&(S+=d);for(var f=0,o=i.length;f<o;f++){var a=i[T?o-f-1:f],n=a.children,u=a.height,c=I0(n);switch(c===void 0&&(c=y),c){case 1:case"center":r=(s-u)/2;break;case 2:case"bottom":r=s-u;break;default:r=0;break}B0(n,S,r),S+=d}};const Ge=Phaser.Utils.Objects.GetValue;var GS=function(e){var t=Ge(e,"start",0);gs(this.wrapPadding,Ge(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,h=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,y=Ge(e,"lineWidth",void 0),S;if(y===void 0)if(S=Ge(e,"maxLines",0),this.fixedWidth>0){var H=this.fixedWidth-h;y=H/S}else y=0;else if(this.fixedWidth>0){if(S=Ge(e,"maxLines",void 0),S===void 0){var H=this.fixedWidth-h;S=Math.floor(H/y)+1}}else S=Ge(e,"maxLines",0);var r=S===0,T=Ge(e,"fixedCharacterHeight",void 0);if(T===void 0){var i=Ge(e,"charPerLine",void 0);if(i!==void 0){var z=this.fixedHeight-s;T=Math.floor(z/i)}}var d=Ge(e,"wrapHeight",void 0);d===void 0&&(this.fixedHeight>0?d=this.fixedHeight-s:d=1/0);for(var x=Ge(e,"letterSpacing",0),f=Ge(e,"rtl",!0),o=Ge(e,"hAlign",f?2:0),a=Ge(e,"vAlign",0),n=D0({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:x,maxLines:S,hAlign:o,vAlign:a,lineWidth:y,fixedCharacterHeight:T,wrapHeight:d,rtl:f}),u=this.children,c=0,l=u.length;c<l;c++)u[c].setActive(!1);d+=x;for(var v=this.padding.left+this.wrapPadding.left,p=this.padding.top+this.wrapPadding.top,g=v,m=p,C=d,P=t,M=u.length,E=n.children,w=n.lines,R=[],A=0,L=0;P<M;){var F=u[P];if(P++,!F.renderable){F.setActive(),E.push(F),R.push(F);continue}var O=(T!==void 0?T:F.height)+x,b=A0(F),I=L0(F),B=b||I;if(C<O||B){b&&(F.setActive().setPosition(g,m).setOrigin(.5),E.push(F),R.push(F)),g=v,m=p,C=d,w.push({children:R,height:A}),L=Math.max(L,A),A=0,R=[];var N=I||!r&&w.length===S;if(N)break;if(B)continue}C-=O,A+=O,F.setActive().setPosition(g,m).setOrigin(.5),E.push(F),R.push(F),m+=O}R.length>0&&(w.push({children:R,height:A}),L=Math.max(L,A)),n.start+=E.length,n.isLastPage=n.start===M,n.maxLineHeight=L,n.linesWidth=w.length*y;var k=this.fixedWidth>0?this.fixedWidth:n.linesWidth+h,Y=this.fixedHeight>0?this.fixedHeight:n.maxLineHeight+s,H=k-h,z=Y-s;BS(n,H,z),this.setCanvasSize(k,Y);for(var c=0,l=E.length;c<l;c++){var F=E[c];!F.renderable||(F.x0=F.x,F.y0=F.y)}return n};const NS=Phaser.Utils.Objects.Merge;var zS=function(e){return e===void 0&&(e={}),GS.call(this,NS(e,this.wrapConfig))};const Ic=Phaser.Utils.Objects.GetValue;var VS=function(e){var t=Ic(this.wrapConfig,"callback");return t||(t=Ic(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)};const kS={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},XS={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}};var WS=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,s=this.children.length;t<s;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},YS=function(e,t,s){s===void 0&&(s=!0);for(var h=this.children,y=0,S=0,r=h.length;S<r;S++){var T=h[S];if(!(s&&!T.active)){var i;if(t?i=e.call(this,T,y,h):i=e(T,y,h),y++,i)break}}return this},US=function(e,t,s){s===void 0&&(s=!0);for(var h=this.children,y=0,S=0,r=h.length;S<r;S++){var T=h[S];if(!(s&&!T.active)&&T.renderable&&!T.removed){var i;if(t?i=e.call(this,T,y,h):i=e(T,y,h),y++,i)break}}return this},HS=function(e,t,s){s===void 0&&(s=!0);for(var h=this.children,y=0,S=0,r=h.length;S<r;S++){var T=h[S];if(!(s&&!T.active)&&Wr(T)&&!T.removed){var i;if(t?i=e.call(this,T,y,h):i=e(T,y,h),y++,i)break}}return this},$S=function(){return this.children};const KS=Phaser.Utils.Array.GetAll;var ZS=function(){return KS(this.children,"active",!0)},JS=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,e),t},QS=function(){return this.lastAppendedChildren},jS=function(e,t,s,h){typeof t!="number"&&(h=t,t=0,s=0);var y=e.drawCenterX+t,S=e.drawCenterY+s;return S0(e,y,S,h)};const qS=Phaser.Math.Distance.BetweenPointsSquared;var _S=function(e,t){var s={x:e,y:t},h=1/0,y=null;return this.forEachRenderableChild(function(S){var r=qS(s,jS(S,!0));h>r&&(h=r,y=S)}),y},tP=function(e,t,s,h){return typeof e=="number"&&(e=this.getCharChild(e,!0)),P0(this,e,t,s,h)},eP=function(){for(var e=this.children,t=0,s=0,h=0,y=e.length;h<y;h++){var S=e[h];if(!(!S.renderable||!S.active||!S.visible)){var r=S.x0!==void 0?S.x0:S.x,T=S.y0!==void 0?S.y0:S.y;t=Math.max(t,r),s=Math.max(s,T)}}var i=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,d=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==i||this.height!==d)&&(this.dirty=!0,this.setCanvasSize(i,d)),this},iP=function(e,t){t===void 0&&(t=!0);for(var s=this.children,h=0,y=s.length;h<y;h++){var S=s[h];if(!(t&&!S.active)&&Wr(S)&&!S.removed){if(e===0)return h;e--}}},sP=function(e,t){t===void 0&&(t=!0);for(var s=this.children,h=0,y=s.length;h<y;h++){var S=s[h];if(!(t&&!S.active)&&Wr(S)&&!S.removed){if(e===0)return S;e--}}},rP=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var s=this.children;e>=s.length&&(e=s.length);for(var h=0,y=0;y<e;y++){var S=s[y];t&&!S.active||Wr(S)&&!S.removed&&h++}return h},nP=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},md=function(h,t,s){for(var h=h,y=0,S=h.length;y<S;y++){var r=h[y];if(!(!r.active||!r.renderable)&&r.contains(t,s))return r}return null},aP=function(){return this.on("pointerdown",hP,this).on("pointerdown",oP,this).on("pointermove",ol,this).on("pointerover",ol,this).on("pointerout",function(e,t){ol.call(this,e,null,null,t)},this),this},hP=function(e,t,s,h){if(!!this.childrenInteractiveEnable){var y=md(this.children,t,s);!y||this.emit("child.pointerdown",y,e,t,s,h)}},oP=function(e,t,s,h){if(!!this.childrenInteractiveEnable){var y=md(this.children,t,s);!y||this.emit("child.pointerup",y,e,t,s,h)}},ol=function(e,t,s,h){if(!!this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,s,h),this.lastOverChild=null);return}var y=md(this.children,t,s);y!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,s,h),y!==null&&this.emit("child.pointerover",y,e,t,s,h),this.lastOverChild=y)}};const lP=Phaser.GameObjects.GameObject;var uP=function(e,t,s){var h=!!this.input;return lP.prototype.setInteractive.call(this,e,t,s),h||aP.call(this),this};const dP=Phaser.Utils.Array.BringToTop,fP=Phaser.Utils.Array.SendToBack,cP=Phaser.Utils.Array.MoveUp,vP=Phaser.Utils.Array.MoveDown,pP=Phaser.Utils.Array.MoveAbove,gP=Phaser.Utils.Array.MoveBelow,mP={moveChildToFist(e){return fP(this.children,e),this},moveChildToLast(e){return dP(this.children,e),this},movechildUp(e){return cP(this.children,e),this},movechildDown(e){return vP(this.children,e),this},movechildAbove(e,t){return pP(this.children,e,t),this},movechildBelow(e,t){return gP(this.children,e,t),this}},xP={setBackgroundColor(e,t,s){return this.background.setColor(e,t,s),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},yP={setInnerBoundsColor(e,t,s){return this.innerBounds.setColor(e,t,s),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}};var G0={setFixedSize:jT,setPadding:qT,getPadding:_T,modifyTextStyle:tS,modifyDefaultTextStyle:eS,resetTextStyle:iS,setTestString:sS,removeChild:nS,removeChildren:aS,popChild:oS,clearContent:lS,addChild:uS,createCharChild:cS,createCharChildren:vS,setText:pS,appendText:Kn,insertText:gS,removeText:mS,getText:xS,createImageChild:CS,appendImage:F0,createDrawerChild:SS,appendDrawer:PS,createSpaceChild:MS,appendSpace:b0,createCommandChild:RS,appendCommand:dt,setWrapConfig:AS,runWordWrap:IS,runVerticalWrap:zS,runWrap:VS,renderContent:WS,forEachChild:YS,forEachRenderableChild:US,forEachCharChild:HS,getChildren:$S,getActiveChildren:ZS,getCharChildren:JS,getLastAppendedChildren:QS,getNearestChild:_S,getCharWorldPosition:tP,setToMinSize:eP,getCharChildIndex:iP,getCharChild:sP,getCharIndex:rP,setChildrenInteractiveEnable:nP,setInteractive:uP};Object.assign(G0,mP,xP,yP,kS,XS);const CP=Phaser.Utils.Objects.GetFastValue;var TP={};class SP{constructor(t){this.pools=CP(t,"pools",TP)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new wi),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,h=t.length;s<h;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Bc=Phaser.Utils.Objects.IsPlainObject,we=Phaser.Utils.Objects.GetValue;class Kr extends Ts{constructor(t,s,h,y,S,r){Bc(s)?(r=s,s=we(r,"x",0),h=we(r,"y",0),y=we(r,"width",0),S=we(r,"height",0)):Bc(y)&&(r=y,y=we(r,"width",0),S=we(r,"height",0));var T=y===0?1:y,i=S===0?1:S;super(t,s,h,T,i),this.type="rexDynamicText",this.autoRound=!0,this.padding=gs(),this.wrapPadding=gs();var d=we(r,"style",void 0);this.defaultTextStyle=new io(null,d),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(we(r,"testString","|M\xC9qgy")),this._textOX=0,this._textOY=0,this.background=new JT(this,we(r,"background",void 0)),this.innerBounds=new QT(this,we(r,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new SP(r),this.setFixedSize(y,S),this.setPadding(we(r,"padding",0)),this.setWrapConfig(we(r,"wrap",void 0)),this.setChildrenInteractiveEnable(we(r,"childrenInteractive",!1));var x=we(r,"text",void 0);x&&this.setText(x)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(Kr.prototype,G0);it.register("dynamicText",function(e,t,s,h,y){var S=new Kr(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.DynamicText",Kr);const Zn={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},PP={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var s=t[e];return s!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(o){var t=o.property,s=o.value,h=o.duration,y=o.delay,S=o.ease,r=o.repeat,T=o.yoyo,i=o.from,d=o.complete,x=o.target;if(h===void 0&&(h=1e3),y===void 0&&(y=0),S===void 0&&(S="Linear"),r===void 0&&(r=0),T===void 0&&(T=!1),x===void 0&&(x=this.gameObject),i){var f=s;s=x[t],x[t]=f}var o={targets:x,duration:h,delay:y,ease:S,repeat:r,yoyo:T,onComplete:d};return o[t]=s,this.addTweenTask(t,o),this},addTweenTask(e,t){var s=this.tweens,h=s[e];h&&h.remove();var y=t.onComplete;return t.onComplete=function(){s[e].remove(),s[e]=null,y&&y(t.targets,e)},h=this.scene.tweens.add(t),h.timeScale=this.timeScale,s[e]=h,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var s in e)t=e[s],t&&t.remove(),e[s]=null;return this}},EP={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var s=this.gameObject;return s[e].apply(s,t),this}},MP={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class xd{constructor(t,s,h){this.GOManager=t,this.tweens={},this.effects={},this.setGO(s,h)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.goName=s,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var h in s){var y=s[h];y&&(y.timeScale=t)}return this}}Object.assign(xd.prototype,PP,EP,MP);var yd=function(e){for(var t in e)return!1;return!0},Ks=function(e){return e&&e.charAt(0)!=="!"};const wP={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(Ks(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var s in this.bobs)e&&s===e||t.push(this.bobs[s]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var s=this.get(e);if(s)if(Array.isArray(s)){t===void 0&&(t=[]);var h=s;return h.forEach(function(y){t.push(y.gameObject)}),t}else return s.gameObject;else return null},forEachGO(e,t){for(var s in this.bobs){var h=this.bobs[s].gameObject,y;if(t?y=e.call(t,h,s,this):y=e(h,s,this),y)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var s=this.bobs[t].gameObject;e.push(s)}return e}};var In=function(e){return e>>16&255},Bn=function(e){return e>>8&255},Gn=function(e){return e&255};const RP=~(255<<16)&16777215,AP=~(255<<8)&16777215,LP=16776960;var OP=function(e,t){return(t&255)<<16|e&RP},FP=function(e,t){return(t&255)<<8|e&AP},bP=function(e,t){return t&255|e&LP},DP=function(e,t,s,h){return(t&255)<<16|(s&255)<<8|h&255},IP=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var s=In(t),h=Bn(t),y=Gn(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(S){S=Math.floor(S)&16777215,e.setTint&&e.setTint(S),t!==S&&(t=S,s=In(t),h=Bn(t),y=Gn(t))}}),Object.defineProperty(e,"tintR",{get:function(){return s},set:function(S){S=Math.floor(S)&255,s!==S&&(s=S,e.tint=OP(t,S))}}),Object.defineProperty(e,"tintG",{get:function(){return h},set:function(S){S=Math.floor(S)&255,h!==S&&(h=S,e.tint=FP(t,S))}}),Object.defineProperty(e,"tintB",{get:function(){return y},set:function(S){S=Math.floor(S)&255,y!==S&&(y=S,e.tint=bP(t,S))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((s+h+y)/3)},set:function(S){S=Math.floor(S)&255,(s!==S||h!==S||y!==S)&&(s=S,h=S,y=S,e.tint=DP(t,S,S,S))}}),e.tint=t,e};const BP=Phaser.Events.EventEmitter;var GP=function(e){if(e.events)return e;var t=new BP,s=e.x;Object.defineProperty(e,"x",{get:function(){return s},set:function(r){s!==r&&(s=r,t.emit("update",e))}});var h=e.y;Object.defineProperty(e,"y",{get:function(){return h},set:function(r){h!==r&&(h=r,t.emit("update",e))}});var y=e.width;Object.defineProperty(e,"width",{get:function(){return y},set:function(r){y!==r&&(y=r,t.emit("update",e))}});var S=e.height;return Object.defineProperty(e,"height",{get:function(){return S},set:function(r){S!==r&&(S=r,t.emit("update",e))}}),e.events=t,e},NP=function(e,t,s,h,y,S){return S===void 0?S={}:S===!0&&(S=zP),typeof s!="number"&&(s=0,h=0),S.x=y.x+y.width*e+s,S.y=y.y+y.height*t+h,S},zP={},VP=function(e,t,s,h,y,S,r){if(e.hasOwnProperty("vp"))return e;typeof s=="function"&&(r=s,s=void 0),typeof y=="function"&&(r=y,y=void 0),s===void 0&&(s=.5),h===void 0&&(h=.5),y===void 0&&(y=0),S===void 0&&(S=0),r===void 0&&(r=NP),GP(t);var T=t.events;e.vp=t;var i=function(){r(s,h,y,S,t,e)};T.on("update",i),e.once("destroy",function(){T.off("update",i),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return s},set:function(d){s!==d&&(s=d,i())}}),Object.defineProperty(e,"vpy",{get:function(){return h},set:function(d){h!==d&&(h=d,i())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return y},set:function(d){y!==d&&(y=d,i())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return S},set:function(d){S!==d&&(S=d,i())}}),i()},xe=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},Yt=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var s=e._effectSwitchNames,h=0,y=s.length;h<y;h++)e[s[h]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},kP=function(e){if(Rt(e,"barrel"))return e;var t=xe(e);if(!t)return e;var s;return Object.defineProperty(e,"barrel",{get:function(){return s},set:function(h){s!==h&&(s=h,s===null||s===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=s))}}),e.barrel=null,Yt(e,"barrel"),e},ce=function(e,t,s){if(Rt(e,t))return e;var h=xe(e);if(!h)return e;var y=`_${t}Effect`,S;return Object.defineProperty(e,t,{get:function(){return S},set:function(r){if(S!==r)if(S=r,S===null||S===!1)e[y]&&(h.remove(e[y]),e[y]=void 0);else{e[y]||(e[y]=h.addColorMatrix());var T=e[y];T[t](s===1?r:void 0)}}}),e[t]=null,Yt(e,t),e},XP=function(e){return ce(e,"blackWhite"),e},WP=function(e){if(Rt(e,"bloomColor"))return e;var t=xe(e);if(!t)return e;var s,h=1,y=1,S=1,r=1,T=4;return Object.defineProperty(e,"bloomColor",{get:function(){return s},set:function(i){s!==i&&(s=i,s===null||s===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(s,h,y,S,r,T),t.setPadding(Math.max(h,y)+1)),e._bloom.color=s))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return h},set:function(i){if(h!==i&&(h=i,e._bloom)){var d=Math.max(h,y);t.setPadding(d+1),e._bloom.offsetX=h}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return y},set:function(i){if(y!==i&&(y=i,e._bloom)){var d=Math.max(h,y);t.setPadding(d+1),e._bloom.offsetY=y}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return S},set:function(i){S!==i&&(S=i,e._bloom&&(e._bloom.blurStrength=S))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return r},set:function(i){r!==i&&(r=i,e._bloom&&(e._bloom.strength=r))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return T},set:function(i){T!==i&&(T=i,e._bloom&&(e._bloom.steps=T))}}),e.bloomColor=null,Yt(e,"bloomColor"),e},YP=function(e){if(Rt(e,"blurColor"))return e;var t=xe(e);if(!t)return e;var s,h=0,y=1,S=1,r=1,T=4;return Object.defineProperty(e,"blurColor",{get:function(){return s},set:function(i){s!==i&&(s=i,s===null||s===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(h,y,S,r,s,T),t.setPadding(Math.max(y,S)+1)),e._blur.color=s))}}),Object.defineProperty(e,"blurQuality",{get:function(){return h},set:function(i){h!==i&&(h=i,e._blur&&(e._blur.quality=h))}}),Object.defineProperty(e,"blurX",{get:function(){return y},set:function(i){if(y!==i&&(y=i,e._blur)){var d=Math.max(y,S);t.setPadding(d+1),e._blur.x=y}}}),Object.defineProperty(e,"blurY",{get:function(){return S},set:function(i){if(S!==i&&(S=i,e._blur)){var d=Math.max(y,S);t.setPadding(d+1),e._blur.y=S}}}),Object.defineProperty(e,"blurStrength",{get:function(){return r},set:function(i){r!==i&&(r=i,e._blur&&(e._blur.strength=r))}}),Object.defineProperty(e,"blurSteps",{get:function(){return T},set:function(i){T!==i&&(T=i,e._blur&&(e._blur.steps=T))}}),e.blurColor=null,Yt(e,"blurColor"),e},UP=function(e){if(Rt(e,"bokehRadius"))return e;var t=xe(e);if(!t)return e;var s,h=1,y=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(s,h,y)),e._bokeh.radius=s))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return h},set:function(S){h!==S&&(h=S,e._bokeh&&(e._bokeh.amount=h))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return y},set:function(S){y!==S&&(y=S,e._bokeh&&(e._bokeh.contrast=y))}}),e.bokehRadius=null,Yt(e,"bokehRadius"),e},HP=function(e){return ce(e,"brightness",1),e},$P=function(e){return ce(e,"brown"),e},KP=function(e){if(Rt(e,"circleColor"))return e;var t=xe(e);if(!t)return e;var s,h=8,y=0,S=.4,r=1,T=.005;return Object.defineProperty(e,"circleColor",{get:function(){return s},set:function(i){s!==i&&(s=i,s===null||s===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(h,s,y,r,T),e.circleBackgroundAlpha=S),e._circle.color=s))}}),Object.defineProperty(e,"circleThickness",{get:function(){return h},set:function(i){h!==i&&(h=i,e._circle&&(e._circle.thickness=h))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return y},set:function(i){y!==i&&(y=i,e._circle&&(e._circle.backgroundColor=y))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return S},set:function(i){S!==i&&(S=i,e._circle&&(e._circle.glcolor2[3]=S))}}),Object.defineProperty(e,"circleScale",{get:function(){return r},set:function(i){r!==i&&(r=i,e._circle&&(e._circle.scale=r))}}),Object.defineProperty(e,"circleFeather",{get:function(){return T},set:function(i){T!==i&&(T=i,e._circle&&(e._circle.feather=T))}}),e.circleColor=null,Yt(e,"circleColor"),e},ZP=function(e){return ce(e,"contrast",1),e},JP=function(e){return ce(e,"desaturate",1),e},QP=function(e){return ce(e,"desaturateLuminance"),e},jP=function(e){if(Rt(e,"displacementKey"))return e;var t=xe(e);if(!t)return e;var s,h=.005,y=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(s,h,y)),e._displacement.setTexture(s)))}}),Object.defineProperty(e,"displacementX",{get:function(){return h},set:function(S){h!==S&&(h=S,e._displacement&&(e._displacement.x=h))}}),Object.defineProperty(e,"displacementY",{get:function(){return y},set:function(S){y!==S&&(y=S,e._displacement&&(e._displacement.y=y))}}),e.displacementKey=null,Yt(e,"displacementKey"),e},qP=function(e){if(Rt(e,"glowColor"))return e;var t=xe(e);if(!t)return e;var s,h=4,y=0;return Object.defineProperty(e,"glowColor",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(s,h,y),t.setPadding(h+1)),e._glow.color=s))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return h},set:function(S){h!==S&&(h=S,e._glow&&(t.setPadding(h+1),e._glow.outerStrength=h))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return y},set:function(S){y!==S&&(y=S,e._glow&&(e._glow.innerStrength=y))}}),e.glowColor=null,Yt(e,"glowColor"),e},_P=function(e){if(Rt(e,"gradientColor"))return e;var t=xe(e);if(!t)return e;var s,h,y=.5,S=0,r=0,T=0,i=1,d=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[s,h]},set:function(x){var f,o;x===null||x===!1?(f=null,o=null):(f=x[0],o=x[1]),!(s===f&&h===o)&&(s=f,h=o,s===null||s===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(s,h,y,S,r,T,i,d)),e._gradient.color1=s,e._gradient.color2=h))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return s},set:function(x){if(x===null||x===!1){e.gradientColor=x;return}s!==x&&(s=x,e._gradient&&(e._gradient.color1=s))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return h},set:function(x){if(x===null||x===!1){e.gradientColor=x;return}h!==x&&(h=x,e._gradient&&(e._gradient.color2=h))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return y},set:function(x){y!==x&&(y=x,e._gradient&&(e._gradient.alpha=y))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return S},set:function(x){S!==x&&(S=x,e._gradient&&(e._gradient.fromX=S))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return r},set:function(x){r!==x&&(r=x,e._gradient&&(e._gradient.fromY=r))}}),Object.defineProperty(e,"gradientToX",{get:function(){return T},set:function(x){T!==x&&(T=x,e._gradient&&(e._gradient.toX=T))}}),Object.defineProperty(e,"gradientToY",{get:function(){return i},set:function(x){i!==x&&(i=x,e._gradient&&(e._gradient.toY=i))}}),Object.defineProperty(e,"gradientSize",{get:function(){return d},set:function(x){d!==x&&(d=x,e._gradient&&(e._gradient.size=d))}}),e.gradientColor=null,Yt(e,"gradientColor"),e},tE=function(e){return ce(e,"grayscale",1),e},eE=function(e){return ce(e,"hue",1),e},iE=function(e){return ce(e,"kodachrome"),e},sE=function(e){return ce(e,"lsd"),e},rE=function(e){return ce(e,"negative"),e},nE=function(e){if(Rt(e,"pixelate"))return e;var t=xe(e);if(!t)return e;var s;return Object.defineProperty(e,"pixelate",{get:function(){return s},set:function(h){s!==h&&(s=h,s===null||s===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=s))}}),e.pixelate=null,Yt(e,"pixelate"),e},aE=function(e){return ce(e,"polaroid"),e},hE=function(e){if(Rt(e,"revealLeft"))return e;var t=xe(e);if(!t)return e;var s,h,y,S,r=.1,T=function(){s=null,h=null,y=null,S=null},i=function(d){d._revealEffect&&(t.remove(d._revealEffect),d._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return s},set:function(d){s!==d&&(T(),s=d,s===null||s===!1?i(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealRight",{get:function(){return h},set:function(d){h!==d&&(T(),h=d,h===null||h===!1?i(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=h))}}),Object.defineProperty(e,"revealUp",{get:function(){return y},set:function(d){y!==d&&(T(),y=d,y===null||y===!1?i(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=y))}}),Object.defineProperty(e,"revealDown",{get:function(){return S},set:function(d){S!==d&&(T(),S=d,S===null||S===!1?i(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=S))}}),Object.defineProperty(e,"revealWidth",{get:function(){return r},set:function(d){r!==d&&(r=d,e._revealEffect&&(e._revealEffect.wipeWidth=r))}}),e.revealLeft=null,Yt(e,"revealLeft"),Yt(e,"revealRight"),Yt(e,"revealUp"),Yt(e,"revealDown"),e},oE=function(e){return ce(e,"saturate",1),e},lE=function(e){return ce(e,"sepia"),e},uE=function(e){if(Rt(e,"shadowColor"))return e;var t=xe(e);if(!t)return e;var s,h=0,y=0,S=.1,r=1,T=6,i=1;return Object.defineProperty(e,"shadowColor",{get:function(){return s},set:function(d){s!==d&&(s=d,s===null||s===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(h,y,S,r,s,T,i)),e._shadow.color=s))}}),Object.defineProperty(e,"shadowX",{get:function(){return h},set:function(d){h!==d&&(h=d,e._shadow&&(e._shadow.x=h))}}),Object.defineProperty(e,"shadowY",{get:function(){return y},set:function(d){y!==d&&(y=d,e._shadow&&(e._shadow.y=y))}}),Object.defineProperty(e,"decay",{get:function(){return S},set:function(d){S!==d&&(S=d,e._shadow&&(e._shadow.decay=S))}}),Object.defineProperty(e,"shadowPower",{get:function(){return r},set:function(d){r!==d&&(r=d,e._shadow&&(e._shadow.power=r))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return T},set:function(d){T!==d&&(T=d,e._shadow&&(e._shadow.samples=T))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return i},set:function(d){i!==d&&(i=d,e._shadow&&(e._shadow.intensity=i))}}),e.shadowColor=null,Yt(e,"shadowColor"),e},dE=function(e){return ce(e,"shiftToBGR"),e},fE=function(e){if(Rt(e,"shineSpeed"))return e;var t=xe(e);if(!t)return e;var s,h=.5,y=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(s,h,y)),e._shine.speed=s))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return h},set:function(S){h!==S&&(h=S,e._shine&&(e._shine.lineWidth=h))}}),Object.defineProperty(e,"shineGradient",{get:function(){return y},set:function(S){y!==S&&(y=S,e._shine&&(e._shine.gradient=y))}}),e.shineSpeed=null,Yt(e,"shineSpeed"),e},cE=function(e){return ce(e,"technicolor"),e},vE=function(e){if(Rt(e,"tiltShiftRadius"))return e;var t=xe(e);if(!t)return e;var s,h=1,y=.2,S=1,r=1,T=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return s},set:function(i){s!==i&&(s=i,s===null||s===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(s,h,y,S,r,T)),e._tiltShift.radius=s))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return h},set:function(i){h!==i&&(h=i,e._tiltShift&&(e._tiltShift.amount=h))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return y},set:function(i){y!==i&&(y=i,e._tiltShift&&(e._tiltShift.contrast=y))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return S},set:function(i){S!==i&&(S=i,e._tiltShift&&(e._tiltShift.blurX=S))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return r},set:function(i){r!==i&&(r=i,e._tiltShift&&(e._tiltShift.blurY=r))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return T},set:function(i){T!==i&&(T=i,e._tiltShift&&(e._tiltShift.strength=T))}}),e.tiltShiftRadius=null,Yt(e,"tiltShiftRadius"),e},pE=function(e){if(Rt(e,"vignetteRadius"))return e;var t=xe(e);if(!t)return e;var s,h=.5,y=.5,S=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return s},set:function(r){s!==r&&(s=r,s===null||s===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(h,y,s,S)),e._vignette.radius=s))}}),Object.defineProperty(e,"vignetteX",{get:function(){return h},set:function(r){h!==r&&(h=r,e._vignette&&(e._vignette.x=h))}}),Object.defineProperty(e,"vignetteY",{get:function(){return y},set:function(r){y!==r&&(y=r,e._vignette&&(e._vignette.y=y))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return S},set:function(r){S!==r&&(S=r,e._vignette&&(e._vignette.strength=S))}}),e.vignetteRadius=null,Yt(e,"vignetteRadius"),e},gE=function(e){return ce(e,"vintagePinhole"),e},mE=function(e){if(Rt(e,"wipeLeft"))return e;var t=xe(e);if(!t)return e;var s,h,y,S,r=.1,T=function(){s=null,h=null,y=null,S=null},i=function(d){d._wipeEffect&&(t.remove(d._wipeEffect),d._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return s},set:function(d){s!==d&&(T(),s=d,s===null||s===!1?i(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeRight",{get:function(){return h},set:function(d){h!==d&&(T(),h=d,h===null||h===!1?i(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=h))}}),Object.defineProperty(e,"wipeUp",{get:function(){return y},set:function(d){y!==d&&(T(),y=d,y===null||y===!1?i(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=y))}}),Object.defineProperty(e,"wipeDown",{get:function(){return S},set:function(d){S!==d&&(T(),S=d,S===null||S===!1?i(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=S))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return r},set:function(d){r!==d&&(r=d,e._wipeEffect&&(e._wipeEffect.wipeWidth=r))}}),e.wipeLeft=null,Yt(e,"wipeLeft"),Yt(e,"wipeRight"),Yt(e,"wipeUp"),Yt(e,"wipeDown"),e};const ba={barrel:kP,blackWhite:XP,bloom:WP,blur:YP,bokeh:UP,brightness:HP,brown:$P,circle:KP,contrast:ZP,desaturate:JP,desaturateLuminance:QP,displacement:jP,glow:qP,gradient:_P,grayscale:tE,hue:eE,kodachrome:iE,lsd:sE,negative:rE,pixelate:nE,polaroid:aE,reveal:hE,saturate:oE,sepia:lE,shadow:uE,shiftToBGR:dE,shine:fE,technicolor:cE,tiltShift:vE,vignette:pE,vintagePinhole:gE,wipe:mE};var Zr=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var s=t,t={},h=0,y=s.length;h<y;h++)t[s[h]]=!0;if(t===!0)for(var S in ba)ba[S](e);else for(var S in t)t[S]&&ba[S]&&ba[S](e);return e};const xE=Phaser.Utils.Array.Remove,yE={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&IP(t),this.viewportCoordinateEnable&&VP(t,this.viewport),this.effectPropertiesConfig&&Zr(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){xE(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,e);return this.bobs[e]=s,this},add(e,...t){var s=this.createGameObjectCallback,h=this.createGameObjectScope,y=s.call(h,this.scene,...t);this.addGO(e,y),this.gameObjectDepth!=null&&y.setDepth(this.gameObjectDepth);var S=this.get(e);return this.fadeBob(S,0,1),this}},CE={remove(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var h=this;return s.forEach(function(y){delete h.bobs[y.name];var S=y.gameObject;h.removedGOs.push(S),S.setName(),t?y.destroy():h.fadeBob(y,void 0,0,function(){y.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var s in t)e&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},TE={hasProperty(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);return s?s.hasProperty(t):!1},getProperty(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);if(!!s)return s.getProperty(t)},isNumberProperty(e,t){var s=this.getProperty(e,t);return typeof s=="number"},setProperty(e,t,s){var h=this.get(e);if(h)Array.isArray(h)||(h=[h]);else return this;return this.symbols&&typeof s=="string"&&this.isNumberProperty(e,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),h.forEach(function(y){y.setProperty(t,s)}),this},easeProperty(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var h=t.value,y=t.property;return this.symbols&&typeof h=="string"&&this.isNumberProperty(e,y)&&h in this.symbols&&(t.value=this.symbols[h]),s.forEach(function(S){S.easeProperty(t)}),this},hasTweenTask(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);return s?s.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);return s&&s.tweens[t]||null}},SE={hasMethod(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);return s?s.hasMethod(t):!1},call(e,t,...s){var h=this.get(e);if(h)Array.isArray(h)||(h=[h]);else return this;return h.forEach(function(y){y.call(t,...s)}),this}},PE={hasData(e,t){var s=Ks(e)?this.get(e):this.getFitst(e);return s?s.hasData(t):!1},getData(e,t){if(!!this.has(e))return this.get(e).getData(t)},setData(e,t,s){var h=this.get(e);if(h)Array.isArray(h)||(h=[h]);else return this;return h.forEach(function(y){y.setData(t,s)}),this}},N0=0,z0=1,Nu=2,V0=3,k0=4,zu=5,EE={tint:N0,alpha:z0,revealUp:Nu,revealDown:V0,revealLeft:k0,revealRight:zu},ME={setGOFadeMode(e){return typeof e=="string"&&(e=EE[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===N0)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===z0)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=Nu&&this.fadeMode<=zu&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,s,h){var y=e.gameObject;if(this.useTintFadeEffect(y))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*s),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:h});else if(this.useAlphaFadeEffect(y))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:h});else if(this.useRevealEffect(y)){Zr(y,"reveal");var S;switch(this.fadeMode){case Nu:S="revealUp";break;case V0:S="revealDown";break;case k0:S="revealLeft";break;case zu:S="revealRight";break}t===void 0&&(t=0),y[S]=t,e.easeProperty({property:S,value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:h}),e.getTweenTask(S).once("complete",function(){y[S]=null})}else h&&h(y);return this}};var Lt=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},Ot=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const Gc=Phaser.Geom.Rectangle,Ai=Phaser.Math.Vector2,wE=Phaser.Math.RotateAround;var Cd=function(e,t){if(t===void 0?t=new Gc:t===!0&&(ll===void 0&&(ll=new Gc),t=ll),e.getBounds)return e.getBounds(t);var s,h,y,S,r,T,i,d;if(e.parentContainer){var x=e.parentContainer.getBoundsTransformMatrix();Zs(e,t),x.transformPoint(t.x,t.y,t),s=t.x,h=t.y,Nn(e,t),x.transformPoint(t.x,t.y,t),y=t.x,S=t.y,zn(e,t),x.transformPoint(t.x,t.y,t),r=t.x,T=t.y,Vu(e,t),x.transformPoint(t.x,t.y,t),i=t.x,d=t.y}else Zs(e,t),s=t.x,h=t.y,Nn(e,t),y=t.x,S=t.y,zn(e,t),r=t.x,T=t.y,Vu(e,t),i=t.x,d=t.y;return t.x=Math.min(s,y,r,i),t.y=Math.min(h,S,T,d),t.width=Math.max(s,y,r,i)-t.x,t.height=Math.max(h,S,T,d)-t.y,t},ll=void 0,Zs=function(e,t,s){return t===void 0?t=new Ai:t===!0&&(Pe===void 0&&(Pe=new Ai),t=Pe),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-Lt(e)*e.originX,t.y=e.y-Ot(e)*e.originY,Jn(e,t,s))},Nn=function(e,t,s){return t===void 0?t=new Ai:t===!0&&(Pe===void 0&&(Pe=new Ai),t=Pe),e.getTopRight?e.getTopRight(t):(t.x=e.x-Lt(e)*e.originX+Lt(e),t.y=e.y-Ot(e)*e.originY,Jn(e,t,s))},zn=function(e,t,s){return t===void 0?t=new Ai:t===!0&&(Pe===void 0&&(Pe=new Ai),t=Pe),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-Lt(e)*e.originX,t.y=e.y-Ot(e)*e.originY+Ot(e),Jn(e,t,s))},Vu=function(e,t,s){return t===void 0?t=new Ai:t===!0&&(Pe===void 0&&(Pe=new Ai),t=Pe),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-Lt(e)*e.originX+Lt(e),t.y=e.y-Ot(e)*e.originY+Ot(e),Jn(e,t,s))},Nc=function(e,t,s){t===void 0?t=new Ai:t===!0&&(Pe===void 0&&(Pe=new Ai),t=Pe);var h=Lt(e),y=Ot(e);return t.x=e.x+h*(.5-e.originX),t.y=e.y+y*(.5-e.originY),Jn(e,t,s)},Pe=void 0,Jn=function(e,t,s){if(s===void 0&&(s=!1),e.rotation!==0&&wE(t,e.x,e.y,e.rotation),s&&e.parentContainer){var h=e.parentContainer.getBoundsTransformMatrix();h.transformPoint(t.x,t.y,t)}return t};const on=Phaser.Utils.Objects.GetValue;var X0=function(e,t,s){var h,y,S,r,T;if(typeof s=="number"?h=s:(h=on(s,"color"),y=on(s,"lineWidth"),S=on(s,"fillColor"),r=on(s,"fillAlpha",1),T=on(s,"padding",0)),Array.isArray(e))for(var i=0,d=e.length;i<d;i++)zc(e[i],t,h,y,S,r,T);else zc(e,t,h,y,S,r,T)},zc=function(e,t,s,h,y,S,r){var T=e.getBounds||e.width!==void 0&&e.height!==void 0;if(!!T){s===void 0&&(s=16777215),h===void 0&&(h=1),y===void 0&&(y=null),S===void 0&&(S=1),r===void 0&&(r=0);var i=Zs(e,dr[0]);i.x-=r,i.y-=r;var d=Nn(e,dr[1]);d.x+=r,d.y-=r;var x=Vu(e,dr[2]);x.x+=r,x.y+=r;var f=zn(e,dr[3]);f.x-=r,f.y+=r,y!==null&&t.fillStyle(y,S).fillPoints(dr,!0,!0),s!==null&&t.lineStyle(h,s).strokePoints(dr,!0,!0)}},dr=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],RE=function(e,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(e,t):X0(s,e,t)}),this},W0=function(e,t){var s=e.cameras,h;if(t===void 0)h=s.main;else{var y=typeof t;switch(y){case"string":h=s.getCamera(t);break;case"number":h=s.cameras[t];break;default:h=t;break}}return h};const AE={setCamera(e,t){var s=this.get(e);if(!s)return this;var h=W0(this.scene,t);return h?(s.gameObject.cameraFilter=4294967295^h.id,s.camera=h,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}};var Y0={drawGameObjectsBounds:RE};Object.assign(Y0,wP,yE,CE,TE,SE,PE,ME,AE);const LE=Phaser.Cameras.Scene2D.BaseCamera;var OE=function(e){return e instanceof LE};const U0=Phaser.Geom.Rectangle;var Jr=function(e,t,s){return OE(t)||(s=t,t=void 0),s===void 0?s=new U0:s===!0&&(s=FE),t?e.scale.getViewPort(t,s):e.scale.getViewPort(s)},FE=new U0;const Re=Phaser.Utils.Objects.GetValue;class Yr{constructor(t,s){this.scene=t,this.BobClass=Re(s,"BobClass",xd),this.setCreateGameObjectCallback(Re(s,"createGameObject"),Re(s,"createGameObjectScope")),this.setEventEmitter(Re(s,"eventEmitter",void 0)),this.setGameObjectDepth(Re(s,"depth",void 0));var h=Re(s,"fade",500);typeof h=="number"?(this.setGOFadeMode(),this.setGOFadeTime(h)):(this.setGOFadeMode(Re(h,"mode")),this.setGOFadeTime(Re(h,"time",500)));var y=Re(s,"viewportCoordinate",!1);y!==!1?(this.setViewportCoordinateEnable(Re(s,"enable",!0)),this.setViewport(Re(y,"viewport"))):this.setViewportCoordinateEnable(!1);var S=Re(s,"effectProperties",!1);this.setEffectPropertiesConfig(S),this.setSymbols(Re(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=Re(s,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var h in s)s[h].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=Jr(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return yd(this.bobs)&&this.removedGOs.length===0}}Object.assign(Yr.prototype,Zn,Y0);const bE=Phaser.GameObjects.GameObject;var De=function(e){return e instanceof bE};const DE=Phaser.GameObjects.Layer;var bn=function(e){return e instanceof DE},H0=function(e){var t=e.displayList;return bn(t)?t:null},Qe=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var s,h=0,y=e.length;h<y;h++){var S=e[h];if(S.displayList?s=S.displayList:S.parentContainer&&(s=S.parentContainer.list),s)break}return s||(s=S.scene.sys.displayList),s.depthSort&&(s.depthSort(),s=s.list),t?e.sort(function(r,T){return s.indexOf(T)-s.indexOf(r)}):e.sort(function(r,T){return s.indexOf(r)-s.indexOf(T)}),e};const IE={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),Qe(e,!1),e},addToLayer(e,t){var s=this.getGO(e);if(!s){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var h=0,y=t.length;h<y;h++){var S=t[h];S.isRexContainerLite?S.addToLayer(s):s.add(S)}return s.scrollFactorX!==void 0&&S.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},removeFromLayer(e,t,s){var h=this.getGO(e);if(!h){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return s===void 0&&(s=!0),t.isRexContainerLite?t.removeFromLayer(h,s):(h.remove(t),s&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var s=this.getGO(e);if(!s){console.warn(`Can't get layer "${e}"`);return}if(t)for(var h=s.getAll(),y=0,S=h.length;y<S;y++)h[y].destroy();else s.removeAll();return this}},BE={setScrollFactor(e,t,s){s===void 0&&(s=t);var h=this.getLayer(e);if(!h)return this;h.scrollFactorX=t,h.scrollFactorY=s;for(var y=h.getAll(),S=0,r=y.length;S<r;S++)y[S].setScrollFactor(t,s);return this}},so=Phaser.Utils.Array,GE=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(so.BringToTop(e,this),this):this},NE=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(so.SendToBack(e,this),this):this},$0=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?(so.MoveBelow(t,this,e),this):this},K0=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?(so.MoveAbove(t,this,e),this):this},Da={bringMeToTop:GE,sendMeToBack:NE,moveMyDepthBelow:$0,moveMyDepthAbove:K0},zE={bringLayerToTop(e){var t=this.getLayer(e);return t?(Da.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Da.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var s=this.getLayer(e),h=this.getLayer(t);return!s||!h?this:(Da.moveMyDepthBelow.call(s,h),this)},moveLayerAbove(e,t){if(e===t)return this;var s=this.getLayer(e),h=this.getLayer(t);return!s||!h?this:(Da.moveMyDepthAbove.call(s,h),this)}},VE=Yr.prototype.setCamera,kE={setCamera(e,t){var s=W0(this.scene,t);return s||(s=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),VE.call(this,e,s),this}};var Z0={};Object.assign(Z0,IE,BE,zE,kE);const Ia=Phaser.Utils.Objects.GetValue;class ro extends Yr{constructor(t,s){s===void 0?s={}:Array.isArray(s)&&(s={layers:s}),s.hasOwnProperty("fade")||(s.fade=0),s.viewportCoordinate=!1,super(t,s);var h=Ia(s,"rootLayer");this.setRootLayer(h);var y=Ia(s,"layers");if(y)for(var S=0,r=y.length;S<r;S++){var T=y[S];if(typeof T=="string")this.add(T);else{var i=T.name;this.add(i);var d=T.scrollFactor,x=Ia(T,"scrollFactorX",d),f=Ia(T,"scrollFactorY",d);x!==void 0&&this.setScrollFactor(i,x,f),this.setCamera(i,T.cameraName)}}}setCreateGameObjectCallback(t,s){return t||(t=XE),super.setCreateGameObjectCallback(t,s),this}setRootLayer(t){if(t===this.rootLayer)return this;var s=this.getAllGO();return t?t.add(s):this.scene.displayList.add(s),this.rootLayer=t,this}addGO(t,s){return super.addGO(t,s),s.name=t,this.rootLayer&&this.rootLayer.add(s),this}get(t,s){if(De(t)){var h=H0(t);if(!h||(t=h.name,!t))return}return super.get(t,s)}}var XE=function(e,t){var s=e.add.layer();return t!==void 0&&s.setDepth(t),s};Object.assign(ro.prototype,Z0);var WE=function(e){return Qs(e)?e.sys.sound:e.sound},YE=function(e){return this.sound.game.cache.audio.has(e)},Qr=function(e){return e==null||typeof e!="object"?null:Qs(e)?e:e.scene&&Qs(e.scene)?e.scene:e.parent&&e.parent.scene&&Qs(e.parent.scene)?e.parent.scene:null};const UE=Phaser.Utils.Objects.GetValue;class Gt{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(UE(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=Qr(t),this.game=qs(t),this}}Object.assign(Gt.prototype,Zn);const HE=Phaser.Utils.Objects.GetValue;class no extends Gt{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(HE(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=$E[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const $E={no:0,lazy:1,always:2},KE=Phaser.Utils.Objects.GetValue;class ZE extends no{constructor(t,s){super(t,s);var h=this.scene?"update":"step";this.tickEventName=KE(s,"tickEventName",h),this.isSceneTicker=!JE(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var JE=function(e){return e==="step"||e==="poststep"};const Di=Phaser.Utils.Objects.GetValue,Vc=Phaser.Math.Clamp;class J0{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Di(t,"state",ln),this.timeScale=Di(t,"timeScale",1),this.delay=Di(t,"delay",0),this.repeat=Di(t,"repeat",0),this.repeatCounter=Di(t,"repeatCounter",0),this.repeatDelay=Di(t,"repeatDelay",0),this.duration=Di(t,"duration",0),this.nowTime=Di(t,"nowTime",0),this.justRestart=Di(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?fr:un,this.repeatCounter=0,this}stop(){return this.state=ln,this}update(t,s){this.state===ln||this.state===Ba||s===0||this.timeScale===0||(this.nowTime+=s*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=kc)):(this.nowTime=this.duration,this.state=Ba):this.nowTime>=0&&(this.state=fr))}get t(){var t;switch(this.state){case ln:case un:case kc:t=0;break;case fr:t=this.nowTime/this.duration;break;case Ba:t=1;break}return Vc(t,0,1)}set t(t){t=Vc(t,-1,1),t<0?(this.state=un,this.nowTime=-this.delay*t):(this.state=fr,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===ln}get isDelay(){return this.state===un}get isCountDown(){return this.state===fr}get isRunning(){return this.state===un||this.state===fr}get isDone(){return this.state===Ba}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const ln=0,un=1,fr=2,kc=3,Ba=-1;class QE extends ZE{constructor(t,s){super(t,s),this.timer=new J0}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const dn=Phaser.Utils.Objects.GetValue,Xc=Phaser.Utils.Objects.GetAdvancedValue,jE=Phaser.Tweens.Builders.GetEaseFunction;class ir extends QE{resetFromJSON(t){return this.timer.resetFromJSON(dn(t,"timer")),this.setEnable(dn(t,"enable",!0)),this.setTarget(dn(t,"target",this.parent)),this.setDelay(Xc(t,"delay",0)),this.setDuration(Xc(t,"duration",1e3)),this.setEase(dn(t,"ease","Linear")),this.setRepeat(dn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=jE(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var h=this.target,y=this.timer;return y.update(t,s),y.isDelay||this.updateTarget(h,y),this.emit("update",h,this),y.isDone&&this.complete(),this}updateTarget(t,s){}}const qE=Phaser.Sound.BaseSound;var Td=function(e){return e instanceof qE};const Wc=Phaser.Utils.Objects.GetValue,Yc=Phaser.Utils.Objects.GetAdvancedValue,_E=Phaser.Math.Linear;class Q0 extends ir{constructor(t,s,h){Td(t)&&(h=s,s=t,t=void 0),s.active=!0,s.scene=t,s.game=s.manager.game,super(s,h),this.volume={},this.resetFromJSON(h)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Wc(t,"mode",0)),this.setEnable(Wc(t,"enable",!0)),this.setVolumeRange(Yc(t,"volume.start",this.parent.volume),Yc(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=t2[t]),this.mode=t,this}setVolumeRange(t,s){return this.volume.start=t,this.volume.end=s,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(t,s){t.volume=_E(this.volume.start,this.volume.end,s.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}}const t2={stop:1,destroy:2};var ao=function(e,t,s,h,y){Td(e)&&(y=h,h=s,s=t,t=e,e=void 0),h===void 0&&(h=1),y===void 0&&(y=0);var S={mode:0,volume:{start:y,end:h},duration:s};typeof t=="string"&&(t=e.sys.sound.add(t));var r;return t.hasOwnProperty("_fade")?(r=t._fade,r.stop().resetFromJSON(S)):(r=new Q0(e,t,S),t._fade=r),r.start(),t.isPlaying||t.setVolume(y).play(),t},Ur=function(e,t,s,h){Td(e)&&(h=s,s=t,t=e,e=void 0),h===void 0&&(h=!0);var y={mode:h?2:1,volume:{start:t.volume,end:0},duration:s},S;return t.hasOwnProperty("_fade")?(S=t._fade,S.stop().resetFromJSON(y)):(S=new Q0(e,t,y),t._fade=S),S.start(),t.isPlaying||t.play(),t};const fn=Phaser.Utils.Objects.GetValue,e2={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var s=this.sound.add(e,{loop:fn(t,"loop",this.backgroundMusicLoop),mute:fn(t,"mute",this.backgroundMusicMute),volume:fn(t,"volume",this.backgroundMusicVolume),detune:fn(t,"detune",0),rate:fn(t,"rate",1)});return this.setCurrentBackgroundMusic(s),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&ao(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&Ur(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}},cn=Phaser.Utils.Objects.GetValue,i2={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var s=this.sound.add(e,{loop:cn(t,"loop",this.backgroundMusicLoop),mute:cn(t,"mute",this.backgroundMusic2Mute),volume:cn(t,"volume",this.backgroundMusic2Volume),detune:cn(t,"detune",0),rate:cn(t,"rate",1)});return this.setCurrentBackgroundMusic2(s),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&ao(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&Ur(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}},Uc=Phaser.Utils.Array.Remove,Ga=Phaser.Utils.Objects.GetValue,s2={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:Ga(t,"mute",this.soundEffectsMute),volume:Ga(t,"volume",this.soundEffectsVolume),detune:Ga(t,"detune",0),rate:Ga(t,"rate",1)});return this.soundEffects.push(s),s.once("complete",function(){s.destroy(),this.sound&&Uc(this.soundEffects,s)},this).once("destroy",function(){!this.sound||Uc(this.soundEffects,s)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&ao(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var s=this.getLastSoundEffect();return s&&Ur(s,e,t),this},fadeOutAllSoundEffects(e,t){for(var s=this.soundEffects.length-1;s>=0;s--)Ur(this.soundEffects[s],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var h=0,y=s.length;h<y;h++)s[h].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var h=0,y=s.length;h<y;h++)s[h].setRate(e);return this}},Hc=Phaser.Utils.Array.Remove,Na=Phaser.Utils.Objects.GetValue,r2={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:Na(t,"mute",this.soundEffects2Mute),volume:Na(t,"volume",this.soundEffects2Volume),detune:Na(t,"detune",0),rate:Na(t,"rate",1)});return this.soundEffects2.push(s),s.once("complete",function(){s.destroy(),this.sound&&Hc(this.soundEffects2,s)},this).once("destroy",function(){!this.sound||Hc(this.soundEffects2,s)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&ao(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var s=this.getLastSoundEffect2();return s&&Ur(s,e,t),this},fadeOutAllSoundEffects2(e,t){for(var s=this.soundEffects2.length-1;s>=0;s--)Ur(this.soundEffects2[s],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var h=0,y=s.length;h<y;h++)s[h].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var h=0,y=s.length;h<y;h++)s[h].setRate(e);return this}};var j0={hasAudio:YE};Object.assign(j0,e2,i2,s2,r2);const He=Phaser.Utils.Objects.GetValue;class q0{constructor(t,s){this.sound=WE(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=He(s,"bgm.volume",1),this._backgroundMusicMute=He(s,"bgm.mute",!1),this.setBackgroundMusicLoop(He(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(He(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=He(s,"bgm2.volume",1),this._backgroundMusic2Mute=He(s,"bgm2.mute",!1),this.setBackgroundMusic2Loop(He(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(He(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=He(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=He(s,"soundEffect2.volume",1);var h=He(s,"bgm.initial",void 0);h&&this.setCurrentBackgroundMusic(h);var y=He(s,"bgm2.initial",void 0);y&&this.setCurrentBackgroundMusic2(y)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var s=this.soundEffects,h=0,y=s.length;h<y;h++)s[h].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,h=0,y=s.length;h<y;h++)s[h].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var s=this.soundEffects,h=0,y=soundEffects2.length;h<y;h++)s[h].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var s=this.soundEffects2,h=0,y=s.length;h<y;h++)s[h].setVolume(t)}}Object.assign(q0.prototype,j0);const ul=Phaser.Utils.Objects.GetValue;class n2 extends no{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=ul(t,"isRunning",!1),this.timeScale=ul(t,"timeScale",1),this.now=ul(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class _0 extends n2{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var bt=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const $c=Phaser.Math.Clamp;class a2{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,h,y){return this.target=t,this.onStart=s,this.onProgress=h,this.onComplete=y,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=$c(t,0,1),this.yoyo&&(t=bt(t)),t}setProgress(t){t=$c(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var h=this.remainder<=0;return h&&this.runCallback(this.onComplete),h}}class h2 extends wi{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var s=0,h=t.length;s<h;s++)this.free(t[s]);return this}}const o2=Phaser.Utils.Objects.GetValue,l2=new h2;class u2 extends _0{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=o2(s,"pool",l2)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new a2(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,h,y){var S=this.addTimer({duration:t,onComplete:function(r,T,i){h===void 0&&(h=[]),h.push(i),s.apply(y,h)}});return S}delayEvent(t,s){this.removeDelayEvent(s);var h=this.delayCall(t,function(){this.removeDelayEvent(s),this.emit(s)},[],this);return this.once(`_remove.${s}`,function(){h.remove(),h=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var s=[],h=[this.addedTimers,this.timers],y=0,S=h.length;y<S;y++)for(var r=h[y],T=0,i=r.length;T<i;T++){var d=r[T];d.name===t&&s.push(d)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var h=[],y=0,S=this.timers.length;y<S;y++){var r=this.timers[y],T=r.update(this.now,this.delta);T?this.timerPool.free(r):h.push(r)}this.timers=h,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const d2="_wait.complete",f2="_remove.wait";var c2=function(e,t,s,h,y){var S=Qr(e),r=S.time.delayedCall(t,function(){S.sys.events.once("preupdate",function(){s.call(h,y)})});return r};class tm{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=d2,this.removeWaitEventsEventName=f2}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,s,h){var y=this.getWaitCompleteTriggerCallback(h);return t.once(s,y,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(s,y,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var s=this.waitId,h=this,y=function(){s<h.waitId||(h.waitId++,h.removeWaitEvents(),h.parent.emit(h.waitCompleteEventName))};if(t){var S=function(){c2(h.parent,0,y)};return S}else return y}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,s){return this.parent.on(this.waitCompleteEventName,t,s),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}}Object.assign(tm.prototype,Zn);const v2={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}};var p2=function(e,t){var s=`(?<!\\\\)\\${t}`,h=`\\${t}`;return e.split(new RegExp(s,"g")).map(function(y){return y.replace(h,t)})};const g2={setClickTarget(e){return this.clickTarget=e,e?Qs(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var s=p2(e,"|"),h=0,y=s.length;h<y;h++)this.waitEvent(t,`keydown-${s[h].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},m2={waitGameObjectTweenComplete(e,t,s){var h=this.parent.getGameObjectTweenTask(e,t,s);return h?this.waitEvent(h,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,s,h){var y=this.parent.getGameObject(e,t);if(!y)return this.waitTime(0);if(y.getData(s)===h)return this.waitTime(0);var S=`changedata-${s}`,r=function(T,i,d){i=!!i,i===h&&T.emit("_dataFlagMatch")};return y.on(S,r),this.parent.once(this.removeWaitEventsEventName,function(){y.off(S,r)}),this.waitEvent(y,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var s=this.parent.getGameObject(e,t);return s?this.waitEvent(s,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var s=this.parent.gameObjectManagers,h=!1;for(var y in s)h=!0,this.waitEvent(s[y],"empty");return h?this.parent:this.waitTime(0)}}},x2={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var s;if(t?s=this.scene.cameras.getCamera(t):s=this.cameraTarget,!s)return this.waitTime(0);var h,y;switch(e){case"camera.fadein":h=s.fadeEffect,y="camerafadeincomplete";break;case"camera.fadeout":h=s.fadeEffect,y="camerafadeoutcomplete";break;case"camera.flash":h=s.flashEffect,y="cameraflashcomplete";break;case"camera.shake":h=s.shakeEffect,y="camerashakecomplete";break;case"camera.zoom":h=s.zoomEffect,y="camerazoomcomplete";break;case"camera.rotate":h=s.rotateToEffect,y="camerarotatecomplete";break;case"camera.scroll":h=s.panEffect,y="camerapancomplete";break}return h.isRunning?this.waitEvent(s,y):this.waitTime(0)}},y2={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}};var C2=function(e){if(!e)return this.waitTime(0);var t=!1;for(var s in e)switch(s){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var h=s.split(".");if(h.length===2){var y=h[0],S=h[1],r=this.parent.getGameObjectManager(void 0,y);if(!r)continue;if(S==="destroy")return this.waitGameObjectDestroy(void 0,y);var T=r.getProperty(y,S);if(typeof T=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,y,S);continue}var i=S,d=i.startsWith("!");if(d&&(i=i.substring(1)),r.hasData(y,S)){t=!0,this.waitGameObjectDataFlag(void 0,y,i,!d);continue}this.waitEvent(gameObject,S);continue}else h.length;break}return t||this.waitTime(0),this.parent},em={waitAny:C2};Object.assign(em,v2,g2,m2,x2,y2);class im extends tm{constructor(t,s){super(t),this.waitCompleteEventName=wt(s,"completeEventName",this.waitCompleteEventName),this.setClickTarget(wt(s,"clickTarget",this.scene)),this.setClickShortcutKeys(wt(s,"clickShortcutKeys",void 0)),this.setCameraTarget(wt(s,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(im.prototype,em);const za=Phaser.Utils.Objects.GetValue;var T2=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var s=za(t,"layers",!1);if(s!==!1){var h=new ro(e,{name:"LAYER",layers:s,rootLayer:za(t,"rootLayer",void 0),depth:za(t,"layerDepth",void 0)});this.addGameObjectManager(h),this.layerManager=h}var y=za(t,"sounds");return y!==!1&&(this.soundManager=new q0(e,y)),this.timeline=new u2(this),this.waitEventManager=new im(this,t),this},S2=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},P2=function(){return this.timeline.timeScale},E2=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0};const sm={addGameObjectManager(e,t){var s;return e instanceof Yr?s=e:typeof e=="string"?(s=t,s.name=e):(e===void 0&&(e={}),t===void 0&&(t=Yr),e.createGameObjectScope||(e.createGameObjectScope=this),s=new t(this.managersScene,e)),this.gameObjectManagers[s.name]=s,this},getGameObjectManager(e,t){if(e){var s=this.gameObjectManagers[e];return s}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var s=this.gameObjectManagers[e];if(s.has(t))return s}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(!!t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},M2={createGameObject(e,t,...s){return this.getGameObjectManager(e,t).add(t,...s),this},destroyGameObject(e,t){var s=this.getGameObjectManager(e,t);return t===void 0?s.removeAll():s.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,s,...h){return this.getGameObjectManager(e,t).call(t,s,...h),this},setGameObjectProperty(e,t,s,h){return this.getGameObjectManager(e,t).setProperty(t,s,h),this},easeGameObjectProperty(e,t,s){return this.getGameObjectManager(e,t).easeProperty(t,s),this},getGameObjectTweenTask(e,t,s){return this.getGameObjectManager(e,t).getTweenTask(t,s)},getGameObject(e,t,s){var h=this.getGameObjectManager(e,t);if(!h)return s;if(typeof t=="string")return h.getGO(t);s===void 0&&(s=[]);var y=t;y===void 0&&(y=Object.keys(h.bobs));for(var S=Array.isArray(s),r=0,T=y.length;r<T;r++){t=y[r];var i=h.getGO(t);!i||(S?s.push(i):s[t]=i)}return s},addGameObject(e,t,s){var h=this.getGameObjectManager(e,t);if(typeof t=="string")h.addGO(t,s);else{var y=t;for(t in y)h.addGO(t,y[t])}return this},drawGameObjectsBounds(e,t,s){e instanceof Phaser.GameObjects.Graphics&&(s=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var h=0,y=e.length;h<y;h++)this.getGameObjectManager(e[h]).drawGameObjectsBounds(t,s);return this}};var w2=function(e){class t extends e{}var s={initManagers:T2,setTimeScale:S2,getTimeScale:P2,destroyManagers:E2};return Object.assign(t.prototype,s,sm,M2),t},rm={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(s=!1));function y(i,d,x){this.fn=i,this.context=d,this.once=x||!1}function S(i,d,x,f,o){if(typeof x!="function")throw new TypeError("The listener must be a function");var a=new y(x,f||i,o),n=s?s+d:d;return i._events[n]?i._events[n].fn?i._events[n]=[i._events[n],a]:i._events[n].push(a):(i._events[n]=a,i._eventsCount++),i}function r(i,d){--i._eventsCount===0?i._events=new h:delete i._events[d]}function T(){this._events=new h,this._eventsCount=0}T.prototype.eventNames=function(){var d=[],x,f;if(this._eventsCount===0)return d;for(f in x=this._events)t.call(x,f)&&d.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(x)):d},T.prototype.listeners=function(d){var x=s?s+d:d,f=this._events[x];if(!f)return[];if(f.fn)return[f.fn];for(var o=0,a=f.length,n=new Array(a);o<a;o++)n[o]=f[o].fn;return n},T.prototype.listenerCount=function(d){var x=s?s+d:d,f=this._events[x];return f?f.fn?1:f.length:0},T.prototype.emit=function(d,x,f,o,a,n){var u=s?s+d:d;if(!this._events[u])return!1;var c=this._events[u],l=arguments.length,v,p;if(c.fn){switch(c.once&&this.removeListener(d,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,x),!0;case 3:return c.fn.call(c.context,x,f),!0;case 4:return c.fn.call(c.context,x,f,o),!0;case 5:return c.fn.call(c.context,x,f,o,a),!0;case 6:return c.fn.call(c.context,x,f,o,a,n),!0}for(p=1,v=new Array(l-1);p<l;p++)v[p-1]=arguments[p];c.fn.apply(c.context,v)}else{var g=c.length,m;for(p=0;p<g;p++)switch(c[p].once&&this.removeListener(d,c[p].fn,void 0,!0),l){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,x);break;case 3:c[p].fn.call(c[p].context,x,f);break;case 4:c[p].fn.call(c[p].context,x,f,o);break;default:if(!v)for(m=1,v=new Array(l-1);m<l;m++)v[m-1]=arguments[m];c[p].fn.apply(c[p].context,v)}}return!0},T.prototype.on=function(d,x,f){return S(this,d,x,f,!1)},T.prototype.once=function(d,x,f){return S(this,d,x,f,!0)},T.prototype.removeListener=function(d,x,f,o){var a=s?s+d:d;if(!this._events[a])return this;if(!x)return r(this,a),this;var n=this._events[a];if(n.fn)n.fn===x&&(!o||n.once)&&(!f||n.context===f)&&r(this,a);else{for(var u=0,c=[],l=n.length;u<l;u++)(n[u].fn!==x||o&&!n[u].once||f&&n[u].context!==f)&&c.push(n[u]);c.length?this._events[a]=c.length===1?c[0]:c:r(this,a)}return this},T.prototype.removeAllListeners=function(d){var x;return d?(x=s?s+d:d,this._events[x]&&r(this,x)):(this._events=new h,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=s,T.EventEmitter=T,e.exports=T})(rm);const R2=rm.exports;class nm extends R2{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}const am={setEventEmitter(e,t){return t===void 0&&(t=nm),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var A2=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,L2=/^0x[0-9A-F]+$/i,Sd=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(A2.test(e))e=parseFloat(e);else if(L2.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e};class hm{constructor(t){this.setEventEmitter(wt(t,"eventEmitter",void 0)),this.setValueConverter(wt(t,"valueConvert",!0)),this.setLoopEnable(wt(t,"loop",!1)),this.setMultipleLinesTagEnable(wt(t,"multipleLinesTag",!1));var s=wt(t,"delimiters","<>");this.setDelimiters(s[0],s[1]),this.setTranslateTagNameCallback(wt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,s){s===void 0&&(s=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=s,t=Xr(this.delimiterLeft),s=Xr(this.delimiterRight);var h=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${s}`,h),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Sd:t||(t=O2),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,s=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var h=this.reSplit.exec(t);if(!h){if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}this.onComplete(),this.isRunning=!1;return}var y=this.reSplit.lastIndex,S=y-h[0].length;if(this.progressIndex<S&&(this.onContent(t.substring(this.progressIndex,S)),this.isPaused)){this.progressIndex=S;break}if(this.lastTagSource=h[0],this.onTag(h[1]),this.lastTagSource=void 0,this.progressIndex=y,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,s){return this.isPaused?this:(this.pause(),t.once(s,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}const O2=function(e){return e};Object.assign(hm.prototype,am);var F2=function(e,t,s){if(e==null)return[];t===void 0&&(t=Sd),s===void 0&&(s=",");for(var h=e.split(s),y=0,S=h.length;y<S;y++)h[y]=t(h[y]);return h};class b2 extends hm{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(wt(t,"regex.tag",void 0)),this.setValueExpression(wt(t,"regex.value",void 0));var s=wt(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=Va),this.tagExpression=t,this}setValueExpression(t){return t||(t=Va),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var h=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(h,"i"),this.tagExpression!==Va||this.valueExpression!==Va){var y=`${this.tagExpression}(=${this.valueExpression})?`,S=`/${this.tagExpression}`;t=Xr(this.delimiterLeft),s=Xr(this.delimiterRight);var r=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${y})|(${S}))${s}`,r)}return this}onTag(t){var s=t.match(this.reTag),h=s[1],y=h.charAt(0)==="/";if(y&&(h=h.substring(1,h.length)),this.translateTagNameCallback&&(h=this.translateTagNameCallback(h)),this.skipEventFlag=!1,y)this.emit(`-${h}`),this.skipEventFlag||this.emit("-",h),this.lastTagEnd=h;else{var S=F2(s[3],this.valueConverter);this.emit(`+${h}`,...S),this.skipEventFlag||this.emit("+",h,...S),this.lastTagStart=h}}}const Va="[^=]+";var D2=function(e,t,s){var h="color",y;t.on("start",function(){y=e.textStyle.color}).on(`+${h}`,function(S){e.textStyle.setColor(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setColor(y),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(y)})},I2=function(e,t,s){var h="stroke",y;t.on("start",function(){y=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setStrokeStyle(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(y)})},B2=function(e,t,s){var h="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${h}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},G2=function(e,t,s){var h="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${h}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},N2=function(e,t,s){var h="size",y;t.on("start",function(){y=e.textStyle.fontSize}).on(`+${h}`,function(S){e.textStyle.setFontSize(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setFontSize(y),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(y)})},z2=function(e,t,s){var h="y",y;t.on("start",function(){y=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setOffsetY(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},V2=function(e,t,s){var h="x",y;t.on("start",function(){y=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setOffsetX(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},k2=function(e,t,s){var h="left",y;t.on("start",function(){y=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setLeftSpace(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},X2=function(e,t,s){var h="right",y;t.on("start",function(){y=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setRightSpace(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},W2=function(e,t,s){var h="shadow",y;t.on("start",function(){y=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${h}`,function(S){S===void 0&&(S=y),e.textStyle.setShadowColor(S),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(y)})},Y2=function(e,t,s){var h="align";t.on(`+${h}`,function(y){e.textStyle.setAlign(y),t.skipEvent()}).on(`-${h}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},U2=function(e,t,s){var h="img";t.on(`+${h}`,function(y){var S=e.imageManager.get(y);S&&F0.call(e,S.key,S.frame,{width:S.width,hieght:S.height,leftSpace:S.left,rightSpace:S.right,color:S.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},H2=function(e,t,s){var h="space";t.on(`+${h}`,function(y){b0.call(e,y),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},$2=function(e,t,s){var h="speed";t.on(`+${h}`,function(y){Kc(e,y),t.skipEvent()}).on(`-${h}`,function(){Kc(e,void 0),t.skipEvent()})},K2=function(e){this.typeWriter.setTypingSpeed(e)},Kc=function(e,t){dt.call(e,"speed",K2,t,e)},Z2=function(e,t,s){var h="se";t.on(`+${h}`,function(y,S){dt.call(e,h,J2,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2";t.on(`+${h}`,function(y,S){dt.call(e,h,Q2,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},J2=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},Q2=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},j2=function(e,t,s){var h="se.fadein";t.on(`+${h}`,function(y){dt.call(e,h,q2,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2.fadein";t.on(`+${h}`,function(y){dt.call(e,h,_2,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},q2=function(e){this.soundManager.fadeInSoundEffect(e)},_2=function(e){this.soundManager.fadeInSoundEffect2(e)},tM=function(e,t,s){var h="se.fadeout";t.on(`+${h}`,function(y,S){S=S==="stop",dt.call(e,h,eM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2.fadeout";t.on(`+${h}`,function(y,S){S=S==="stop",dt.call(e,h,iM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},eM=function(e){this.soundManager.fadeOutSoundEffect(...e)},iM=function(e){this.soundManager.fadeOutSoundEffect2(...e)},sM=function(e,t,s){var h="se.volume";t.on(`+${h}`,function(y){dt.call(e,h,rM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2.volume";t.on(`+${h}`,function(y){dt.call(e,h,nM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},rM=function(e){this.soundManager.setSoundEffectVolume(e,!0)},nM=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},aM=function(e,t,s){var h="se.mute";t.on(`+${h}`,function(){dt.call(e,h,hM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2.mute";t.on(`+${h}`,function(){dt.call(e,h,oM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se.unmute";t.on(`+${h}`,function(){dt.call(e,h,lM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="se2.unmute";t.on(`+${h}`,function(){dt.call(e,h,uM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},hM=function(){this.soundManager.setSoundEffectMute(!0)},oM=function(){this.soundManager.setSoundEffect2Mute(!0)},lM=function(){this.soundManager.setSoundEffectMute(!1)},uM=function(){this.soundManager.setSoundEffect2Mute(!1)},dM=function(e,t,s){var h="bgm";t.on(`+${h}`,function(y,S){dt.call(e,h,fM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){dt.call(e,"bgm.stop",cM,void 0,e),t.skipEvent()});var h="bgm2";t.on(`+${h}`,function(y,S){dt.call(e,h,vM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){dt.call(e,"bgm2.stop",pM,void 0,e),t.skipEvent()})},fM=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},cM=function(){this.soundManager.stopBackgroundMusic()},vM=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},pM=function(){this.soundManager.stopBackgroundMusic2()},gM=function(e,t,s){var h="bgm.fadein";t.on(`+${h}`,function(y){dt.call(e,h,mM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.fadein";t.on(`+${h}`,function(y){dt.call(e,h,xM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},mM=function(e){this.soundManager.fadeInBackgroundMusic(e)},xM=function(e){this.soundManager.fadeInBackgroundMusic2(e)},yM=function(e,t,s){var h="bgm.fadeout";t.on(`+${h}`,function(y,S){S=S==="stop",dt.call(e,h,CM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.fadeout";t.on(`+${h}`,function(y,S){S=S==="stop",dt.call(e,h,TM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},CM=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},TM=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},SM=function(e,t,s){var h="bgm.cross";t.on(`+${h}`,function(y,S){dt.call(e,h,PM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.cross";t.on(`+${h}`,function(y,S){dt.call(e,h,EM,[y,S],e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},PM=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},EM=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},MM=function(e,t,s){var h="bgm.pause";t.on(`+${h}`,function(){dt.call(e,h,wM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){dt.call(e,"bgm.resume",RM,void 0,e),t.skipEvent()});var h="bgm2.pause";t.on(`+${h}`,function(){dt.call(e,h,AM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){dt.call(e,"bgm2.resume",LM,void 0,e),t.skipEvent()})},wM=function(){this.soundManager.pauseBackgroundMusic()},RM=function(){this.soundManager.resumeBackgroundMusic()},AM=function(){this.soundManager.pauseBackgroundMusic2()},LM=function(){this.soundManager.resumeBackgroundMusic2()},OM=function(e,t,s){var h="bgm.volume";t.on(`+${h}`,function(y){dt.call(e,h,FM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.volume";t.on(`+${h}`,function(y){dt.call(e,h,bM,y,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},FM=function(e){this.soundManager.setBackgroundMusicVolume(e)},bM=function(e){this.soundManager.setBackgroundMusicVolume2(e)},DM=function(e,t,s){var h="bgm.mute";t.on(`+${h}`,function(){dt.call(e,h,IM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.mute";t.on(`+${h}`,function(){dt.call(e,h,BM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm.unmute";t.on(`+${h}`,function(){dt.call(e,h,GM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()});var h="bgm2.unmute";t.on(`+${h}`,function(){dt.call(e,h,NM,void 0,e),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},IM=function(){this.soundManager.setBackgroundMusicMute(!0)},BM=function(){this.soundManager.setBackgroundMusic2Mute(!0)},GM=function(){this.soundManager.setBackgroundMusicMute(!1)},NM=function(){this.soundManager.setBackgroundMusic2Mute(!1)},zM=function(e,t,s){var h="camera.fadein";t.on(`+${h}`,function(y,S,r,T){dt.call(e,h,VM,[y,S,r,T],e),t.skipEvent()})},VM=function(e){this.cameraTarget.fadeIn(...e)},kM=function(e,t,s){var h="camera.fadeout";t.on(`+${h}`,function(y,S,r,T){dt.call(e,h,XM,[y,S,r,T],e),t.skipEvent()})},XM=function(e){this.cameraTarget.fadeOut(...e)},WM=function(e,t,s){var h="camera.shake";t.on(`+${h}`,function(y,S){dt.call(e,h,YM,[y,S],e),t.skipEvent()})},YM=function(e){this.cameraTarget.shake(...e)},UM=function(e,t,s){var h="camera.flash";t.on(`+${h}`,function(y,S,r,T){dt.call(e,h,HM,[y,S,r,T],e),t.skipEvent()})},HM=function(e){this.cameraTarget.flash(...e)},$M=function(e,t,s){var h="camera.zoom";t.on(`+${h}`,function(y){dt.call(e,h,KM,y,e),t.skipEvent()}).on(`+${h}.to`,function(y,S,r){dt.call(e,"camera.zoom.to",ZM,[y,S,r],e),t.skipEvent()})},KM=function(e){this.cameraTarget.setZoom(e)},ZM=function(e){this.cameraTarget.zoomTo(...e)};const Zc=Phaser.Math.DegToRad;var JM=function(e,t,s){var h="camera.rotate";t.on(`+${h}`,function(y){y=Zc(y),dt.call(e,h,QM,y,e),t.skipEvent()}).on(`+${h}.to`,function(y,S,r){y=Zc(y),dt.call(e,"camera.rotate.to",jM,[y,S,r],e),t.skipEvent()})},QM=function(e){this.cameraTarget.setRotation(e)},jM=function(e){var t=e[0],s=e[1],h=e[2];this.cameraTarget.rotateTo(t,!1,s,h)},qM=function(e,t,s){var h="camera.scroll";t.on(`+${h}`,function(y,S){dt.call(e,h,_M,[y,S],e),t.skipEvent()}).on(`+${h}.to`,function(y,S,r,T){dt.call(e,"camera.scroll.to",tw,[y,S,r,T],e),t.skipEvent()})},_M=function(e){this.cameraTarget.setScroll(...e)},tw=function(e){var t=e[0],s=e[1],h=e[2],y=e[3],S=this.cameraTarget,r=S.scrollX,T=S.scrollY;S.setScroll(t,s),t+=S.centerX,s+=S.centerY,S.setScroll(r,T),S.pan(t,s,h,y)},ew=function(e,t,s){var h="wait",y="click";t.on(`+${h}`,function(S){Jc(e,S),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()}).on(`+${y}`,function(){Jc(e,"click"),t.skipEvent()}).on(`-${y}`,function(){t.skipEvent()})},iw=function(e){this.typeWriter.wait(e)},Jc=function(e,t){dt.call(e,"wait",iw,t,e)},sw=function(e,t,s){var h="r";t.on(`+${h}`,function(){Kn.call(e,`
`),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})},rw=function(e,t,s){for(var h=["pagebreak","pb"],y=0,S=h.length;y<S;y++){var r=h[y];t.on(`+${r}`,function(){Kn.call(e,"\f"),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})}},nw=function(e,t,s){var h="content.off";t.on(`+${h}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},aw=function(e,t,s){var h="content.on";t.on(`+${h}`,function(){t.setContentOutputEnable(),t.skipEvent()})},hw=function(e,t,s){t.on("content",function(h){if(t.contentOutputEnable)Kn.call(e,h);else{var y=`+${t.lastTagStart}`;e.emit(`parser.${y}#content`,t,h)}})},ow=function(e,t,s){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(h,...y){if(!t.skipEventFlag){var S=`+${h}`,r=y;e.emit(`parser.${S}`,t,...y,r),Qc(e,S,r)}}).on("-",function(h){if(!t.skipEventFlag){var y=`-${h}`,S=[];e.emit(`parser.${y}`,t,S),Qc(e,y,S)}}).on("complete",function(){e.emit("parser.complete",t)})},lw=function(e,t){var s=`tag.${t}`;e==null?this.emit(s):this.emit(s,...e)},Qc=function(e,t,s){dt.call(e,t,lw,s,e)};const jc=[D2,I2,B2,G2,N2,W2,Y2,z2,V2,k2,X2,U2,H2,$2,Z2,j2,tM,sM,aM,dM,gM,yM,SM,MM,OM,DM,zM,kM,WM,UM,$M,JM,qM,ew,sw,rw,nw,aw,hw,ow];var uw=function(e,t,s){for(var h=0,y=jc.length;h<y;h++)jc[h](e,t,s)},dw=function(e,t){for(var s=e.commentLineStart,h=t.split(`
`),y=0,S=h.length;y<S;y++){var r=h[y];r===""||(r.trim().length===0||s&&r.startsWith(s))&&(h[y]="")}return h.join("")};const fw=Phaser.Utils.Objects.GetValue;class cw extends b2{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),uw(t,this,s),this.setCommentLineStartSymbol(fw(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(dw(this,t)),this}}const vw={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}},$s="page.fadeout",ku="_remove.play",qc=[$s,ku];var pw=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit($s),this;var e=this.children.filter(function(h){return h.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit($s);else if(t.once)t.once("complete",function(){this.emit($s)},this);else if(t.then){var s=this;t.then(function(){s.emit($s)})}else this.emit($s);return this},ho=function(e,t){return new Promise(function(s,h){e.once(t,function(){s()})})},de=function(e){return ho(e,"complete")},gw=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),de(this)};const mw="delay",om="anim";var lm=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var h=this.animationConfig;if(h.duration>0){var y=this.timeline.addTimer({name:om,target:s,duration:h.duration,yoyo:h.yoyo,onStart:h.onStart,onProgress:h.onProgress,onComplete:h.onComplete});this.skipTypingAnimation&&y.seek(1)}else h.onStart&&h.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var S=this.nextChild;if(S&&!(this.skipSpaceEnable&&dS(S))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:mw,target:this,duration:t,onComplete:function(r,T,i){r.typingTimer=void 0,lm.call(r,i.remainder)}});break}}}else fS(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},xw=function(){return this.timeline.pause(),this},yw=function(){return this.timeline.resume(),this},Cw=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},Tw=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},Sw=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},Pw=function(e,t){var s=t.split(".");return e.gameObjectManagers.hasOwnProperty(s[0])},Ew=function(e,t,s,h){var y=e.waitEventManager,S=t.split("."),r=S[0],T=e.getGameObjectManager(r),i=`wait.${r}`;switch(S.length){case 1:y.waitGameObjectManagerEmpty(r),e.emit(i);return;case 2:var d=S[1];y.waitGameObjectDestroy(r,d),e.emit(i,d);return;case 3:var d=S[1],x=S[2],f=T.getProperty(d,x);if(typeof f=="number"){y.waitGameObjectTweenComplete(r,d,x),e.emit(i,d,x);return}var o=x,a=o.startsWith("!");if(a&&(o=o.substring(1)),T.hasData(d,o)){y.waitGameObjectDataFlag(r,d,o,!a),e.emit(i,d,o);return}else{y.waitTime(0);return}}};const Mw=Phaser.Input.Keyboard.KeyCodes;var um=function(e,t,s,h){var y=e.waitEventManager;y.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,h),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var S=0,r=t.length;S<r;S++){var T=t[S];if(T==null||T==="wait"){var i=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",i)}else if(typeof T=="number"||!isNaN(T)){var d=parseFloat(T);y.waitTime(d),e.emit("wait.time",d)}else if(T==="click")y.waitClick(),e.emit("wait.click");else if(T==="se"){y.waitSoundEffectComplete();var x=e.soundManager.getLastSoundEffect();e.emit("wait.music",x)}else if(T==="se2"){y.waitSoundEffect2Complete();var x=e.soundManager.getLastSoundEffect2();e.emit("wait.music",x)}else if(T==="bgm"){y.waitBackgroundMusicComplete();var x=e.soundManager.getBackgroundMusic();e.emit("wait.music",x)}else if(T==="bgm2"){y.waitBackgroundMusic2Complete();var x=e.soundManager.getBackgroundMusic2();e.emit("wait.music",x)}else if(Mw.hasOwnProperty(T.toUpperCase()))y.waitKeyDown(T),e.emit("wait.keydown",T);else if(Sw(T))y.waitCameraEffectComplete(T),e.emit("wait.camera",T);else if(Pw(e,T))Ew(e,T);else{var i=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${T}`,i)}}},ww=function(e){return this.ignoreWait?this:(this.pauseTyping(),um(this.textPlayer,e,this.resumeTyping,this),this)},Rw=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},Aw=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},Lw=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(om),s=0,h=t.length;s<h;s++)t[s].seek(1);return this},Ow=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},Fw=function(){return this.typingTimer&&this.typingTimer.seek(1),this},dm={fadeOutPage:pw,start:gw,typing:lm,pause:xw,resume:yw,pauseTyping:Cw,resumeTyping:Tw,wait:ww,setIgnoreWait:Rw,setSkipSpaceEnable:Aw,setSkipTypingAnimation:Lw,setSkipSoundEffect:Ow,skipCurrentTypingDelay:Fw};Object.assign(dm,vw);const cr=Phaser.Utils.Objects.GetValue;class fm{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(cr(s,"onTypingStart",Dw)),this.setDefaultTypingSpeed(cr(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(cr(s,"skipSpace",!1)),this.setAnimationConfig(cr(s,"animation",void 0)),this.setMinSizeEnable(cr(s,"minSizeEnable",!1)),this.setFadeOutPageCallback(cr(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=bw),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var bw=function(e){e.setVisible&&e.setVisible()},Dw=function(e){for(var t=0,s=e.length;t<s;t++){var h=e[t];h.setVisible&&h.setVisible(!1)}};Object.assign(fm.prototype,Zn,dm);class Iw extends xd{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const Bw={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}};var cm={};Object.assign(cm,Bw);class vm extends Yr{constructor(t,s){s===void 0&&(s={}),s.BobClass=Iw,super(t,s)}setCreateGameObjectCallback(t,s){return!t||t==="sprite"?t=Gw:t==="image"&&(t=Nw),super.setCreateGameObjectCallback(t,s),this}}var Gw=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.sprite(0,0,t,s)},Nw=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.image(0,0,t,s)};Object.assign(vm.prototype,cm);var _c=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},zw=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},Vw=function(e,t,s){var h=s.name;t.on("+",function(y,...S){if(!t.skipEventFlag){var r=y.split("."),T;if(_c(r,h))T=r[1];else return;dt.call(e,`${h}.play`,kw,[h,T,S],e),t.skipEvent()}}).on("+",function(y){if(!t.skipEventFlag){var S=y.split("."),r;if(zw(S,h))r=S[1];else return;dt.call(e,`${h}.stop`,tv,[h,r],e),t.skipEvent()}}).on("-",function(y){if(!t.skipEventFlag){var S=y.split("."),r;if(_c(S,h))r=S[1];else return;dt.call(e,`${h}.stop`,tv,[h,r],e),t.skipEvent()}})},kw=function(e){var t,s,h;[t,s,h]=e;var y=h.shift(),S=this.getGameObjectManager(t);S.playAnimation(s,y),h.length>0&&S.chainAnimation(s,h)},tv=function(e){var t,s;[t,...s]=e;var h=this.getGameObjectManager(t);h.stopAnimation(...s)},Xw=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},Ww=function(e,t,s){var h=s.name;t.on("+",function(y){if(!t.skipEventFlag){var S=y.split("."),r;if(Xw(S,h))r=S[1];else return;dt.call(e,`${h}.pause`,Yw,[h,r],e),t.skipEvent()}})},Yw=function(e){var t,s;[t,...s]=e;var h=this.getGameObjectManager(t);h.pauseAnimation(...s)},Uw=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},Hw=function(e,t,s){var h=s.name;t.on("+",function(y){if(!t.skipEventFlag){var S=y.split("."),r;if(Uw(S,h))r=S[1];else return;var T=Array.prototype.slice.call(arguments,1);dt.call(e,`${h}.chain`,$w,[h,r,T],e),t.skipEvent()}})},$w=function(e){var t,s;[t,...s]=e;var h=this.getGameObjectManager(t);h.chainAnimation(...s)};const Kw=[Vw,Ww,Hw];var Zw=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=Kw,this.addGameObjectManager(e,vm)},ev=function(e,t){return e.length===2&&e[0]===t},Jw=function(e,t,s){var h=s.name;t.on("+",function(y,...S){if(!t.skipEventFlag){var r=y.split("."),T;if(ev(r,h))T=r[1];else return;dt.call(e,`${h}.add`,Qw,[h,T,...S],e),t.skipEvent()}}).on("-",function(y){if(!t.skipEventFlag){var S=y.split("."),r;if(ev(S,h))r=S[1];else return;dt.call(e,`${h}.remove`,jw,[h,r],e),t.skipEvent()}})},Qw=function(e){var t,s;[t,...s]=e;var h=this.getGameObjectManager(t);h.add(...s)},jw=function(e){var t,s;[t,...s]=e;var h=this.getGameObjectManager(t);h.remove(...s)},qw=function(e,t,s){var h=s.name;t.on("-",function(y){t.skipEventFlag||y===h&&(dt.call(e,`${h}.removeall`,_w,h,e),t.skipEvent())})},_w=function(e){var t=this.getGameObjectManager(e);t.removeAll()},tR=function(e,t){return e.length===3&&e[0]===t},eR=function(e,t,s){var h=s.name;t.on("+",function(y,...S){if(!t.skipEventFlag){var r=y.split("."),T,i;if(tR(r,h))T=r[1],i=r[2];else return;dt.call(e,`${h}.call`,iR,[h,T,i,...S],e),t.skipEvent()}})},iR=function(e){var t,s,h,y;[t,s,h,...y]=e;var S=`${t}.${h}`;if(this.emit(S,s,...y),!(this.listenerCount(S)>0)){var r=this.getGameObjectManager(t);r.hasMethod(s,h)?r.call(s,h,...y):r.setProperty(s,h,y[0])}},sR={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},rR=function(e,t){return e.length===4&&e[0]===t&&sR[e[3]]},nR=function(e,t,s){var h=s.name;e.getGameObjectManager(h),t.on("+",function(y,S,r,T,i){if(!t.skipEventFlag){var d=y.split("."),x,f,o;if(rR(d,h))x=d[1],f=d[2],o=d[3];else return;typeof T=="number"&&(i=T,T=void 0),dt.call(e,`${h}.ease`,aR,[h,x,f,S,r,T,i,o],e),t.skipEvent()}})},aR=function(e){var t,s,h,y,S,r,T,i;[t,s,h,y,S,r,T,i]=e;var d=this.getGameObjectManager(t),x=d.getProperty(s,h);if(typeof x=="number"){i.endsWith("Left")||i.endsWith("Up")?i.startsWith("to")||i.startsWith("yoyo")?y=x-y:i.startsWith("from")&&(d.setProperty(s,h,x-y),y=x):i.endsWith("Right")||i.endsWith("Down")?i.startsWith("to")||i.startsWith("yoyo")?y=x+y:i.startsWith("from")&&(d.setProperty(s,h,x+y),y=x):i==="from"&&(d.setProperty(s,h,y),y=x);var f=i.startsWith("yoyo");d.easeProperty(s,h,y,S,r,T,f)}};const iv=[Jw,qw,eR,nR],hR=sm.addGameObjectManager,oR={addGameObjectManager(e,t){e=e?Ri(e):{};var s=e.name;s||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var h=e.defaultLayer,y=e.createGameObject,S=this.layerManager;e.createGameObject=function(d,...x){var f=y.call(this,d,...x);return h&&S&&S.addToLayer(h,f),f},hR.call(this,e,t);var r=e.parseCallbacks;r?r=[...r,...iv]:r=iv;for(var T=0,i=r.length;T<i;T++)r[T](this,this.parser,e);return this}};var lR=function(e){return this.waitEventManager.setClickTarget(e),this},uR=function(e){return this.waitEventManager.setCameraTarget(e),this},dR=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(s,h){var y=t.waitEventManager;y.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,h);var S=y.getWaitCompleteTriggerCallback();e.call(t,S)}:this.nextPageInput=function(s,h){um(t,e,s,h)}:this.nextPageInput=null},fR=function(e,t){return this.imageManager.add(e,t),this};const cR={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=de(this);return this.play(e),t}};var Xu=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once($s,vR,this).fadeOutPage(),this)},vR=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(ku),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Xu.call(this):this.nextPageInput&&this.nextPageInput(Xu,this))};this.once(ku,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)};const pR={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},gR={resume(){return this.timeline.resume(),this},resumeTyping(e){return this.typeWriter.resumeTyping(e),this}};var mR=function(e){return this.typeWriter.wait(e),this};const xR={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}};var yR=function(e){return this.typeWriter.setIgnoreWait(e),this},CR=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},TR=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,h=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(h)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const SR={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},PR={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}};var pm={setClickTarget:lR,setCameraTarget:uR,setNextPageInput:dR,addImage:fR,typingNextPage:Xu,wait:mR,setIgnoreWait:yR,setIgnoreNextPageInput:CR,showPage:TR};Object.assign(pm,oR,cR,pR,gR,xR,SR,PR);var ER=function(e){for(var t=0,s=qc.length;t<s;t++)e.emit(qc[t])};const sv=Phaser.Utils.Objects.IsPlainObject,vr=Phaser.Utils.Objects.GetValue;class Pd extends w2(Kr){constructor(t,s,h,y,S,r){sv(s)?r=s:sv(y)&&(r=y),r===void 0&&(r={});var T=r.text;delete r.text,super(t,s,h,y,S,r),this.type="rexTextPlayer",this.initManagers(t,r),this.parser=new cw(this,vr(r,"parser",void 0)),this.typeWriter=new fm(this,vr(r,"typing",void 0)),this._imageManager=void 0;var i=vr(r,"images",void 0);i&&this.addImage(i);var d=vr(r,"sprites");d!==!1&&d!==null&&Zw.call(this,d),this.setIgnoreNextPageInput(vr(r,"ignoreNextPageInput",!1)),this.setNextPageInput(vr(r,"nextPageInput",null)),this.isPlaying=!1,T&&this.play(T)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new fd(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(ER(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(Pd.prototype,pm);it.register("textPlayer",function(e,t,s,h,y){var S=new Pd(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.TextPlayer",Pd);const gm={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},mm={direction:["direction",void 0]};var fs=function(e,t,s){if(typeof s=="string")e.hasOwnProperty(s)&&(t[s]=e[s]);else{var h=s;if(Array.isArray(h))for(var y=0,S=h.length;y<S;y++)fs(e,t,h[y]);else for(var s in h)fs(e,t,s)}},MR=function(e){e===void 0&&(e={});var t={};return fs(e,t,"inputType"),fs(e,t,"type"),fs(e,t,"style"),fs(e,t,mm),fs(e,t,gm),t},Ed=function(e,t,s,h,y){if(t)return!(s&&!s(e,t)||!rv(e,t)||h&&!h(e,t));y===void 0&&(y=!1);for(var S=e.scene.input.manager,r=S.pointersTotal,T=S.pointers,t,i=0;i<r;i++)if(t=T[i],!(s&&!s(e,t))&&!!rv(e,t)&&!(h&&!h(e,t)))return y?t:!0;return!1},rv=function(e,t){for(var s=e.scene,h=s.input.cameras.getCamerasBelowPointer(t),y=s.input.manager,S=[e],r=0,T=h.length;r<T;r++)if(y.hitTest(t,S,h[r],ka),ka.length>0)return ka.length=0,!0;return ka.length=0,!1},ka=[],Gr=void 0,wR=function(e){e!==Gr&&(Gr!==void 0&&Gr.close(),Gr=e)},RR=function(e){e===Gr&&(Gr=void 0)};const AR=Phaser.Utils.Objects.GetValue;var Nh=function(e,t,s){s===void 0&&(s={});var h,y;for(var S in e)h=e[S],y=AR(t,S,h[1]),y!==void 0&&(s[h[0]]=y);return s},xm=function(e){e.addEventListener("touchstart",pr,!1),e.addEventListener("touchmove",pr,!1),e.addEventListener("touchend",pr,!1),e.addEventListener("mousedown",pr,!1),e.addEventListener("mouseup",pr,!1),e.addEventListener("mousemove",pr,!1)},pr=function(e){e.stopPropagation()},LR=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},OR=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",LR,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(K0.call(this.clickOutSideTarget,this.parent),$0.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},FR=function(e){if(!!e){var t=e.parentElement;t&&t.removeChild(e)}},bR=function(){this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),FR(this.node),this.node=void 0,this.emit("close",this)};const dl=Phaser.Utils.Objects.GetValue;var DR=function(e,t){var s,h=dl(t,"inputType",void 0);h===void 0&&(h=dl(t,"type","text")),h==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=h);var y=dl(t,"style",void 0),S=s.style;Nh(mm,y,S),S.position="absolute",S.opacity=0,S.pointerEvents="none",S.zIndex=0,S.transform="scale(0)",Nh(gm,t,s),xm(s);var r=e.scene.sys.scale,T=r.isFullscreen?r.fullscreenTarget:document.body;return T.appendChild(s),s.addEventListener("focus",function(i){OR.call(e)}),s.addEventListener("blur",function(i){bR.call(e)}),s},IR=function(){return this.isOpened?this:this.readOnly?this:(wR(this),this.node||(this.node=DR(this,this.nodeConfig)),this.setFocus(),this)},BR=function(){return this.isOpened?(RR(this),this.setBlur(),this):this},GR={open:IR,close:BR};const Ii=Phaser.Utils.Objects.GetValue;class Md extends Gt{constructor(t,s){super(t);var h=Ii(s,"inputType",void 0);h===void 0&&(h=Ii(s,"type","text")),this.setEnterCloseEnable(Ii(s,"enterClose",h!=="textarea"));var y=Ii(s,"onOpen",void 0);y||(y=Ii(s,"onFocus",void 0)),this.onOpenCallback=y,this.clickOutSideTarget=Ii(s,"clickOutSideTarget",void 0);var S=Ii(s,"onClose",void 0);S||(S=Ii(s,"onBlur",void 0)),this.onCloseCallback=S,this.onUpdateCallback=Ii(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=MR(s),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){Ed(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){!this.node||(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){!this.node||(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){!this.node||this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){!this.node||(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(!!this.node)return this.node.style.color}set fontColor(t){!this.node||(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(!!this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Md.prototype,GR);var ym=function(e,t,s){e=e.replace(" ","");var h=s.previousText;if(e===h)return e;if(isNaN(e)){s.emit("nan",e,s),e=h;var y=s.cursorPosition-1;s.setText(e),s.setCursorPosition(y)}else s.previousText=e;return e},NR=function(e){var t=e.parent,s=e.isOpened?e.selectionStart:null,h=e.isOpened?e.selectionEnd:null,y=e.prevSelectionStart,S=e.prevSelectionEnd;if(!(y===s&&S===h)){var r,T;y===null?(r=s,T=h):s===null?(r=y,T=S):(r=Math.min(y,s),T=Math.max(S,h));for(var i=r;i<T;i++){var d;y===null?d=!1:d=i>=y&&i<S;var x;if(s===null?x=!1:x=i>=s&&i<h,d!==x){var f=t.getCharChild(i);if(f){var o=d?"cursorout":"cursorin";t.emit(o,f,i,t)}}}e.prevSelectionStart=s,e.prevSelectionEnd=h}},zR=function(e){var t=e.parent,s=0,h=t.width,y=0,S=t.height,r=e.drawX,T=e.drawY,i=r+e.drawTLX,d=r+e.drawTRX,x=T+e.drawTLY,f=T+e.drawBLY,o;i<s?o=s-i:d>h?o=h-d:o=0;var a;x<y?a=y-x:f>S?a=S-f:a=0,t._textOX+=o,t._textOY+=a},VR=function(e){var t=e.parent,s=t.text,h=e.cursorPosition;if(e.prevCursorPosition!==h){if(e.prevCursorPosition!==null&&e.prevCursorPosition>s.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var y=t.getCharChild(e.prevCursorPosition);y&&(y.text===`
`&&y.clearTextSize(),t.emit("cursorout",y,e.prevCursorPosition,t))}if(h!=null){var y=t.getCharChild(h);y&&(y.text===`
`&&y.copyTextSize(t.lastInsertCursor),zR(y),t.emit("cursorin",y,h,t))}t.emit("movecursor",h,e.prevCursorPosition,t),e.prevCursorPosition=h}},nv=function(e){var t=e.prevSelectionStart;if(t!==null){for(var s=e.prevSelectionEnd,h=e.parent,y=t;y<s;y++){var S=h.getCharChild(y);S&&h.emit("cursorout",S,y,h)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},av=function(e){var t=e.prevCursorPosition;if(t!==null){var s=e.parent,h=s.getCharChild(t);h&&s.emit("cursorout",h,t,s),e.prevCursorPosition=null}};const kR=Phaser.Utils.Objects.GetValue;class XR extends Md{constructor(t,s){super(t,s),this.setSelectAllWhenFocusEnable(kR(s,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(h,y,S,r){var T=t.getNearestChild(y,S),i=t.getCharIndex(T);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(i),this.cursorMoveStartIndex=i,this.firstClickAfterOpen=!1},this).on("pointermove",function(h,y,S,r){if(!!h.isDown){var T=t.getNearestChild(y,S),i=t.getCharIndex(T);this.cursorMoveStartIndex<i?this.selectText(this.cursorMoveStartIndex,i+1):this.selectText(i,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var h=this.onUpdateCallback(s,t,this);h!=null&&(s=h)}return t.text!==s&&t.setText(s),this.isOpened?this.selectionStart!==this.selectionEnd?(av(this),NR(this)):(nv(this),VR(this)):(nv(this),av(this)),this}setNumberInput(){return this.onUpdateCallback=ym,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}}const WR=Phaser.Utils.Objects.GetValue,YR=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var UR=function(e,t){var s=WR(t,"edit");return s===void 0&&(s={}),fs(t,s,YR),new XR(e,s)},Mi=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),h=e,y=0;y<s.length;y++)if(h.hasOwnProperty(s[y]))h=h[s[y]];else return!1;return!0}else return!1},Wu=function(e){if(e.parentContainer)return Wu(e.parentContainer);var t=H0(e);return t?Wu(t):e},HR=function(e){for(var t=Wu(e).cameraFilter,s=e.scene.sys.cameras.cameras,h,y,S=0,r=s.length;S<r;S++)if(h=s[S],y=(t&h.id)>0,!y)return h;return null};class Cm extends Gt{constructor(t,s){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,s=this.parent,h=HR(s);if(!!h){s.setScrollFactor(0).setOrigin(.5);var y=t.sys.scale.gameSize,S=y.width,r=y.height,T=1/h.zoom,i=S/2,d=r/2,x=S*T,f=r*T;(s.x!==i||s.y!==d)&&s.setPosition(i,d),(s.width!==x||s.height!==f)&&s.setSize(x,f)}}}const $R=Phaser.GameObjects.Zone;class wd extends $R{constructor(t){super(t,0,0,2,2),this.fullWindow=new Cm(this)}}var KR=function(e,t){var s=!t.textArea;if(!Mi(t,"wrap.vAlign")){var h=s?"center":"top";et(t,"wrap.vAlign",h)}if(Mi(t,"wrap.wrapMode")||et(t,"wrap.wrapMode","char"),!Mi(t,"wrap.maxLines")){var h=s?1:void 0;et(t,"wrap.maxLines",h)}if(s&&et(t,"wrap.wrapWidth",1/0),Mi(t,"wrap.useDefaultTextHeight")||et(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!Mi(t.edit,"inputType")){var h=s?"text":"textarea";et(t.edit,"inputType",h)}if(t.clickOutSideTarget===!0){var y=new wd(e);e.add.existing(y),t.clickOutSideTarget=y}return t},Yu=function(e,t,s,h){if(s===void 0&&(s="."),h===void 0&&(h={}),!e)return h;if(t in e)return Object.assign(h,e[t]);t+=s;for(var y in e)!y.startsWith(t)||(h[y.replace(t,"")]=e[y]);return h},Rd=function(e,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var h,y=0,S=t.length;y<S;y++)h=t[y],s[h]=e[h];else for(var h in t)s[h]=e[h];return s},oo=function(e,t){for(var s in e)if(!(s in t)||e[s]!==t[s])return!1;for(var s in t)if(!(s in e))return!1;return!0},ZR=function(e){yd(e)||this.setCursorStyle(e).on("cursorin",function(t){var s=this.cursorStyle,h=Rd(t.style,s);oo(s,h)||(t.styleSave=h,t.modifyStyle(s))},this).on("cursorout",function(t){!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},JR=function(e){yd(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,s=this.focusStyle,h=Rd(t,s);oo(s,h)||(t.styleSave=h,t.modifyStyle(s))},this).on("close",function(){var t=this.background;!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},QR=function(e){var t=e.createCharChild("|");return t.text="",t};function $i(){}$i.prototype={diff(e,t,s={}){let h=s.callback;typeof s=="function"&&(h=s,s={}),this.options=s;let y=this;function S(a){return h?(setTimeout(function(){h(void 0,a)},0),!0):a}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let r=t.length,T=e.length,i=1,d=r+T;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));let x=[{newPos:-1,components:[]}],f=this.extractCommon(x[0],t,e,0);if(x[0].newPos+1>=r&&f+1>=T)return S([{value:this.join(t),count:t.length}]);function o(){for(let a=-1*i;a<=i;a+=2){let n,u=x[a-1],c=x[a+1],l=(c?c.newPos:0)-a;u&&(x[a-1]=void 0);let v=u&&u.newPos+1<r,p=c&&0<=l&&l<T;if(!v&&!p){x[a]=void 0;continue}if(!v||p&&u.newPos<c.newPos?(n=qR(c),y.pushComponent(n.components,void 0,!0)):(n=u,n.newPos++,y.pushComponent(n.components,!0,void 0)),l=y.extractCommon(n,t,e,a),n.newPos+1>=r&&l+1>=T)return S(jR(y,n.components,t,e,y.useLongestToken));x[a]=n}i++}if(h)(function a(){setTimeout(function(){if(i>d)return h();o()||a()},0)})();else for(;i<=d;){let a=o();if(a)return a}},pushComponent(e,t,s){let h=e[e.length-1];h&&h.added===t&&h.removed===s?e[e.length-1]={count:h.count+1,added:t,removed:s}:e.push({count:1,added:t,removed:s})},extractCommon(e,t,s,h){let y=t.length,S=s.length,r=e.newPos,T=r-h,i=0;for(;r+1<y&&T+1<S&&this.equals(t[r+1],s[T+1]);)r++,T++,i++;return i&&e.components.push({count:i}),e.newPos=r,T},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let s=0;s<e.length;s++)e[s]&&t.push(e[s]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function jR(e,t,s,h,y){let S=0,r=t.length,T=0,i=0;for(;S<r;S++){let x=t[S];if(x.removed){if(x.value=e.join(h.slice(i,i+x.count)),i+=x.count,S&&t[S-1].added){let f=t[S-1];t[S-1]=t[S],t[S]=f}}else{if(!x.added&&y){let f=s.slice(T,T+x.count);f=f.map(function(o,a){let n=h[i+a];return n.length>o.length?n:o}),x.value=e.join(f)}else x.value=e.join(s.slice(T,T+x.count));T+=x.count,x.added||(i+=x.count)}}let d=t[r-1];return r>1&&typeof d.value=="string"&&(d.added||d.removed)&&e.equals("",d.value)&&(t[r-2].value+=d.value,t.pop()),t}function qR(e){return{newPos:e.newPos,components:e.components.slice(0)}}const _R=new $i;function tA(e,t,s){return _R.diff(e,t,s)}const hv=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,ov=/\S/,Tm=new $i;Tm.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!ov.test(e)&&!ov.test(t)};Tm.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&hv.test(t[s])&&hv.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const Sm=new $i;Sm.tokenize=function(e){let t=[],s=e.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let h=0;h<s.length;h++){let y=s[h];h%2&&!this.options.newlineIsToken?t[t.length-1]+=y:(this.options.ignoreWhitespace&&(y=y.trim()),t.push(y))}return t};const eA=new $i;eA.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const iA=new $i;iA.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const sA=Object.prototype.toString,Vn=new $i;Vn.useLongestToken=!0;Vn.tokenize=Sm.tokenize;Vn.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:s=(h,y)=>typeof y>"u"?t:y}=this.options;return typeof e=="string"?e:JSON.stringify(Uu(e,null,null,s),s,"  ")};Vn.equals=function(e,t){return $i.prototype.equals.call(Vn,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Uu(e,t,s,h,y){t=t||[],s=s||[],h&&(e=h(y,e));let S;for(S=0;S<t.length;S+=1)if(t[S]===e)return s[S];let r;if(sA.call(e)==="[object Array]"){for(t.push(e),r=new Array(e.length),s.push(r),S=0;S<e.length;S+=1)r[S]=Uu(e[S],t,s,h,y);return t.pop(),s.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),r={},s.push(r);let T=[],i;for(i in e)e.hasOwnProperty(i)&&T.push(i);for(T.sort(),S=0;S<T.length;S+=1)i=T[S],r[i]=Uu(e[i],t,s,h,i);t.pop(),s.pop()}else r=e;return r}const Hu=new $i;Hu.tokenize=function(e){return e.slice()};Hu.join=Hu.removeEmpty=function(e){return e};const rA=Phaser.Utils.Array.Remove;var nA=function(e,t){var s=e.text;if(t!==s){if(s==null&&(s=""),rA(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var h=tA(s,t),y=0,S=0,r=h.length;S<r;S++){var T=h[S];T.removed?e.removeText(y,T.count):(T.added&&e.insertText(y,T.value),y+=T.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.emit("textchange",t,e)}};const aA={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}},lv=Phaser.Utils.Objects.IsPlainObject;class Qn extends Kr{constructor(t,s,h,y,S,r){lv(s)?r=s:lv(y)&&(r=y),r===void 0&&(r={}),KR(t,r);var T=r.text;T&&delete r.text;var i=Yu(r.background,"focus"),d=Yu(r.style,"cursor");super(t,s,h,y,S,r),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this._text,this.textEdit=UR(this,r),r.focusStyle&&Object.assign(i,r.focusStyle),JR.call(this,i),r.cursorStyle&&Object.assign(d,r.cursorStyle),ZR.call(this,d);var x=r.onAddChar;x&&this.on("addchar",x);var f=r.onCursorOut;f&&this.on("cursorout",f);var o=r.onCursorIn;o&&this.on("cursorin",o);var a=r.onMoveCursor;a&&this.on("movecursor",a),this.setParseTextCallback(r.parseTextCallback),this.lastInsertCursor=QR(this),T||(T=""),this.setText(T)}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var h=t,y=0,S=h.length;y<S;y++){var t=h[y];Wr(t)&&this.emit("addchar",t,s+y,this)}else Wr(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(nA(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var s=super.runWrap(t);return this.contentWidth=s.maxLineWidth,this.contentHeight=s.linesHeight,this.lineHeight=s.lineHeight,this.linesCount=s.lines.length,s}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=hA),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var hA=function(e){return e};Object.assign(Qn.prototype,aA);it.register("canvasInput",function(e,t,s,h,y){var S=new Qn(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.CanvasInput",Qn);var Ad=function(e){return qs(e).loop.delta};const uv=Phaser.Utils.Objects.GetValue,oA=Phaser.Math.Wrap;class Pm extends Md{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=ym),super(t,s),this.setCursor(uv(s,"cursor","|")),this.setCursorFlashDuration(uv(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var h=this.onUpdateCallback(s,t,this);h!=null&&(s=h)}if(this.isOpened&&this.hasCursor){var y=this.cursorPosition;s=s.substring(0,y)+this.cursor+s.substring(y),this.prevCursorPosition!==y&&(this.prevCursorPosition=y)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+Ad(this.scene);return this.cursorFlashTimer=oA(s,0,this.cursorFlashDuration),t}}it.register("hiddenEdit",function(e,t){var s=new Pm(e,t);return s});et(window,"RexPlugins.UI.HiddenEdit",Pm);const lA=Phaser.GameObjects.GetCalcMatrix;var uA=function(e,t,s,h){t.updateData(),s.addToRenderList(t);var y=e.pipelines.set(t.pipeline),S=lA(t,s,h),r=y.calcMatrix.copyFrom(S.calc),T=t._displayOriginX,i=t._displayOriginY,d=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var x=t.geom,f,o=0,a=x.length;o<a;o++)f=x[o],f.visible&&f.webglRender(y,r,d,T,i);e.pipelines.postBatch(t)};const dA=Phaser.Renderer.Canvas.SetTransform;var fA=function(e,t,s,h){t.updateData(),s.addToRenderList(t);var y=e.currentContext;if(dA(e,y,t,s,h)){for(var S=t._displayOriginX,r=t._displayOriginY,T=t.geom,i,d=0,x=T.length;d<x;d++)i=T[d],i.visible&&i.canvasRender(y,S,r);y.restore()}};const cA={renderWebGL:uA,renderCanvas:fA},vA=Phaser.GameObjects.Shape,pA=Phaser.Utils.Array.Remove;class Ss extends vA{constructor(t,s,h,y,S){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=2),S===void 0&&(S=y),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,h),this.setSize(y,S),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=t,h.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,h){return h===void 0&&(h=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==h,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=h,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,h=t.length;s<h;s++){var y=t[s];y.dirty&&y.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Xi(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],pA(this.geom,s)),this}}Object.assign(Ss.prototype,cA);const gA={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}},mA={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}};var xA=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},yA=function(e,t,s){return e==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=s),this};const CA={fillStyle:xA,lineStyle:yA};class lo{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,s,h,y,S){}canvasRender(t,s,h){}updateData(){this.dirty=!1}}Object.assign(lo.prototype,CA,to);const TA=Phaser.Geom.Polygon.Earcut;class jn extends lo{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=TA(this.pathData),super.updateData(),this}webglRender(t,s,h,y,S){this.isFilled&&h0(t,s,this,h,y,S),this.isStroked&&eo(t,this,h,y,S)}canvasRender(t,s,h){var y=this.pathData,S=y.length-1,r=y[0]-s,T=y[1]-h;t.beginPath(),t.moveTo(r,T),this.closePath||(S-=2);for(var i=2;i<S;i+=2){var d=y[i]-s,x=y[i+1]-h;t.lineTo(d,x)}this.closePath&&t.closePath(),this.isFilled&&(Hn(t,this),t.fill()),this.isStroked&&($n(t,this),t.stroke())}}const dv=Phaser.Math.DegToRad;class jr extends jn{constructor(t,s,h,y,S,r,T,i){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=0),r===void 0&&(r=360),T===void 0&&(T=!1),i===void 0&&(i=!1),super(),this.setCenterPosition(t,s),this.setRadius(h,y),this.setAngle(S,r,T),this.setPie(i),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,h){return h===void 0&&(h=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=h,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),ae(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,h){t.beginPath();var y=this.x-s,S=this.y-h,r=dv(this.startAngle),T=dv(this.endAngle);this.pie&&(t.moveTo(y,S),t.lineTo(y+Math.cos(r)*this.radiusX,S+Math.sin(r)*this.radiusY)),t.ellipse(y,S,this.radiusX,this.radiusY,0,r,T,this.anticlockwise),this.pie&&t.lineTo(y,S),this.isFilled&&(Hn(t,this),t.fill()),this.isStroked&&($n(t,this),t.stroke())}}class je extends jr{constructor(t,s,h){super(t,s,h,h,0,360)}}class SA extends jn{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,h=t.length;s<h;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class PA extends jr{constructor(t,s,h,y){super(t,s,h,y,0,360)}}class xs extends jn{constructor(t,s,h,y){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=0),super(),this.setP0(t,s),this.setP1(h,y)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var EA=function(e,t,s){return s.length=0,e!=null&&s.push(e,t),s};const fv=Phaser.Math.Interpolation.QuadraticBezier;var MA=function(e,t,s,h,y,S){for(var r=S.length,T=S[r-2],i=S[r-1],d=1,x=y-1;d<=x;d++){var f=d/x;S.push(fv(f,T,e,s),fv(f,i,t,h))}return S};const cv=Phaser.Math.Interpolation.CubicBezier;var wA=function(e,t,s,h,y,S,r,T){for(var i=T.length,d=T[i-2],x=T[i-1],f=1,o=r-1;f<=o;f++){var a=f/o;T.push(cv(a,d,e,s,y),cv(a,x,t,h,S))}return T},Em=function(e){var t=e.length;if(t<2)return e;var s=e[t-2],h=e[t-1];return e.push(s),e.push(h),e};const RA={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,EA(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,s){return s===void 0&&(s=!1),s&&(e+=this.lastPointX,t+=this.lastPointY),ne(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,s,h,y,S,r){return r===void 0&&(r=!1),ae(e,t,s,h,y,S,r,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,s,h,y,S){return this.ellipticalArc(e,t,s,s,h,y,S),this},quadraticBezierTo(e,t,s,h){return MA(e,t,s,h,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=h,this.lastCX=e,this.lastCY=t,this},smoothQuadraticBezierTo(e,t){var s=this.lastPointX*2-this.lastCX,h=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(s,h,e,t),this},cubicBezierCurveTo(e,t,s,h,y,S){return wA(e,t,s,h,y,S,this.iterations,this.pathData),this.lastPointX=y,this.lastPointY=S,this.lastCX=s,this.lastCY=h,this},smoothCubicBezierCurveTo(e,t,s,h){var y=this.lastPointX*2-this.lastCX,S=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(y,S,e,t,s,h),this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return Em(this.pathData),this}},AA=Phaser.Math.RotateAround;var LA=function(e,t,s,h){for(var y={x:0,y:0},S=0,r=h.length-1;S<r;S+=2)y.x=h[S],y.y=h[S+1],AA(y,e,t,s),h[S]=y.x,h[S+1]=y.y;return h},OA=function(e,t,s,h,y){for(var S=0,r=y.length-1;S<r;S+=2){var T=y[S]-e,i=y[S+1]-t;T*=s,i*=h,y[S]=T+e,y[S+1]=i+t}return y},Mm=function(e,t,s){for(var h=0,y=s.length-1;h<y;h+=2)s[h]+=e,s[h+1]+=t;return s};const FA=Phaser.Math.DegToRad,bA=Phaser.Math.RotateAround,DA={rotateAround(e,t,s){if(this.pathData.length===0)return this;s=FA(s),LA(e,t,s,this.pathData);var h=this.pathData.length;if(this.lastPointX=this.pathData[h-2],this.lastPointY=this.pathData[h-1],this.lastCX!==void 0){var y={x:this.lastCX,y:this.lastCY};bA(y,e,t,s),this.lastCX=y.x,this.lastCY=y.y}return this},scale(e,t,s,h){if(this.pathData.length===0)return this;if(OA(e,t,s,h,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var y=this.lastCX-e,S=this.lastCY-t;y*=s,S*=h,this.lastCX=y+e,this.lastCY=S+t}return this},offset(e,t){return Mm(e,t,this.pathData),this}};var zh=function(e,t,s,h){s===void 0&&(s=0),h===void 0&&(h=t.length),e.length=h-s;for(var y=0,S=e.length;y<S;y++)e[y]=t[y+s];return e};const IA={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(zh(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},BA=Phaser.Math.Distance.Between,GA=Phaser.Math.Wrap,NA=Phaser.Math.Linear;var vv=function(e,t,s,h,y){if(h===void 0&&(h=s,s=0),s=pv(s),h=pv(h),s!==h){var S=t[t.length-1],r=S*s,T=S*h;s<h?fl(e,t,r,T,y):(fl(e,t,r,S,y),fl(e,t,0,T,y)),Em(y)}},fl=function(e,t,s,h,y){for(var S=s>0,r=0,T=t.length;r<T;r++){var i=r*2,d=t[r];if(S){if(d<s)continue;if(d==s)S=!1;else{var x=d-t[r-1],f=1-(d-s)/x;y.push(Xa(e,i-2,i,f)),y.push(Xa(e,i-1,i+1,f)),S=!1}}if(d<=h){if(y.push(e[i]),y.push(e[i+1]),d===h)break}else{var x=d-t[r-1],f=1-(d-h)/x;y.push(Xa(e,i-2,i,f)),y.push(Xa(e,i-1,i+1,f));break}}},Xa=function(e,t,s,h){var y=e[t],S=e[s];return NA(y,S,h)},pv=function(e){return e===0?0:e%1===0?1:GA(e,0,1)};const zA={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,s,h,y,S,r,T=0,i=0,d=t.length;i<d;i+=2)y=t[i],S=t[i+1],r=s===void 0?0:BA(s,h,y,S),T+=r,e.push(T),s=y,h=S;return this.totalPathLength=T,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,vv(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,s){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),vv(e.pathData,e.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},VA={draw(e,t,s){var h=this.toPoints();return t&&e.fillPoints(h,this.closePath,this.closePath),s&&e.strokePoints(h,this.closePath,this.closePath),this}};var kA=function(e,t){t===void 0&&(t=[]);for(var s=0,h=e.length-1;s<h;s+=2)t.push({x:e[s],y:e[s+1]});return t};const XA=Phaser.Geom.Polygon;var WA=function(e,t){return t===void 0&&(t=new XA),t.setTo(e),t};class wm{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return kA(this.pathData)}toPolygon(t){return WA(this.pathData,t)}}Object.assign(wm.prototype,RA,DA,IA,zA,VA);class be extends jn{constructor(){super(),this.builder=new wm(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,h){return this.builder.lineTo(t,s,h),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,h,y,S,r,T){return this.builder.ellipticalArc(t,s,h,y,S,r,T),this.dirty=!0,this}arc(t,s,h,y,S,r){return this.builder.arc(t,s,h,y,S,r),this.dirty=!0,this}quadraticBezierTo(t,s,h,y){return this.builder.quadraticBezierTo(t,s,h,y),this.dirty=!0,this}smoothQuadraticBezierTo(t,s){return this.builder.smoothQuadraticBezierTo(t,s),this.dirty=!0,this}cubicBezierCurveTo(t,s,h,y,S,r){return this.builder.cubicBezierCurveTo(t,s,h,y,S,r),this.dirty=!0,this}smoothCubicBezierCurveTo(t,s,h,y){return this.builder.smoothCubicBezierCurveTo(t,s,h,y),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,h){return this.builder.rotateAround(t,s,h),this.dirty=!0,this}scale(t,s,h,y){return this.builder.scale(t,s,h,y),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,h){return this.builder.appendFromPathSegment(t.builder,s,h),this}copyPathFrom(t,s,h){return this.builder.clear().appendFromPathSegment(t.builder,s,h),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const YA=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class UA extends lo{constructor(t,s,h,y){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=h),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,s),this.setSize(h,y)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}updateData(){this.pathData.length=0;var t=this.x,s=t+this.width,h=this.y,y=h+this.height;return this.pathData.push(t,h),this.pathData.push(s,h),this.pathData.push(s,y),this.pathData.push(t,y),this.pathData.push(t,h),super.updateData(),this}webglRender(t,s,h,y,S){if(this.isFilled){var r=t.fillTint,T=YA(this.fillColor,this.fillAlpha*h);r.TL=T,r.TR=T,r.BL=T,r.BR=T,t.batchFillRect(-y+this.x,-S+this.y,this.width,this.height)}this.isStroked&&eo(t,this,h,y,S)}canvasRender(t,s,h){this.isFilled&&(Hn(t,this),t.fillRect(-s,-h,this.width,this.height)),this.isStroked&&($n(t,this),t.beginPath(),t.rect(-s,-h,this.width,this.height),t.stroke())}}const Wa=Phaser.Utils.Objects.GetValue;class Vh extends jn{constructor(t,s,h,y,S,r){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=h),S===void 0&&(S=0),r===void 0&&(r=6),super(),this.setTopLeftPosition(t,s),this.setSize(h,y),this.setRadius(S),this.setIterations(r),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=Wa(t,"tl",0),this.radiusTR=Wa(t,"tr",0),this.radiusBL=Wa(t,"bl",0),this.radiusBR=Wa(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,h=this.height,y,S=this.iterations+1;if(y=this.radiusTL,y>0)if(this._convexTL){var r=y,T=y;ae(r,T,y,y,180,270,!1,S,t)}else{var r=0,T=0;ae(r,T,y,y,90,0,!0,S,t)}else ne(0,0,t);if(y=this.radiusTR,y>0)if(this._convexTR){var r=s-y,T=y;ae(r,T,y,y,270,360,!1,S,t)}else{var r=s,T=0;ae(r,T,y,y,180,90,!0,S,t)}else ne(s,0,t);if(y=this.radiusBR,y>0)if(this._convexBR){var r=s-y,T=h-y;ae(r,T,y,y,0,90,!1,S,t)}else{var r=s,T=h;ae(r,T,y,y,270,180,!0,S,t)}else ne(s,h,t);if(y=this.radiusBL,y>0)if(this._convexBL){var r=y,T=h-y;ae(r,T,y,y,90,180,!1,S,t)}else{var r=0,T=h;ae(r,T,y,y,360,270,!0,S,t)}else ne(0,h,t);return t.push(t[0],t[1]),Mm(this.x,this.y,t),super.updateData(),this}}const HA=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class $A extends lo{constructor(t,s,h,y,S,r){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=0),r===void 0&&(r=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,s),this.setP1(h,y),this.setP2(S,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,s){return this.dirty=this.dirty||this.x2!==t||this.y2!==s,this.x2=t,this.y2=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,s,h,y,S){if(this.isFilled){var r=HA(this.fillColor,this.fillAlpha*h),T=this.x0-y,i=this.y0-S,d=this.x1-y,x=this.y1-S,f=this.x2-y,o=this.y2-S,a=s.getX(T,i),n=s.getY(T,i),u=s.getX(d,x),c=s.getY(d,x),l=s.getX(f,o),v=s.getY(f,o);t.batchTri(a,n,u,c,l,v,r,r,r)}this.isStroked&&eo(t,this,h,y,S)}canvasRender(t,s,h){var y=this.x1-s,S=this.y1-h,r=this.x2-s,T=this.y2-h,i=this.x3-s,d=this.y3-h;t.beginPath(),t.moveTo(y,S),t.lineTo(r,T),t.lineTo(i,d),t.closePath(),this.isFilled&&(Hn(t,this),t.fill()),this.isStroked&&($n(t,this),t.stroke())}}const KA={buildShapes(){this.addShape(new Vh().setName("box")).addShape(new be().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,s=Math.min(e,t),h=s*2,y=e-s,S=t-s,r=this.boxLineWidth,T=Math.max(h/10,2),i=this.getShape("box"),d=this.getShape("checker");if(this.isSizeChanged){var o=h*(1-this.boxSize)/2,x=r/2,f=h*this.boxSize-r;i.setTopLeftPosition(y+x+o,S+x+o).setSize(f,f),this.isCircleShape?i.setRadius(f/2):i.setRadius(0);var o=h*(1-this.checkerSize)/2,a=h*this.checkerSize/4,n=a*1,u=a*2,c=a*3;d.startAt(n,u).lineTo(u,c).lineTo(c,n).offset(y+o,S+o).end()}this.checked?(i.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(r,this.boxStrokeColor,this.boxStrokeAlpha),d.lineStyle(T,this.checkerColor)):(i.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(r,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),d.lineStyle()),this.checked&&d.setDisplayPathSegment(this.checkerAnimProgress)}},ss=Phaser.Utils.Objects.GetValue,ZA=Phaser.Math.Linear;class Ki extends ir{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=ss(t,"key","value");var h=s[this.propertyKey];return this.fromValue=ss(t,"from",h),this.toValue=ss(t,"to",h),this.setEase(ss(t,"ease",this.ease)),this.setDuration(ss(t,"duration",this.duration)),this.setRepeat(ss(t,"repeat",0)),this.setDelay(ss(t,"delay",0)),this.setRepeatDelay(ss(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,s){var h=s.t;h=this.easeFn(h),t[this.propertyKey]=ZA(this.fromValue,this.toValue,h)}}const JA={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Ki(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var Rm={};Object.assign(Rm,gA,mA,KA,JA);const kt=Phaser.Utils.Objects.GetValue,gv=Phaser.Utils.Objects.IsPlainObject,cl=23730,QA=16777215;class Am extends Ss{constructor(t,s,h,y,S,r,T){gv(s)?(T=s,s=kt(T,"x",0),h=kt(T,"y",0),y=kt(T,"width",2),S=kt(T,"height",2),r=kt(T,"color",cl)):gv(r)&&(T=r,r=kt(T,"color",cl)),super(t,s,h,y,S),this.type="rexCheckbox",r===void 0&&(r=cl),this.setBoxShape(kt(T,"circleBox",!1)),this.setBoxFillStyle(r,kt(T,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(kt(T,"uncheckedColor",null),kt(T,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(kt(T,"boxLineWidth",4),kt(T,"boxStrokeColor",r),kt(T,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,kt(T,"uncheckedBoxStrokeColor",this.boxStrokeColor),kt(T,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(kt(T,"checkerColor",QA),kt(T,"checkerAlpha",1)),this.setBoxSize(kt(T,"boxSize",1)),this.setCheckerSize(kt(T,"checkerSize",1)),this.setCheckerAnimationDuration(kt(T,"animationDuration",150)),this.buildShapes();var i=kt(T,"checked");i===void 0&&(i=kt(T,"value",!1)),this.setValue(i)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(Am.prototype,Rm);const vn=Phaser.Utils.Objects.GetValue;class Zi extends Gt{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(vn(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(vn(t,"enable",!0)),this.setMode(vn(t,"mode",1)),this.setClickInterval(vn(t,"clickInterval",100)),this.setDragThreshold(vn(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=jA[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,h,y){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,y),this.mode===0&&this.click(t.downTime,t,y))}onRelease(t,s,h,y){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,y),this.mode===1&&this.click(t.upTime,t,y),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,h,y){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,s,h,y){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,y),this):this}onOut(t,s){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,s),this):this}click(t,s,h){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,h),this;this.pointer=void 0;var y=this.lastClickTime;return y!==void 0&&t-y<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,h),this)}cancel(){return this.pointer=void 0,this}}const jA={press:0,pointerdown:0,release:1,pointerup:1},mv=Phaser.Utils.Objects.GetValue;class Ld extends Am{constructor(t,s,h,y,S,r,T){super(t,s,h,y,S,r,T),this._click=new Zi(this,mv(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(mv(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}it.register("checkbox",function(e,t,s,h,y,S){var r=new Ld(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.Checkbox",Ld);const qA={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},_A={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},tL={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var vl=function(e,t,s){return(t-e)*s+e},eL=function(e,t,s){var h=vl(In(e),In(t),s),y=vl(Bn(e),Bn(t),s),S=vl(Gn(e),Gn(t),s);return(h&255)<<16|(y&255)<<8|S&255};const xv=Phaser.Math.Linear,iL={buildShapes(){this.addShape(new Vh().setName("track")).addShape(new Vh().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,h=this.getShape("track");if(this.isSizeChanged){var y=e*this.trackWidth,S=t*this.trackHeight,r=(e-y)/2,T=(t-S)/2,i=t*this.trackRadius;h.setTopLeftPosition(r,T).setSize(y,S).setRadius(i)}var d=eL(this.falseValueTrackColor,this.trackFillColor,s),x=xv(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);h.fillStyle(d,x);var f=this.getShape("thumb");if(this.isSizeChanged){var o=e*this.thumbWidth,a=t*this.thumbHeight,n=t*this.thumbRadius;f.setSize(o,a).setRadius(n)}var u=xv(this.thumbLeftX,this.thumbRightX,s)*e;this.rtl&&(u=e-u);var c=t/2;f.setCenterPosition(u,c),f.fillStyle(this.thumbColor,this.thumbAlpha)}},sL={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Ki(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var Lm={};Object.assign(Lm,qA,_A,tL,iL,sL);var rL=function(e){var t=.3*In(e)+.59*Bn(e)+.11*Gn(e);return(t&255)<<16|(t&255)<<8|t&255};const Xt=Phaser.Utils.Objects.GetValue,yv=Phaser.Utils.Objects.IsPlainObject,pl=23730,nL=16777215;class Om extends Ss{constructor(t,s,h,y,S,r,T){yv(s)?(T=s,s=Xt(T,"x",0),h=Xt(T,"y",0),y=Xt(T,"width",2),S=Xt(T,"height",2),r=Xt(T,"color",pl)):yv(r)&&(T=r,r=Xt(T,"color",pl)),super(t,s,h,y,S),this.type="rexToggleSwitch",r===void 0&&(r=pl),this.setTrackFillStyle(r,Xt(T,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Xt(T,"falseValueTrackColor",rL(r)),Xt(T,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Xt(T,"thumbColor",nL),Xt(T,"thumbAlpha",1)),this.setTrackSize(Xt(T,"trackWidth",.9),Xt(T,"trackHeight",.5)),this.setTrackRadius(Xt(T,"trackRadius",this.trackHeight*.5));var i=Xt(T,"thumbHeight",void 0),d=Xt(T,"thumbWidth",i);d===void 0&&(d=this.trackHeight*.9),this.setThumbSize(d,i),this.setThumbRadius(Xt(T,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Xt(T,"thumbLeft",.3),Xt(T,"thumbRight",void 0)),this.setRTL(Xt(T,"rtl",!1)),this.setToggleAnimationDuration(Xt(T,"animationDuration",150)),this.buildShapes(),this.setValue(Xt(T,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var h=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=h,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Om.prototype,Lm);const Cv=Phaser.Utils.Objects.GetValue;class Od extends Om{constructor(t,s,h,y,S,r,T){super(t,s,h,y,S,r,T),this._click=new Zi(this,Cv(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Cv(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}it.register("toggleSwitch",function(e,t,s,h,y,S){var r=new Od(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.ToggleSwitch",Od);const aL={loadFromURL(e,t){var s=this,h=new Image;return h.onload=function(){s.width!==h.width||s.height!==h.height?s.resize(h.width,h.height):s.clear(),s.context.drawImage(h,0,0),s.updateTexture(),t&&t(),h.onload=null,h.src="",h.remove()},h.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(s,h){t.loadFromURL(e,s)})},loadFromFile(e,t){var s=URL.createObjectURL(e);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(s,h){t.loadFromFile(e,s)})}};class sr extends Ts{}Object.assign(sr.prototype,aL);it.register("canvas",function(e,t,s,h){var y=new sr(this.scene,e,t,s,h);return this.scene.add.existing(y),y});et(window,"RexPlugins.UI.Canvas",sr);const gr=Phaser.Utils.Objects.GetValue;class Fm extends Ts{constructor(t,s,h,y,S,r){super(t,s,h),this.type="rexCircleMaskImage",this.setTexture(y,S,r)}setTexture(t,s,h){typeof s=="object"&&(h=s,s=void 0),typeof h=="string"&&(h={maskType:h});var y=gr(h,"maskType",0),S=gr(h,"backgroundColor",void 0),r=gr(h,"strokeColor",void 0),T=r!=null?10:0,i=gr(h,"strokeWidth",T);if(y===void 0?y=0:typeof y=="string"&&(y=hL[y]),this._textureKey=t,this._frameName=s,y===null)return this.loadTexture(t,s),this.dirty=!0,this;var d=this.scene.sys.textures.getFrame(t,s);if(!d)return this;d.cutWidth!==this.width||d.cutHeight!==this.height?this.setCanvasSize(d.cutWidth,d.cutHeight):this.clear();var x=this.canvas,f=this.context,o=x.width,a=x.height;S!=null&&(f.fillStyle=S,f.fillRect(0,0,o,a)),f.save(),f.beginPath();var n=i/2;switch(y){case 1:var p=Math.floor(o/2),g=Math.floor(a/2),u=p-n,c=g-n;f.ellipse(p,g,u,c,0,0,2*Math.PI);break;case 2:var l=gr(h,"radius",0),v=gr(h,"iteration",void 0);d0(f,n,n,o-i,a-i,l,v);break;default:var p=Math.floor(o/2),g=Math.floor(a/2),m=Math.min(p,g)-n;f.arc(p,g,m,0,2*Math.PI);break}return r!=null&&(f.strokeStyle=r,f.lineWidth=i,f.stroke()),f.clip(),this.loadTexture(t,s),f.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const hL={circle:0,ellipse:1,roundRectangle:2};it.register("circleMaskImage",function(e,t,s,h,y){var S=new Fm(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.CircleMaskImage",Fm);const pn=Phaser.Utils.Objects.GetValue;class bm extends Ts{constructor(t,s,h,y,S,r){super(t,s,h),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(y,S,r)}setTexture(t,s,h){typeof s=="object"&&(h=s,s=void 0),typeof h=="string"&&(h={mask:{key:h}});var y=pn(h,"mask.key"),S=pn(h,"mask.frame"),r=pn(h,"mask.invertAlpha",!1),T=pn(h,"mask.scale"),i=pn(h,"backgroundColor");if(y){this._maskKey=y,this._maskFrame=S,this._maskScale=T;var d=y?this.scene.sys.textures.get(y):null;this.maskFrame=d?d.get(S):null}this._textureKey=t,this._frameName=s;var x=this.maskFrame;if(x===null)return this.loadTexture(t,s),this.dirty=!0,this;var f=i!=null;this.loadTexture(t,s);var o=this.canvas,a=this.context,n=o.width,u=o.height;a.save(),a.globalCompositeOperation=r?"destination-out":"destination-in";var c,l;this._maskScale!=null?(c=x.cutWidth*this._maskScale,l=x.cutHeight*this._maskScale):(c=n,l=u);var v=(n-c)/2,p=(u-l)/2;return this.drawFrame(this._maskKey,this._maskFrame,v,p,c,l),a.restore(),f&&(a.save(),a.globalCompositeOperation="destination-over",a.fillStyle=i,a.fillRect(0,0,n,u),a.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}it.register("alphaMaskImage",function(e,t,s,h,y){var S=new bm(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.AlphaMaskImage",bm);const oL=Phaser.Math.Linear,Tv=Phaser.Math.Percent,lL={setValue(e,t,s){return e==null?this:(t!==void 0&&(e=Tv(e,t,s)),this.value=e,this)},addValue(e,t,s){return t!==void 0&&(e=Tv(e,t,s)),this.value+=e,this},getValue(e,t){var s=this.value;return e!==void 0&&(s=oL(e,t,s)),s}},uL=Phaser.Math.Percent;var dL=function(e){return this.easeValuePropName=e,this},fL=function(e){return this.easeValueDuration=e,this},cL=function(e){return this.easeFunction=e,this},vL=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},pL=function(e,t,s){return e==null?this:(t!==void 0&&(e=uL(e,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new Ki(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},gL=function(e,t,s,h){return s===void 0&&(s=-1),h===void 0&&(h=0),this.easeValueTask===void 0&&(this.easeValueTask=new Ki(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:h}),this};const mL={setEaseValuePropName:dL,setEaseValueDuration:fL,setEaseValueFunction:cL,stopEaseValue:vL,easeValueTo:pL,easeValueRepeat:gL},gn=Phaser.Utils.Objects.GetValue,xL=Phaser.Math.Clamp;function rr(e){class t extends e{bootProgressBase(h){this.eventEmitter=gn(h,"eventEmitter",this);var y=gn(h,"valuechangeCallback",null);if(y!==null){var S=gn(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",y,S)}return this.setEaseValuePropName("value").setEaseValueDuration(gn(h,"easeValue.duration",0)).setEaseValueFunction(gn(h,"easeValue.ease","Linear")),this}get value(){return this._value}set value(h){h=xL(h,0,1);var y=this._value,S=y!=h;this.dirty=this.dirty||S,this._value=h,S&&this.eventEmitter.emit("valuechange",this._value,y,this.eventEmitter)}}return Object.assign(t.prototype,lL,mL),t}const yL=Phaser.Math.RadToDeg,Sv=Phaser.Math.DegToRad;var Pv=function(e,t,s,h,y,S,r,T){var i=Math.abs(r-S)===360,d=Sv(S),x=Sv(r),f=Math.cos(d),o=Math.sin(d),a=Math.cos(x),n=Math.sin(x);return e.startAt(t+f*h,s+o*h),e.arc(t,s,h,S,r,T),i&&y===0||(e.lineTo(t+a*y,s+n*y),y>0&&e.arc(t,s,y,r,S,!T)),e.close(),e};const CL={buildShapes(){this.addShape(new be().setName("track")).addShape(new be().setName("bar")).addShape(new je().setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,s=this.radius,h=s-t,y=this.getShape("track");this.trackColor!=null&&this.thickness>0?(y.fillStyle(this.trackColor),Pv(y,e,e,s,h,0,360,!1)):y.reset();var S=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var r,T,i;if(this.value===1)r=!1,T=0,i=360;else{r=this.anticlockwise,T=yL(this.startAngle);var d=360*(r?1-this.value:this.value);i=d+T}S.fillStyle(this.barColor),Pv(S,e,e,s,h,T,i,!1)}else S.reset();var x=this.getShape("center");this.centerColor&&h>0?x.setCenterPosition(e,e).setRadius(h).fillStyle(this.centerColor):x.reset()}},ci=Phaser.Utils.Objects.GetValue,TL=Phaser.Utils.Objects.IsPlainObject,SL=Phaser.Math.Clamp,PL=Phaser.Math.DegToRad(270);class uo extends rr(Ss){constructor(t,s,h,y,S,r,T){TL(s)&&(T=s,s=ci(T,"x",0),h=ci(T,"y",0),y=ci(T,"radius",1),S=ci(T,"barColor",void 0),r=ci(T,"value",0)),y===void 0&&(y=1);var i=y*2;super(t,s,h,i,i),this.type="rexCircularProgress",this.bootProgressBase(T),this.setRadius(y),this.setTrackColor(ci(T,"trackColor",void 0)),this.setBarColor(S),this.setCenterColor(ci(T,"centerColor",void 0)),this.setThickness(ci(T,"thickness",.2)),this.setStartAngle(ci(T,"startAngle",PL)),this.setAnticlockwise(ci(T,"anticlockwise",!1)),this.buildShapes(),this.setValue(r)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=SL(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}}Object.assign(uo.prototype,CL);it.register("circularProgress",function(e,t,s,h,y,S){var r=new uo(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.CircularProgress",uo);var gl=function(e,t,s,h,y,S,r,T,i,d,x,f){d===void 0&&(d=0),x===void 0&&(x=2*Math.PI),f===void 0&&(f=!1),t.beginPath(),t.ellipse(s,h,y,S,0,d,x,f),r!=null&&(t.fillStyle=r,t.fill()),T!=null&&(t.strokeStyle=T,t.lineWidth=i,t.stroke())},EL=function(e,t,s,h,y,S,r,T,i,d,x){i===void 0&&T!=null&&(i=2),d===void 0&&(d="start"),x===void 0&&(x="alphabetic"),t.font=S,t.textAlign=d,t.textBaseline=x,t.fillStyle=r,t.strokeStyle=T,t.lineWidth=i,t.lineCap="round",t.lineJoin="round",T!=null&&T!=="none"&&i>0&&t.strokeText(y,s,h),r!=null&&r!=="none"&&t.fillText(y,s,h)};const ml=Phaser.Math.PI2;var ML=function(){var e=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,h=this.radius-t,y=this.canvas,S=this.context,r=this.anticlockwise,T=this.startAngle,i=this.endAngle,d=this._deltaAngle;if(this.trackColor&&t>0&&(S.save(),gl(y,S,e,e,s,s,void 0,this.trackColor,t,T,i,r),S.restore()),this.barColor&&s>0){var x;r?x=(T-d*this.value+ml)%ml:x=(T+d*this.value)%ml,S.save();var f;if(this.barColor2){var o=e+s*Math.cos(T),a=e+s*Math.sin(T),n=e+s*Math.cos(x),u=e+s*Math.sin(x),c=S.createLinearGradient(o,a,n,u);c.addColorStop(0,this.barColor2),c.addColorStop(1,this.barColor),f=c}else f=this.barColor;gl(y,S,e,e,s,s,void 0,f,t,T,x,r),S.restore()}if(this.centerColor&&h>0){var l;this.centerColor2?(l=this.context.createRadialGradient(e,e,0,e,e,h),l.addColorStop(0,this.centerColor),l.addColorStop(1,this.centerColor2)):l=this.centerColor,S.save(),gl(y,S,e,e,h,h,l),S.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(S.save(),EL(y,S,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),S.restore())};const $t=Phaser.Utils.Objects.GetValue,wL=Phaser.Utils.Objects.IsPlainObject,Ev=Phaser.Math.Angle.Normalize,RL=Phaser.Math.Clamp,AL=Phaser.Math.DegToRad(270),$u=Phaser.Math.PI2;class Fd extends rr(Ts){constructor(t,s,h,y,S,r,T){wL(s)&&(T=s,s=$t(T,"x",0),h=$t(T,"y",0),y=$t(T,"radius",1),S=$t(T,"barColor",void 0),r=$t(T,"value",0));var i=y*2;super(t,s,h,i,i),this.type="rexCircularProgressCanvas",this.bootProgressBase(T),this.setRadius(y),this.setTrackColor($t(T,"trackColor",void 0)),this.setBarColor(S),this.setBarColor2($t(T,"barColor2",void 0)),this.setCenterColor($t(T,"centerColor",void 0)),this.setThickness($t(T,"thickness",.2)),this.setStartAngle($t(T,"startAngle",AL)),this.setEndAngle($t(T,"endAngle",this.startAngle+$u)),this.setAnticlockwise($t(T,"anticlockwise",!1)),this.setTextColor($t(T,"textColor",void 0)),this.setTextStrokeColor($t(T,"textStrokeColor",void 0),$t(T,"textStrokeThickness",void 0));var d=$t(T,"textFont",void 0);d?this.setTextFont(d):this.setTextFont($t(T,"textSize","16px"),$t(T,"textFamily","Courier"),$t(T,"textStyle","")),this.setTextFormatCallback($t(T,"textFormatCallback",void 0),$t(T,"textFormatCallbackScope",void 0)),this.setValue(r)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){t=Ev(t),this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=xl(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){t=Ev(t),this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=xl(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=xl(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=RL(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,h){var y;return s===void 0?y=t:y=h+" "+t+" "+s,this.textFont=y,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return this.clear(),ML.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}var xl=function(e,t,s){return s?e<=t?$u+e-t:e-t:e>=t?$u+t-e:t-e};it.register("circularProgressCanvas",function(e,t,s,h,y,S){var r=new Fd(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.CircularProgressCanvas",Fd);var LL=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,h=this.getShape("trackFill");h.fillStyle(this.trackColor),h.isFilled&&yl(h,0,0,t,s,e).close();var y=this.getShape("bar");if(y.fillStyle(this.barColor),y.isFilled){var S,r;this.rtl?(S=t*(1-this.value),r=t):(S=0,r=t*this.value),yl(y,S,0,r,s,e).close()}var T=this.getShape("trackStroke");T.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),T.isStroked&&yl(T,0,0,t,s,e).end()},yl=function(e,t,s,h,y,S){var r=(t+h)/2;return S>=0?e.startAt(r+S,s).lineTo(h+S,s).lineTo(h,y).lineTo(t,y).lineTo(t+S,s).lineTo(r+S,s):e.startAt(r,s).lineTo(h,s).lineTo(h-S,y).lineTo(t-S,y).lineTo(t,s).lineTo(r,s),e};const le=Phaser.Utils.Objects.GetValue,Cl=Phaser.Utils.Objects.IsPlainObject;class bd extends rr(Ss){constructor(t,s,h,y,S,r,T,i){Cl(s)?(i=s,s=le(i,"x",0),h=le(i,"y",0),y=le(i,"width",2),S=le(i,"height",2),r=le(i,"barColor",void 0),T=le(i,"value",0)):Cl(y)?(i=y,y=le(i,"width",2),S=le(i,"height",2),r=le(i,"barColor",void 0),T=le(i,"value",0)):Cl(r)&&(i=r,r=le(i,"barColor",void 0),T=le(i,"value",0)),super(t,s,h,y,S,i),this.type="rexLineProgress",this.bootProgressBase(i),this.addShape(new be().setName("trackFill")).addShape(new be().setName("bar")).addShape(new be().setName("trackStroke")),this.setTrackColor(le(i,"trackColor",void 0)),this.setBarColor(r),this.setTrackStroke(le(i,"trackStrokeThickness",2),le(i,"trackStrokeColor",void 0)),this.setSkewX(le(i,"skewX",0)),this.setRTL(le(i,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}}var OL={updateShapes:LL};Object.assign(bd.prototype,OL);it.register("lineProgress",function(e,t,s,h,y,S,r){var T=new bd(this.scene,e,t,s,h,y,S,r);return this.scene.add.existing(T),T});et(window,"RexPlugins.UI.LineProgress",bd);var FL=function(e,t){e.save(),e.beginPath();var s=t[0];e.moveTo(s.x,s.y);for(var h=1,y=t.length;h<y;h++)s=t[h],e.lineTo(s.x,s.y);e.closePath(),e.restore()},Tl=function(e,t,s,h,y,S,r){r===void 0&&(r="round"),FL(t,s),t.lineJoin=r,h!=null&&(t.fillStyle=h,t.fill()),y!=null&&(t.strokeStyle=y,t.lineWidth=S,t.stroke())},bL=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,h=this.canvas,y=this.context;(this.trackColor||this.trackStrokeColor)&&Mv(0,0,t,s,e,this.trackPoints);var S,r;if(this.barColor&&(this.rtl?(S=t*(1-this.value),r=t):(S=0,r=t*this.value),Mv(S,0,r,s,e,this.barPoints)),this.trackColor&&(y.save(),Tl(h,y,this.trackPoints,this.trackColor),y.restore()),this.barColor){y.save();var T;if(this.barColor2){var i;if(this.isHorizontalGradient){var d=s/2;i=y.createLinearGradient(S,d,r,d)}else{var x=t/2;i=y.createLinearGradient(x,0,x,s)}i.addColorStop(0,this.rtl?this.barColor:this.barColor2),i.addColorStop(1,this.rtl?this.barColor2:this.barColor),T=i}else T=this.barColor;Tl(h,y,this.barPoints,T),y.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(y.save(),Tl(h,y,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),y.restore())},Mv=function(e,t,s,h,y,S){S===void 0&&(S=[]),S.length=4;for(var r=0;r<4;r++)S[r]||(S[r]={});var T;return y>=0?(T=S[0],T.x=e+y,T.y=t,T=S[1],T.x=s+y,T.y=t,T=S[2],T.x=s,T.y=h,T=S[3],T.x=e,T.y=h):(T=S[0],T.x=e,T.y=t,T=S[1],T.x=s,T.y=t,T=S[2],T.x=s-y,T.y=h,T=S[3],T.x=e-y,T.y=h),S};const qt=Phaser.Utils.Objects.GetValue,Sl=Phaser.Utils.Objects.IsPlainObject;class Dd extends rr(Ts){constructor(t,s,h,y,S,r,T,i){Sl(s)?(i=s,s=qt(i,"x",0),h=qt(i,"y",0),y=qt(i,"width",2),S=qt(i,"height",2),r=qt(i,"barColor",void 0),T=qt(i,"value",0)):Sl(y)?(i=y,y=qt(i,"width",2),S=qt(i,"height",2),r=qt(i,"barColor",void 0),T=qt(i,"value",0)):Sl(r)&&(i=r,r=qt(i,"barColor",void 0),T=qt(i,"value",0)),super(t,s,h,y,S),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(i),this.setTrackColor(qt(i,"trackColor",void 0)),this.setBarColor(r,qt(i,"barColor2",void 0),qt(i,"isHorizontalGradient",void 0)),this.setTrackStroke(qt(i,"trackStrokeThickness",2),qt(i,"trackStrokeColor",void 0)),this.setSkewX(qt(i,"skewX",0)),this.setRTL(qt(i,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=pt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,h){return h===void 0&&(h=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=h,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),bL.call(this),super.updateTexture(),this}}it.register("circularProgressCanvas",function(e,t,s,h,y,S,r){var T=new Dd(this.scene,e,t,s,h,y,S,r);return this.scene.add.existing(T),T});et(window,"RexPlugins.UI.LineProgressCanvas",Dd);Phaser.Math.Wrap;const mr=Phaser.Math.Linear;var DL=function(){var e=this.getShape("triangle"),t=this.padding,s=this.width-t.right,h=0+t.left,y=this.height-t.bottom,S=0+t.top,r=(h+s)/2,T=(S+y)/2,i={0:{a:{x:h,y:S},b:{x:s,y:T},c:{x:h,y}},1:{a:{x:h,y:S},b:{x:r,y},c:{x:s,y:S}},2:{a:{x:s,y:S},b:{x:h,y:T},c:{x:s,y}},3:{a:{x:h,y},b:{x:r,y:S},c:{x:s,y}}},d,x,f,o,a,n;if(this.previousDirection===void 0){var u=i[this.direction],c=u.a,l=u.b,v=u.c;d=c.x,x=c.y,f=l.x,o=l.y,a=v.x,n=v.y}else{var p=i[this.previousDirection],g=i[this.direction],m=this.easeDirectionProgress;d=mr(p.a.x,g.a.x,m),x=mr(p.a.y,g.a.y,m),f=mr(p.b.x,g.b.x,m),o=mr(p.b.y,g.b.y,m),a=mr(p.c.x,g.c.x,m),n=mr(p.c.y,g.c.y,m)}e.startAt(d,x).lineTo(f,o).lineTo(a,n),this.arrowOnly?e.end():e.close()};const IL=Phaser.Math.DegToRad,Ya=IL(120);var BL=function(t){var t=this.getShape("triangle"),s=this.width/2,h=this.height/2,y=Math.min(s,h)*this.radius,S=this.verticeRotation;t.startAt(s+y*Math.cos(S+Ya),h+y*Math.sin(S+Ya)).lineTo(s+y*Math.cos(S),h+y*Math.sin(S)).lineTo(s+y*Math.cos(S-Ya),h+y*Math.sin(S-Ya)),this.arrowOnly?t.end():t.close()};const GL={buildShapes(){this.addShape(new be().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?DL.call(this):BL.call(this)}},NL={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Ki(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},xr=Phaser.Utils.Objects.GetValue,zL=Phaser.Utils.Objects.IsPlainObject,VL=Phaser.Math.DegToRad,kL=Phaser.Math.RadToDeg;class qn extends Ss{constructor(t,s,h,y,S,r,T){var i,d,x,f,o,a,n,u;if(zL(s)){var c=s;s=c.x,h=c.y,y=c.width,S=c.height,r=c.color,T=c.alpha,i=c.strokeColor,d=c.strokeAlpha,x=c.strokeWidth,f=c.arrowOnly,o=c.direction,a=c.easeDuration,n=c.padding,u=c.radius}s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=y),f===void 0&&(f=!1),o===void 0&&(o=0),a===void 0&&(a=0),n===void 0&&(n=0),u===void 0&&(u=void 0),super(t,s,h,y,S),this.type="rexTriangle",this.setFillStyle(r,T),i!==void 0&&x===void 0&&(x=2),this.setStrokeStyle(x,i,d),this.setArrowOnly(f),this.setDirection(o,a),this.setPadding(n),this.setRadius(u),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=WL(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,h,y){if(typeof t=="object"){var S=t,r=xr(S,"x",null);r!==null?(t=r,h=r):(t=xr(S,"left",0),h=xr(S,"right",t));var T=xr(S,"y",null);T!==null?(s=T,y=T):(s=xr(S,"top",0),y=xr(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),h===void 0&&(h=t),y===void 0&&(y=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=h||this.padding.bottom!=y,this.padding.left=t,this.padding.top=s,this.padding.right=h,this.padding.bottom=y,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return kL(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=VL(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const XL={right:0,down:1,left:2,up:3};var WL=function(e){return typeof e=="string"&&(e=XL[e]),e=e%4,e};Object.assign(qn.prototype,GL,NL);it.register("triangle",function(e,t,s,h,y,S){var r=new qn(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.Triangle",qn);_h();const YL=Phaser.GameObjects.Zone,UL=Phaser.Utils.Array.Add,HL=Phaser.Utils.Array.Remove;class _n extends YL{constructor(t,s,h,y,S){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=1),S===void 0&&(S=1),super(t,s,h,y,S),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s,h=this.children.length-1;h>=0;h--)s=this.children[h],!s.parentContainer&&!s.displayList&&s.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var s=this;return UL(this.children,t,0,function(h){h.once("destroy",s.onChildDestroy,s)},this),this}remove(t,s){var h=this;return HL(this.children,t,function(y){y.off("destroy",h.onChildDestroy,h),s&&y.destroy()}),this}onChildDestroy(t,s){this.remove(t,!1)}clear(t){for(var s=this,h,y=0,S=this.children.length;y<S;y++)h=this.children[y],h.off("destroy",s.onChildDestroy,s),t&&h.destroy();return this.children.length=0,this}}const wv=Phaser.GameObjects.Components;Phaser.Class.mixin(_n,[wv.Alpha,wv.Flip]);var Xe=function(e,t){var s;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent);else for(s=Xe(e);s&&s.name!==t;)s=Xe(s);return s},Dm=function(e){for(var t=Xe(e);t;)e=t,t=Xe(t);return e};const $L=Phaser.Math.DegToRad,KL=Phaser.Math.RadToDeg;var yt=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return KL(this.rotation)},set:function(s){this.rotation=$L(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(s){this.scaleX=s/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(s){this.scaleY=s/e.height}}),e.rexContainer=t}return e.rexContainer};const ZL={setParent(e,t){t===void 0&&(t=this);var s=yt(e);return t?(s.parent=t,s.self=e):(s.parent=null,s.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Xe(e,t)},getTopmostParent(e){return e===void 0&&(e=this),Dm(e)}},bs=Phaser.Utils.Objects.GetValue,Im=_n.prototype.add;var Pl=function(e,t){this.setParent(e);var s=yt(e);return Bm(s,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),Im.call(this,e),Gm.call(this,e,s),this},El=function(e,t){this.setParent(e);var s=yt(e);return Bm(s,t),s.x=e.x,s.y=e.y,s.rotation=e.rotation,s.scaleX=e.scaleX,s.scaleY=e.scaleY,s.alpha=e.alpha,s.visible=e.visible,s.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),Im.call(this,e),Gm.call(this,e,s),this},Bm=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=bs(t,"syncPosition",!0),e.syncRotation=bs(t,"syncRotation",!0),e.syncScale=bs(t,"syncScale",!0),e.syncAlpha=bs(t,"syncAlpha",!0),e.syncScrollFactor=bs(t,"syncScrollFactor",!0),e.syncCameraFilter=bs(t,"syncCameraFilter",!0),e.syncDisplayList=bs(t,"syncDisplayList",!0))},Gm=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)};const JL={add(e){return Array.isArray(e)?this.addMultiple(e):Pl.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):Pl.call(this,e,t),this},addMultiple(e){for(var t=0,s=e.length;t<s;t++)Pl.call(this,e[t]);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):El.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):El.call(this,e,t),this},addLocalMultiple(e){for(var t=0,s=e.length;t<s;t++)El.call(this,e[t]);return this}},Rv=_n.prototype.remove,QL=_n.prototype.clear,jL={remove(e,t){return Xe(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),Rv.call(this,e,t),this)},unpin(e,t){return Xe(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),Rv.call(this,e,t),this)},clear(e){for(var t=this.children,s=0,h=t.length;s<h;s++){var y=t[s];this.setParent(y,null),e||this.removeFromRenderLayer(y)}return QL.call(this,e),this}},qL={getLocalState(e){return yt(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,s=e.length;t<s;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},_L={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),s=Math.sin(-this.rotation),h=e.x,y=e.y;return e.x=h*t-y*s,e.y=h*s+y*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),s=Math.sin(this.rotation),h=e.x,y=e.y;return e.x=h*t-y*s,e.y=h*s+y*t,e.x+=this.x,e.y+=this.y,e}};var kn=function(e,t){return e===t?1:e/t};const tO={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=yt(e),s=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,s.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+s.rotation),t.syncScale&&(e.scaleX=t.scaleX*s.scaleX,e.scaleY=t.scaleY*s.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=yt(e),s=t.parent;return t.x=e.x,t.y=e.y,s.worldToLocal(t),t.scaleX=kn(e.scaleX,s.scaleX),t.scaleY=kn(e.scaleY,s.scaleY),t.rotation=e.rotation-s.rotation,this},setChildPosition(e,t,s){return e.x=t,e.y=s,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,s){var h=yt(e);return h.x=t,h.y=s,this.updateChildPosition(e),this},resetLocalPositionState(){var e=yt(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=yt(e);return t.x},getChildLocalY(e){var t=yt(e);return t.y}},eO=Phaser.Math.DegToRad,iO={updateChildRotation(e){var t=yt(e),s=t.parent;return t.syncRotation&&(e.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=yt(e),s=t.parent;return t.rotation=e.rotation-s.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var s=yt(e);return s.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var s=yt(e);return s.rotation=eO(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=yt(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=yt(e);return t.rotation}},sO={updateChildScale(e){var t=yt(e),s=t.parent;return t.syncScale&&(e.scaleX=s.scaleX*t.scaleX,e.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=yt(e),s=t.parent;return t.scaleX=kn(e.scaleX,s.scaleX),t.scaleY=kn(e.scaleY,s.scaleY),this},setChildScale(e,t,s){return s===void 0&&(s=t),e.scaleX=t,e.scaleY=s,this.resetChildScaleState(e),this},setChildLocalScale(e,t,s){s===void 0&&(s=t);var h=yt(e);return h.scaleX=t,h.scaleY=s,this.updateChildScale(e),this},setChildDisplaySize(e,t,s){return e.setDisplaySize(t,s),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=yt(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=yt(e);return t.scaleX},getChildLocalScaleY(e){var t=yt(e);return t.scaleY}},rO={updateChildVisible(e){var t=yt(e),s=t.parent,h=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,y=s?s.visible:!0;return e.visible=y&&t.visible&&h,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=yt(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var s=yt(e);return s.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var s=yt(e);return s.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=yt(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=yt(e);return t.visible}},nO={updateChildAlpha(e){var t=yt(e),s=t.parent;return t.syncAlpha&&(e.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=yt(e),s=t.parent;return t.alpha=kn(e.alpha,s.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var s=yt(e);return s.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=yt(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=yt(e);return t.alpha}},aO={updateChildActive(e){var t=yt(e),s=t.parent;return e.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=yt(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var s=yt(e);return s.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=yt(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=yt(e);return t.active}},hO={updateChildScrollFactor(e){var t=yt(e),s=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=s.scrollFactorX,e.scrollFactorY=s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},oO={updateCameraFilter(e){var t=yt(e),s=t.parent;return t.syncCameraFilter&&(e.cameraFilter=s.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},lO={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(s){s.clearMask&&s.clearMask(!1),s.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(s)}),e&&this.mask&&this.mask.destroy(),this}};var Ua=function(e){return e.filter(function(t){if(t.displayList)return!0;if(t.parentContainer)return!0})};const uO={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var s=this.getAllChildren(),h=0,y=s.length;h<y;h++)s[h].depth=e;return this},swapDepth(e){var t=this.depth,s=e.depth;return this.setDepth(s),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),s=0,h=t.length;s<h;s++)t[s].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Qe(t,!1);for(var s=0,h=t.length;s<h;s++){var y=t[s];e.exists(y)&&e.bringToTop(y)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Qe(t,!0);for(var s=0,h=t.length;s<h;s++){var y=t[s];e.exists(y)&&e.sendToBack(y)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);Qe(s,!1);for(var h=0,y=s.length;h<y;h++){var S=s[h];if(t.exists(S)){t.moveBelow(e,S);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);Qe(s,!0);for(var h=0,y=s.length;h<y;h++){var S=s[h];if(t.exists(S)){t.moveAbove(e,S);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e.isRexContainerLite?(t=e.getAllChildren([e]),t=Ua(t),t=Qe(t,!1)):t=[e];var s=this.getAllChildren([this]);s=Ua(s),s=Qe(s,!1);for(var h=s[s.length-1],y=0,S=t.length;y<S;y++){var r=t[y];h===r||h.displayList!==r.displayList||(h.displayList.moveAbove(r,h),h=r)}return this},sendChildToBack(e){var t;e.isRexContainerLite?(t=e.getAllChildren([e]),t=Ua(t),t=Qe(t,!1)):t=[e];var s=this.getAllChildren([this]);s=Ua(s),s=Qe(s,!1);for(var h=s[0],y=t.length-1;y>=0;y--){var S=t[y];h===S||h.displayList!==S.displayList||(h.displayList.moveBelow(S,h),h=S)}return this}};var Nm=function(e,t){var s=t(e);if(!s&&e.isRexContainerLite)for(var h=e.children,y=0,S=h.length;y<S;y++)Nm(h[y],t)},Ml=function(e,t){for(var s=[e];s.length>0;){var h=s.shift(),y=t(h);!y&&h.isRexContainerLite&&s.push(...h.children)}};const Ds=Phaser.Utils.Array,dO={getChildren(e){if(!e)e=this.children;else for(var t=0,s=this.children.length;t<s;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return Ml(t,function(s){s!==t&&e.push(s)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return Ml(t,function(s){if(s!==t){if(!s.visible)return!0;e.push(s)}}),e},bfs(e,t){return t===void 0&&(t=this),Ml(t,e),this},dfs(e,t){return t===void 0&&(t=this),Nm(t,e),this},contains(e){var t=Xe(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var s=[this],h,y;s.length;){h=s.shift();for(var S=0,r=h.children.length;S<r;S++){if(y=h.children[S],y.name===e)return y;y.isRexContainerLite&&s.push(y)}}return null}else return Ds.GetFirst(this.children,"name",e)},getRandom(e,t){return Ds.GetRandom(this.children,e,t)},getFirst(e,t,s,h){return Ds.GetFirstElement(this.children,e,t,s,h)},getAll(e,t,s,h){return Ds.GetAll(this.children,e,t,s,h)},count(e,t,s,h){return Ds.CountAllMatching(this.children,e,t,s,h)},swap(e,t){return Ds.Swap(this.children,e,t),this},setAll(e,t,s,h){return Ds.SetAll(this.children,e,t,s,h),this}};var Av=function(e){for(var t=[],s=0,h=e.length;s<h;s++){var y=e[s];!y.hasOwnProperty("rexContainer")||t.push(y.rexContainer)}return t},fO=function(e){for(var t=0,s=e.length;t<s;t++){var h=e[t].scene;if(h)return h}return null},Lv=function(e,t,s){if(!s.parent){e.remove();return}var h=s.parent,y=s.self;switch(t){case"x":case"y":h.updateChildPosition(y);break;case"angle":case"rotation":h.updateChildRotation(y);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":h.updateChildScale(y);break;case"alpha":h.updateChildAlpha(y);break;default:h.updateChildPosition(y),h.updateChildRotation(y),h.updateChildScale(y),h.updateChildAlpha(y);break}};const cO={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var s=this.scene||fO(t);if(!!s){e.targets=Av(t);var h=s.tweens.add(e);return h.on("update",Lv),h}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=Av(t));var s=e.onUpdate;return e.onUpdate=function(h,y){s&&s(h,y),Lv(h,void 0,y)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}},vO=Phaser.GameObjects.Container;var pO=function(e){return e instanceof vO},zm=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(s){return!!s.displayList||!!s.parentContainer}),t},Ov=function(e){var t=zm(this);t.indexOf(this)===-1&&t.push(this),Qe(t),e.add(t)},Fv=function(e,t,s){if(!!this.scene){var h=zm(this);Qe(h,t),e.remove(h),s&&h.forEach(function(y){y.addToDisplayList()})}};const gO={addToContainer(e){return pO(e)?(this._setParentContainerFlag=!0,Ov.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return bn(e)?(Ov.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,Fv.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),bn(this.displayList)?(Fv.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(bn(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}},mO={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var s=yt(e);return s.layer=t,this},removeFromRenderLayer(e){var t=yt(e),s=t.layer;return s?(e.isRexContainerLite?e.removeFromLayer(!0):s.remove(e),t.layer=null,this):this}},bv=Phaser.Geom.Rectangle,xO=Phaser.Geom.Rectangle.Union;var yO=function(e,t){t===void 0?t=new bv:t===!0&&(wl===void 0&&(wl=new bv),t=wl),t.setTo(0,0,0,0);for(var s,h=!0,y=0,S=e.length;y<S;y++)if(s=e[y],!!s.getBounds){var r=Cd(s,!0);h?(t.setTo(r.x,r.y,r.width,r.height),h=!1):xO(r,t,t)}return t},wl,Is=Phaser.Utils.Objects.GetValue,Id=function(e){if(!!e){var t=e.gameObjects,s=e.renderTexture,h=e.saveTexture,y=Is(e,"x",void 0),S=Is(e,"y",void 0),r=Is(e,"width",void 0),T=Is(e,"height",void 0),i=Is(e,"originX",0),d=Is(e,"originY",0),x=Is(e,"padding",0),f,o;if(r===void 0||T===void 0||y===void 0||S===void 0){var a=yO(t,!0),n=y!==void 0&&S!==void 0;n?(r=Math.max(y-a.left,a.right-y)*2,T=Math.max(S-a.top,a.bottom-S)*2,i=.5,d=.5):(y=a.x,S=a.y,r=a.width,T=a.height,i=0,d=0),f=a.x,o=a.y}else f=y+(0-i)*r,o=S+(0-d)*T;f-=x,o-=x,r+=x*2,T+=x*2;var u=t[0].scene,c=u.sys.textures;return h&&!s&&(s=c.addDynamicTexture(h,r,T)),s||(s=u.add.renderTexture(0,0,r,T)),s.setPosition&&s.setPosition(y,S),(s.width!==r||s.height!==T)&&s.setSize(r,T),s.setOrigin&&s.setOrigin(i,d),s.camera.setScroll(f,o),t=Qe(Ri(t)),s.draw(t),h&&(De(s)?s.saveTexture(h):s.key!==h&&c.renameTexture(s.key,key)),s}};const CO={snapshot(e){var t=this.scaleX,s=this.scaleY,h=t===1&&s===1;h||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var y=Id(e),S=!!y.scene;return h||(this.setScale(t,s),S&&y.setScale(t,s)),S?y:this}},Dv=Phaser.Utils.Objects.GetValue;var TO=function(e,t){var s=Dv(t,"drawContainer",!0),h=Dv(t,"children");return h===void 0&&(h=this.getAllVisibleChildren([this])),s||(h=h.filter(function(y){return!y.isRexContainerLite})),X0(h,e,t),this};const SO=Phaser.Math.RotateAround;var PO=function(e,t,s){s===void 0&&(s=t);var h={x:(t-e.originX)*e.displayWidth,y:(s-e.originY)*e.displayHeight};return SO(h,0,0,e.rotation),e.originX=t,e.originY=s,e.x=e.x+h.x,e.y=e.y+h.y,e},EO=function(e,t){this.syncChildrenEnable=!1,PO(this,e,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),h=0,y=s.length;h<y;h++)this.resetChildPositionState(s[h]);return this},Vm={changeOrigin:EO,drawBounds:TO};Object.assign(Vm,ZL,JL,jL,qL,_L,tO,iO,sO,rO,nO,aO,hO,oO,lO,uO,dO,cO,gO,mO,CO);class We extends _n{constructor(t,s,h,y,S,r){Array.isArray(y)&&(r=y,y=void 0,S=void 0),super(t,s,h,y,S),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,r&&this.add(r)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return Xe(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Xe(this);return t?t.setParentContainerFlag:!1}}Object.assign(We.prototype,Vm);var fo=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function MO(e){return e===void 0&&(e=this),fo(e)}var wO=function(e){var t=fo(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},RO=function(e){return e===void 0&&(e=Jr(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const Wt=Phaser.Display.Align,qr={center:Wt.CENTER,left:Wt.LEFT_CENTER,right:Wt.RIGHT_CENTER,top:Wt.TOP_CENTER,bottom:Wt.BOTTOM_CENTER,"left-top":Wt.TOP_LEFT,"top-left":Wt.TOP_LEFT,"left-center":Wt.LEFT_CENTER,"center-left":Wt.LEFT_CENTER,"left-bottom":Wt.BOTTOM_LEFT,"bottom-left":Wt.BOTTOM_LEFT,"center-top":Wt.TOP_CENTER,"top-center":Wt.TOP_CENTER,"center-center":Wt.CENTER,"center-bottom":Wt.BOTTOM_CENTER,"bottom-center":Wt.BOTTOM_CENTER,"right-top":Wt.TOP_RIGHT,"top-right":Wt.TOP_RIGHT,"right-center":Wt.RIGHT_CENTER,"center-right":Wt.RIGHT_CENTER,"right-bottom":Wt.BOTTOM_RIGHT,"bottom-right":Wt.BOTTOM_RIGHT};var Ku=new Phaser.GameObjects.Zone({sys:{queueDepthSort:te,events:{once:te}}},0,0,1,1);Ku.setOrigin(0);var Ji={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Bd=function(e){var t=Ot(e);return e.y+t-t*e.originY},Gd=function(e){var t=Lt(e);return e.x-t*e.originX+t*.5},Nd=function(e,t){var s=Ot(e);return e.y=t-s+s*e.originY,e},zd=function(e,t){var s=Lt(e),h=s*e.originX;return e.x=t+h-s*.5,e},AO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),zd(e,Gd(t)+s),Nd(e,Bd(t)+h),e},Vd=function(e){var t=Lt(e);return e.x-t*e.originX},kd=function(e,t){var s=Lt(e);return e.x=t+s*e.originX,e},LO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),kd(e,Vd(t)-s),Nd(e,Bd(t)+h),e},Xd=function(e){var t=Lt(e);return e.x+t-t*e.originX},Wd=function(e,t){var s=Lt(e);return e.x=t-s+s*e.originX,e},OO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),Wd(e,Xd(t)+s),Nd(e,Bd(t)+h),e},Yd=function(e,t){var s=Ot(e),h=s*e.originY;return e.y=t+h-s*.5,e},FO=function(e,t,s){return zd(e,t),Yd(e,s)},Ud=function(e){var t=Ot(e);return e.y-t*e.originY+t*.5},bO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),FO(e,Gd(t)+s,Ud(t)+h),e},DO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),kd(e,Vd(t)-s),Yd(e,Ud(t)+h),e},IO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),Wd(e,Xd(t)+s),Yd(e,Ud(t)+h),e},Hd=function(e){var t=Ot(e);return e.y-t*e.originY},$d=function(e,t){var s=Ot(e);return e.y=t+s*e.originY,e},BO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),zd(e,Gd(t)+s),$d(e,Hd(t)-h),e},GO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),kd(e,Vd(t)-s),$d(e,Hd(t)-h),e},NO=function(e,t,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),Wd(e,Xd(t)+s),$d(e,Hd(t)-h),e},Fi=[];Fi[Ji.BOTTOM_CENTER]=AO;Fi[Ji.BOTTOM_LEFT]=LO;Fi[Ji.BOTTOM_RIGHT]=OO;Fi[Ji.CENTER]=bO;Fi[Ji.LEFT_CENTER]=DO;Fi[Ji.RIGHT_CENTER]=IO;Fi[Ji.TOP_CENTER]=BO;Fi[Ji.TOP_LEFT]=GO;Fi[Ji.TOP_RIGHT]=NO;var km=function(e,t,s,h,y){return Fi[s](e,t,h,y)},ta=function(e,t,s,h,y,S){Ku.setPosition(t,s).setSize(h,y),km(e,Ku,S)};const yr=Phaser.Utils.Objects.GetValue,zO=Phaser.GameObjects.Group;var VO=function(e,t){var s=e.scene,h,y,S,r,T;if(typeof t=="number")h=t;else{h=yr(t,"color"),y=yr(t,"lineWidth");var i=yr(t,"name",!1);i&&(S=yr(i,"createTextCallback",kO),r=yr(i,"createTextCallbackScope",void 0),T=yr(i,"align","left-top"),typeof T=="string"&&(T=qr[T]))}if(h===void 0&&(h=16777215),y===void 0&&(y=1),S&&!e.children){e.children=new zO(s),e.once("destroy",function(u,c){u.children.destroy(!c),u.children=void 0});var d=e.clear.bind(e);e.clear=function(){d(),e.children.clear(!1,!0)}}for(var x=this.getAllShownChildren([this]),f,o,a=0,n=x.length;a<n;a++){if(f=x[a],f.getBounds||f.width!==void 0&&f.height!==void 0)Bs=Cd(f,Bs);else continue;h!=null&&e.lineStyle(y,h).strokeRectShape(Bs),f.name&&S&&(r?o=S.call(r,s):o=S(s),o&&(o.setText(f.name),e.children.add(o),ta(o,Bs.x,Bs.y,Bs.width,Bs.height,T)))}return this},kO=function(e,t,s){return e.add.text(0,0,"")},Bs=void 0;const Ha=Phaser.Utils.Objects.GetValue;var ys=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Ha(e,"left",0),t.right=Ha(e,"right",0),t.top=Ha(e,"top",0),t.bottom=Ha(e,"bottom",0)),t};const XO=We.prototype.add;var ea=function(e){return XO.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this};const WO={addBackground(e,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),ea.call(this,e),this.backgroundChildren.push(e);var h=this.getSizerConfig(e);return h.padding=ys(t),s!==void 0&&this.addChildrenMap(s,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}};var ms=function(e,t){var s=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent,s?s.isRexSizer||(s=ms(s)):s=null);else for(s=ms(e);s&&s.name!==t;)s=ms(s);return s},YO=function(e){for(var t=ms(e);t;)e=t,t=ms(t);return e};const _r={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),ms(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),YO(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var s=ms(t);s;){if(s===e)return!0;s=ms(s)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}},UO=Phaser.Utils.Array.Remove,HO=We.prototype.remove,Iv=_r.getParentSizer;var ia=function(e,t){for(var s=Iv(e);s;)s.removeChildCallback&&s.removeChildCallback(e,t),s=Iv(s);return this.isBackground(e)&&UO(this.backgroundChildren,e),HO.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const $O=Phaser.Utils.Array.Remove,KO=_r.getParentSizer,ZO={removeFromParentSizer(){var e=KO(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:($O(this.backgroundChildren,e),ia.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}};var Bv=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var s=e;for(e in s)this.childrenMap[e]=s[e]}return this},JO=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},QO=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var s=e.shift(),h=null;if(s.charAt(0)==="#")s=s.substring(1),h=this.getByName(s,t);else if(e.length===0&&t){var y=this.childrenMap;if(y)for(var S=[y],r;S.length;){y=S.shift();for(var T in y)if(r=y[T],T===s){h=r;break}else r&&typeof r=="object"&&r.childrenMap&&S.push(r.childrenMap);if(h)break}}else if(s.indexOf("[")===-1)this.childrenMap&&(h=this.childrenMap[s]);else{var i=s.match(jO);if(i!=null&&this.childrenMap){var d=this.childrenMap[i[1]];d&&(h=d[i[2]])}}return e.length===0?h:h&&h.childrenMap?h.getElement(e):null}};const jO=/(\S+)\[(\d+)\]/i;var qO=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var s in this.sizerChildren)if(this.sizerChildre[s]===e)return s;return null}};const _O={getInnerPadding(e){return Ah(this.space,e)},setInnerPadding(e,t){return gs(this.space,e,t),this},getOuterPadding(e){return Ah(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return gs(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),Ah(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,s){return typeof e=="string"&&(e=this.getElement(e)),gs(this.getSizerConfig(e).padding,t,s),this}};var Kd=function(e){var t=this.childrenWidth;if(t!==void 0){var s=this.minWidth!==void 0?this.minWidth:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) or childrenWidth (${t} > targetWidth ${e})`),e}},Zd=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},tF=function(e){var t,s,h;for(var y in this.sizerChildren)t=this.sizerChildren[y],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,e),h=t.resolveWidth(s),h===void 0&&(h=s),t.resolveChildrenWidth(h))},Jd=function(e){var t,s,h;for(var y in this.sizerChildren)t=this.sizerChildren[y],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,e),t.isRexSizer?(h=t.resolveWidth(s),h===void 0&&(h=s)):h=s,t.runWidthWrap(h));return this},Qd=function(e){var t=this.childrenHeight;if(t!==void 0){var s=this.minHeight!==void 0?this.minHeight:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) or childrenHeight (${t}) > targetHeight (${e})`),e}},jd=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},eF=function(e){var t,s,h;for(var y in this.sizerChildren)t=this.sizerChildren[y],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildHeight(t,e),h=t.resolveHeight(s),h===void 0&&(h=s),t.resolveChildrenHeight(h))},qd=function(e){var t,s,h;for(var y in this.sizerChildren)t=this.sizerChildren[y],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(s=this.getExpandedChildHeight(t,e),t.isRexSizer?(h=t.resolveHeight(s),h===void 0&&(h=s)):h=s,t.runHeightWrap(h));return this},iF=function(e){var t;if(e.isRexSizer){var s=e.childrenWidth;if(s==null)return;t=Math.max(e.minWidth,s)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=Lt(e);return t},sF=function(e){var t;if(e.isRexSizer){var s=e.childrenHeight;if(s===void 0)return;t=Math.max(e.minHeight,s)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=Ot(e);return t},rF=function(e,t){return t},nF=function(e,t){return t},aF=function(){return 0},hF=function(){return 0},oF=function(e){e===void 0&&(e=[]);for(var t=e.length,s=this.getChildrenSizers(e),h=e.length,y=t;y<h;y++)s[y].getAllChildrenSizers(e);return e},lF=function(e){return e===void 0&&(e=[]),e};const uF={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,s,h=0,y=t.length;h<y;h++)s=t[h],!(s.rexSizer&&s.rexSizer.hidden)&&e.push(s);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&e.push(s),s.isRexContainerLite&&t.push(...s.children))}return e}};var sa=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,s=0,h=e.length;s<h;s++)t=e[s],!t.ignoreLayout&&t.preLayout()},dF=function(){if(this.ignoreLayout)return this;var e=this.scaleX,t=this.scaleY,s=e===1&&t===1;return s||this.setScale(1),this.runLayout(),s||this.setScale(e,t),this},fF=function(e,t,s){if(this.ignoreLayout)return this;var h=!e;h&&this.preLayout();var y,S,r,T=h&&this.hasWidthWrap(),i=h&&this.hasHeightWrap();return y=cF(this,t,s,T,i),y||console.error("Can't resolve size of ",this),S=y.width,r=y.height,this.resize(S,r),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(),h&&this._postLayout(),this},cF=function(e,t,s,h,y){var S=Gv(e,t,h),r=vF(e,s,y);return S===void 0&&(S=Gv(e,t,h)),S!==void 0&&r!==void 0?{width:S,height:r}:!1},Gv=function(e,h,s){var h=e.resolveWidth(h);return h!==void 0&&s&&(e.resolveChildrenWidth(h),e.runWidthWrap(h)),h},vF=function(e,h,s){var h=e.resolveHeight(h);return h!==void 0&&s&&(e.resolveChildrenHeight(h),e.runHeightWrap(h)),h},pF=function(){},gF=function(e,t,s){return this._anchor&&this._anchor.updatePosition(),this},mF=function(e,t,s){return this},xF=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,s=Nv.length;t<s;t++){var h=Nv[t];if(h&&e instanceof h)return!1}return!0},Nv=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],yF=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,s=zv.length;t<s;t++){var h=zv[t];if(h&&e instanceof h)return!1}return!0},zv=[Phaser.GameObjects.BitmapText],Se=function(e,t,s){if(!(!e||t===void 0&&s===void 0))if(xF(e))t===void 0&&(t=e.width),s===void 0&&(s=e.height),e.resize?e.resize(t,s):e.setSize(t,s);else{var h=yF(e);t!==void 0&&(h?e.displayWidth=t:e.scaleX=t/e.width),s!==void 0&&(h?e.displayHeight=s:e.scaleY=s/e.height)}},CF=function(e,t,s,h){Se(s,e,t)};const $a=Phaser.Utils.Objects.GetValue;class _d extends Gt{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,h;t.x!==void 0?(s=null,h=t.x):t.left!==void 0?(s=0,h=t.left):t.right!==void 0?(s=1,h=t.right):t.centerX!==void 0&&(s=.5,h=t.centerX);var y,S;t.y!==void 0?(y=null,S=t.y):t.top!==void 0?(y=0,S=t.top):t.bottom!==void 0?(y=1,S=t.bottom):t.centerY!==void 0&&(y=.5,S=t.centerY);var r,T;h!==void 0&&(h=h.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),r=parseFloat(h[0])/100,T=h[1]===""?0:parseFloat(h[1]));var i,d;S!==void 0&&(S=S.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),i=parseFloat(S[0])/100,d=S[1]===""?0:parseFloat(S[1]));var x=t.width,f,o;x!==void 0&&(x=x.split("%"),f=parseFloat(x[0])/100,o=x[1]===""?0:parseFloat(x[1]));var a=t.height,n,u;a!==void 0&&(a=a.split("%"),n=parseFloat(a[0])/100,u=a[1]===""?0:parseFloat(a[1])),this.setAlign(s,y),this.setPercentage(r,i),this.setOffset(T,d),this.setSizePercentage(f,n),this.setSizePadding(o,u);var c=$a(t,"onResizeCallback",CF),l=$a(t,"onResizeCallbackScope");this.setResizeCallback(c,l);var v=$a(t,"onUpdateViewportCallback"),p=$a(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(v,p),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,h=this.anchorWidth,y=this.anchorHeight;if(!(h===void 0&&y===void 0||!t)){var S=this.parent;h===void 0&&(h=S.width),y===void 0&&(y=S.height),s?t.call(s,h,y,S,this):t(h,y,S,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Jr(this.scene,t,this.viewport);var s=this.viewport,h=this.onUpdateViewportCallback,y=this.onUpdateViewportCallbackScope;h&&(y?h.call(y,s,this.parent,this):h(s,this.parent,this))}}var TF=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),h=e.hasOwnProperty("onResizeCallback");return(t||s)&&!h&&(e.onResizeCallback=function(y,S,r){t&&r.setMinWidth(y),s&&r.setMinHeight(S),r.layout()}),this._anchor===void 0?this._anchor=new _d(this,e):this._anchor.resetFromJSON(e),this};const SF=Phaser.Utils.Objects.GetValue,Cr=Phaser.Utils.Objects.GetAdvancedValue,Vv=Phaser.Math.Linear;class Xn extends ir{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(SF(t,"mode",0)),this.setScaleRange(Cr(t,"start",void 0),Cr(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=PF[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Cr(t,"x",this.parent.scaleX),this.startY=Cr(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=Cr(s,"x",void 0),this.endY=Cr(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateTarget(t,s){var h=s.t;s.isOddIteration&&(h=1-h),h=this.easeFn(h),this.hasScaleX&&(t.scaleX=Vv(this.startX,this.endX,h)),this.hasScaleY&&(t.scaleY=Vv(this.startY,this.endY,h))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const PF={stop:0,destroy:1,yoyo:2};var tf=function(e,t,s,h,y){h===void 0&&(h="Cubic");var S,r;switch(s){case 0:case"x":S={x:0},r={x:e.scaleX};break;case 1:case"y":S={y:0},r={y:e.scaleY};break;default:S=0,r=e.scale;break}var T={mode:0,start:S,end:r,duration:t,ease:h};return y===void 0?y=new Xn(e,T):y.resetFromJSON(T),y.restart(),y},Xm=function(e,t,s,h,y,S){h===void 0&&(h="Linear"),y instanceof Xn&&(S=y,y=void 0),y===void 0&&(y=!0);var r={};switch(r.mode=y?1:0,s){case 0:case"x":r.end={x:0};break;case 1:case"y":r.end={y:0};break;default:r.end=0;break}return r.duration=t,r.ease=h,S===void 0?S=new Xn(e,r):S.resetFromJSON(r),S.restart(),S},EF=function(e,t,s,h,y,S,r){s===void 0&&(s=1.2),h===void 0&&(h=0),S===void 0&&(S="Cubic");var T,i;switch(y){case 0:case"x":T={x:e.scaleX},i={x:s};break;case 1:case"y":T={y:e.scaleX},i={y:s};break;default:T=e.scaleX,i=s;break}var d={mode:2,start:T,end:i,duration:t/2,ease:S,repeat:h};return r===void 0?r=new Xn(e,d):r.resetFromJSON(d),r.restart(),r};const Rl=Phaser.Utils.Objects.IsPlainObject,Wm={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,s){if(Rl(e)){var h=e;e=h.duration,t=h.orientation,s=h.ease}var y=this._scaleBehavior===void 0;return this._scaleBehavior=tf(this,e,t,s,this._scaleBehavior),y&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,s){return this.popUp(e,t,s),de(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,s,h){if(Rl(e)){var y=e;e=y.duration,t=y.orientation,s=y.ease,h=y.destroy}var S=this._scaleBehavior===void 0;return this._scaleBehavior=Xm(this,e,t,s,h,this._scaleBehavior),S&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,s,h){return this.scaleDownDestroy(e,t,s,h),de(this._scaleBehavior)},scaleDown(e,t,s){return this.scaleDownDestroy(e,t,s,!1),this},scaleDownPromise(e,t,s){return this.scaleDown(e,t,s),de(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,s,h,y){if(Rl(e)){var S=e;e=S.duration,t=S.peakValue,s=S.repeat,h=S.orientation,y=S.ease}var r=this._scaleBehavior===void 0;return this._scaleBehavior=EF(this,e,t,s,h,y,this._scaleBehavior),r&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,s,h,y){return this.scaleYoyo(e,t,s,h,y),de(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}};var ki={};Object.assign(ki,Wm);ki.onInitScale=function(){Wm.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var s=_r.getParentSizer(e);s&&s.resetChildPositionState(e)})};const MF=Phaser.Utils.Objects.GetValue,kv=Phaser.Utils.Objects.GetAdvancedValue,wF=Phaser.Math.Linear;class Zu extends ir{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(MF(t,"mode",0)),this.setAlphaRange(kv(t,"start",this.parent.alpha),kv(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=RF[t]),this.mode=t,this}setAlphaRange(t,s){return this.alphaStart=t,this.alphaEnd=s,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,s){var h=s.t;s.isOddIteration&&(h=1-h),t.alpha=wF(this.alphaStart,this.alphaEnd,h)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const RF={stop:0,destroy:1,yoyo:2},AF=Phaser.Utils.Objects.IsPlainObject;var co=function(e,t,s,h){var y,S;AF(s)?(y=s.start,S=s.end):S=s,y===void 0&&(y=0),S===void 0&&(S=1);var r={mode:0,start:y,end:S,duration:t};return h===void 0?h=new Zu(e,r):h.resetFromJSON(r),h.restart(),h},vo=function(e,t,s,h){s instanceof Zu&&(h=s,s=void 0),s===void 0&&(s=!0);var y={mode:s?1:0,end:0,duration:t};return h===void 0?h=new Zu(e,y):h.resetFromJSON(y),h.restart(),h};const Xv=Phaser.Utils.Objects.IsPlainObject,Ym={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(Xv(e)){var s=e;e=s.duration,t=s.alpha}var h=this._fade===void 0;return this._fade=co(this,e,t,this._fade),h&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),de(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(Xv(e)){var s=e;e=s.duration,t=s.destroy}var h=this._fade===void 0;return this._fade=vo(this,e,t,this._fade),h&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),de(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),de(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}};var Wn={};Object.assign(Wn,Ym);Wn.onInitFade=function(){Ym.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var s=_r.getParentSizer(e);s&&s.resetChildAlphaState(e)})};const LF=Phaser.Utils.Objects.GetValue,Tr=Phaser.Utils.Objects.GetAdvancedValue,Wv=Phaser.Math.Linear;class kh extends ir{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(LF(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=Tr(t,"x",void 0),h=Tr(t,"y",void 0);this.setTargetPosition(s,h)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=OF[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var h=t;this.startX=Tr(h,"startX",void 0),this.startY=Tr(h,"startY",void 0),this.endX=Tr(h,"endX",void 0),this.endY=Tr(h,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,s){var h=s.t;s.isOddIteration&&(h=1-h),h=this.easeFn(h),this.hasMoveX&&(t.x=Wv(this.startX,this.endX,h)),this.hasMoveY&&(t.y=Wv(this.startY,this.endY,h))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const OF={stop:0,destroy:1,yoyo:2};var Xh=function(e,t){if(typeof e=="number")return e;var s=e[0],h=parseFloat(e.substr(2));switch(s){case"+":return t+h;case"-":return t-h;case"*":return t*h;case"/":return t/h}},Um=function(e,t,s,h,y,S,r){S instanceof kh&&(r=S,S=void 0),S===void 0&&(S=!1);var T={};return T.mode=S?1:0,s!==void 0&&(T.startX=e.x,T.endX=Xh(s,e.x)),h!==void 0&&(T.startY=e.y,T.endY=Xh(h,e.y)),T.duration=t,T.ease=y===void 0?"Linear":y,r===void 0?r=new kh(e,T):r.resetFromJSON(T),r.restart(),r},Hm=function(e,t,s,h,y,S,r){S instanceof kh&&(r=S,S=void 0),S===void 0&&(S=!1);var T={};return T.mode=S?1:0,s!==void 0&&(T.startX=Xh(s,e.x),T.endX=e.x),h!==void 0&&(T.startY=Xh(h,e.y),T.endY=e.y),T.duration=t,T.ease=y===void 0?"Linear":y,r===void 0?r=new kh(e,T):r.resetFromJSON(T),r.restart(),r};const Yv=Phaser.Utils.Objects.IsPlainObject,Uv=Phaser.Math.Distance.Between,$m={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,s,h,y){if(Yv(e)){var S=e;t=S.x,s=S.y,S.hasOwnProperty("speed")?e=Uv(t,s,this.x,this.y)*1e3/S.speed:e=S.duration,h=S.ease}var r=this._easeMove===void 0;return this._easeMove=Hm(this,e,t,s,h,y,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,s,h,y){return this.moveFrom(e,t,s,h,y),de(this._easeMove)},moveFromDestroy(e,t,s,h){return this.moveFrom(e,t,s,h,!0),this},moveFromDestroyPromise(e,t,s,h){return this.moveFromDestroy(e,t,s,h),de(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,s,h,y){if(Yv(e)){var S=e;t=S.x,s=S.y,S.hasOwnProperty("speed")?e=Uv(t,s,this.x,this.y)*1e3/S.speed:e=S.duration,h=S.ease}var r=this._easeMove===void 0;return this._easeMove=Um(this,e,t,s,h,y,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,s,h,y){return this.moveTo(e,t,s,h,y),de(this._easeMove)},moveToDestroy(e,t,s,h){return this.moveTo(e,t,s,h,!0),this},moveToDestroyPromise(e,t,s,h){return this.moveToDestroy(e,t,s,h,!0),de(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}};var po={};Object.assign(po,$m);po.onInitEaseMove=function(){$m.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var s=_r.getParentSizer(e);s&&s.resetChildPositionState(e)})};const $e=Phaser.Utils.Objects.GetValue;class ef extends no{constructor(t,s){super(t,s),this.timer=new J0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON($e(t,"timer")),this.setEnable($e(t,"enable",!0)),this.setMode($e(t,"mode",1)),this.isRunning=$e(t,"isRunning",!1),this.setMagnitudeMode($e(t,"magnitudeMode",1)),this.setAxisMode($e(t,"axis",0)),this.setDuration($e(t,"duration",500)),this.setMagnitude($e(t,"magnitude",10)),this.ox=$e(t,"ox",void 0),this.oy=$e(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=FF[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=DF[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=bF[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var h=t;s=$e(h,"magnitude",void 0),t=$e(h,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var h=this.parent;if(!h.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=h.x,this.oy=h.y);var y=this.magnitude;this.magnitudeMode===1&&(y*=1-this.timer.t);var S=Math.random()*Math.PI*2,r=this.ox+Math.cos(S)*y,T=this.oy+Math.sin(S)*y;switch(this.axisMode){case 1:h.x=r;break;case 2:h.y=T;break;default:h.x=r,h.y=T;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const FF={effect:0,behavior:1},bF={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},DF={constant:0,decay:1},IF=Phaser.Utils.Objects.IsPlainObject;var BF=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})};const GF={shake(e,t,s){if(IF(e)){var h=e;e=h.duration,t=h.magnitude,s=h.magnitudeMode}return this._shake===void 0&&(this._shake=new ef(this,{mode:0,magnitudeMode:1}),BF(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),de(this._shake)}},Hv=Phaser.Utils.Objects.IsPlainObject;class NF extends Gt{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new Ki(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,h,y){if(Hv(t)){var S=t;t=S.key,s=S.value,h=S.duration,y=S.ease;var r=S.speed;h===void 0&&r!==void 0&&(h=Math.abs(s-this.parent.data.values[t])/r*1e3)}h===void 0&&(h=1e3),y===void 0&&(y="Linear");var T=this.getEaseTask(t);return T.restart({key:t,to:s,duration:h,ease:y}),this}easeFrom(t,s,h,y){if(Hv(t)){var S=t;t=S.key,s=S.value,h=S.duration,y=S.ease;var r=S.speed;h===void 0&&r!==void 0&&(h=Math.abs(s-this.parent.data.values[t])/r*1e3)}h===void 0&&(h=1e3),y===void 0&&(y="Linear");var T=this.getEaseTask(t);return T.restart({key:t,from:s,duration:h,ease:y}),this}stopEase(t,s){s===void 0&&(s=!0);var h=this.easeTasks[t];return h&&h.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var zF=function(e,t){t.on("complete",function(s){e.emit(`easedata.${s}.complete`,e),e.emit("easedata.complete",s,e)})};const VF={easeDataTo(e,t,s,h){return this._easeData||(this._easeData=new NF(this),zF(this,this._easeData)),this._easeData.easeTo(e,t,s,h),this},easeDataToPromise(e,t,s,h){return this.easeDataTo(e,t,s,h),ho(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}};var kF=Phaser.Utils.Array.Remove,XF=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,s=0,h=t.length;s<h;s++)t[s].remove();e._delayCallTimers=void 0})};const Km={delayCall(e,t,s){var h=this._delayCallTimers;h===void 0&&XF(this);var y,S=this,r=function(){kF(S._delayCallTimers,y),s?t.call(s):t()};return y=this.scene.time.delayedCall(e,r),this._delayCallTimers.push(y),this}};var cs=function(e){Zm(e,!1)},vs=function(e){Zm(e,!0)},sf=function(e){if(!e)return!1;var t=fo(e);return!t.hidden},Zm=function(e,t){if(!!e){var s=fo(e);s.hidden=t;var h=Xe(e);h?h.setChildVisible(e,!t):e.setVisible(!t)}};const WF={show(e){return e===void 0&&(e=this),cs(e),this},hide(e){return e===void 0&&(e=this),vs(e),this},isShow(e){return e===void 0&&(e=this),sf(e)}},YF=["next","exit","enter"];class Jm{constructor(t){var s=wt(t,"states",void 0);s&&this.addStates(s);var h=wt(t,"extend",void 0);if(h)for(var y in h)(!this.hasOwnProperty(y)||this[y]===void 0)&&(this[y]=h[y]);var S=wt(t,"eventEmitter",void 0),r=wt(t,"EventEmitterClass",void 0);this.setEventEmitter(S,r),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(wt(t,"enable",!0)),this.start(wt(t,"start",void 0));var s=wt(t,"init",void 0);return s&&s.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var s="exit_"+this._prevState,h=this[s];h&&h.call(this),this.emit(s,this)}if(this._stateLock=!1,this._state!=null){var y="enter_"+this._state,S=this[y];S&&S.call(this),this.emit(y,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,s=this["next_"+this.state];return s&&(typeof s=="string"?t=s:t=s.call(this)),this.goto(t),this}get stateProperties(){return YF}addState(t,s){typeof t!="string"&&(s=t,t=s.name);for(var h=this.stateProperties,y=0,S=h.length;y<S;y++){var r=h[y],T=s[r];T&&(this[`${r}_${t}`]=T)}return this}addStates(t){if(Array.isArray(t))for(var s=0,h=t.length;s<h;s++)this.addState(t[s]);else for(var y in t)this.addState(y,t[y]);return this}runMethod(t,s,h,y,S,r){var T=this[t+"_"+this.state];if(!!T){var i=arguments.length;switch(i){case 1:return T.call(this);case 2:return T.call(this,s);case 3:return T.call(this,s,h);case 4:return T.call(this,s,h,y);case 5:return T.call(this,s,h,y,S);case 6:return T.call(this,s,h,y,S,r)}for(var d=new Array(i-1),x=1;x<i;x++)d[x-1]=arguments[x];return T.apply(this,d)}}}Object.assign(Jm.prototype,am);var Al=function(e,t,s,h,y){y===void 0&&(y=!1);var S=e._events[t];if(!S)return!1;for(var r=0,T=S.length;r<T;r++){var i=S[r];if(i.fn===s&&i.context===h&&i.once===y)return!0}return!1};const UF=["next","exit","enter","update","preupdate","postupdate"];class Qi extends Jm{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=wt(t,"scene",void 0),this}get stateProperties(){return UF}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return Al(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return Al(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return Al(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}class HF extends Qi{constructor(t,s){super(s),this.parent=t;var h=s.initState||"IDLE";this.start(h)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var s=t.runTransitionInCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var s=t.runTransitionOutCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}}var $F=function(e,t,s,h,y){var S=Qr(e),r=S.time.delayedCall(t,function(){S.game.events.once("poststep",function(){s.call(h,y)})});return r};const KF={delayCall(e,t,s){return this.delayCallTimer=$F(this,e,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},ZF={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=te),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=te),this.transitOutCallback=e,this}},JF={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},QF={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}};var Qm={};Object.assign(Qm,KF,ZF,JF,QF);const Sr=Phaser.Utils.Objects.GetValue;class go extends Gt{constructor(t,s){super(t,s),this.setTransitInTime(Sr(s,"duration.in",200)),this.setTransitOutTime(Sr(s,"duration.out",200)),this.setTransitInCallback(Sr(s,"transitIn")),this.setTransitOutCallback(Sr(s,"transitOut")),this.oneShotMode=Sr(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new HF(this,{eventEmitter:!1,initState:Sr(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(go.prototype,Qm);const jF=Phaser.GameObjects.Rectangle;class rf extends jF{constructor(t,s,h){super(t,0,0,2,2,s,1),this.fullWindow=new Cm(this),this.setAlpha(h)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const Ll=Phaser.Utils.Objects.GetValue;class mo extends Gt{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Ll(t,"hitAreaMode",0)),this.setEnable(Ll(t,"enable",!0)),this.setStopMode(Ll(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,h,y){this.stopAllLevels&&y.stopPropagation()},this).on("pointerup",function(t,s,h,y){this.stopAllLevels&&y.stopPropagation()},this).on("pointermove",function(t,s,h,y){this.stopAllLevels&&y.stopPropagation()},this).on("pointerover",function(t,s,h,y){this.stopAllLevels&&y.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=qF[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var qF={default:0,fullWindow:1};const $v=Phaser.Utils.Objects.GetValue;class nf extends rf{constructor(t,s){var h=$v(s,"color",0),y=$v(s,"alpha",.8);super(t,h,y),this.touchEventStop=new mo(this,{hitAreaMode:1})}}var _F=function(e,t){var s=e.scene,h=new nf(s,t);return s.add.existing(h),e.isRexContainerLite?(e.pin(h,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(h)):s.children.moveBelow(h,e),h};const Ka={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,tf(e,t)},scaleDown(e,t){Xm(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,co(e,t)},fadeOut(e,t){vo(e,t,!1)}};var t3=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,co(e,t,e.alpha)},e3=function(e,t){vo(e,t,!1)},Js=function(e,t,s,h,y){if(!e||h&&!h(e,t,s))return!1;var S=Cd(e,!0);return!(!S.contains(t,s)||y&&!y(e,t,s))};const vi=Phaser.Utils.Objects.GetValue;class i3 extends go{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=rs.popUp),s.transitOut==null&&(s.transitOut=rs.scaleDown),s.destroy=vi(s,"destroy",!0),super(t,s);var h=vi(s,"cover");this.cover=h!==!1?_F(t,h):void 0,this.cover&&(this.setCoverTransitInCallback(vi(h,"transitIn",t3)),this.setCoverTransitOutCallback(vi(h,"transitOut",e3)));var y=vi(s,"touchOutsideClose",!1),S=vi(s,"duration.hold",-1),r=vi(s,"timeOutClose",S>=0),T=vi(s,"anyTouchClose",!1),i=vi(s,"manualClose",!1);i&&(y=!1,T=!1,r=!1),T&&(y=!1),r?this.setDisplayTime(S):this.setDisplayTime(-1),T?this.once("open",this.anyTouchClose,this):y&&this.once("open",this.touchOutsideClose,this),vi(s,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Js(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),s=this.cover;return s&&this.coverTransitInCallback&&this.coverTransitInCallback(s,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),s=this.cover;return s&&this.coverTransitOutCallback&&this.coverTransitOutCallback(s,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=rs[t]),t){case rs.popUp:t=Ka.popUp;break;case rs.fadeIn:t=Ka.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=rs[t]),t){case rs.scaleDown:t=Ka.scaleDown;break;case rs.fadeOut:t=Ka.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}}const rs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var af=function(e,t){var s=new i3(e,t);return s.on("open",function(){e.emit("modal.open",s)}),s.on("close",function(h){e.emit("modal.close",h,s)}),e.on("modal.requestClose",s.requestClose,s),s},s3=function(e,t){var s=af(e,t);return new Promise(function(h,y){s.once("close",function(S){h(S)})})},jm=function(e,t){e.emit("modal.requestClose",t)},Hi=function(e){return e&&typeof e=="function"};const hf={modal(e,t){return Hi(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=af(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(s,h){t.modal(e,s)})},modalClose(e){return jm(this,e),this}};var Wh=function(e,t,s){var h=e.camera;return h?(s===void 0?s={}:s===!0&&(s=r3),h===t?(s.x=e.worldX,s.y=e.worldY):h.getWorldPoint(e.x,e.y,s),s):null},r3={},_s=function(e,t,s,h){var y=e.scene.sys.cameras.main,S,r=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return r?Js(e,t.x,t.y,s,h):(S=Wh(t,y,!0),S?Js(e,S.x,S.y,s,h):!1);for(var T=e.scene.input.manager,i=T.pointersTotal,d=T.pointers,x=0;x<i;x++)if(t=d[x],r){if(Js(e,t.x,t.y,s,h))return!0}else{if(S=Wh(t,y,!0),!S)continue;if(Js(e,S.x,S.y,s,h))return!0}return!1},n3=function(e,t){return(De(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),_s(t,e)},li=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Yh=function(e,t,s,h,y){return Js(e,t,s,a3(h),h3(y))},Kv=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},a3=function(e){return e?function(t,s,h){return Kv(t)?(e(t,s,h),!0):!1}:Kv},h3=function(e){return e},o3=function(e,t,s,h,y){if(Hi(s)||(y=s,s=void 0,h=void 0),y===void 0&&(this.sizerChildren?y=this.sizerChildren:y=this.children),li(y)){for(var S,r=0,T=y.length;r<T;r++)if(S=y[r],Yh(S,e,t,s,h))return S}else{var S;for(var i in y)if(S=y[i],Yh(S,e,t,s,h))return S}return null},l3=function(e,t){return t===void 0?t={}:t===!0&&(t=u3),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},u3={},ra=function(e){this.sizerEventsEnable&&(l3(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},na=function(e,t,s,h,y,S,r,T){ta(e,t,s,h,y,S),r!==void 0&&(e.x+=r),T!==void 0&&(e.y+=T),this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const d3=Phaser.Display.Align.CENTER;var f3=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,s=this.top,h=this.width,y=this.height,S,r,T,i,d,x,f,o=0,a=e.length;o<a;o++)S=e[o],r=S.rexSizer,!r.hidden&&(T=r.padding,ra.call(this,S),i=t+T.left,d=s+T.top,x=h-T.left-T.right,f=y-T.top-T.bottom,Se(S,x,f),na.call(this,S,i,d,x,f,d3))};const c3=Phaser.Utils.Objects.IsPlainObject;var v3=function(e,t,s){if(c3(e)){var h=e;e=h.sensor,s=h.target,t=h.draggable}else typeof t!="boolean"&&(s=t,t=void 0);var y=typeof e;if(y==="string"){var S=e;if(e=this.getElement(S),!e)return console.error(`Can get element '${S}'`),this}else(e===void 0||y!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(r,T,i){var d=s===void 0?this.getTopmostSizer():s;d.x+=T-e.x,d.y+=i-e.y,d.emit("sizer.drag",r,T,i)},this).on("dragstart",function(r,T,i){var d=s===void 0?this.getTopmostSizer():s;d.emit("sizer.dragstart",r,T,i)},this).on("dragend",function(r,T,i,d){var x=s===void 0?this.getTopmostSizer():s;x.emit("sizer.dragend",r,T,i,d)},this).on("drop",function(r,T){var i=s===void 0?this.getTopmostSizer():s;i.emit("sizer.drop",r,T)}),e.input._rexUIDragSizer=!0),this};const of={onClick(e,t,s,h){return e?(typeof e=="function"&&(h=s,s=t,t=e,e=this),e._click===void 0&&(e._click=new Zi(e,h)),e._click.on("click",t,s),this):this},offClick(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,s),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}},mn=Phaser.Utils.Objects.GetValue;class lf extends Gt{constructor(t,s){super(t,s),this._enable=void 0;var h=mn(s,"inputConfig",void 0);h&&t.setInteractive(h),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(mn(t,"enable",!0)),this.setMode(mn(t,"mode",1)),this.setClickInterval(mn(t,"clickInterval",100)),this.setDragThreshold(mn(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),s.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=p3[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var s=this.parent,h=s.input?Ed:_s;return h(s,t)}onPress(t){!this.parent.willRender(t.camera)||this.pointer===void 0&&(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t)))}onRelease(t){!this.parent.willRender(t.camera)||this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,s,h,y){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;this.pointer=void 0;var h=this.lastClickTime;return h!==void 0&&t-h<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}cancel(){return this.pointer=void 0,this}}const p3={press:0,pointerdown:0,release:1,pointerup:1},g3={onClickOutside(e,t,s,h){return e?(typeof e=="function"&&(h=s,s=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new lf(e,h)),e._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};class m3 extends Qi{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Ol=Phaser.Utils.Objects.GetValue;class Hr extends Gt{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new m3,this.parent.setInteractive(Ol(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Ol(t,"enable",!0)),this.setCooldown(Ol(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,h){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const x3={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?_s(e):!1},onTouching(e,t,s,h){return e?(typeof e=="function"&&(h=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Hr(e,h)),e._inTouching.on("intouch",t,s),this):this},offTouching(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,s),this)},onTouchingEnd(e,t,s,h){return e?(typeof e=="function"&&(h=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Hr(e,h)),e._inTouching.on("touchend",t,s),this):this},offTouchingEnd(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,s),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}},y3={onOver(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerover",t,s),this):this},onOut(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerout",t,s),this):this}};var qm=function(e,t,s){for(var h,y=0,S=e.length;y<S;y++)if(h=e[y],!!Yh(h,t,s))return h.pointToChild(t,s);return null},Li=function(e,t,s,h,y,S,r,T){var i;if(S===void 0)i=y;else if(h==="parent")i=qm(s,y,S);else for(var d=0,x=s.length;d<x;d++){var f=s[d];if(Yh(f,y,S)){i=f;break}}!i||e.emit(t,i,r,T)};const C3=Phaser.Utils.Objects.GetValue;var T3=function(e){var t=C3(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",S3,this))},S3=function(e,t,s,h){var y=this._childrenInteractive;Li(y.eventEmitter,`${y.eventNamePrefix}down`,y.targetSizers,y.targetMode,e.worldX,e.worldY,e,h)};const P3=Phaser.Utils.Objects.GetValue;var E3=function(e){var t=P3(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",M3,this))},M3=function(e,t,s,h){var y=this._childrenInteractive;Li(y.eventEmitter,`${y.eventNamePrefix}up`,y.targetSizers,y.targetMode,e.worldX,e.worldY,e,h)};const w3=Phaser.Utils.Objects.GetValue;var R3=function(e){var t=w3(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Zv,this).on("pointerover",Zv,this).on("pointerout",A3,this))},Zv=function(e,t,s,h){var y=this._childrenInteractive,S=qm(y.targetSizers,e.worldX,e.worldY),r=y.lastOverChild;S&&r&&S===r||(y.lastOverChild=S,Li(y.eventEmitter,`${y.eventNamePrefix}out`,y.targetSizers,y.targetMode,r,void 0,e,h),Li(y.eventEmitter,`${y.eventNamePrefix}over`,y.targetSizers,y.targetMode,S,void 0,e,h))},A3=function(e,t){var s=this._childrenInteractive,h=s.lastOverChild;s.lastOverChild=null,Li(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,s.targetMode,h,void 0,e,t)};const L3=Phaser.Utils.Objects.GetValue;var O3=function(e){var t=L3(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new Zi(this,t),this._click.on("click",function(h,y,S,r){Li(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,s.targetMode,S.worldX,S.worldY,S,r)},this)}};const Fl=Phaser.Utils.Objects.GetValue;class xo extends no{constructor(t,s){var h=Qr(t);h===t&&(t=void 0),super(h,s),this.gameObject=t,t&&t.setInteractive(Fl(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Fl(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Fl(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=bl,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(!!this.enable&&this.pointer===void 0){var h=this.bounds?this.bounds.contains(t.x,t.y):!0;!h||this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=Jv,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;!s||this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=bl,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,h=this.pointer===t;!h&&s||(h&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Jv&&this.onDragEnd(),this.pointer=void 0,this.tracerState=bl,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=F3,this}isPointerInGameObject(t,s,h){var y=this.lastPointer;return y?_s(t,y,s,h):!1}}const bl=0,Jv=1,F3="IDLE",Gs=Phaser.Utils.Objects.GetValue,b3=Phaser.Math.Distance.Between;class yo extends xo{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{enter:function(){h.stop(),h.tapsCount=0,h.x=0,h.y=0,h.worldX=0,h.worldY=0,h.lastPointer=void 0},exit:function(){var S=h.lastPointer;h.x=S.x,h.y=S.y,h.worldX=S.worldX,h.worldY=S.worldY}},BEGIN:{enter:function(){h.start(),h.tapsCount=0,h.emit("tappingstart",h,h.gameObject,h.lastPointer)}},RECOGNIZED:{enter:function(){h.start(),h.emit("tap",h,h.gameObject,h.lastPointer),h.emit(`${h.tapsCount}tap`,h,h.gameObject,h.lastPointer)}}},init:function(){this.state=Ns},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Gs(t,"time",250)),this.setTapInterval(Gs(t,"tapInterval",200)),this.setDragThreshold(Gs(t,"threshold",9)),this.setTapOffset(Gs(t,"tapOffset",10));var s=Gs(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(Gs(t,"maxTaps",void 0)),this.setMinTaps(Gs(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Ns:this.state=Pr;break;case Pr:var t=this.lastPointer,s=b3(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=Er,this.state=Pr);break;case Er:this.state=Pr;break}}onDragEnd(){this.state===Pr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Er))}onDrag(){this.state!==Ns&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ns)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===Pr){var h=this.lastPointer;if(h.isDown){var y=t-h.downTime;y>this.holdTime&&(this.state=Ns)}else{var S=t-h.upTime;S>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Er:this.state=Ns)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Er&&(this.state=Ns)}get isTapped(){return this.state===Er}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const Ns="IDLE",Pr="BEGIN",Er="RECOGNIZED",Qv=Phaser.Utils.Objects.GetValue;class Co extends xo{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{enter:function(){h.x=0,h.y=0,h.worldX=0,h.worldY=0,h.lastPointer=void 0},exit:function(){var S=h.lastPointer;h.x=S.x,h.y=S.y,h.worldX=S.worldX,h.worldY=S.worldY}},BEGIN:{enter:function(){h.start()},exit:function(){h.stop()}},RECOGNIZED:{enter:function(){h.emit("pressstart",h,h.gameObject,h.lastPointer)},exit:function(){h.emit("pressend",h,h.gameObject,h.lastPointer)}}},init:function(){this.state=Za},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Qv(t,"threshold",9)),this.setHoldTime(Qv(t,"time",251)),this}onDragStart(){this.state=jv,this.holdTime===0&&(this.state=Dl)}onDragEnd(){this.state=Za}onDrag(){this.state!==Za&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Za)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===jv){var h=t-this.pointer.downTime;h>=this.holdTime&&(this.state=Dl)}}get isPressed(){return this.state===Dl}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Za="IDLE",jv="BEGIN",Dl="RECOGNIZED",D3=Phaser.Utils.Objects.GetValue;class _m extends xo{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{},BEGIN:{enter:function(){var S=h.pointer;h.startX=S.x,h.startY=S.y,h.startWorldX=S.worldX,h.startWorldY=S.worldY}},RECOGNIZED:{enter:function(){h.emit("panstart",h,h.gameObject,h.lastPointer)},exit:function(){var S=h.lastPointer;h.endX=S.x,h.endY=S.y;var r=Wh(S,h.pointerCamera,!0);h.endWorldX=r.x,h.endWorldY=r.y,h.emit("panend",h,h.gameObject,h.lastPointer)}}},init:function(){this.state=qv},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(D3(t,"threshold",10)),this}onDragStart(){this.state=_v,this.dragThreshold===0&&(this.state=Ja)}onDragEnd(){this.state=qv}onDrag(){switch(this.state){case _v:if(this.pointer.getDistance()>=this.dragThreshold){this.state=Ja,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var y=this.pointer;this.x=y.x,this.y=y.y,this.worldX=y.worldX,this.worldY=y.worldY}break;case Ja:var t=this.pointerCamera,s=this.pointer.position,h=this.pointer.prevPosition;this.dx=s.x-h.x,this.dy=s.y-h.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var y=this.pointer;this.x=y.x,this.y=y.y;var S=Wh(y,t,!0);this.worldX=S.x,this.worldY=S.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Ja}setDragThreshold(t){return this.dragThreshold=t,this}}const qv="IDLE",_v="BEGIN",Ja="RECOGNIZED",I3=Phaser.Math.Distance.Between,B3=Phaser.Math.Angle.Between,G3={getDt:function(){var e=Ad(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=I3(t.x,t.y,e.x,e.y),h=s/(this.getDt()*.001);return h},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.x-t.x),h=s/(this.getDt()*.001);return h},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.y-t.y),h=s/(this.getDt()*.001);return h},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=B3(t.x,t.y,e.x,e.y);return s}},N3={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var z3=function(e,t,s){switch(s===void 0?s={}:s===!0&&(s=V3),s.left=!1,s.right=!1,s.up=!1,s.down=!1,e=(e+360)%360,t){case 0:e<180?s.down=!0:s.up=!0;break;case 1:e>90&&e<=270?s.left=!0:s.right=!0;break;case 2:e>45&&e<=135?s.down=!0:e>135&&e<=225?s.left=!0:e>225&&e<=315?s.up=!0:s.right=!0;break;case 3:e>22.5&&e<=67.5?(s.down=!0,s.right=!0):e>67.5&&e<=112.5?s.down=!0:e>112.5&&e<=157.5?(s.down=!0,s.left=!0):e>157.5&&e<=202.5?s.left=!0:e>202.5&&e<=247.5?(s.left=!0,s.up=!0):e>247.5&&e<=292.5?s.up=!0:(e>292.5&&e<=337.5&&(s.up=!0),s.right=!0);break}return s},V3={};const Il=Phaser.Utils.Objects.GetValue,k3=Phaser.Math.RadToDeg;class aa extends xo{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{enter:function(){h.x=0,h.y=0,h.worldX=0,h.worldY=0},exit:function(){var S=h.lastPointer;h.x=S.x,h.y=S.y,h.worldX=S.worldX,h.worldY=S.worldY}},BEGIN:{enter:function(){h.validDrag=!1}},RECOGNIZED:{enter:function(){h.start(),h.updateDirectionStates(),h.emit("swipe",h,h.gameObject,h.lastPointer)},exit:function(){h.stop(),h.clearDirectionStates()}}},init:function(){this.state=Bl},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Il(t,"threshold",10)),this.setVelocityThreshold(Il(t,"velocityThreshold",1e3)),this.setDirectionMode(Il(t,"dir","8dir")),this}onDragStart(){this.state=tp}onDragEnd(){this.state=Bl}onDrag(){this.state===tp&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Gl))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Gl&&(this.state=Bl)}get isSwiped(){return this.state===Gl}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=N3[t]),this.dirMode=t,this}updateDirectionStates(){var t=k3(this.getVelocityAngle());return z3(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(aa.prototype,G3);const Bl="IDLE",tp="BEGIN",Gl="RECOGNIZED",Qa=Phaser.Utils.Objects.GetValue,X3=Phaser.Utils.Array.SpliceOne,W3=Phaser.Math.Distance.Between,Y3=Phaser.Math.Angle.Between;class uf{constructor(t,s){var h=Qr(t);h===t&&(t=void 0);var y=h.input.manager.pointersTotal-1;y<2&&h.input.addPointer(2-y),this.scene=h,this.gameObject=t,t&&t.setInteractive(Qa(s,"inputConfig",void 0)),this.setEventEmitter(Qa(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Qa(t,"enable",!0)),this.bounds=Qa(t,"bounds",void 0),this.tracerState=ja,this.pointers.length=0,Xi(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Xi(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!s){var h=this.pointers.indexOf(t);if(h===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case ja:this.tracerState=yn,this.onDrag1Start();break;case yn:this.tracerState=pi,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!s){var h=this.pointers.indexOf(t);if(h!==-1)switch(delete this.movedState[t.id],X3(this.pointers,h),this.tracerState){case yn:this.tracerState=ja,this.onDrag1End();break;case pi:this.tracerState=yn,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,h=this.pointers.indexOf(t)!==-1;if(!(!h&&s)){if(h&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case yn:this.onDrag1();break;case pi:this.onDrag2();break}}}}dragCancel(){return this.tracerState===pi&&this.onDrag2End(),this.pointers.length=0,Xi(this.movedState),this.tracerState=ja,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==pi)return 0;var t=this.pointers[0],s=this.pointers[1];return W3(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==pi)return 0;var t=this.pointers[0],s=this.pointers[1];return Y3(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,h=t.prevPosition;xn.x=s.x-h.x,xn.y=s.y-h.y}else xn.x=0,xn.y=0;return xn}get centerX(){if(this.tracerState!==pi)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==pi)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==pi)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==pi)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=U3,this}isPointer0InGameObject(t,s,h){var y=this.pointers[0];return y?_s(t,y,s,h):!1}isPointer1InGameObject(t,s,h){var y=this.pointers[1];return y?_s(t,y,s,h):!1}}Object.assign(uf.prototype,Zn);var xn={};const ja=0,yn=1,pi=2,U3="IDLE",H3=Phaser.Utils.Objects.GetValue;class tx extends uf{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{enter:function(){h.prevDistance=void 0,h.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){h.emit("pinchstart",h)},exit:function(){h.emit("pinchend",h)}}},init:function(){this.state=ep},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(H3(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=ip,this.dragThreshold===0&&(this.state=qa)}onDrag2End(){this.state=ep}onDrag2(){switch(this.state){case ip:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=qa}break;case qa:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===qa}setDragThreshold(t){return this.dragThreshold=t,this}}const ep="IDLE",ip="BEGIN",qa="RECOGNIZED",$3=Phaser.Math.RotateAround;var sp=function(e,t,s,h){return $3(e,t,s,h),e.rotation+=h,e},K3=function(e,t,s,h){return h===void 0?h={}:h===!0&&(h=Z3),s.getWorldPoint(e,t,h),h},Z3={},J3=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,h=this.movementCenterY,y=K3(this.centerX,this.centerY,t,!0),S=y.x,r=y.y,T=this.rotation;if(Array.isArray(e))for(var i=e,d=0,x=i.length;d<x;d++)e=i[d],e.x+=s,e.y+=h,sp(e,S,r,T);else e.x+=s,e.y+=h,sp(e,S,r,T);return this};const Q3=Phaser.Utils.Objects.GetValue,Nl=Phaser.Math.Angle.WrapDegrees,rp=Phaser.Math.Angle.ShortestBetween,zl=Phaser.Math.RadToDeg,j3=Phaser.Math.DegToRad;class df extends uf{constructor(t,s){super(t,s);var h=this,y={states:{IDLE:{enter:function(){h.prevAngle=void 0,h.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){h.emit("rotatestart",h)},exit:function(){h.emit("rotateend",h)}}},init:function(){this.state=np},eventEmitter:!1};this.setRecongizedStateObject(new Qi(y))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Q3(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Nl(zl(this.angleBetween)),this.state=ap,this.dragThreshold===0&&(this.state=_a)}onDrag2End(){this.state=np}onDrag2(){switch(this.state){case ap:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Nl(zl(this.angleBetween));this.angle=rp(this.prevAngle,t),this.prevAngle=t,this.state=_a}break;case _a:var t=Nl(zl(this.angleBetween));this.angle=rp(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===_a}get rotation(){return j3(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var q3={spinObject:J3};Object.assign(df.prototype,q3);const np="IDLE",ap="BEGIN",_a="RECOGNIZED",_3=Phaser.Utils.Objects.GetValue;var tb=function(e){var t=_3(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new yo(this,t),this._tap.on("tap",function(h,y,S){Li(s.eventEmitter,`${s.eventNamePrefix}${h.tapsCount}tap`,s.targetSizers,s.targetMode,h.worldX,h.worldY,S)},this)}};const eb=Phaser.Utils.Objects.GetValue;var ib=function(e){var t=eb(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new Co(this,t),this._press.on("pressstart",function(h,y,S){Li(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,s.targetMode,h.worldX,h.worldY,S)},this).on("pressend",function(h,y,S){Li(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,s.targetMode,h.worldX,h.worldY,S)},this)}};const sb=Phaser.Utils.Objects.GetValue;var rb=function(e){var t=sb(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new aa(this,t),this._swipe.on("swipe",function(h,y,S){var r=h.left?"left":h.right?"right":h.up?"up":"down";Li(s.eventEmitter,`${s.eventNamePrefix}swipe${r}`,s.targetSizers,s.targetMode,h.worldX,h.worldY,S)},this)}};const Cn=Phaser.Utils.Objects.GetValue;var ff=function(e,t){return e.setInteractive(),Cn(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:Cn(t,"targets",[e]),targetMode:Cn(t,"targetMode","parent"),eventEmitter:Cn(t,"eventEmitter",e),eventNamePrefix:Cn(t,"inputEventPrefix","child.")},T3.call(e,t),E3.call(e,t),R3.call(e,t),O3.call(e,t),tb.call(e,t),ib.call(e,t),rb.call(e,t),e},nb=function(e){return ff(this,e),this},ab=function(){for(var e=this.getAllChildren([this]),t=0,s=e.length;t<s;t++){var h=e[t];h.emit.apply(h,arguments)}return this},ex={getSizerConfig:MO,getChildPrevState:wO,pushIntoBounds:RO,drawBounds:VO,resolveWidth:Kd,hasWidthWrap:Zd,resolveChildrenWidth:tF,runWidthWrap:Jd,resolveHeight:Qd,hasHeightWrap:jd,resolveChildrenHeight:eF,runHeightWrap:qd,getChildWidth:iF,getChildHeight:sF,getExpandedChildWidth:rF,getExpandedChildHeight:nF,getChildrenWidth:aF,getChildrenHeight:hF,addChildrenMap:Bv,addElement:Bv,removeChildrenMap:JO,getElement:QO,getChildIndex:qO,getAllChildrenSizers:oF,getChildrenSizers:lF,preLayout:sa,layout:dF,runLayout:fF,layoutChildren:pF,layoutBackgrounds:f3,postLayout:mF,_postLayout:gF,setAnchor:TF,isInTouching:n3,pointToChild:o3,setDraggable:v3,setChildrenInteractive:nb,broadcastEvent:ab};Object.assign(ex,_O,WO,ZO,_r,ki,Wn,po,GF,VF,Km,of,g3,x3,y3,WF,hf,uF);const Bi=Phaser.Utils.Objects.GetValue;class nr extends We{constructor(t,s,h,y,S,r){super(t,s,h,1,1),this.isRexSizer=!0;var T=Bi(r,"origin",.5),i=Bi(r,"originX",T),d=Bi(r,"originY",T);this.setOrigin(i,d),this.setMinSize(y,S),this.setName(Bi(r,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.enableLayoutWarn(!1);var x=Bi(r,"anchor",void 0);x&&this.setAnchor(x),this.setInnerPadding(Bi(r,"space",0));var f=Bi(r,"draggable",!1);f&&this.setDraggable(f),this.setSizerEventsEnable(Bi(r,"sizerEvents",!1)),this.setDirty(!0),Bi(r,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s=this.getAllChildrenSizers([this]),h=0,y=s.length;h<y;h++)s[h].sizerEventsEnable=!1;super.destroy(t),Xi(this.backgroundChildren),Xi(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,s){return this.setMinWidth(t).setMinHeight(s),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Lt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Lt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Lt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Ot(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Ot(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Ot(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}}Object.assign(nr.prototype,ex);var hb=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,h,y,S=!1;for(var r in t)s=t[r],y=this.getChildWidth(s),y===void 0&&(S=!0),!S&&(h=s.rexSizer.padding,y+=h.left+h.right,e=Math.max(y,e));if(!S)return e+this.space.left+this.space.right},ob=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,h,y,S=!1;for(var r in t)s=t[r],y=this.getChildHeight(s),y===void 0&&(S=!0),!S&&(h=s.rexSizer.padding,y+=h.top+h.bottom,e=Math.max(y,e));if(!S)return e+this.space.top+this.space.bottom},lb=function(e,t){t===void 0&&(t=this.width);var s,h=e.rexSizer;if(h.expandWidth){var y=this.space,S=t-y.left-y.right,r=h.padding;s=S-r.left-r.right}return s},ub=function(e,t){t===void 0&&(t=this.height);var s,h=e.rexSizer;if(h.expandHeight){var y=this.space,S=t-y.top-y.bottom,r=h.padding;s=S-r.top-r.bottom}return s},db=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,s;for(var h in t)s=t[h],s.isRexSizer&&e.push(s);return e},cf=function(e,t,s,h){if(s===void 0)s=0;else{var y=typeof s;y==="boolean"?(h=s,s=0):y==="string"&&(s=fb[s])}h===void 0?h={}:h===!0&&(h=cb);var S=t.width/e.width,r=t.height/e.height,T=s?Math.max(S,r):Math.min(S,r);return h.width=e.width*T,h.height=e.height*T,h};const fb={fit:0,FIT:0,envelop:1,ENVELOP:1};var cb={},vf=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},vb=function(){var e,t,s,h=this.innerLeft,y=this.innerTop,S=this.innerWidth,r=this.innerHeight,T,i,d,x,f,o,a,n=this.sizerChildren;for(var u in n)e=n[u],!e.rexSizer.hidden&&(t=e.rexSizer,s=t.padding,ra.call(this,e),f=this.getExpandedChildWidth(e),o=this.getExpandedChildHeight(e),t.aspectRatio>0&&(Vl.width=t.aspectRatio,Vl.height=1,kl.width=f,kl.height=o,a=cf(Vl,kl,"FIT",!0),f=a.width,o=a.height),e.isRexSizer?(e.runLayout(this,f,o),vf(e,this)):Se(e,f,o),T=h+s.left,d=S-s.left-s.right,i=y+s.top,x=r-s.top-s.bottom,na.call(this,e,T,i,d,x,t.align,t.alignOffsetX,t.alignOffsetY))},Vl={},kl={};const hp=Phaser.Utils.Objects.IsPlainObject,_e=Phaser.Utils.Objects.GetValue,op=Phaser.Display.Align.CENTER,pb=Phaser.Utils.String.UUID;var gb=function(e,t,s,h,y,S,r,T,i,d){if(ea.call(this,e),hp(t)){var f=t;t=_e(f,"key",void 0),s=_e(f,"align",op),h=_e(f,"padding",0),y=_e(f,"expand",!0),e.isRexSizer||(S=_e(f,"minWidth",e._minWidth),r=_e(f,"minHeight",e._minHeighted)),T=_e(f,"offsetX",0),i=_e(f,"offsetY",0),d=_e(f,"aspectRatio",0)}var x=t!==void 0;x||(t=pb()),typeof s=="string"&&(s=qr[s]),s===void 0&&(s=op),h===void 0&&(h=0),y===void 0&&(y=!0),e.isRexSizer||(S===void 0&&(S=e._minWidth),r===void 0&&(r=e._minHeight)),T===void 0&&(T=0),i===void 0&&(i=0),d===void 0?d=0:d===!0&&(d=Lt(e)/Ot(e)),d>0&&(y=!0,S===void 0&&(S=0),r===void 0&&(r=0));var f=this.getSizerConfig(e);return f.align=s,f.padding=ys(h),hp(y)?(f.expandWidth=_e(y,"width",!1),f.expandHeight=_e(y,"height",!1)):(f.expandWidth=y,f.expandHeight=y),e.isRexSizer||(f.expandWidth&&(e.minWidth=S===void 0?Lt(e):S),f.expandHeight&&(e.minHeight=r===void 0?Ot(e):r)),f.alignOffsetX=T,f.alignOffsetY=i,f.aspectRatio=d,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,x&&this.addChildrenMap(t,e),this};const mb={add:gb},xb=We.prototype.clear;var To=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),xb.call(this,e),t)for(var h,y=0,S=s.length;y<S;y++)h=s[y],h.emit("sizer.remove",h,this),this.emit("remove",h,this);return this};const yb={remove(e,t){var s;if(typeof e=="string"){if(s=e,e=this.sizerChildren[s],!e)return this}else{if(this.getParentSizer(e)!==this)return this;s=this.childToKey(e)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),ia.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return To.call(this,e),this}};var ix={getChildrenWidth:hb,getChildrenHeight:ob,getExpandedChildWidth:lb,getExpandedChildHeight:ub,getChildrenSizers:db,layoutChildren:vb};Object.assign(ix,mb,yb);var So=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var s in e)if(e[s]===t)return s;return null};const lp=Phaser.Utils.Objects.IsPlainObject,Mr=Phaser.Utils.Objects.GetValue;class qe extends nr{constructor(t,s,h,y,S,r){lp(s)?(r=s,s=Mr(r,"x",0),h=Mr(r,"y",0),y=Mr(r,"width",void 0),S=Mr(r,"height",void 0)):lp(y)&&(r=y,y=Mr(r,"width",void 0),S=Mr(r,"height",void 0)),super(t,s,h,y,S,r),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return So(this.sizerChildren,t);return null}}Object.assign(qe.prototype,ix);var Cb=Phaser.Math.Distance.Between,Uh=function(e,t,s){var h=e.width/2;return Cb(h,h,t,s)<=h};const Tb=Phaser.Math.Angle.Between,Sb=Phaser.Math.Angle.Normalize;var up=function(e,t,s){if(!!this.enable&&!!e.isDown){var h=this.sizerChildren.knob;if(!!Uh(h,t,s)){var y=h.width/2,S=h.startAngle,r=Tb(y,y,t,s),T=h.anticlockwise?S-r:r-S,i=Sb(T)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-i)<.1?this.value=i:this.easeValueTo(i)}}},Pb=function(){var e=this.sizerChildren.knob;e.on("pointerdown",up,this).on("pointermove",up,this).setInteractive()};const dp=Phaser.Math.Angle.Between,Eb=Phaser.Math.Angle.Wrap;var Mb=function(e,t,s){if(!(!this.enable||this.panPointer)){var h=this.sizerChildren.knob;!Uh(h,t,s)||sx.call(this,e)}},wb=function(e,t,s){if(!!this.enable&&!!e.isDown){var h=this.sizerChildren.knob;switch(this.panState){case pf:Uh(h,t,s)&&sx.call(this,e);break;case nx:Uh(h,t,s)?Ab.call(this):rx.call(this);break}}},Rb=function(e,t,s){!this.enable||this.panPointer!==e||rx.call(this)},sx=function(e){this.panPointer=e,this.panState=nx},rx=function(){this.panPointer=void 0,this.panState=pf},Ab=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,h=dp(s.x,s.y,e.x,e.y),y=dp(s.x,s.y,t.x,t.y),S=s.anticlockwise?h-y:y-h,r=Eb(S)/(Math.PI*2);this.stopEaseValue(),this.value+=r};const pf=0,nx=1;var Lb=function(){var e=this.sizerChildren.knob;e.on("pointerdown",Mb,this).on("pointermove",wb,this).on("pointerup",Rb,this).setInteractive(),this.panPointer=void 0,this.panState=pf},Ob=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},ax=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},Fb=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(ax.call(this,e)),t.layout&&t.layout()),this};const bb={setTextFormatCallback:Ob,getFormatText:ax,updateText:Fb},ti=Phaser.Utils.Objects.GetValue,Db=Phaser.Math.Snap.To;class gf extends rr(qe){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var h=ti(s,"background",void 0),y=ti(s,"text",void 0);h&&this.addBackground(h),y&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(ti(s,"textFormatCallback",void 0),ti(s,"textFormatCallbackScope",void 0)));var S=new uo(t,s);S.setDepth(ti(s,"knobDepth",0)),S._value=-1,t.add.existing(S),this.add(S,"knob"),y&&(this.add(y,"text","center",0,!1),t.children.moveBelow(S,y)),this.addChildrenMap("background",h),this.addChildrenMap("knob",S),this.addChildrenMap("text",y),this.setEnable(ti(s,"enable",void 0)),this.setGap(ti(s,"gap",void 0)),this.setValue(ti(s,"value",0),ti(s,"min",void 0),ti(s,"max",void 0));var r=ti(s,"input",0);switch(typeof r=="string"&&(r=Ib[r]),r){case 0:Lb.call(this);break;case 1:Pb.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=Db(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var h=this.value;s!==h&&(this.updateText(),this.eventEmitter.emit("valuechange",h,s,this.eventEmitter))}}const Ib={pan:0,drag:0,click:1,none:-1};Object.assign(gf.prototype,bb);it.register("knob",function(e){var t=new gf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Knob",gf);const Bb={arc:jr,circle:je,curve:SA,ellipse:PA,line:xs,lines:be,rectangle:UA,roundRectangle:Vh,triangle:$A},fp=Phaser.Utils.Objects.GetValue,Gb=Phaser.Utils.Objects.IsPlainObject,Nb=function(){for(var e=this.getShapes(),t=0,s=e.length;t<s;t++)e[t].lineStyle().fillStyle()},zb={createShape(e,t){var s=Bb[e],h=new s;return t&&h.setName(t),h},buildShapes(e){var t=fp(e,"create",void 0);if(Gb(t)){var s=t;for(var h in s){var y=s[h];switch(typeof y){case"number":for(var S=0;S<y;S++)this.addShape(this.createShape(h));break;case"string":this.addShape(this.createShape(h,y));break;default:for(var r=y,S=0,T=r.length;S<T;S++)this.addShape(this.createShape(h,r[S]));break}}}else if(Array.isArray(t))for(var s=t,S=0,T=s.length;S<T;S++){var i=s[S];this.addShape(this.createShape(i.type,i.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(fp(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=Nb),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}},cp=Phaser.GameObjects.Components.TransformMatrix,Vb=Phaser.Math.TransformXY;var kb=function(e,t,s,h,y){h===void 0&&(h=e.scene.cameras.main),y===void 0?y={}:y===!0&&(y=Xb);var S=h.scrollX,r=h.scrollY,T=t+S*e.scrollFactorX-S,i=s+r*e.scrollFactorY-r;return e.parentContainer?(th===void 0&&(th=new cp,vp=new cp),e.getWorldTransformMatrix(th,vp),th.applyInverse(T,i,y)):Vb(T,i,e.x,e.y,e.rotation,e.scaleX,e.scaleY,y),y.x+=e.displayOriginX,y.y+=e.displayOriginY,y},th,vp,Xb={};const Tn=Phaser.Utils.Objects.GetValue,Wb=Phaser.Utils.Objects.IsPlainObject;class Po extends Ss{constructor(t,s,h,y,S,r){Wb(s)&&(r=s,s=Tn(r,"x",0),h=Tn(r,"y",0),y=Tn(r,"width",2),S=Tn(r,"height",2)),super(t,s,h,y,S),this.type=Tn(r,"type","rexCustomShapes"),this.buildShapes(r)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,h,y){return typeof h=="boolean"&&(y=h,h=void 0),kb(this,t,s,h,y)}}Object.assign(Po.prototype,zb);it.register("customShapes",function(e,t,s,h,y){var S=new Po(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.CustomShapes",Po);const Sn=Phaser.Utils.Objects.GetValue,Yb=Phaser.Utils.Objects.IsPlainObject;class bi extends rr(Po){constructor(t,s,h,y,S,r){Yb(s)&&(r=s,s=Sn(r,"x",0),h=Sn(r,"y",0),y=Sn(r,"width",2),S=Sn(r,"height",2)),r===void 0&&(r={}),r.type||(r.type="rexCustomProgress"),super(t,s,h,y,S,r),this.bootProgressBase(r),this.setValue(Sn(r,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}it.register("customProgress",function(e,t,s,h,y){var S=new bi(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.CustomProgress",bi);var Ub=function(e){return this.easeValueTask||(this.easeValueTask=new Ki(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},Hb=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},$b=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},Kb=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this};const Zb={start:Ub,stop:Hb,pause:$b,resume:Kb},ei=Phaser.Utils.Objects.GetValue;class hx extends Ss{constructor(t,s){var h=ei(s,"x",0),y=ei(s,"y",0),S=ei(s,"width",64),r=ei(s,"height",64);super(t,h,y,S,r),this.resetFromConfig(s,!0),this.buildShapes(s),ei(s,"start",!0)&&this.start()}resetFromConfig(t,s){s===void 0&&(s=!1);var h;return h=s?1e3:this.duration,this.setDuration(ei(t,"duration",h)),h=s?"Linear":this.ease,this.setEase(ei(t,"ease",h)),h=s?0:this.delay,this.setDelay(ei(t,"delay",h)),h=s?0:this.repeatDelay,this.setRepeatDelay(ei(t,"repeatDelay",h)),h=s?16777215:this.color,this.setColor(ei(t,"color",h)),h=s?0:this.value,this.setValue(ei(t,"value",h)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}}Object.assign(hx.prototype,Zb);const ns=Phaser.Math.DegToRad,Jb=Phaser.Math.Linear,Qb=Phaser.Math.Easing.Expo.In,jb={right:0,down:1,left:2,up:3};var qb=function(e,t,s,h,y,S,r,T,i,d,x){var f=wr(t,0,h,y,S,r,T,i,d,x);e.startAt(f.x,f.y);var o=wr(s,0,h,y,S,r,T,i,d,x);e.lineTo(o.x,o.y);var a=wr(s,s,h,y,S,r,T,i,d,x);e.lineTo(a.x,a.y);var n=wr(0,s,h,y,S,r,T,i,d,x);e.lineTo(n.x,n.y);var u=wr(0,t,h,y,S,r,T,i,d,x);e.lineTo(u.x,u.y);var c=wr(t,t,h,y,S,r,T,i,d,x);e.lineTo(c.x,c.y),e.close()},Xl={},wr=function(e,t,s,h,y,S,r,T,i,d){var x=e*s,f=t*h;return Xl.x=r*x+T*f+y,Xl.y=i*x+d*f+S,Xl};const eh={setDirection(e){return typeof e=="string"&&(e=jb[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new be)},updateShapes(){var e,t,s,h,y,S;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var r=ns(315);s=Math.cos(r),h=Math.sin(r);var T=ns(45);y=Math.cos(T),S=Math.sin(T);break;case 3:e=this.centerX,t=this.centerY+this.radius;var r=ns(135);s=Math.cos(r),h=Math.sin(r);var T=ns(225);y=Math.cos(T),S=Math.sin(T);break;case 2:e=this.centerX+this.radius,t=this.centerY;var r=ns(225);s=Math.cos(r),h=Math.sin(r);var T=ns(315);y=Math.cos(T),S=Math.sin(T);break;default:e=this.centerX-this.radius,t=this.centerY;var r=ns(45);s=Math.cos(r),h=Math.sin(r);var T=ns(135);y=Math.cos(T),S=Math.sin(T);break}for(var i=this.radius/7,d=this.getShapes(),x=0,f=d.length;x<f;x++){var o=d[x],a=(this.value+(f-x)*.1)%1;a=Qb(bt(a));var n=Jb(.25,1,a);o.fillStyle(this.color,n);var u=x*3+1,c=u+2;qb(o,u,c,i,i,e,t,s,h,y,S)}}},_b=Phaser.Math.Linear,tD={buildShapes(){for(var e=0;e<4;e++)this.addShape(new xs);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=e-s,y=t+s,S=s*2,r=this.getShapes(),T=r.length,i=s*2/T,d=i*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var x=0;x<T;x++){var f=r[x],o=this.prevValue===void 0?Math.random():f.getData("to");f.setData("from",o).setData("to",Math.random())}this.prevValue=this.value;for(var x=0;x<T;x++){var f=r[x],o=f.getData("from"),a=f.getData("to"),n=_b(o,a,this.value),u=n*S,c=h+i*(x+.5);f.lineStyle(d,this.color,1).setP0(c,y).setP1(c,y-u)}}},eD=Phaser.Math.Linear,iD={buildShapes(){for(var e=0;e<3;e++)this.addShape(new je)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=s*.1,y=Math.ceil(h*.25),S=1-bt(this.value),r=eD(.3,.9,S)*s,T=this.getShapes(),i=0,d=T.length;i<d;i++){var x=T[i],S=(this.value+i/d)%1,f=Math.PI*2*S;x.lineStyle(y,this.color).setRadius(h).setCenterPosition(e+Math.cos(f)*r,t+Math.sin(f)*r)}}},sD=Phaser.Math.Linear,rD=Phaser.Math.Easing.Expo.In,nD={buildShapes(){for(var e=5,t=0;t<e;t++){var s=new xs;this.addShape(s);var h=bt(t/(e-1))/2;s.setData("offset",h)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=e-s,y=s*2,S=this.getShapes(),r=S.length,T=s*2/r,i=T*.7,d=0;d<r;d++){var x=S[d],f=(this.value+x.getData("offset"))%1;f=rD(bt(f));var o=sD(.4,1,f)*y,a=h+T*(d+.5);x.lineStyle(i,this.color,1).setP0(a,t-o/2).setP1(a,t+o/2)}}},aD={buildShapes(){this.addShape(new be().setName("border")),this.addShape(new be().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=s*.7,y=e-h,S=t-h,r=h*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(y,S).lineTo(r,0,!0).lineTo(0,r,!0).lineTo(-r,0,!0).lineTo(0,-r,!0).close(),this.value<.5){var T=(.5-this.value)*2,i=r*T;this.getShape("fill").fillStyle(this.color,1).startAt(y,S).lineTo(r,0,!0).lineTo(0,i,!0).lineTo(-r,0,!0).lineTo(0,-i,!0).close()}else{var T=(this.value-.5)*2,d=180*T;this.getShape("border").rotateAround(e,t,d),this.getShape("fill").fillStyle().lineStyle()}}},pp=Phaser.Math.RadToDeg,gp=Phaser.Math.Angle.WrapDegrees,hD=Phaser.Math.Angle.Wrap,oD=Phaser.Math.Angle.ShortestBetween,lD=Phaser.Math.DegToRad,mp=Phaser.Math.DegToRad(270),uD={buildShapes(){this.addShape(new je().setName("border")),this.addShape(new xs().setName("minuteHand")),this.addShape(new xs().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=Math.ceil(s/25),y=s-h/2,S=s*.8,r=s*.5,T=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var i=gp(pp(T)),d=gp(pp(this.minuteHandAngle)),x=oD(i,d);this.hourHandAngle=hD(this.hourHandAngle+lD(x)/12),this.getShape("border").lineStyle(h,this.color).setRadius(y).setCenterPosition(e,t);var f=this.minuteHandAngle+mp;this.getShape("minuteHand").lineStyle(h,this.color).setP0(e,t).setP1(e+Math.cos(f)*S,t+Math.sin(f)*S);var f=this.hourHandAngle+mp;this.getShape("hourHand").lineStyle(h,this.color).setP0(e,t).setP1(e+Math.cos(f)*r,t+Math.sin(f)*r)}},xp=Phaser.Math.Linear,dD=Phaser.Math.Easing.Expo.In,Wl=2,Yl=2,fD={buildShapes(){for(var e=Wl*Yl,t=0;t<e;t++){var s=new xs;this.addShape(s)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=e-s,y=t-s,S=s*2/Yl,r=s*2/Wl,T=this.getShapes(),i=T.length,d=0;d<i;d++){var x=d%Yl,f=Math.floor(d/Wl),o=h+S*(x+.5),a=y+r*(f+.5),n=T[d],u=(this.value+(i-d)*.1)%1;u=dD(bt(u));var c=(i-d)/i,l=xp(.7,1,u)*r,v=xp(.7,1,u)*S;n.lineStyle(v,this.color,c).setP0(o-l/2,a).setP1(o+l/2,a)}}},yp=Phaser.Math.Linear,cD={buildShapes(){for(var e=3,t=0;t<e;t++){var s=new je;this.addShape(s);var h=bt(t/(e-1))/2;s.setData("offset",h)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=e-s,y=this.getShapes(),S=y.length,r=s*2/S,T=r/2,i=0;i<S;i++){var d=y[i],x=(this.value+d.getData("offset"))%1;x=bt(x);var f=yp(.25,1,x),o=yp(.5,1,x)*T;d.fillStyle(this.color,f).setRadius(o).setCenterPosition(h+r*(i+.5),t)}}},Cp=Phaser.Math.Linear,vD=Phaser.Math.Easing.Expo.In,pD={buildShapes(){for(var e=0;e<3;e++){var t=new xs;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=e-s,y=this.getShapes(),S=y.length,r=s*2/S,T=s*2,i=0;i<S;i++){var d=y[i],x=(this.value+(S-i)*.1)%1;x=vD(bt(x));var f=(i+1)/S,o=Cp(.7,1,x)*T,a=Cp(.7,1,x)*r,n=h+r*(i+.5);d.lineStyle(a,this.color,f).setP0(n,t-o/2).setP1(n,t+o/2)}}},gD=Phaser.Math.Linear,Ul=3,Hl=3,mD={buildShapes(){for(var e=Ul*Hl,t=0;t<e;t++){var s=new je;this.addShape(s),s.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=this.isInitialize||this.isSizeChanged,y=e-s,S=t-s,r=s*2/Hl,T=s*2/Ul,i=Math.min(r,T)/2*.8,d=this.getShapes(),x=0,f=d.length;x<f;x++){var o=x%Hl,a=Math.floor(x/Ul),n=y+r*(o+.5),u=S+T*(a+.5),c=d[x],l=(this.value+c.getData("offset"))%1;l=bt(l),c.fillStyle(this.color,gD(.25,1,l)),h&&c.setRadius(i).setCenterPosition(n,u)}this.isInitialize=!1}},xD={buildShapes(){for(var e=0;e<2;e++)this.addShape(new be)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=Math.ceil(s/25),y=s-h,S=y*.6,r=y*.7,T=y*1.2,i=this.getShapes(),d=0,x=i.length;d<x;d++){var f=i[d],o=(this.value+d/x)%1,a=bt(o),n=e,u=t-15*o,c=y*o,l=S*o,v=r*o,p=T*o;f.lineStyle(h,this.color,a).startAt(n,u).cubicBezierCurveTo(n,u-l,n-c,u-l,n-c,u).cubicBezierCurveTo(n-c,u+l,n,u+v,n,u+p).cubicBezierCurveTo(n,u+v,n+c,u+l,n+c,u).cubicBezierCurveTo(n+c,u-l,n,u-l,n,u).close()}}},yD=Phaser.Math.Linear,CD={buildShapes(){for(var e=0;e<12;e++)this.addShape(new xs);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.isInitialize||this.isSizeChanged,h=this.radius,y=h/2,S=Math.ceil(h/20),r=this.getShapes(),T=0,i=r.length;T<i;T++){var d=r[T],x=T/i,f=Math.PI*2*x,o=yD(.25,1,(1-this.value+x)%1);d.lineStyle(S,this.color,o),s&&d.setP0(e+Math.cos(f)*y,t+Math.sin(f)*y).setP1(e+Math.cos(f)*h,t+Math.sin(f)*h)}this.isInitialize=!1}},TD={buildShapes(){this.addShape(new je().setName("track")),this.addShape(new je().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=s*.9,y=Math.ceil(h/25),S=s*.1,r=Math.PI*2*this.value;this.getShape("track").lineStyle(y,this.color,.7).setRadius(h).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(S).setCenterPosition(e+Math.cos(r)*h,t+Math.sin(r)*h)}},SD={buildShapes(){this.addShape(new je().setName("track")),this.addShape(new jr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=Math.ceil(s/25),y=s-h/2;this.getShape("track").lineStyle(h,this.color,.5).setRadius(y).setCenterPosition(e,t);var S=this.value*360,r=S+60;this.getShape("arc").lineStyle(h,this.color,1).setRadius(y).setCenterPosition(e,t).setAngle(S,r)}},PD=Phaser.Math.Linear,ED={buildShapes(){for(var e=0;e<4;e++){var t=new jr().setPie();this.addShape(t),t.setData("speed",PD(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h;this.prevValue!==void 0&&(h=this.value-this.prevValue,this.prevValue>this.value&&(h+=1));for(var y=this.getShapes(),S=0,r=y.length;S<r;S++){var T=y[S],i=(S+1)/r;if(this.prevValue===void 0){var d=S/r*360,x=d+90;T.fillStyle(this.color,i).setRadius(s).setCenterPosition(e,t).setAngle(d,x).setData("angle",d)}else{var d=T.getData("angle")+T.getData("speed")*h;d=d%360;var x=d+90;T.fillStyle(this.color,i).setRadius(s).setCenterPosition(e,t).setAngle(d,x).setData("angle",d)}}this.prevValue=this.value}},MD={buildShapes(){this.addShape(new je)},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=s*this.value,y=Math.ceil(s/25),S=bt(this.value);this.getShapes()[0].lineStyle(y,this.color,S).setRadius(h).setCenterPosition(e,t)}},wD=Phaser.Math.Linear,RD=Phaser.Math.Easing.Expo.In,AD={buildShapes(){this.addShape(new je().setName("center")),this.addShape(new be().setName("arc0")),this.addShape(new be().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=this.isInitialize||this.isSizeChanged,y=s*2/6,S=e-s+y,r=t+s-y,T=this.getShapes(),i=0,d=T.length;i<d;i++){var x=T[i],f=(this.value+(d-i)*.1)%1;f=RD(bt(f));var o=wD(.25,1,f);switch(x.name){case"center":x.fillStyle(this.color,o),h&&x.setRadius(y).setCenterPosition(S,r);break;case"arc0":if(x.fillStyle(this.color,o),h){var a=y*2,n=y*3;x.startAt(S,r-a).lineTo(S,r-n).setIterations(8).arc(S,r,n,270,360).lineTo(S+a,r).setIterations(6).arc(S,r,a,360,270,!0).close()}break;case"arc1":if(x.fillStyle(this.color,o),h){var a=y*4,n=y*5;x.startAt(S,r-a).lineTo(S,r-n).setIterations(8).arc(S,r,n,270,360).lineTo(S+a,r).setIterations(6).arc(S,r,a,360,270,!0).close()}break}}this.isInitialize=!1}},LD={buildShapes(){for(var e=0;e<2;e++)this.addShape(new je)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,h=Math.ceil(s/25),y=s-h,S=this.getShapes(),r=0,T=S.length;r<T;r++){var i=S[r],d=(this.value+r/T)%1,x=bt(d);i.lineStyle(h,this.color,x).setRadius(d*y).setCenterPosition(e,t)}}},OD={buildShapes(){this.addShape(new jr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,h=Math.ceil(s/10),y=s-h,S=this.value*720,r=bt(this.value)*180,T=S-r;this.getShape("arc").lineStyle(h,this.color,1).setRadius(y).setCenterPosition(e,t).setAngle(T+315,S+315)}};Phaser.Utils.Objects.GetValue;const Ju={leftArrow:eh,rightArrow:eh,upArrow:eh,downArrow:eh,audio:tD,ball:iD,bars:nD,box:aD,clock:uD,cube:fD,dots:cD,facebook:pD,grid:mD,hearts:xD,ios:CD,oribit:TD,oval:SD,pie:ED,puff:MD,radio:AD,rings:LD,spinner:OD},Qu=[];for(var FD in Ju)Qu.push(FD);const Tp=Phaser.Utils.Array.GetRandom,bD={setAnimationMode(e,t){Ju.hasOwnProperty(e)||(e=Tp(Qu)),this.animationMode=e;var s=Ju[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":s.setDirection.call(this,"left");break;case"rightArrow":s.setDirection.call(this,"right");break;case"upArrow":s.setDirection.call(this,"up");break;case"downArrow":s.setDirection.call(this,"down");break}return this.clear(),s.buildShapes.call(this),this.updateShapes=s.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=Tp(Qu);return this.setAnimationMode(t,e),this}},DD=Phaser.Utils.Objects.GetValue;class mf extends hx{constructor(t,s){super(t,s),this.type="rexSpinnerAIO",this.setAnimationMode(DD(s,"animationMode"))}}Object.assign(mf.prototype,bD);it.register("aioSpinner",function(e){var t=new mf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.AIOSpinner",mf);const ID={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}};var ox=function(){for(var e=this.scaleMode-1,t=0,s=this.images.length;t<s;t++){var h=this.images[t],y=cf(h,this,e,!0),S=y.width/h.width;this.setChildLocalScale(h,S),h.biasScale=S}},Lh=function(e){this.scaleMode===0?this.resize(e.width,e.height):ox.call(this)};const Sp=Phaser.Utils.Objects.IsPlainObject,$l=Phaser.Utils.Objects.GetValue,BD=Phaser.Utils.Array.GetRandom;var GD={out:0,in:1},gi=function(e,t,...s){for(var h=0,y=s.length;h<y;h++){var S=s[h];if(S&&S.hasOwnProperty(e))return S[e]}return t};const ND={setTransitionDirection(e){return typeof e=="string"&&(e=GD[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),Lh.call(this,this.nextImage),this},transit(e,t,s){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),s!==void 0&&(e={key:e,frame:t,mode:s}),this.currentTransitionMode=void 0,Sp(e)){var h=e;e=$l(h,"key",void 0),t=$l(h,"frame",void 0),s=$l(h,"mode"),Array.isArray(s)&&(s=BD(s));var y;this.transitionModes&&this.transitionModes.hasOwnProperty(s)&&(y=this.transitionModes[s],this.currentTransitionMode=s),this.setDuration(gi("duration",this.duration,h,y)).setEaseFunction(gi("ease",this.easeFunction,h,y)).setTransitionDirection(gi("dir",this.dir,h,y));var S=gi("mask",void 0,h,y);S&&this.setMaskGameObject(S),this.setMaskEnable(S===!0);var r=gi("onStart",void 0,h,y),T=gi("onProgress",void 0,h,y),i=gi("onComplete",void 0,h,y);(r!==void 0||T!==void 0||i!==void 0)&&this.setTransitionStartCallback(r,gi("onStartScope",void 0,h,y)).setTransitionProgressCallback(T,gi("onProgressScope",void 0,h,y)).setTransitionCompleteCallback(i,gi("onCompleteScope",void 0,h,y))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),Sp(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Ki(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var Pp=function(e,t,s,h,y){switch(this.clear().fillStyle(16777215),this.shapeType){case 1:s=s.left;var S=Math.min(e,t)/2;this.fillCircle(-e*(h-.5),-t*(y-.5),S+s);break;default:this.fillRect(-(e*h)-s.left,-(t*y)-s.top,e+s.left+s.right,t+s.top+s.bottom);break}};const zD=Phaser.GameObjects.Graphics;class ju extends zD{constructor(t,s,h){s===void 0&&(s=0),typeof s=="string"&&(s=VD[s]),super(t.scene),this.parent=t,this.shapeType=s,this.padding=ys(h),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,s){var h=this.parent;return t===void 0&&(t=h.x),s===void 0&&(s=h.y),super.setPosition(t,s),this}resize(t,s,h){var y=this.parent;t===void 0&&(t=y.width),s===void 0&&(s=y.height),h===void 0?h=this.padding:typeof h=="number"&&(h=ys(h));var S=this.width!==t||this.height!==s,r=this.padding!==h&&!oo(this.padding,h);return!S&&!r?this:(this.width=t,this.height=s,r&&Ri(h,this.padding),this.originX=y.originX,this.originY=y.originY,Pp.call(this,t,s,h,y.originX,y.originY),this)}setOrigin(t,s){s===void 0&&(s=t);var h=this.parent;return t===void 0&&(t=h.originX),s===void 0&&(s=h.originY),this.originX===t&&this.originY===s?this:(this.originX=t,this.originY=s,Pp.call(this,this.width,this.height,this.padding,t,s),this)}}const VD={rectangle:0,circle:1},kD={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof ju)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new ju(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,s){return t===void 0&&(t=!0),s===void 0&&(s=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(s)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var s=this.getCellImages(),h=0,y=s.length;h<y;h++)this.setImageMaskEnable(s[h],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}};var XD=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var s;return e==="__BASE"?s=function(h,y){return`${h}${t}${y}`}:s=function(h,y){return`${e}_${h}${t}${y}`},s},WD=function(e,t,s,h,y,S){s==null&&(s="__BASE"),S||(S=XD(s,S));for(var r=e.sys.textures.get(t),T=typeof s=="object"?s:r.get(s),i=T.width,d=T.height,x,f,o,a=i/h,n=d/y,u=T.cutX,c=T.cutY,l=0,v=0,p=0;p<y;p++){l=0;for(var g=0;g<h;g++)o=S(g,p),x=l+u,f=v+c,r.add(o,0,x,f,a,n),l+=a;v+=n}return{getFrameNameCallback:S,cellWidth:a,cellHeight:n,columns:h,rows:y}};const Gi=Phaser.Utils.Objects.GetValue,YD=Phaser.GameObjects.Image,UD=Phaser.Utils.Objects.IsPlainObject,HD=Phaser.Math.RotateAround;var $D=function(e,t,s,h){UD(t)&&(h=t,t=Gi(h,"columns",1),s=Gi(h,"rows",1));var y=Gi(h,"createImageCallback");if(!y){var S=Gi(h,"ImageClass",YD);y=function(I,B,N){return new S(I,0,0,B,N)}}for(var r=Gi(h,"originX",.5),T=Gi(h,"originY",.5),i=Gi(h,"add",!0),d=Gi(h,"align",i),x=Gi(h,"objectPool",void 0),f=e.scene,o=e.texture,a=e.frame,n=WD(f,o,a,t,s),u=n.getFrameNameCallback,c=e.scaleX,l=e.scaleY,v=e.rotation,p=e.getTopLeft(),g=p.x,m=p.y,C=[],P=n.cellWidth*c,M=n.cellHeight*l,E=0;E<s;E++)for(var w=0;w<t;w++){var R,A=u(w,E);if(x&&x.length>0?R=x.pop().setTexture(o,A):R=y(f,o,A),i&&f.add.existing(R),d){var L=g+P*w,F=m+M*E,O=L+r*P,b=F+T*M;R.setOrigin(r,T).setPosition(O,b).setScale(c,l).setRotation(v),HD(R,g,m,v)}C.push(R)}return C};const KD={gridCutImage(e,t,s,h){h===void 0&&(h={}),h.objectPool=this.imagesPool;for(var y=$D(e,t,s,h),S,r=0,T=y.length;r<T;r++)S=y[r],S.setVisible(!0),this.add(S);return this.cellImages=y,this.setChildLocalVisible(e,!1),y},gridCutCurrentImage(e,t,s){return this.gridCutImage(this.currentImage,e,t,s)},gridCutNextImage(e,t,s){return this.gridCutImage(this.nextImage,e,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,s,h,y=0,S=t.length;y<S;y++)s=t[y],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),h=s.frame.name,s.setTexture(),e.remove(h);return this.imagesPool.push(...t),t.length=0,this}},lx={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var ux={};Object.assign(ux,ID,ND,kD,KD,lx);var ZD=function(e,t,s,h){},JD=function(e,t,s,h){e.setChildLocalAlpha(t,1-h).setChildLocalAlpha(s,h)},QD=function(e,t,s,h){e.setChildLocalAlpha(t,1)};const Ep=Phaser.Utils.Objects.IsPlainObject,_t=Phaser.Utils.Objects.GetValue,jD=Phaser.Math.Clamp;class Eo extends We{constructor(t,s,h,y,S,r){Ep(s)?(r=s,s=_t(r,"x",0),h=_t(r,"y",0),y=_t(r,"key",void 0),S=_t(r,"frame",void 0)):Ep(S)&&(r=S,S=void 0);var T=_t(r,"back",void 0),i=_t(r,"front",void 0);T||(T=t.add.image(s,h,y,S)),i||(i=t.add.image(s,h,y,S));var d=_t(r,"width",void 0),x=_t(r,"height",void 0),f=d!==void 0&&x!==void 0?1:0;d===void 0&&(d=i.width),x===void 0&&(x=i.height),super(t,s,h,d,x),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,f=_t(r,"scaleMode",f),typeof f=="string"&&(f=qD[f]),this.scaleMode=f,T.setVisible(!1),this.addMultiple([T,i]),this.backImage=T,this.frontImage=i,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var o=_t(r,"onStart",void 0),a=_t(r,"onProgress",void 0),n=_t(r,"onComplete",void 0),u=_t(r,"dir",0);o===void 0&&a===void 0&&n===void 0&&(o=ZD,a=JD,n=QD,u=0),this.setTransitionStartCallback(o,_t(r,"onStartScope",void 0)).setTransitionProgressCallback(a,_t(r,"onProgressScope",void 0)).setTransitionCompleteCallback(n,_t(r,"onCompleteScope",void 0)).setTransitionDirection(u).setDuration(_t(r,"duration",1e3)).setEaseFunction(_t(r,"ease","Linear"));var c=_t(r,"mask",void 0);c&&this.setMaskGameObject(c),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,Lh.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,s){return this.flipX=t,this.flipY=s,this}get t(){return this._t}set t(t){if(t=jD(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,h=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Kl.call(this,this.onStartCallback,this.onStartCallbackScope,this,s,h,t)),Kl.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,s,h,t),t===1){Kl.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,s,h,t);var y=h.texture.key,S=h.frame.name;this.frontImage.setTexture(y,S),this.backImage.setTexture(y,S),Lh.call(this,h),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),Lh.call(this,this.frontImage),this}setSize(t,s){return super.setSize(t,s),this.scaleMode&&ox.call(this),this}}var Kl=function(e,t,s,h,y,S){if(!!e){if(this.scaleMode){var r;h.biasScale>0&&(r=this.getChildLocalScaleX(h),r=r/h.biasScale,this.setChildLocalScale(h,r)),y.biasScale&&(r=this.getChildLocalScaleX(y),r=r/y.biasScale,this.setChildLocalScale(y,r))}if(t?e.call(t,s,h,y,S):e(s,h,y,S),this.scaleMode){var r;h.biasScale>0&&(r=this.getChildLocalScaleX(h),r=r*h.biasScale,this.setChildLocalScale(h,r)),y.biasScale&&(r=this.getChildLocalScaleX(y),r=r*y.biasScale,this.setChildLocalScale(y,r))}}};Object.assign(Eo.prototype,ux);const qD={fit:1,FIT:1,envelop:2,ENVELOP:2};it.register("transitionImage",function(e,t,s,h,y){var S=new Eo(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.TransitionImage",Eo);const _D="slideLeft",t4="slideRight",e4="slideUp",i4="slideDown",s4="slideAwayLeft",r4="slideAwayRight",n4="slideAwayUp",a4="slideAwayDown",h4="pushLeft",o4="pushRight",l4="pushUp",u4="pushDown",d4="zoomOut",f4="zoomIn",c4="zoomInOut",v4="fade",p4="crossFade",g4="wipeLeft",m4="wipeRight",x4="wipeUp",y4="wipeDown",C4="irisOut",T4="irisIn",S4="irisInOut",P4="pieOut",E4="pieIn",M4="pieInOut",w4="blinds",R4="squares",A4="diamonds",L4="circles",O4="curtain",F4="pixellate",b4="dissolve",D4="revealLeft",I4="revealRight",B4="revealUp",G4="revealDown";var N4=function(e){e.addTransitionMode(r4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.width*y;t.setChildLocalPosition(s,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(s4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.width*-y;t.setChildLocalPosition(s,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(a4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.height*y;t.setChildLocalPosition(s,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(n4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.height*-y;t.setChildLocalPosition(s,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0)}})},z4=function(e){e.addTransitionMode(t4,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=h.width*(y-1);t.setChildLocalPosition(h,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(h,0,0)}}).addTransitionMode(_D,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=h.width*(1-y);t.setChildLocalPosition(h,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(h,0,0)}}).addTransitionMode(i4,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=h.height*(y-1);t.setChildLocalPosition(h,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(h,0,0)}}).addTransitionMode(e4,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=h.height*(1-y);t.setChildLocalPosition(h,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(h,0,0)}})},V4=function(e){e.addTransitionMode(o4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.width*y;t.setChildLocalPosition(s,S,0);var S=h.width*(y-1);t.setChildLocalPosition(h,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(h,0,0)}}).addTransitionMode(h4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.width*-y;t.setChildLocalPosition(s,S,0);var S=h.width*(1-y);t.setChildLocalPosition(h,S,0)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(h,0,0)}}).addTransitionMode(u4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.height*y;t.setChildLocalPosition(s,0,S);var S=h.height*(y-1);t.setChildLocalPosition(h,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(h,0,0)}}).addTransitionMode(l4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=s.height*-y;t.setChildLocalPosition(s,0,S);var S=h.height*(1-y);t.setChildLocalPosition(h,0,S)},onComplete:function(t,s,h,y){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(h,0,0)}})},k4=function(e){e.addTransitionMode(d4,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=1-y;t.setChildLocalScale(s,S,S)},onComplete:function(t,s,h,y){t.setChildLocalScale(s,1,1)}}).addTransitionMode(f4,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){var S=y;t.setChildLocalScale(h,S,S)},onComplete:function(t,s,h,y){t.setChildLocalScale(h,1,1)}}).addTransitionMode(c4,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,h,y){h.tint=0},onProgress:function(t,s,h,y){var S;y<.5?(S=1-bt(y),t.setChildLocalScale(s,S,S)):(s.visible&&t.setChildVisible(s,!1),S=1-bt(y),t.setChildLocalScale(h,S,S))},onComplete:function(t,s,h,y){t.setChildLocalScale(s,1,1),t.setChildVisible(s,!0),s.tint=16777215,t.setChildLocalScale(h,1,1),t.setChildVisible(h,!0),h.tint=16777215}})},X4=function(e){e.addTransitionMode(v4,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,h,y){h.tint=0},onProgress:function(t,s,h,y){var S;y<.5?(y=bt(y),S=Math.floor(255*(1-y)),s.tint=(S<<16)+(S<<8)+S):(s.visible&&t.setChildVisible(s,!1),y=bt(y),S=Math.floor(255*(1-y)),h.tint=(S<<16)+(S<<8)+S)},onComplete:function(t,s,h,y){t.setChildVisible(s,!0),s.tint=16777215,t.setChildVisible(h,!0),h.tint=16777215}}).addTransitionMode(p4,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,h,y){},onProgress:function(t,s,h,y){t.setChildLocalAlpha(s,1-y),t.setChildLocalAlpha(h,y)},onComplete:function(t,s,h,y){t.setChildLocalAlpha(s,1)}})},W4=function(e){var t=new bi(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var s=this.getShape("rect").fillStyle(16777215),h=1-this.value;switch(this.wipeMode){case"right":s.setSize(this.width*h,this.height).setTopLeftPosition(this.width-s.width,0);break;case"left":s.setSize(this.width*h,this.height).setTopLeftPosition(0,0);break;case"down":s.setSize(this.width,this.height*h).setTopLeftPosition(0,this.height-s.height);break;case"up":s.setSize(this.width,this.height*h).setTopLeftPosition(0,0);break}}});return t},Y4=function(e){var t=W4(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(m4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="right"},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(g4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="left"},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(y4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="down"},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(x4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="up"},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}})},U4=function(e){var t=new bi(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},H4=function(e){var t=U4(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(C4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(T4,{ease:"Linear",dir:"in",mask:t,onStart:function(s,h,y,S){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(1-S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(S4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){y.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,h,y,S){var r;S<.5?(S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),h.tint=(r<<16)+(r<<8)+r):(h.visible&&s.setChildVisible(h,!1),S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),y.tint=(r<<16)+(r<<8)+r)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1),s.setChildVisible(h,!0),h.tint=16777215,s.setChildVisible(y,!0),y.tint=16777215}})},$4=function(e){var t=new bi(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var s=Math.max(this.width,this.height)*2,h=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(s).setAngle(90-h,90+h).setPie()}});return t},K4=function(e){var t=$4(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(P4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(E4,{ease:"Linear",dir:"in",mask:t,onStart:function(s,h,y,S){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(1-S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}}).addTransitionMode(M4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){y.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,h,y,S){var r;S<.5?(S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),h.tint=(r<<16)+(r<<8)+r):(h.visible&&s.setChildVisible(h,!1),S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),y.tint=(r<<16)+(r<<8)+r)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1),s.setChildVisible(h,!0),h.tint=16777215,s.setChildVisible(y,!0),y.tint=16777215}})},Z4=function(e,t){var s=new bi(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var h=this.getShapes(),y=this.width/t,S=0;S<t;S++)h[S].fillStyle(16777215).setSize(y*this.value,this.height).setTopLeftPosition(y*S,0)}});return s},J4=function(e){var t=Z4(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(w4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}})},Q4=function(e,t,s){var h=new bi(e,{type:"Graphics",create:{rectangle:t*s},update:function(){for(var y=this.getShapes(),S=this.width/t,r=this.height/s,T=0;T<s;T++)for(var i=0;i<t;i++)y[i*s+T].fillStyle(16777215).setSize(S*this.value,r*this.value).setCenterPosition(S*(i+.5),r*(T+.5))}});return h},j4=function(e){var t=Q4(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(R4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}})},q4=function(e,t,s){var h=new bi(e,{type:"Graphics",create:{lines:t*s},update:function(){for(var y=this.getShapes(),S=this.width/(t-1),r=this.height/s,T=r*2,i=S*this.value,d=r*this.value,x=0;x<s;x++)for(var f=0;f<t;f++){var o=f*S,a=x*T+f%2*r;y[f*s+x].fillStyle(16777215).start(o+i,a).lineTo(o,a+d).lineTo(o-i,a).lineTo(o,a-d).lineTo(o+i,a).close()}}});return h},_4=function(e){var t=q4(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(A4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}})},t5=function(e,t,s){var h=new bi(e,{type:"Graphics",create:{circle:t*s},update:function(){for(var y=this.getShapes(),S=this.width/(t-1),r=this.height/s,T=r*2,i=Math.max(S,r)*this.value,d=0;d<s;d++)for(var x=0;x<t;x++){var f=x*S,o=d*T+x%2*r;y[x*s+d].fillStyle(16777215).setCenterPosition(f,o).setRadius(i)}}});return h},e5=function(e){var t=t5(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(L4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){s.maskGameObject.setValue(S)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1)}})},i5=function(e,t){var s=new bi(e,{type:"Graphics",create:{lines:t},update:function(){for(var h=this.getShapes(),y=this.width/t,S=y/2,r=0;r<t;r++){var T=y*r,i=this.height*this.value,d=T+S;h[r].fillStyle(16777215).start(T,0).horizontalLineTo(i).arc(d,i,S,180,0,!0).horizontalLineTo(-i).lineTo(T,0).close()}}});return s},s5=function(e){var t=i5(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(O4,{ease:"Linear",dir:"out",mask:t,onStart:function(s,h,y,S){y.tint=0,s.setCurrentImageMaskEnable(!0,!0),s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,h,y,S){var r;S<.5?(S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(S),h.tint=(r<<16)+(r<<8)+r):(h.visible&&s.setChildVisible(h,!1),S=bt(S),r=Math.floor(255*(1-S)),s.maskGameObject.setValue(S),y.tint=(r<<16)+(r<<8)+r)},onComplete:function(s,h,y,S){s.removeMaskGameObject(!1),s.setChildVisible(h,!0),h.tint=16777215,s.setChildVisible(y,!0),y.tint=16777215}})},r5=function(e){e.addTransitionMode(F4,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,h,y){t.setChildVisible(h,!1),s.effect=s.preFX.addPixelate(0),h.effect=h.preFX.addPixelate(0)},onProgress:function(t,s,h,y){if(y<.5){y=bt(y);var S=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(S*y)}else{s.visible&&t.setChildVisible(s,!1),h.visible||t.setChildVisible(h,!0),y=bt(y);var S=Math.min(h.width,h.height)/5;h.effect.amount=Math.ceil(S*y)}},onComplete:function(t,s,h,y){s.preFX.remove(s.effect),delete s.effect,t.setChildVisible(s,!0),h.preFX.remove(h.effect),delete h.effect}})};const n5=`vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }
`,a5=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

${n5}

vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,h5=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,ii=Phaser.Utils.Objects.GetValue,o5=Phaser.Math.Clamp;class Zl extends h5{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:a5}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(ii(t,"progress",0)),this.setTransitionTargetTexture(ii(t,"toTexture","__DEFAULT"),ii(t,"toFrame",void 0),ii(t,"resizeMode",1)),this.setNoise(ii(t,"noiseX",void 0),ii(t,"noiseY",void 0),ii(t,"noiseZ",void 0)),this.setFromEdge(ii(t,"fromEdgeStart",.01),ii(t,"fromEdgeWidth",.05)),this.setToEdge(ii(t,"toEdgeStart",.01),ii(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=o5(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,s,h){t===void 0&&(t="__DEFAULT");var y=this.game.textures.getFrame(t,s);return y||(y=this.game.textures.getFrame("__DEFAULT")),this.toRatio=y.width/y.height,this.toFrame=y,this.targetTexture=y.glTexture,h!==void 0&&(this.resizeMode=h),this}setResizeMode(t){return typeof t=="string"&&(t=l5[t]),this.resizeMode=t,this}setNoise(t,s,h){return t===void 0&&(t=4+Math.random()*6),s===void 0&&(s=4+Math.random()*6),h===void 0&&(h=Math.random()*10),this.noiseX=t,this.noiseY=s,this.noiseZ=h,this}setFromEdge(t,s){return this.fromEdgeStart=t,this.fromEdgeWidth=s,this}setToEdge(t,s){return this.toEdgeStart=t,this.toEdgeWidth=s,this}}var l5={stretch:0,contain:1,cover:2},u5=function(e,t,s){qs(e).renderer.pipelines.addPostPipeline(t,s)},d5=function(e,t,s){s===void 0&&(s={}),e.setPostPipeline(t);var h=e.postPipelines[e.postPipelines.length-1];return h.resetFromJSON(s),s.name&&(h.name=s.name),h};const Mp=Phaser.Utils.Array.SpliceOne;var f5=function(e,t,s){if(s===void 0)for(var h=e.postPipelines,y=h.length-1;y>=0;y--){var S=h[y];S instanceof t&&(S.destroy(),Mp(h,y))}else for(var h=e.postPipelines,y=0,r=h.length;y<r;y++){var S=h[y];S instanceof t&&S.name===s&&(S.destroy(),Mp(h,y))}},c5=function(e){u5(e.scene.game,"rexDissolvePostFx",Zl),e.addTransitionMode(b4,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,h,y){s.effect=d5(s,Zl)},onProgress:function(t,s,h,y){s.effect.setProgress(y)},onComplete:function(t,s,h,y){f5(s,Zl),delete s.effect}})};const ih=.1,v5=0,p5=0,g5=1,m5=1,wp=0,Rp=1;var x5=function(e){e.addTransitionMode(I4,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,h,y){h.effect=h.preFX.addReveal(ih,v5,wp)},onProgress:function(t,s,h,y){h.effect.progress=y},onComplete:function(t,s,h,y){h.preFX.remove(h.effect),delete h.effect}}).addTransitionMode(D4,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,h,y){h.effect=h.preFX.addReveal(ih,g5,wp)},onProgress:function(t,s,h,y){h.effect.progress=y},onComplete:function(t,s,h,y){h.preFX.remove(h.effect),delete h.effect}}).addTransitionMode(G4,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,h,y){h.effect=h.preFX.addReveal(ih,p5,Rp)},onProgress:function(t,s,h,y){h.effect.progress=y},onComplete:function(t,s,h,y){h.preFX.remove(h.effect),delete h.effect}}).addTransitionMode(B4,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,h,y){h.effect=h.preFX.addReveal(ih,m5,Rp)},onProgress:function(t,s,h,y){h.effect.progress=y},onComplete:function(t,s,h,y){h.preFX.remove(h.effect),delete h.effect}})};const Ap=[N4,z4,V4,k4,X4,H4,K4,Y4,J4,j4,_4,e5,s5,r5,c5,x5];class dx extends Eo{constructor(t,s,h,y,S,r){super(t,s,h,y,S,r);for(var T=0,i=Ap.length;T<i;T++)Ap[T](this)}}it.register("transitionImagePack",function(e,t,s,h,y){var S=new dx(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.TransitionImagePack",dx);var y5=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=cf(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},fx={scaleImage:y5};Object.assign(fx,lx);var C5=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),Se(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const Lp=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue;class Mo extends We{constructor(t,s,h,y,S,r){Lp(s)?(r=s,s=Ni(r,"x",0),h=Ni(r,"y",0),y=Ni(r,"key",void 0),S=Ni(r,"frame",void 0)):Lp(S)&&(r=S,S=void 0);var T=Ni(r,"image");T?T.setPosition(s,h).setOrigin(.5):(T=t.add.image(s,h,y,S),y===void 0&&T.setVisible(!1)),super(t,s,h,1,1),this.type="rexImageBox";var i=Ni(r,"background");i&&this.add(i),this.background=i,this.add(T),this.image=T,this.scaleUp=Ni(r,"scaleUp",!1);var d=Ni(r,"width",T.width),x=Ni(r,"height",T.height);this.resize(d,x)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,s){return super.resize(t,s),C5.call(this),this.scaleImage(),this}setTexture(t,s){var h=this.image;return h.setTexture(t,s),t!==null?(this.setChildVisible(h,!0),this.scaleImage()):this.setChildVisible(h,!1),this}}Object.assign(Mo.prototype,fx);it.register("imageBox",function(e,t,s,h,y){var S=new Mo(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.ImageBox",Mo);it.register("fullWindowRectangle",function(e,t){var s=new rf(this.scene,e,t);return this.scene.add.existing(s),s});et(window,"RexPlugins.UI.FullWindowRectangle",rf);it.register("fullWindowZone",function(){var e=new wd(this.scene);return this.scene.add.existing(e),e});et(window,"RexPlugins.UI.FullWindowZone",wd);it.register("cover",function(e){var t=new nf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Cover",nf);var xf=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var s=this.node.style;return s.width=`${e}px`,s.height=`${t}px`,this.updateSize(),this};const Op={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Fp={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},T5={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},bp=Phaser.Utils.Objects.GetValue;var cx=function(e,t,s,h){var y=bp(h,"preventDefault",!1),S=bp(h,"preTest");for(let r in s)t.addEventListener(r,function(T){(!S||S(e,r))&&e.emit(s[r],e,T),y&&T.preventDefault()})};const S5=Phaser.GameObjects.DOMElement,Dp=Phaser.Utils.Objects.IsPlainObject,mi=Phaser.Utils.Objects.GetValue;class wo extends S5{constructor(t,s,h,y,S,r){Dp(s)?(r=s,s=mi(r,"x",0),h=mi(r,"y",0),y=mi(r,"width",0),S=mi(r,"height",0)):Dp(y)&&(r=y,y=mi(r,"width",0),S=mi(r,"height",0)),r===void 0&&(r={});var T,i=mi(r,"inputType",void 0);i===void 0&&(i=mi(r,"type","text")),i==="textarea"?(T=document.createElement("textarea"),T.style.resize="none"):(T=document.createElement("input"),T.type=i),Nh(Op,r,T);var d=mi(r,"style",void 0);d=Nh(Fp,r,d);var x=T.style;for(var f in r)f in Op||f in Fp||f in x&&(d[f]=r[f]);d["box-sizing"]="border-box",super(t,s,h,T,d),this.type="rexInputText",this.resize(y,S),cx(this,T,T5),xm(T),mi(r,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var P5={resize:xf};Object.assign(wo.prototype,P5);it.register("inputText",function(e){var t=new wo(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.InputText",wo);const Ip=Phaser.Utils.Objects.GetValue;var E5=function(e,t){var s=document.createElement("input");s.type="file";var h=Ip(t,"accept",""),y=Ip(t,"multiple",!1);return s.setAttribute("accept",h),y?s.setAttribute("multiple",""):s.removeAttribute("multiple"),s},vx=function(e,t){return e===void 0&&(e=0),new Promise(function(s,h){setTimeout(function(){s(t)},e)})},px=function({game:e,fileInput:t,closeDelay:s}){return ho(qs(e).events,"focus").then(function(){return vx(s)}).then(function(){var h={files:t.files};return Promise.resolve(h)})};const M5=Phaser.Utils.Objects.GetValue,w5=Phaser.DOM.RemoveFromDOM;var gx=function(e,t){var s=M5(t,"closeDelay",200),h=E5(e,t);return h.click(),px({game:e,fileInput:h,closeDelay:s}).then(function(y){return w5(h),h.remove(),Promise.resolve(y)})},mx=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},R5=function(e,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}e=qs(e);var h;return s==="textures"?h=e.textures:h=e.cache[s],h},xx=function(e,t,s,h,y,S){if(!(y===null||y===!1))if(Hi(y))y();else{var r=R5(e,s,y);r.exists(h)&&r.remove(h)}var T=e.load;if(S&&T.once(`filecomplete-${s}-${h}`,function(d,x,f){S(f)}),Hi(t))t();else{var i=window.URL.createObjectURL(t);T[s](h,i)}T.start()},A5=function(e,t,s,h,y){var S=this.scene;return xx(S,e,t,s,h,y),this},L5=function(e,t,s,h){var y=this.scene;return new Promise(function(S,r){var T=function(i){S(i)};xx(y,e,t,s,h,T)})};const yx={loadFile:A5,loadFilePromise:L5},O5=Phaser.GameObjects.DOMElement,Bp=Phaser.Utils.Objects.IsPlainObject,xi=Phaser.Utils.Objects.GetValue;class ha extends O5{constructor(t,s,h,y,S,r){Bp(s)?(r=s,s=xi(r,"x",0),h=xi(r,"y",0),y=xi(r,"width",0),S=xi(r,"height",0)):Bp(y)&&(r=y,y=xi(r,"width",0),S=xi(r,"height",0));var T=document.createElement("input");T.type="file";var i=T.style;i.display="none";var d=document.createElement("label");d.appendChild(T);var x=xi(r,"style",void 0);super(t,s,h,d,x),this.type="rexFileChooser",this.resetFromJSON(r),this.resize(y,S);var f=this;T.onchange=function(){f.emit("change",f)},this.setCloseDelay(xi(r,"closeDelay",200)),T.onclick=function(){px({game:t,fileInput:T,closeDelay:f.closeDelay}).then(function(){f.emit("select",f)})}}resetFromJSON(t){return this.setAccept(xi(t,"accept","")),this.setMultiple(xi(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var F5={resize:xf,syncTo:mx};Object.assign(ha.prototype,F5,yx);it.register("fileChooser",function(e){var t=new ha(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.FileChooser",ha);const b5={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},D5={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}};var Cx={resize:xf,syncTo:mx};Object.assign(Cx,b5,D5,yx);const I5={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},B5=Phaser.GameObjects.DOMElement,Gp=Phaser.Utils.Objects.IsPlainObject,zi=Phaser.Utils.Objects.GetValue;class yf extends B5{constructor(t,s,h,y,S,r){Gp(s)?(r=s,s=zi(r,"x",0),h=zi(r,"y",0),y=zi(r,"width",0),S=zi(r,"height",0)):Gp(y)&&(r=y,y=zi(r,"width",0),S=zi(r,"height",0)),r===void 0&&(r={});var T=document.createElement("div"),i=zi(r,"style",void 0);super(t,s,h,T,i),this.type="rexFileDropZone",this.resize(y,S),this._files=[],this.setDropEnable(zi(r,"dropEnable",!0));var d=zi(r,"filters");d&&this.addFilters(d),cx(this,T,I5,{preventDefault:!0,preTest(x){return x.dropEnable}}),this.on("drop",function(x,f){this._files=f.dataTransfer.files;var o=this._files;if(o&&this.filters)for(var a in this.filters){for(var n=this.filters[a],u=[],c=0,l=o.length;c<l;c++){var v=o[c];n(v,o)&&u.push(v)}u.length>0&&this.emit(`drop.${a}`,u)}},this)}get files(){return this._files}}Object.assign(yf.prototype,Cx);it.register("fileDropZone",function(e){var t=new yf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.FileDropZone",yf);var G5=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,h,y,S,r,T,i=!1;if(this.childrenProportion,this.orientation===0)for(var d=this.space.item,x=!0,f=0,o=s.length;f<o;f++)h=s[f],h.hasOwnProperty("rexSizer")&&(y=h.rexSizer,!y.hidden&&(S=y.proportion,S===0||e?(T=this.getChildWidth(h),y.fitRatio>0&&!y.resolved&&(T=void 0),T===void 0&&(S!==0&&!this.hasProportion0Child?T=0:i=!0)):T=0,!i&&(r=h.rexSizer.padding,T+=r.left+r.right,x?x=!1:T+=d,t+=T)));else for(var f=0,o=s.length;f<o;f++)h=s[f],h.hasOwnProperty("rexSizer")&&(y=h.rexSizer,!y.hidden&&(T=this.getChildWidth(h),T===void 0&&(i=!0),!i&&(r=y.padding,T+=r.left+r.right,t=Math.max(T,t))));if(!i)return t+this.space.left+this.space.right},N5=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,h,y,S,r,T,i=!1;if(this.childrenProportion,this.orientation===0)for(var d=0,x=s.length;d<x;d++)h=s[d],h.hasOwnProperty("rexSizer")&&(y=h.rexSizer,!y.hidden&&(T=this.getChildHeight(h),T===void 0&&(i=!0),!i&&(r=y.padding,T+=r.top+r.bottom,t=Math.max(T,t))));else for(var f=this.space.item,o=!0,d=0,x=s.length;d<x;d++)h=s[d],h.hasOwnProperty("rexSizer")&&(y=h.rexSizer,!y.hidden&&(S=y.proportion,S===0||e?(T=this.getChildHeight(h),y.fitRatio>0&&!y.resolved&&(T=void 0),T===void 0&&(S!==0&&!this.hasProportion0Child?T=0:i=!0)):T=0,!i&&(r=y.padding,T+=r.top+r.bottom,o?o=!1:T+=f,t+=T)));if(!i)return t+this.space.top+this.space.bottom},z5=function(e,t){t===void 0&&(t=this.width);var s,h=e.rexSizer;if(this.orientation===0)h.proportion>0&&this.proportionLength>0&&(s=h.proportion*this.proportionLength);else if(h.expand){var y=this.space,S=t-y.left-y.right,r=h.padding;s=S-r.left-r.right}return s},V5=function(e,t){t===void 0&&(t=this.height);var s,h=e.rexSizer;if(this.orientation===0){if(h.expand){var y=this.space,S=t-y.top-y.bottom,r=h.padding;s=S-r.top-r.bottom}}else h.proportion>0&&this.proportionLength>0&&(s=h.proportion*this.proportionLength);return s},k5=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,h=0,y=t.length;h<y;h++)s=t[h],s.isRexSizer&&e.push(s);return e},X5=function(){this.hasRatioFitChild=!1;for(var e,t,s=this.sizerChildren,h=0,y=s.length;h<y;h++)e=s[h],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(Se(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,sa.call(this),this};const W5=Phaser.Math.Wrap;var Y5=function(){for(var e=this.sizerChildren,t,s,h,y=this.innerLeft,S=this.innerTop,r=this.innerWidth,T=this.innerHeight,i=y,d=S,x,f,o,a,n,u,c,l=this.startChildIndex,v=0,p=e.length;v<p;v++)l===0?c=v:c=W5(v+l,0,p),this.rtl&&(c=p-c-1),t=e[c],!t.rexSizer.hidden&&(s=t.rexSizer,h=s.padding,ra.call(this,t),t.isRexSpace?(n=0,u=0):(n=this.getExpandedChildWidth(t),u=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,n,u),vf(t,this)):Se(t,n,u),n===void 0&&(n=Lt(t)),u===void 0&&(u=Ot(t)),this.orientation===0?(x=i+h.left,s.proportion===0||this.proportionLength===0?o=n:o=s.proportion*this.proportionLength,f=d+h.top,a=T-h.top-h.bottom):(x=i+h.left,o=r-h.left-h.right,f=d+h.top,s.proportion===0||this.proportionLength===0?a=u:a=s.proportion*this.proportionLength),na.call(this,t,x,f,o,a,s.align),this.orientation===0?i+=o+h.left+h.right+this.space.item:d+=a+h.top+h.bottom+this.space.item)},U5=function(t){var t=Kd.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},H5=function(t){var t=Qd.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},$5=function(){return this.hasRatioFitChild&&this.orientation===1?!0:Zd.call(this)},Tx=function(e,t){if(!!this.hasRatioFitChild){var s;this.orientation===0?s=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):e-this.getInnerPadding("left")-this.getInnerPadding("right");for(var h,y,S,r,T=this.sizerChildren,i=0,d=T.length;i<d;i++){var h=T[i],y=h.rexSizer;if(!y.hidden){var x=y.fitRatio;!x||(this.orientation===0?(r=s-this.getChildOuterPadding(h,"top")-this.getChildOuterPadding(h,"bottom"),S=r*x):(S=s-this.getChildOuterPadding(h,"top")-this.getChildOuterPadding(h,"bottom"),r=S/x),Se(h,S,r),h.isRexSizer&&h.setMinSize(S,r),y.resolved=!0)}}}},K5=function(e){this.wrapResult||(this.orientation===1&&Tx.call(this,e,void 0),Jd.call(this,e))},Z5=function(){return this.hasRatioFitChild&&this.orientation===0?!0:jd.call(this)},J5=function(e){this.wrapResult||(this.orientation===0&&Tx.call(this,void 0,e),qd.call(this,e))};const Q5=Phaser.GameObjects.Zone;class Cf extends Q5{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var j5=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var h=-1,y=1/0,S=0,r=s.length;S<r;S++){var T=s[S],i;this.orientation===0?i=Math.abs(T.left-e):i=Math.abs(T.top-t),y>i&&(y=i,h=S)}var T=s[s.length-1],i;return this.orientation===0?i=Math.abs(T.right-e):i=Math.abs(T.bottom-t),y>i&&(y=i,h=S+1),h};const Sx=Phaser.Utils.Objects.IsPlainObject,Vi=Phaser.Utils.Objects.GetValue,Np=Phaser.Display.Align.CENTER,q5={min:0,full:-1};var Jl=function(e,t,s,h,y,S,r,T,i,d){ea.call(this,e);var x=e.isRexSpace,f=typeof t;if(t===null)return this;if(f!=="number"){if(f==="string")t=q5[t];else if(Sx(t)){var o=t;t=Vi(o,"proportion",void 0),s=Vi(o,"align",Np),h=Vi(o,"padding",0),y=Vi(o,"expand",!1),S=Vi(o,"key",void 0),r=Vi(o,"index",void 0),e.isRexSizer||(T=Vi(o,"minWidth",void 0),i=Vi(o,"minHeight",void 0)),d=Vi(o,"fitRatio",0)}}typeof s=="string"&&(s=qr[s]),t===void 0&&(t=x?1:0),s===void 0&&(s=Np),h===void 0&&(h=0),y===void 0&&(y=!1),T===void 0&&(x?T=0:e.isRexSizer||(T=e._minWidth)),i===void 0&&(x?i=0:e.isRexSizer||(i=e._minHeight)),d===void 0||d===!1?d=0:d===!0&&(d=Lt(e)/Ot(e));var o=this.getSizerConfig(e);return o.proportion=t,o.align=s,o.padding=ys(h),o.expand=y,o.fitRatio=t===0?d:0,r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(r,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=T===void 0?Lt(e):T:e.minHeight=i===void 0?Ot(e):i),y&&(this.orientation===0?e.minHeight=i:e.minWidth=T)),S!==void 0&&this.addChildrenMap(S,e),this};const _5={add:Jl,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),Jl.call(this,new Cf(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,s,h,y,S,r,T){return Sx(s)&&(s.index=e),Jl.call(this,t,s,h,y,S,r,e,T),this},insertAtPosition(e,t,s,h,y,S,r,T,i){var d=j5.call(this,e,t);return d===-1&&(d=void 0),this.insert(d,s,h,y,S,r,T,i),this}},t9=Phaser.Utils.Array.Remove,e9={remove(e,t){return this.getParentSizer(e)!==this?this:(t9(this.sizerChildren,e),ia.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,To.call(this,e),this}},i9={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=qr[t]),this.getSizerConfig(e).align=t,this}},s9={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},r9={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}};var n9=function(e){e===void 0&&(e="left");var t=this.sizerChildren,s=t[0],h=s&&s.isRexSpace;e==="right"||e==="bottom"||e==="center"?h||this.insertSpace(0):h&&this.remove(s,!0);var y=t.length-1,S=t[y],r=S&&S.isRexSpace;return e==="center"?r||this.insertSpace(y+1):r&&this.remove(S,!0),this};const Tf={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(s,h){var y=s.getData(e),S=h.getData(e);return t?S-y:y-S}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(s,h){var y=s[e],S=h[e];return t?S-y:y-S}),this}};var Px={getChildrenWidth:G5,getChildrenHeight:N5,getExpandedChildWidth:z5,getExpandedChildHeight:V5,getChildrenSizers:k5,preLayout:X5,layoutChildren:Y5,resolveWidth:U5,resolveHeight:H5,hasWidthWrap:$5,runWidthWrap:K5,hasHeightWrap:Z5,runHeightWrap:J5,setChildrenAlignMode:n9};Object.assign(Px,_5,e9,i9,s9,r9,Tf);var a9=function(){for(var e=0,t=this.sizerChildren,s,h,y=0,S=t.length;y<S;y++)s=t[y],!s.rexSizer.hidden&&(h=s.rexSizer.proportion,h>0?e+=h:h===0&&(this.hasProportion0Child=!0));return e},h9={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},oa=function(e){return typeof e=="string"&&(e=h9[e]),e};const Ql=Phaser.Utils.Objects.IsPlainObject,Ke=Phaser.Utils.Objects.GetValue;class St extends nr{constructor(t,s,h,y,S,r,T){Ql(s)?(T=s,s=Ke(T,"x",0),h=Ke(T,"y",0),y=Ke(T,"width",void 0),S=Ke(T,"height",void 0),r=Ke(T,"orientation",0)):Ql(y)?(T=y,y=Ke(T,"width",void 0),S=Ke(T,"height",void 0),r=Ke(T,"orientation",0)):Ql(r)&&(T=r,r=Ke(T,"orientation",0)),r===void 0&&(r=0),super(t,s,h,y,S,T),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(r),this.setItemSpacing(Ke(T,"space.item",0)),this.setStartChildIndex(Ke(T,"startChildIndex",0)),this.setRTL(Ke(T,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=oa(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=a9.call(this)),this._childrenProportion}}Object.assign(St.prototype,Px);var sh=function(e,t,s){if(!!e){var h=t==null,y=s==null;return h&&y||(h||(e.displayWidth=t),y||(e.displayHeight=s),h&&(e.scaleX=e.scaleY),y&&(e.scaleY=e.scaleX)),e}},o9=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){e.icon?this.show(s):this.hide(s);var h=e.iconSize;h&&(this.setChildDisplaySize(s,h,h),this.iconWidth!==void 0&&this.setIconSize(h)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var y=this.childrenMap.action;if(y){e.action?this.show(y):this.hide(y);var S=e.actionSize;S&&(this.setChildDisplaySize(y,S,S),this.actionWidth!==void 0&&this.setActionSize(S)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},l9={appendText:x0,resetDisplayContent:o9};class Sf extends St{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var s=this.childrenMap.text;!s||s.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,s){var h=this.childrenMap.icon;return!h||!h.setTexture?this:(h.setTexture(t,s),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(sh(h,this.iconWidth,this.iconHeight),this.resetChildScaleState(h)),this)}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(!!t)return t.texture}get frame(){var t=this.childrenMap.icon;if(!!t)return t.frame}setActionTexture(t,s){var h=this.childrenMap.action;return!h||!h.setTexture?this:(h.setTexture(t,s),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(sh(h,this.actionWidth,this.actionHeight),this.resetChildScaleState(h)),this)}get actionTexture(){var t=this.childrenMap.action;if(!!t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(!!t)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&sh(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&sh(s,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,s,h){var y=this.childrenMap.iconMask;y&&(y.setPosition(),this.resetChildPositionState(y));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),this}resize(t,s){super.resize(t,s);var h=this.childrenMap.iconMask;h&&h.resize();var y=this.childrenMap.actionMask;return y&&y.resize(),this}}Object.assign(Sf.prototype,l9);var ui=function(e,t,s,h){var y=new ju(t,s,h);if(e&&!e.isRexSizer){var S=y.createGeometryMask();e.setMask(S),this.once("destroy",function(){e.setMask(),S.destroy()})}return this.pin(y),y};const u9=Phaser.GameObjects.Text;var Pf=function(e){return e instanceof u9};const d9=Phaser.GameObjects.BitmapText;var Ex=function(e){return e instanceof d9};const ge=0,me=1,ke=2;var Ps=function(e){var t;return Ex(e)?t=ke:Pf(e)?t=ge:t=me,t},f9=function(e,t){for(var s=[],h=e.split(`
`),y=t.style,S=y.wordWrapWidth,r=y.hasOwnProperty("wrapMode")?y.wrapMode:3,T=t.context,i=0,d=h.length;i<d;i++)v9(T,h[i],S,r,s);return s},c9=function(e,t){var s;if(t===2)s=e.split("");else{s=[];for(var h=e.split(" "),y,S=0,r=h.length;S<r;S++)y=h[S],S<r-1?Dn(y)?s.push(y+" "):(s.push(...y.split("")),s.push(" ")):y!==""&&(Dn(y)?s.push(y):s.push(...y.split("")))}return s},v9=function(e,t,s,h,y){if(t.length<=100){var S=e.measureText(t).width;if(S<=s)return y.push(t),y}for(var r=c9(t,h),T,i,d=[],x=s,f=0,o=r.length;f<o;f++)T=r[f],i=e.measureText(T).width,x-=i,x<0&&(y.push(d.join("")),d.length=0,x=s-i),d.push(T);return d.length>0&&y.push(d.join("")),y},qu=function(e,t){var s=Ps(e);switch(s){case ge:switch(typeof t=="string"&&(t=Gh[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=f9;break;case 1:default:e.style.wordWrapCallback=null;break}break;case me:typeof t=="string"&&(t=Gh[t]||0),e.style.wrapMode=t;break}},p9=function(e){var t=function(s){var h=e.padding,y=s-h.left-h.right,S=e.style;return Pf(e)?(S.wordWrapWidth=y,S.maxLines=0):(S.wrapMode===0&&(S.wrapMode=1),S.wrapWidth=y,S.maxLines=0),S.fixedWidth=s,S.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},g9=function(e){var t=function(s){return e.setFixedSize(s,0).runWordWrap(),e.minHeight=e.height,e};return t},m9=function(e){var t=function(s){return e.setMaxWidth(s),e.minHeight=e.height,e};return t},x9=function(e){return e instanceof Kr},Hh=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=x9(e)?g9(e):Ex(e)?m9(e):p9(e),e};const Mt=Phaser.Utils.Objects.GetValue;class ji extends Sf{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexLabel";var h=Mt(s,"background",void 0),y=Mt(s,"icon",void 0),S=Mt(s,"iconMask",void 0),r=Mt(s,"text",void 0),T=Mt(s,"action",void 0),i=Mt(s,"actionMask",void 0),d=Mt(s,"align",void 0);if(h&&this.addBackground(h),y){var x;this.orientation===0?(r||T)&&(x={right:Mt(s,"space.icon",0),top:Mt(s,"space.iconTop",0),bottom:Mt(s,"space.iconBottom",0),left:Mt(s,"space.iconLeft",0)}):(r||T)&&(x={bottom:Mt(s,"space.icon",0),left:Mt(s,"space.iconLeft",0),right:Mt(s,"space.iconRight",0),top:Mt(s,"space.iconTop",0)});var f=Mt(s,"squareFitIcon",!1)?1:0;if(this.add(y,{proportion:0,padding:x,fitRatio:f}),S&&(S=ui.call(this,y,y,1)),!f){var o=Mt(s,"iconSize",void 0);this.setIconSize(Mt(s,"iconWidth",o),Mt(s,"iconHeight",o))}}if(r){var a=Mt(s,"wrapText",!1);a&&(a===!0&&(a="word"),qu(r,a),s.expandTextWidth=!0,Hh(r));var n=Mt(s,"space.text",0),u=Mt(s,"expandTextWidth",!1),c=Mt(s,"expandTextHeight",!1),l,x,v;this.orientation===0?(l=u?1:0,T&&(x={right:n}),v=c):(l=c?1:0,T&&(x={bottom:n}),v=u),this.add(r,{proportion:l,expand:v,padding:x})}if(T){var x;this.orientation===0?x={top:Mt(s,"space.actionTop",0),bottom:Mt(s,"space.actionBottom",0),right:Mt(s,"space.actionRight",0)}:x={left:Mt(s,"space.actionLeft",0),right:Mt(s,"space.actionRight",0),bottom:Mt(s,"space.actionBottom",0)};var f=Mt(s,"squareFitAction",!1)?1:0;if(this.add(T,{proportion:0,padding:x,fitRatio:f}),i&&(i=ui.call(this,T,T,1)),!f){var p=Mt(s,"actionSize");this.setActionSize(Mt(s,"actionWidth",p),Mt(s,"actionHeight",p))}}this.setChildrenAlignMode(d),this.addChildrenMap("background",h),this.addChildrenMap("icon",y),this.addChildrenMap("iconMask",S),this.addChildrenMap("text",r),this.addChildrenMap("action",T),this.addChildrenMap("actionMask",i)}}const us=Phaser.Utils.Objects.GetValue;var y9=function(e,t){var s=us(t,"canvas"),h=us(s,"width",128),y=us(s,"height",128),S=new sr(e,0,0,h,y);e.add.existing(S);var r=us(s,"key"),T=us(s,"frame"),i=us(s,"fill");return i!==void 0?S.fill(i):r!==void 0&&S.loadTexture(r,T),S.setTexture=S.loadTexture.bind(S),S},C9=function(e,t){var s=new Mo(e,{scaleUp:us(t,"scaleUpIcon",!1),background:us(t,"iconBackground"),image:y9(e,t)});return e.add.existing(s),s};const T9=Phaser.Utils.Objects.GetValue;var Mx=function(e,t){var s=T9(t,"clickTarget",this);return typeof s=="string"&&(s=e.getElement(s)),s};const S9=Phaser.Utils.Objects.GetValue;var P9=function(e,t){var s=Mx(e,t);if(!!s){var h=S9(t,"click"),y=new Zi(s,h);return y.on("click",e.open,e),y}};const wx={accept:"image/*",multiple:!1};var Rx=function(e,t){if(t.length!==0){var s=e.childrenMap.icon,h=s.image,y=t[0];return h.loadFromFilePromise(y).then(function(){return s.scaleImage(),e.emit("select",y,e),Promise.resolve(y)})}},E9=function(e,t){var s=e.scene,h=new ha(s,wx);return s.add.existing(h),e.pin(h),h.on("change",function(){Rx(e,h.files)}),h};const M9={async openPromise(){var e=this;return gx(this.scene.game,wx).then(function(t){return Rx(e,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}};var w9=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},R9=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},Ax={getFileName:w9,saveTexture:R9};Object.assign(Ax,M9);const A9=Phaser.Utils.Objects.GetValue;class Ef extends ji{constructor(t,s){var h=C9(t,s);s.icon=h,super(t,s),this.type="rexImageFileInputLabel";var y=this.iconWidth,S=this.iconWidth;y!==void 0&&S!==void 0&&h.resize(y,S),this.clickTarget=Mx(this,s),this.clickTarget&&(A9(s,"domButton",!0)?this.fileChooser=E9(this):this.clickBehavior=P9(this,s)),this.addChildrenMap("canvas",h.image),this.addChildrenMap("iconBackground",h.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser))}}Object.assign(Ef.prototype,Ax);it.register("imageInputLabel",function(e){var t=new Ef(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ImageInputLabel",Ef);class L9 extends Gt{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(Rt(t,s))return t[s];var h=t.parent;if(Rt(h,s))return h[s]}set(t,s,h){return Rt(t,s)?t[s]=h:Rt(t.parent,s)&&(t.parent[s]=h),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}}const jl=Phaser.Utils.Objects.GetValue;class O9 extends Gt{constructor(t,s){super(t,s),this.style=jl(s,"style",this);var h=jl(s,"propertiesMap");this.activeStyle=ql(s,"active",h),this.hoverStyle=ql(s,"hover",h),this.disableStyle=ql(s,"disable",h),this.onModifyStyle=jl(s,"onModifyStyle")}getStyle(t){return Rd(this.style,t)}modifyStyle(t){for(var s in t)this.style[s]=t[s];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(!!t){var s=this.getStyle(t);if(!oo(s,t))return this.modifyStyle(t),s}}setActiveState(t){return _l.call(this,"active",t),this}setHoverState(t){return _l.call(this,"hover",t),this}setDisableState(t){return _l.call(this,"disable",t),this}}var ql=function(e,t,s){var h=Yu(e,t);if(s)for(var y in h)s.hasOwnProperty(y)&&(h[s[y]]=h[y],delete h[y]);return h},_l=function(e,t){t===void 0&&(t=!0);var s=`${e}State`,h=`${e}Style`,y=`${e}StyleSave`;this[s]!==t&&(this[s]=t,t?this[y]=this.applyStyle(this[h]):(this.applyStyle(this[y]),this[y]=void 0))};const tn={addStyleManager(e){return this.styleManager=new O9(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}},F9=Phaser.GameObjects.Image,Pn=Phaser.Utils.Objects.GetValue;class la extends F9{constructor(t,s){s===void 0&&(s={});var h=Pn(s,"x",0),y=Pn(s,"y",0),S=Pn(s,"key",""),r=Pn(s,"frame",void 0);super(t,h,y,S,r),this.type="rexStatesImage";var T=Pn(s,"effects",!0);T&&Zr(this,T),this.style=new L9(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(la.prototype,tn);it.register("statesImage",function(e){var t=new la(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesImage",la);class ua extends tr{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesRoundRectangleShape",s.style=this,s.propertiesMap=b9,this.addStyleManager(s),delete s.style,delete s.propertiesMap}}const b9={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(ua.prototype,tn);it.register("statesRoundRectangle",function(e){var t=new ua(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesRoundRectangle",ua);class D9 extends Gt{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(Rt(t,s))return t[s];var h=t.parent;if(Rt(h,s))return h[s]}set(t,s,h){return Rt(t,s)?t[s]=h:Rt(t.parent,s)&&(t.parent[s]=h),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}}const I9=Phaser.GameObjects.NineSlice,si=Phaser.Utils.Objects.GetValue;class da extends I9{constructor(t,s){s===void 0&&(s={});var h=si(s,"x",0),y=si(s,"y",0),S=si(s,"key",null),r=si(s,"frame",null),T=si(s,"width",0),i=si(s,"height",0),d=si(s,"leftWidth",0),x=si(s,"rightWidth",0),f=si(s,"topHeight",0),o=si(s,"bottomHeight",0);super(t,h,y,S,r,T,i,d,x,f,o),this.type="rexStatesNineSlice";var a=si(s,"effects",!0);a&&Zr(this,a),this.style=new D9(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(da.prototype,tn);it.register("statesNineSlice",function(e){var t=new da(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesNineSlice",da);class B9 extends Gt{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(Rt(t,s))return t[s];var h=t.parent;if(Rt(h,s))return h[s]}set(t,s,h){return Rt(t,s)?t[s]=h:Rt(t.parent,s)&&(t.parent[s]=h),!0}get key(){return this.parent.textureKey}set key(t){this.key!==t&&this.parent.setBaseTexture(t,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(t){this.frame!==t&&this.parent.setBaseTexture(this.parent.textureKey,t)}}const G9=Phaser.Utils.Objects.GetValue;class fa extends qh{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesNinePatch";var h=G9(s,"effects",!0);h&&Zr(this,h),this.style=new B9(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(fa.prototype,tn);it.register("statesNinePatch",function(e){var t=new fa(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesNinePatch",fa);const N9=Phaser.GameObjects.Text,tu=Phaser.Utils.Objects.GetValue;class Ro extends N9{constructor(t,s){s===void 0&&(s={});var h=tu(s,"x",0),y=tu(s,"y",0),S=tu(s,"text","");super(t,h,y,S,s),this.type="rexStatesText",s.style=this.style,s.onModifyStyle=function(r,T){var i=T.hasOwnProperty("fontStyle")||T.hasOwnProperty("fontSize")||T.hasOwnProperty("fontFamily");r.style.update(i)},this.addStyleManager(s),delete s.style}}Object.assign(Ro.prototype,tn);it.register("statesText",function(e){var t=new Ro(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesText",Ro);class z9 extends Gt{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(Rt(t,s))return t[s];var h=t.parent;if(Rt(h,s))return h[s]}set(t,s,h){return Rt(t,s)?t[s]=h:Rt(t.parent,s)&&(t.parent[s]=h),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}}const V9=Phaser.GameObjects.BitmapText,zs=Phaser.Utils.Objects.GetValue;class Ao extends V9{constructor(t,s){s===void 0&&(s={});var h=zs(s,"x",0),y=zs(s,"y",0),S=zs(s,"font",""),r=zs(s,"fontSize",!1),T=zs(s,"align",0),i=zs(s,"tint");super(t,h,y,S,"",r,T),this.type="rexStatesBitmapText",i!==void 0&&this.setTint(i);var d=zs(s,"effects",!0);d&&Zr(this,d),this.style=new z9(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Ao.prototype,tn);it.register("statesBitmapText",function(e){var t=new Ao(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.StatesBitmapText",Ao);var k9=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,X9(this,e)),this},X9=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var h=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(h=!0,s.animation={});var y=s.animation;h&&(y.duration=0);var S=y.onProgress;y.onProgress=function(T){S&&S(T),e.needRedraw()};var r=y.onComplete;return y.onComplete=function(T){r&&r(T),e.needRedraw()},t},W9=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,s,h=0,y=t.length;h<y;h++)if(s=t[h],s.label===e)return s}else return this.chart.data.datasets[e]},Y9=function(e,t){var s=this.getChartDataset(e);if(s!==void 0){if(typeof t=="string"){var h=this.chart.data.labels;if(t=h.indexOf(t),t===-1)return}return s.data[t]}},U9=function(e,t,s){if(this.chart===void 0)return this;var h=this.getChartDataset(e);if(typeof t=="string"){var y=this.chart.data.labels;if(t=y.indexOf(t),t===-1)return this}return h.data[t]=s,this},H9=function(){return this.chart===void 0?this:(this.chart.update(),this)};class Mf extends sr{constructor(t,s,h,y,S,r){super(t,s,h,y,S),this.type="rexChart",this.chart=void 0,r!==void 0&&this.setChart(r)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,s){if(t===this.width&&s===this.height)return this;if(super.resize(t,s),this.chart){var h=this.chart;h.height=this.canvas.height,h.width=this.canvas.width,h.aspectRatio=h.height?h.width/h.height:null,h.update()}return this}}var $9={setChart:k9,getChartDataset:W9,getChartData:Y9,setChartData:U9,updateChart:H9};Object.assign(Mf.prototype,$9);it.register("chart",function(e,t,s,h,y){var S=new Mf(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.Chart",Mf);it.register("container",function(e,t,s,h,y){var S=new We(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.Container",We);it.register("sizer",function(e,t,s,h,y,S){var r=new St(this.scene,e,t,s,h,y,S);return this.scene.add.existing(r),r});et(window,"RexPlugins.UI.Sizer",St);var Lx=function(){return Array.prototype.reduce.call(arguments,K9,0)},K9=function(e,t){return e+t},Z9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,h=this.sizerChildren,y,S,r,T,i=!1;this.totalColumnProportions;for(var d=0;d<this.columnCount;d++){if(T=this.columnProportions[d],s=0,T===0||e){for(var x=0;x<this.rowCount;x++)y=h[x*this.columnCount+d],y&&(y.rexSizer.hidden||(r=this.getChildWidth(y),r===void 0&&(T!==0&&!this.hasColumnProportion0Child?r=0:i=!0),!i&&(S=y.rexSizer.padding,r+=S.left+S.right,s=Math.max(s,r))));i||(t+=s)}i||e&&(this.columnWidth[d]=s)}if(!i){var f=this.space,o=Math.max(f.indentLeftOdd,f.indentLeftEven);return t+Lx(f.left,o,...f.column,f.right)}},J9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,h=this.sizerChildren,y,S,r,T,i=!1;this.totalRowProportions;for(var d=0;d<this.rowCount;d++){if(T=this.rowProportions[d],s=0,T===0||e){for(var x=0;x<this.columnCount;x++)y=h[d*this.columnCount+x],y&&(y.rexSizer.hidden||(r=this.getChildHeight(y),r===void 0&&(T!==0&&!this.hasRowProportion0Child?r=0:i=!0),!i&&(S=y.rexSizer.padding,r+=S.top+S.bottom,s=Math.max(s,r))));i||(t+=s)}i||e&&(this.rowHeight[d]=s)}if(!i){var f=this.space,o=Math.max(f.indentTopOdd,f.indentTopEven);return t+Lx(f.top,o,...f.row,f.bottom)}},Q9=function(e,t){var s,h=e.rexSizer;if(h.expandWidth){var y=h.padding;s=t-y.left-y.right}return s},j9=function(e,t){var s,h=e.rexSizer;if(h.expandHeight){var y=h.padding;s=t-y.top-y.bottom}return s},q9=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,h=0,y=t.length;h<y;h++)s=t[h],s&&s.isRexSizer&&e.push(s);return e},_9=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,sa.call(this),this},tI=function(){for(var e,t,s,h=this.innerLeft,y=this.innerTop,S,r=y,T,i,d,x,f,o,a=this.space.column,n=this.space.row,u=this.space.indentLeftOdd,c=this.space.indentLeftEven,l=this.space.indentTopOdd,v=this.space.indentTopEven,p,g,m,C,P=0;P<this.rowCount;P++){g=this.getRowHeight(P),m=P%2?c:u,S=h+m;for(var M=0;M<this.columnCount;M++){if(p=this.getColumnWidth(M),e=this.getChildAt(M,P),!e||e.rexSizer.hidden){S+=p+a[M];continue}ra.call(this,e),f=this.getExpandedChildWidth(e,p),o=this.getExpandedChildHeight(e,g),e.isRexSizer?(e.runLayout(this,f,o),vf(e,this)):Se(e,f,o),t=e.rexSizer,s=t.padding,T=S+s.left,d=p-s.left-s.right,C=M%2?v:l,i=r+C+s.top,x=g-s.top-s.bottom,na.call(this,e,T,i,d,x,t.align),S+=p+a[M]}r+=g+n[P]}},eI=function(t){var t=Kd.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var h=t-this.getChildrenWidth(!1);h>=0&&(this.proportionWidthLength=h/s)}else this.proportionWidthLength=0}return t},iI=function(t){var t=Qd.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var h=t-this.getChildrenHeight(!1);h>=0&&(this.proportionHeightLength=h/s)}else this.proportionHeightLength=0}return t},sI=function(e){var t,s,h,y;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(y=this.getColumnWidth(parseInt(S)%this.columnCount),s=this.getExpandedChildWidth(t,y),h=t.resolveWidth(s),h===void 0&&(h=s),t.resolveChildrenWidth(h))},rI=function(e){var t,s,h,y;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(y=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),s=this.getExpandedChildHeight(t,y),h=t.resolveHeight(s),h===void 0&&(h=s),t.resolveChildrenHeight(h))},nI=function(e){var t,s,h,y;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(y=this.getColumnWidth(parseInt(S)%this.columnCount),s=this.getExpandedChildWidth(t,y),t.isRexSizer&&(h=t.resolveWidth(s),h===void 0&&(h=s)),t.runWidthWrap(h));return this},aI=function(e){var t,s,h,y;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(y=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),s=this.getExpandedChildHeight(t,y),t.isRexSizer&&(h=t.resolveHeight(s),h===void 0&&(h=s)),t.runHeightWrap(h));return this};const zp=Phaser.Utils.Objects.IsPlainObject,as=Phaser.Utils.Objects.GetValue,Vp=Phaser.Display.Align.CENTER;var kp=function(e,t,s,h,y){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var S,r=0;r<h;r++)if(S=t*h+r,!s[S])return S}else if(t===void 0){for(var S,r=0;r<y;r++)if(S=r*h+e,!s[S])return S}else{var S=t*h+e;if(!s[S])return S}else if(t===!0){for(var S,r=0;r<h;r++)for(var T=0;T<y;T++)if(S=T*h+r,!s[S])return S}else for(var r=0,i=s.length;r<i;r++)if(!s[r])return r;return null},hI=function(e,t,s,h,y,S,r){if(ea.call(this,e),zp(t)){var i=t;t=as(i,"column",void 0),s=as(i,"row",void 0),h=as(i,"align",Vp),y=as(i,"padding",0),S=as(i,"expand",!1),r=as(i,"key",void 0)}var T=kp(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(T===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),T=kp(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof h=="string"&&(h=qr[h]),h===void 0&&(h=Vp),y===void 0&&(y=0),S===void 0&&(S=!0);var i=this.getSizerConfig(e);return i.align=h,i.padding=ys(y),zp(S)?(i.expandWidth=as(S,"width",!1),i.expandHeight=as(S,"height",!1)):(i.expandWidth=S,i.expandHeight=S),this.sizerChildren[T]=e,r!==void 0&&this.addChildrenMap(r,e),this};const oI={add:hI};var Vr=function(e,t,s,h){s===void 0&&(s=0),h===void 0&&(h=e.length-1);for(var y=s;y<=h;y++)e[y]=t;return e};const lI={remove(e,t){if(this.getParentSizer(e)!==this)return this;var s=this.sizerChildren.indexOf(e);return s!==-1&&(this.sizerChildren[s]=null),ia.call(this,e,t),this},removeAt(e,t,s){var h=this.getChildAt(e,t);return h&&this.remove(h,s),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];!s||this.remove(s,e)}return this},clear(e){return Vr(this.sizerChildren,null),To.call(this,e),this}},uI={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")Vr(this.space.column,e);else for(var t=0,s=this.columnCount-1;t<s;t++)this.space.column[t]=e[t]||0;return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")Vr(this.space.row,e);else for(var t=0,s=this.rowCount-1;t<s;t++)this.space.row[t]=e[t]||0;return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}},Xp=Phaser.Utils.Objects.GetValue;var dI=function(e,t,s,h,y){if(s===void 0&&(s=0),h===void 0&&(h=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Vr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof s=="number")Vr(this.columnProportions,s);else for(var S=0;S<e;S++)this.columnProportions[S]=s[S]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof h=="number")Vr(this.rowProportions,h);else for(var S=0;S<t;S++)this.rowProportions[S]=h[S]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(Xp(y,"column",0)),this.setRowSpace(Xp(y,"row",0));var r=this.scene,T=this.createCellContainerCallback;if(T)for(var i=0,d=this.rowCount;i<d;i++)for(var x=0,f=this.columnCount;x<f;x++){var o={column:x,row:i},a=T(r,x,i,o);a&&this.add(a,o)}return this},Ox=function(e,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var h=[e*this.columnCount,0],y=0;y<this.columnCount;y++)h.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,h),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,s),this},fI=function(e,t){return Ox.call(this,this.rowCount,e,t),this},Fx=function(e,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var h=this.rowCount-1;h>=0;h--){var y=h*this.columnCount+e;this.sizerChildren.splice(y,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,s),this},cI=function(e,t){return Fx.call(this,this.columnCount,e,t),this},bx={getChildrenWidth:Z9,getChildrenHeight:J9,getExpandedChildWidth:Q9,getExpandedChildHeight:j9,getChildrenSizers:q9,preLayout:_9,layoutChildren:tI,resolveWidth:eI,resolveHeight:iI,resolveChildrenWidth:sI,resolveChildrenHeight:rI,runWidthWrap:nI,runHeightWrap:aI,resetGrid:dI,inseryEmptyRow:Ox,addEmptyRow:fI,insertEmptyColumn:Fx,addEmptyColumn:cI};Object.assign(bx,oI,lI,uI,Tf);var vI=function(){for(var e=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},pI=function(){for(var e=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e};const rh=Phaser.Utils.Objects.IsPlainObject,It=Phaser.Utils.Objects.GetValue;class di extends nr{constructor(t,s,h,y,S,r,T,i,d,x){rh(s)?(x=s,s=It(x,"x",0),h=It(x,"y",0),y=It(x,"width",void 0),S=It(x,"height",void 0),r=It(x,"column",x.col||0),T=It(x,"row",0),i=It(x,"columnProportions",0),d=It(x,"rowProportions",0)):rh(y)?(x=y,y=It(x,"width",void 0),S=It(x,"height",void 0),r=It(x,"column",x.col||0),T=It(x,"row",0),i=It(x,"columnProportions",0),d=It(x,"rowProportions",0)):rh(r)?(x=r,r=It(x,"column",x.col||0),T=It(x,"row",0),i=It(x,"columnProportions",0),d=It(x,"rowProportions",0)):rh(i)&&(x=i,i=It(x,"columnProportions",0),d=It(x,"rowProportions",0)),super(t,s,h,y,S,x),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(It(x,"createCellContainerCallback")),this.setIndentLeft(It(x,"space.indentLeftOdd",0),It(x,"space.indentLeftEven",0)),this.setIndentTop(It(x,"space.indentTopOdd",0),It(x,"space.indentTopEven",0)),this.resetGrid(r,T,i,d,It(x,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=vI.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=pI.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var h=this.sizerChildren.indexOf(t);return h===-1?null:(s===void 0&&(s={}),s.x=h%this.columnCount,s.y=Math.floor(h/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],h=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return h}getRowHeight(t){var s=this.rowProportions[t],h=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return h}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(di.prototype,bx);it.register("gridSizer",function(e,t,s,h,y,S,r,T,i){var d=new di(this.scene,e,t,s,h,y,S,r,T,i);return this.scene.add.existing(d),d});et(window,"RexPlugins.UI.GridSizer",di);var gI=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+this.space.left+this.space.right},mI=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+this.space.top+this.space.bottom},xI=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,h=0,y=t.length;h<y;h++)s=t[h],s!==`
`&&s.isRexSizer&&e.push(s);return e},yI=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,sa.call(this),this},CI=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,s=this.justifyPercentage,h=this.space.item,y=this.space.line,S=this.space.indentLeftOdd,r=this.space.indentLeftEven,T=this.space.indentTopOdd,i=this.space.indentTopEven,d,x,f,o=0,a,n,u=this.innerLeft,c=this.innerTop,l,v,p,g,m=this.wrapResult.lines,C,P,M,E=u,w=c,R=0,A=m.length;R<A;R++){switch(C=m[R],P=C.children,this.rtl&&P.reverse(),e?(a=R%2?r:S,E=u+a):(n=R%2?i:T,w=c+n),M=t-(e?C.width:C.height),this.align){case 0:break;case 1:e?E+=M:w+=M;break;case 2:e?E+=M/2:w+=M/2;break;case 3:o=eu(t,M,s,P.length);break;case 4:o=eu(t,M,s,P.length),o===0&&(e?E+=M:w+=M);break;case 5:o=eu(t,M,s,P.length),o===0&&(e?E+=M/2:w+=M/2);break}for(var L=!0,F=0,O=P.length;F<O;F++)d=P[F],!d.rexSizer.hidden&&(x=d.rexSizer,f=x.padding,ra.call(this,d),e?l=E+f.left:v=w+f.top,L?L=!1:e?l+=h:v+=h,p=Lt(d),g=Ot(d),e?(n=F%2?i:T,v=w+n+f.top,E=l+p+f.right+o):(a=F%2?r:S,l=E+a+f.left,w=v+g+f.top+o),na.call(this,d,l,v,p,g,x.align));e?w+=C.height+y:E+=C.width+y}},eu=function(e,t,s,h){return t/e<=s?t/(h-1):0},TI=function(){return this.orientation===0?!0:Zd.call(this)},Dx=function(e){var t={lines:[],width:0,height:0},s=this.sizerChildren,h=this.space.item,y=this.space.line,S=this.space.indentLeftOdd,r=this.space.indentLeftEven,T=this.space.indentTopOdd,i=this.space.indentTopEven,d,x,f,o,a=0,n,u,c=t.lines,l=void 0,v;if(this.orientation===0){for(var p=0,g=s.length;p<g;p++){if(d=s[p],d===`
`)d=void 0,f=0,v=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),f=this.getChildWidth(d),x=d.rexSizer.padding,f+=x.left+x.right,v=a<f||l===void 0}v&&(l&&(l.width=e-(a+h),t.width=Math.max(t.width,l.width),t.height+=l.height+y),l={children:[],width:0,height:0},c.push(l),n=c.length%2?S:r,a=e-n),a-=f+h,d&&(l.children.push(d),o=this.getChildHeight(d),x=d.rexSizer.padding,o+=x.top+x.bottom,l.height=Math.max(l.height,o))}l&&(l.width=e-(a+h),t.width=Math.max(t.width,l.width),t.height+=l.height),t.height+=Math.max(T,i)}else{for(var m=e,p=0,g=s.length;p<g;p++){if(d=s[p],d===`
`)d=void 0,f=0,v=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),o=this.getChildHeight(d),x=d.rexSizer.padding,o+=x.top+x.bottom,v=a<o||l===void 0}v&&(l&&(l.height=m-(a+h),t.height=Math.max(t.height,l.height),t.width+=l.width+y),l={children:[],width:0,height:0},c.push(l),u=c.length%2?T:i,a=m-u),a-=o+h,d&&(l.children.push(d),f=this.getChildWidth(d),x=d.rexSizer.padding,f+=x.left+x.right,l.width=Math.max(l.width,f))}l&&(l.height=m-(a+h),t.height=Math.max(t.height,l.height),t.width+=l.width),t.width+=Math.max(S,r)}return t},SI=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-this.space.left-this.space.right;this.wrapResult=Dx.call(this,t),this.rexSizer.resolved=!0,Jd.call(this,e)}},PI=function(){return this.orientation===1?!0:jd.call(this)},EI=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-this.space.top-this.space.bottom;this.wrapResult=Dx.call(this,t),this.rexSizer.resolved=!0,qd.call(this,e)}};const Wp=Phaser.Math.Distance.Between;var MI=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var h=-1,y=1/0,S=0,r=s.length;S<r;S++){var T=s[S];if(!(Math.abs(T.centerY-t)>T.height/2)){var d=Wp(T.left,T.centerY,e,t);y>d&&(y=d,h=S);var i=s[S+1];if(!(i&&i.y===T.y)){var d=Wp(T.right,T.centerY,e,t);y>d&&(y=d,h=S+1)}}}return h};const wI=Phaser.Utils.Objects.IsPlainObject,iu=Phaser.Utils.Objects.GetValue,RI=Phaser.Display.Align.CENTER;var su=function(e,t,s,h){if(e===`
`)return this.addNewLine(),this;if(ea.call(this,e),wI(t)){var y=t;t=iu(y,"padding",0),s=iu(y,"key",void 0),h=iu(y,"index",void 0)}t===void 0&&(t=0);var y=this.getSizerConfig(e);return y.align=RI,y.padding=ys(t),h===void 0||h>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(h,0,e),s!==void 0&&this.addChildrenMap(s,e),this};const AI={add(e,t,s){if(li(e))for(var h=e,y=0,S=h.length;y<S;y++)su.call(this,h[y],t);else su.call(this,e,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,s,h){return su.call(this,t,s,h,e),this},insertAtPosition(e,t,s,h,y){var S=MI.call(this,e,t);return S===-1&&(S=void 0),this.insert(S,s,h,y),this}},LI=Phaser.Utils.Array.Remove,OI={remove(e,t){return this.getParentSizer(e)!==this?this:(LI(this.sizerChildren,e),ia.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,To.call(this,e),this}};var Ix={getChildrenWidth:gI,getChildrenHeight:mI,getChildrenSizers:xI,preLayout:yI,layoutChildren:CI,hasWidthWrap:TI,runWidthWrap:SI,hasHeightWrap:PI,runHeightWrap:EI};Object.assign(Ix,AI,OI,Tf);var FI=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,h,y=!1,S=0,r=e.length;S<r;S++)s=e[S],s!==`
`&&(h=this.getChildWidth(s),h===void 0&&(y=!0),!y&&(t=Math.max(h,t)));if(!y)return t},bI=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,h,y=!1,S=0,r=e.length;S<r;S++)s=e[S],s!==`
`&&(h=this.getChildHeight(s),h===void 0&&(y=!0),!y&&(t=Math.max(h,t)));if(!y)return t};const Yp=Phaser.Utils.Objects.IsPlainObject,ve=Phaser.Utils.Objects.GetValue;class ar extends nr{constructor(t,s,h,y,S,r){Yp(s)?(r=s,s=ve(r,"x",0),h=ve(r,"y",0),y=ve(r,"width",void 0),S=ve(r,"height",void 0)):Yp(y)&&(r=y,y=ve(r,"width",void 0),S=ve(r,"height",void 0)),super(t,s,h,y,S,r),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ve(r,"orientation",0)),this.setItemSpacing(ve(r,"space.item",0)),this.setLineSpacing(ve(r,"space.line",0)),this.setIntentLeft(ve(r,"space.indentLeftOdd",0),ve(r,"space.indentLeftEven",0)),this.setIntentTop(ve(r,"space.indentTopOdd",0),ve(r,"space.indentTopEven",0)),this.setAlign(ve(r,"align",0)),this.setJustifyPercentage(ve(r,"justifyPercentage",.25)),this.setRTL(ve(r,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=oa(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=DI[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=FI.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=bI.call(this)),this._maxChildHeight}}const DI={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(ar.prototype,Ix);it.register("fixWidthSizer",function(e,t,s,h,y){var S=new ar(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.FixWidthSizer",ar);it.register("overlapSizer",function(e,t,s,h,y){var S=new qe(this.scene,e,t,s,h,y);return this.scene.add.existing(S),S});et(window,"RexPlugins.UI.OverlapSizer",qe);it.register("space",function(){var e=new Cf(this.scene);return e});et(window,"RexPlugins.UI.Space",Cf);it.register("label",function(e){var t=new ji(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Label",ji);const Up=["alpha","tint","flipX","flipY"];var wf=function(e,t){if(!t)return e;for(var s=0,h=Up.length;s<h;s++){var y=Up[s];y in t&&y in e&&(e[y]=t[y])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var S,r;"originX"in t&&"originX"in e&&(S=t.originX),"originY"in t&&"originY"in e&&(r=t.originY),S!==void 0&&r!==void 0&&e.setOrigin(S,r)}return e},Oe=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("leftWidth")?s="nineSlice":t.hasOwnProperty("key")&&(s="image"));var h;switch(s){case"image":h=new la(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?h=new fa(e,t):h=new da(e,t);break;default:h=new ua(e,t);break}return wf(h,t),e.add.existing(h),h};const Bx={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2};var Rf=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=II(e));var s=e[t];return typeof s=="string"&&(s=Bx[s]),s},II=function(e){var t=!!e.sliderY||!!e.scrollerY,s=!!e.sliderX||!!e.scrollerX,h;return t&&s?h=2:t?h=0:s?h=1:h=0,h};const se=Phaser.Utils.Objects.GetValue;var BI=function(e,t,s){var h=se(s,"child"),y=se(h,"gameObject",void 0);if(y){var S=se(s,"space.child",0);e.childMargin={};var r=e.childMargin,T={};if(typeof S=="number")switch(e.scrollMode){case 0:case 1:r.top=0,r.bottom=0,r.left=0,r.right=0;break;default:r.top=S,r.bottom=S,r.left=S,r.right=S;break}else switch(e.scrollMode){case 0:r.top=se(S,"top",0),r.bottom=se(S,"bottom",0),T.left=se(S,"left",0),T.right=se(S,"right",0);break;case 1:r.top=se(S,"left",0),r.bottom=se(S,"right",0),T.top=se(S,"top",0),T.bottom=se(S,"bottom",0);break;default:r.top=se(S,"top",0),r.bottom=se(S,"bottom",0),r.left=se(S,"left",0),r.right=se(S,"right",0);break}t.add(y,{column:1,row:1,align:se(h,"align","center"),padding:T,expand:{width:se(h,"expandWidth",!0),height:se(h,"expandHeight",!0)}})}e.addChildrenMap("child",y)};const Hp=Phaser.Math.Percent;var Gx=function(e,t,s){var h;return e.y===t.y?h=Hp(s.x,e.x,t.x):e.x===t.x&&(h=Hp(s.y,e.y,t.y)),h},GI=function(e,t,s){if(!!this.enable){ru.x=t,ru.y=s;var h,y;this.reverseAxis?(h=this.getEndPoint(),y=this.getStartPoint()):(h=this.getStartPoint(),y=this.getEndPoint()),this.value=Gx(h,y,ru)}},ru={},$p=function(e,t,s){if(!!this.enable&&!!e.isDown){nu.x=e.worldX,nu.y=e.worldY;var h,y;this.reverseAxis?(h=this.getEndPoint(),y=this.getStartPoint()):(h=this.getStartPoint(),y=this.getEndPoint());var S=Gx(h,y,nu);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-S)<.1?this.value=S:this.easeValueTo(S)}},nu={},Nx=function(e,t){t===void 0&&(t=NI);var s=this.childrenMap.thumb,h=s.x,y=s.y;return ta(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=s.x,t.y=s.y,s.x=h,s.y=y,t},NI={};const zI=Phaser.Display.Align.LEFT_CENTER,VI=Phaser.Display.Align.TOP_CENTER;var kI=function(e){if(e===void 0&&(e=XI),this.childrenMap.thumb){var t=this.orientation===0?zI:VI;Nx.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},XI={};const WI=Phaser.Display.Align.RIGHT_CENTER,YI=Phaser.Display.Align.BOTTOM_CENTER;var UI=function(e){if(e===void 0&&(e=HI),this.childrenMap.thumb){var t=this.orientation===0?WI:YI;Nx.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},HI={};const Kp=Phaser.Math.Linear;var $I=function(e,t,s,h){return h===void 0&&(h=KI),h.x=Kp(t.x,s.x,e),h.y=Kp(t.y,s.y,e),h},KI={},ZI=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var s,h;return this.reverseAxis?(s=this.getEndPoint(),h=this.getStartPoint()):(s=this.getStartPoint(),h=this.getEndPoint()),$I(e,s,h,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this};const JI=Phaser.Display.Align.LEFT_CENTER,QI=Phaser.Display.Align.TOP_CENTER,jI=Phaser.Display.Align.RIGHT_CENTER,qI=Phaser.Display.Align.BOTTOM_CENTER;var _I=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var s=this.reverseAxis,h,y,S=this.childrenMap.thumb;if(S)if(this.orientation===0){var r=Lt(S);if(s){var T=S.x-r*S.originX;h=this.right-T}else{var T=S.x-r*S.originX,i=T+r;h=i-this.left}}else{var d=Ot(S);if(s){var x=S.y-d*S.originY;y=this.bottom-x}else{var x=S.y-d*S.originY,f=x+d;y=f-this.top}}else this.orientation===0?h=this.width*e:y=this.height*e;Se(t,h,y);var o;s?o=this.orientation===0?jI:qI:o=this.orientation===0?JI:QI,km(t,this,o),this.resetChildPositionState(t)};const Ne=Phaser.Utils.Objects.GetValue,nh=Phaser.Utils.Objects.IsPlainObject,tB=Phaser.Math.Clamp,eB=Phaser.Math.Snap.To;class en extends rr(St){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=Ne(s,"reverseAxis",!1);var h=Ne(s,"background",void 0),y=Ne(s,"track",void 0),S=Ne(s,"indicator",void 0),r=Ne(s,"thumb",void 0);if(h&&(nh(h)&&(h=Oe(t,h)),this.addBackground(h)),y&&(nh(y)&&(y=Oe(t,y)),this.add(y,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),S&&(nh(S)&&(S=Oe(t,S)),this.pin(S)),r){nh(r)&&(r=Oe(t,r)),this.pin(r);var T=Ne(s,"thumbOffsetX",0),i=Ne(s,"thumbOffsetY",0);this.setThumbOffset(T,i)}var d=Ne(s,"input",0);switch(typeof d=="string"&&(d=iB[d]),d){case 0:r&&(r.setInteractive(),this.scene.input.setDraggable(r),r.on("drag",GI,this).on("dragstart",function(x){this.eventEmitter.emit("inputstart",x)},this).on("dragend",function(x){this.eventEmitter.emit("inputend",x)},this));break;case 1:this.on("pointerdown",$p,this).on("pointermove",$p,this).on("pointerdown",function(x){this.eventEmitter.emit("inputstart",x)},this).on("pointerup",function(x){this.eventEmitter.emit("inputend",x)},this).on("pointerover",function(x){x.isDown&&this.eventEmitter.emit("inputstart",x)},this).on("pointerout",function(x){x.isDown&&this.eventEmitter.emit("inputend",x)},this).setInteractive();break}this.addChildrenMap("background",h),this.addChildrenMap("track",y),this.addChildrenMap("indicator",S),this.addChildrenMap("thumb",r),this.setEnable(Ne(s,"enable",void 0)),this.setGap(Ne(s,"gap",void 0)),this.setValue(Ne(s,"value",0),Ne(s,"min",void 0),Ne(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,h){return t&&s!==void 0&&(t=t/(h-s)),this.gap=t,this}setThumbOffset(t,s){return this.thumbOffsetX=t,this.thumbOffsetY=s,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=eB(t,this.gap));var s=this._value;this._value=tB(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}postLayout(t,s,h){return this.updateThumb(),this.updateIndicator(),this}}const iB={pan:0,drag:0,click:1,none:-1};var sB={getStartPoint:kI,getEndPoint:UI,updateThumb:ZI,updateIndicator:_I};Object.assign(en.prototype,sB);const Ae=Phaser.Utils.Objects.GetValue;class Af extends St{constructor(t,s){super(t,s),this.type="rexScrollBar";var h=Ae(s,"background",void 0),y=Ae(s,"buttons",void 0),S=Ae(y,"top",Ae(y,"left",void 0)),r=Ae(y,"bottom",Ae(y,"right",void 0)),T,i=Ae(s,"slider",void 0);if(h&&this.addBackground(h),S){this.add(S);var d=new Hr(S);d.on("intouch",function(){if(!!this.enable){var c=T.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=c}},this)}if(i){i.orientation=this.orientation,i.eventEmitter=this,i.value=null;var x;if(this.orientation===0){var f=Ae(i,"width",void 0);x=f===void 0?1:0}else{var o=Ae(i,"height",void 0);x=o===void 0?1:0}T=new en(t,i),t.add.existing(T),this.add(T,{proportion:x})}if(r){this.add(r);var d=new Hr(r);d.on("intouch",function(){if(!!this.enable){var l=T.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=l}},this)}var a=[S,r];this.addChildrenMap("background",h),this.addChildrenMap("slider",T),this.addChildrenMap("buttons",a);var n=Ae(s,"valuechangeCallback",null);if(n!==null){var u=Ae(s,"valuechangeCallbackScope",void 0);this.on("valuechange",n,u)}this.setEnable(Ae(s,"enable",void 0)),this.setValue(Ae(s,"value",0)),this.setScrollStep(Ae(y,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,h),this}addValue(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,h),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,h),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}var rB=function(e,t){t===void 0&&(t={});var s=Ri(t);t={slider:s},t.orientation=s.orientation,delete s.orientation,t.background=s.background,delete s.background,t.buttons=s.buttons,delete s.buttons,t.value=null;var h=new Af(e,t);e.add.existing(h);var y=h.childrenMap.slider;return h.addChildrenMap("track",y.childrenMap.track),h.addChildrenMap("indicator",y.childrenMap.indicator),h.addChildrenMap("thumb",y.childrenMap.thumb),h};class nB extends Qi{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,h=s.dragState;return h.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,h=s.dragState;return h.isDown?t=h.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,h=s.dragState;return h.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var h=this.parent,y=h.dragState;y.justMoved&&h.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,s=this.parent,h=s.dragState;return h.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,s){this.parent.sliding(t,s),this.next()}next_BACK(){var t,s=this.parent,h=s.dragState;return h.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,s){this.parent.pullBack(t,s),this.next()}}const ah=Phaser.Utils.Objects.GetValue,aB=Phaser.Math.Distance.Between;class hB extends Gt{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(ah(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(ah(t,"enable",!0)),this.holdThreshold=ah(t,"holdThreshold",50),this.pointerOutReleaseEnable=ah(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Ad(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=aB(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,h){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=s,this.localY=h)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,h){!this.enable||!t.isDown||this.pointer!==t||(this.localX=s,this.localY=h)}preupdate(t,s){if(!!this.enable){var h=this.pointer;this.justMoved=!1,h&&!this.isInTouched?(this.x=h.worldX,this.y=h.worldY,this.preX=h.worldX,this.preY=h.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",h,this.localX,this.localY)):h&&this.isInTouched?this.x===h.x&&this.y===h.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=h.worldX,this.y=h.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",h,this.localX,this.localY)):!h&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",h))}}}const au=Phaser.Utils.Objects.GetValue;class oB{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(au(t,"value",0)),this.setSpeed(au(t,"speed",0)),this.setAcceleration(au(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class lB{constructor(){this.value,this.dir,this.movement=new oB}init(t,s,h,y,S){return this.value=t,this.end=S,S!==void 0?this.dir=t<S:this.dir=s,this.movement.setSpeed(h).setAcceleration(-y),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Zt=Phaser.Utils.Objects.GetValue,uB=Phaser.Math.Clamp;class dB extends Gt{constructor(t,s){super(t,s);var h=Zt(s,"enable",!0);this._state=new nB(this,{enable:h,eventEmitter:!1});var y={inputConfig:Zt(s,"inputConfig",void 0),enable:h,pointerOutRelease:Zt(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new hB(t,y),this._enable=void 0,this._value=void 0,this._slowDown=new lB;var S=Zt(s,"valuechangeCallback",null);if(S!==null){var r=Zt(s,"valuechangeCallbackScope",void 0);this.on("valuechange",S,r)}if(S=Zt(s,"overmaxCallback",null),S!==null){var r=Zt(s,"overmaxCallbackScope",void 0);this.on("overmax",S,r)}if(S=Zt(s,"overminCallback",null),S!==null){var r=Zt(s,"overminCallbackScope",void 0);this.on("overmin",S,r)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(Zt(t,"orientation",0)),this.setDragThreshold(Zt(t,"threshold",10)),this.setSlidingDeceleration(Zt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Zt(t,"backDeceleration",2e3));var s=Zt(t,"dragRate",1);s=s*(Zt(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var h=Zt(t,"bounds",void 0);return h?this.setBounds(h):this.setBounds(Zt(t,"max",0),Zt(t,"min",0)),this.setValue(Zt(t,"value",this.maxValue||0)),this.setEnable(Zt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=fB[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var h=t;t=h[0],s=h[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,h=this.overMax(t),y=this.overMin(t);h&&this.emit("overmax",t,s),y&&this.emit("overmin",t,s),this.backEnable||(h&&(t=this.maxValue),y&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=uB(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,s=this.dragSpeed;if(s===0){this._slowDown.stop(),this._state.next();return}var h=this.slidingDeceleration;this._slowDown.init(t,s>0,Math.abs(s),h)}sliding(t,s){s*=.001;var h=this._slowDown.update(s).value;this.overMax(h)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(h)?(this.value=this.minValue,this._slowDown.stop()):this.value=h}onPullBack(){var t=this.value,s=this.outOfMinBound?this.minValue:this.maxValue,h=Math.abs(s-t),y=this.backDeceleration,S=Math.sqrt(2*y*h);this._slowDown.init(t,void 0,S,y,s)}pullBack(t,s){s*=.001,this.value=this._slowDown.update(s).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const fB={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},hh=Phaser.Utils.Objects.GetValue;class cB extends Gt{constructor(t,s){if(super(t,s),this.parent!==this.scene?this.focusMode=hh(s,"focus",!0):this.focusMode=!1,this.setSpeed(hh(s,"speed",.1)),this.setEnable(hh(s,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(hh(s,"inputConfig",void 0)).on("wheel",function(y,S,r,T,i){!this.enable||this.scroll(r)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,s,h,y,S,r){!this.enable||this.scroll(y)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const re=Phaser.Utils.Objects.GetValue;var oh=function(e,t,s,h){s=s.toUpperCase();var y=s==="Y",S=e.scrollMode===2,r=e.childrenMap.child,T,i,d=`slider${s}`;if(S||h.hasOwnProperty(d)?T=re(h,d,void 0):T=re(h,"slider",void 0),T){T===!0&&(T={}),T.orientation=y?1:0,i=rB(e.scene,T);var x,f,o,a=re(T,"position",0);typeof a=="string"&&(a=vB[a]);var n=re(h,`space.slider${s}`,void 0),u;n===void 0&&(n=re(h,"space.slider",void 0),n===void 0&&(S?n=0:u=re(h,"space.child",0)));var c;u===void 0?c=typeof n=="number":c=typeof u=="number",y?a===0?(x=2,f=1,u===void 0?o=c?{left:n}:n:o={left:re(u,"right",u)}):(x=0,f=1,u===void 0?o=c?{right:n}:n:o={right:re(u,"left",u)}):a===0?(x=1,f=2,u===void 0?o=c?{top:n}:n:o={top:re(u,"bottom",u)}):(x=1,f=0,u===void 0?o=c?{bottom:n}:n:o={bottom:re(u,"top",u)}),t.add(i,{column:x,row:f,align:"center",padding:o,expand:!0}),e[`hideUnscrollableSlider${s}`]=re(T,"hideUnscrollableSlider",!1),e[`adaptThumb${s}SizeMode`]=re(T,"adaptThumbSize",!1),e[`minThumb${s}Size`]=re(T,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${s}`]=!1,e[`adaptThumb${s}SizeMode`]=!1,e[`minThumb${s}Size`]=void 0;var l,v,p=`scroller${s}`;S||h.hasOwnProperty(p)?l=re(h,p,!0):l=re(h,"scroller",!0),l&&r&&(l===!0&&(l={}),l.orientation=y?0:1,v=new dB(r,l));var g=re(h,S?`mouseWheelScroller${s}`:"mouseWheelScroller",!1),m;if(g&&r&&(m=new cB(r,g)),e.addChildrenMap(`slider${s}`,i),e.addChildrenMap(`scroller${s}`,v),e.addChildrenMap(`mouseWheelScroller${s}`,m),(!S||y)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${s}`],e.adaptThumbSizeMode=e[`adaptThumb${s}SizeMode`],e.minThumbSize=e[`minThumb${s}Size`],e.addChildrenMap("slider",i),e.addChildrenMap("scroller",v),e.addChildrenMap("mouseWheelScroller",m)),i){var C,P;S?(C=y?"t":"s",P=`scroll${s}`):(C="t",P="scroll"),i.on("valuechange",function(w){e[C]=w,e.emit(P,e)})}if(v){var M,P;S?(M=`childO${s}`,P=`scroll${s}`):(M="childOY",P="scroll"),v.on("valuechange",function(R){e[M]=R,e.emit(P,e)})}if(m){var E;S?E=`addChildO${s}`:E="addChildOY",m.on("scroll",function(w){e[E](-w,!0)})}};const vB={right:0,left:1,bottom:0,top:1},lh=Phaser.Utils.Objects.GetValue;var pB=function(e,t){var s=e.scene,h=[0,1,0],y=[0,1,0],S=lh(t,"width"),r=lh(t,"height");if(!S){var T=lh(t,"child.expandWidth",!0);T||(h[1]=0)}if(!r){var i=lh(t,"child.expandHeight",!0);i||(y[1]=0)}var d=new di(s,{column:3,row:3,columnProportions:h,rowProportions:y});switch(BI(e,d,t),e.scrollMode){case 0:oh(e,d,"y",t);break;case 1:oh(e,d,"x",t);break;default:oh(e,d,"y",t),oh(e,d,"x",t);break}return d},gB=function(){switch(this.scrollMode){case 0:case 1:hu.call(this),this.updateController(),ou.call(this),lu.call(this);break;default:hu.call(this,"y"),hu.call(this,"x"),this.updateController(),ou.call(this,"y"),ou.call(this,"x"),lu.call(this,"y"),lu.call(this,"x");break}return this},hu=function(e){var t,s,h,y;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,s=this.bottomChildOY,h=this.childrenMap.scroller,y=this.childrenMap.slider;break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,s=this.bottomChildOY):(t=this.leftChildOX,s=this.rightChildOX),h=this.childrenMap[`scroller${e}`],y=this.childrenMap[`slider${e}`]}h&&h.setBounds(t,s),y&&y.setEnable(t!==s)},ou=function(e){switch(this.scrollMode){case 0:case 1:var t=this.childrenMap.slider;t&&this.hideUnscrollableSlider&&this.setChildVisible(t,this.isOverflow);break;default:e=e.toUpperCase();var t=this.childrenMap[`slider${e}`],s=this[`hideUnscrollableSlider${e}`],h=this[`isOverflow${e}`];t&&s&&this.setChildVisible(t,h);break}},lu=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var S=this.childrenMap.slider;if(!S)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),r=S.childrenMap.track,T=S.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var s=r.displayHeight*t;i!==void 0&&s<i&&(s=i),Se(T,void 0,s)}else{var h=r.displayWidth*t;i!==void 0&&h<i&&(h=i),Se(T,h,void 0)}Zp(S);break;default:e=e.toUpperCase();var y=this[`adaptThumb${e}SizeMode`];if(!y)return;var S=this.childrenMap[`slider${e}`];if(!S)return;var r=S.childrenMap.track,T=S.childrenMap.thumb,i=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),s=r.displayHeight*t;i!==void 0&&s<i&&(s=i),Se(T,void 0,s)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),h=r.displayWidth*t;i!==void 0&&h<i&&(h=i),Se(T,h,void 0)}Zp(S);break}},Zp=function(e){var t=e.minWidth,s=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=s},mB=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var s=this.childrenMap.scrollerY,h=this.childrenMap.sliderY,y=this.childrenMap.scrollerX,S=this.childrenMap.sliderX;s&&s.setValue(this.childOY),h&&h.setValue(this.t),y&&y.setValue(this.childOX),S&&S.setValue(this.s);break}};const yi=Phaser.Utils.Objects.GetValue,uh=Phaser.Math.Clamp;class ca extends St{constructor(t,s){s===void 0&&(s={});var h=Rf(s),y=h===1;s.orientation=y?0:1,super(t,s),this.type=yi(s,"type","rexScrollable"),this.scrollMode=h;var S=yi(s,"background",void 0);S&&this.addBackground(S);var r=yi(s,"header",void 0);if(r){var T=yi(s,"align.header","center"),i=yi(s,"space.header",0),d;y?d={right:i}:d={bottom:i},this.add(r,{proportion:0,align:T,padding:d,expand:yi(s,"expand.header",!0)})}var x=pB(this,s);x&&this.add(x,{proportion:1,align:"center",padding:0,expand:!0});var f=yi(s,"footer",void 0);if(f){var T=yi(s,"align.footer","center"),o=yi(s,"space.footer",0),d;y?d={left:o}:d={top:o},this.add(f,{proportion:0,align:T,padding:d,expand:yi(s,"expand.footer",!0)})}this.addChildrenMap("background",S),this.addChildrenMap("header",r),this.addChildrenMap("footer",f),this.runLayoutFlag=!1}postLayout(t,s,h){var y=0,S=0;return this.runLayoutFlag?(S=this.t,this.scrollMode===2&&(y=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(S),this.scrollMode===2&&this.setS(y),this}set t(t){var s=this.childMargin;if(s.top!==0||s.bottom!==0){var h=this.childrenMap.child,y=h.topChildOY-h.bottomChildOY,S=y+s.top+s.bottom,r=S*t-s.top;t=y!==0?r/y:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,s=this.childMargin;if(s.top!==0||s.bottom!==0){var h=this.childrenMap.child,y=h.topChildOY-h.bottomChildOY,S=y+s.top+s.bottom,r=y*t+s.top;t=S!==0?r/S:0}return t}set s(t){var s=this.childMargin;if(s.left!==0||s.right!==0){var h=this.childrenMap.child,y=h.leftChildOX-h.rightChildOX,S=y+s.left+s.right,r=S*t-s.left;t=y!==0?r/y:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,s=this.childMargin;if(s.left!==0||s.right!==0){var h=this.childrenMap.child,y=h.leftChildOX-h.rightChildOX,S=y+s.left+s.right,r=y*t+s.left;t=S!==0?r/S:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}setChildOY(t,s){return s===void 0&&(s=!1),s&&(t=uh(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,s){return this.setChildOY(this.childOY+t,s),this}setT(t,s){return s===void 0&&(s=!1),s&&(t=uh(t,0,1)),this.t=t,this}addT(t,s){return this.setT(this.t+t,s),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}setChildOX(t,s){return s===void 0&&(s=!1),s&&(t=uh(t,this.leftChildOX,this.rightChildOX)),this.childOX=t,this}addChildOX(t,s){return this.setChildOX(this.childOX+t,s),this}setS(t,s){return s===void 0&&(s=!1),s&&(t=uh(t,0,1)),this.s=t,this}addS(t,s){return this.setS(this.s+t,s),this}scrollToLeft(){return this.s=0,this}scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var s=this.childrenMap.slider;!s||s.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var s=this.childrenMap.sliderX;!s||s.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var s=this.childrenMap.scroller;!s||s.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var s=this.childrenMap.scrollerX;!s||s.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var s=this.childrenMap.scrollerX;!s||s.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var s=this.childrenMap.mouseWheelScroller;!s||s.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var s=this.childrenMap.mouseWheelScrollerX;!s||s.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setInteractive(),s.input.dropZone=t,this}}var xB={resizeController:gB,updateController:mB};Object.assign(ca.prototype,xB);var Lf=function(e,t,s){var h=Ps(e);switch(h){case ge:s=e.getWrappedText(t);break;case me:s=e.getPenManager(t,s);break;case ke:e.maxWidth>0?s=e.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},yB=function(e){return e!==void 0&&(this.text=e),this.lines=Lf(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},zx=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Vx=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},CB=function(e){var t=e+this.visibleLinesCount+1,s;switch(this.textObjectType){case ge:s=this.lines.slice(e,t).join(`
`);break;case me:var h=this.lines.getLineStartIndex(e),y=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(h,y,!0);break;case ke:s=this.lines.slice(e,t).join(`
`);break}return s},Of=function(e,t){var s=Ps(e);switch(s){case ge:var S=e.style,h=S.wordWrapWidth,y=S.wordWrapCallback;S.wordWrapWidth=0,S.wordWrapCallback=void 0,e.setText(t),S.wordWrapWidth=h,S.wordWrapCallback=y;break;case me:var S=e.style,r=S.wrapMode;S.wrapMode=0,e.setText(t),S.wrapMode=r;break;case ke:var T=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=T;break}},kx=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&TB.call(this)},TB=function(){if(!!this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,s;e<=0?(t=-e,s=this.height):(t=0,s=this.height-e),this.textObject.setCrop(0,t,this.width,s)}},SB=function(){var e=Math.max(Math.floor(zx.call(this,-this.textOY)),0),t=Vx.call(this,e)+this.textOY,s=CB.call(this,e);return Of(this.textObject,s),this.textObject.rexSizer.offsetY=t,kx.call(this),this},PB=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,sa.call(this),this},EB=function(e,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case ge:case me:e.setFixedSize(t,s);var h=e.style,y=Math.max(t,0);this.textObjectType===ge?h.wordWrapWidth=y:(h.wrapMode===0&&(h.wrapMode=1),h.wrapWidth=y);break;case ke:e.setMaxWidth(t);break}this.setText()}},MB=function(){var e,t,s,h=this.left,y=this.top,S,r,T,i;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,s=t.padding,S=h+s.left,r=y+s.top,T=this.width-s.left-s.right,i=this.height-s.top-s.bottom,EB.call(this,e,T,i),ta(e,S,r,T,i,t.align),t.preOffsetY=0,kx.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const wB={setText:yB,updateTextObject:SB,preLayout:PB,layoutChildren:MB},Jp=Phaser.Utils.Objects.IsPlainObject,ze=Phaser.Utils.Objects.GetValue,RB=Phaser.Display.Align.TOP_LEFT;class Xx extends nr{constructor(t,s,h,y,S,r){Jp(s)?(r=s,s=ze(r,"x",0),h=ze(r,"y",0),y=ze(r,"width",void 0),S=ze(r,"height",void 0)):Jp(y)&&(r=y,y=ze(r,"width",void 0),S=ze(r,"height",void 0)),super(t,s,h,y,S,r),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=ze(r,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(ze(r,"clamplTextOY",!0)),this.alwaysScrollable=ze(r,"alwaysScrollable",!1);var T=ze(r,"background",void 0),i=ze(r,"text",void 0);i===void 0&&(i=AB(t)),this.textCropEnable=ze(r,"textCrop",!!i.setCrop);var d=ze(r,"textMask",!this.textCropEnable);T&&this.addBackground(T),this.add(i),this.sizerChildren=[i];var x=this.getSizerConfig(i);x.align=RB,x.padding=ys(0),x.expand=!0,this.textObject=i,this.textObjectType=Ps(i),x.preOffsetY=0,x.offsetY=0,d&&(this.textMask=ui.call(this,this.textObject,this)),this.addChildrenMap("background",T),this.addChildrenMap("text",i)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ge:this.lines.length=0;break;case me:this.lines.destroy();break;case ke:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case ge:case me:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case ke:var h=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*h;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case ge:case me:t=this.textObject.lineSpacing;break;case ke:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(zx.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Vx.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,h=this.bottomTextOY,y=this.textOYExceedTop(t),S=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:y?t=s:S&&(t=h)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),y&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=y,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,h)),this.execeedBottomState=S}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var AB=function(e){return e.add.text(0,0,"")};Object.assign(Xx.prototype,wB);var LB=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})};const OB={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},FB={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},Ci=Phaser.Utils.Objects.GetValue;class va extends ca{constructor(t,s){s===void 0&&(s={});var h=Ci(s,"text",void 0),y=Ci(s,"textWidth",void 0),S=Ci(s,"textHeight",void 0),r=Ci(s,"textCrop",!!h.setCrop),T=Ci(s,"textMask",!r),i=Ci(s,"content",""),d=new Xx(t,{width:y,height:S,text:h,textMask:T,textCrop:r&&!T,content:i,clamplTextOY:Ci(s,"clamplChildOY",!1),alwaysScrollable:Ci(s,"alwaysScrollable",!1)});t.add.existing(d),LB(d),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:d,expandWidth:y===void 0,expandHeight:S===void 0};var x=Ci(s,"space",void 0);x&&(x.child=Ci(x,"text",0)),super(t,s),this.addChildrenMap("text",h)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(va.prototype,OB,FB);const dh=Phaser.Utils.Objects.GetValue;var Wx=function(e,t,s){t=t?fe(t):{};var h=dh(s,"background",Oe),y=dh(s,"text",Ff),S=dh(s,"track",Oe),r=dh(s,"thumb",Oe);h?t.background=h(e,t.background):delete t.background,y?t.text=y(e,t.text):delete t.text;var T=t.slider;T!==!1&&T!==null&&(T===void 0&&(T={}),S?T.track=S(e,T.track):delete T.track,r?T.thumb=r(e,T.thumb):delete T.thumb,t.slider=T);var i=new va(e,t);return e.add.existing(i),i},Ff=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("key")&&(s="bitmaptext"));var h;switch(s){case"bitmaptext":case"bitmap":h=new Ao(e,t);break;case"bbcodetext":case"bbcode":h=new vd(e,0,0,"",t);break;case"label":h=new pa(e,t);break;case"textarea":h=Wx(e,t);break;default:h=new Ro(e,t);break}return wf(h,t),e.add.existing(h),h},Qp=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("leftWidth")?s="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(s="roundRectangle"));var h;switch(s){case"nineSlice":t.hasOwnProperty("stretchMode")?h=new fa(e,t):h=new da(e,t);break;case"roundRectangle":h=new ua(e,t);break;default:h=new la(e,t);break}return wf(h,t),e.add.existing(h),h};const fh=Phaser.Utils.Objects.GetValue;var Lo=function(e,t,s){t=t?fe(t):{};var h=fh(s,"background",Oe),y=fh(s,"text",Ff),S=fh(s,"icon",Qp),r=fh(s,"action",Qp);return t.background!==null&&h?t.background=h(e,t.background):delete t.background,t.text!==null&&y?t.text=y(e,t.text):delete t.text,t.icon!==null&&S?t.icon=S(e,t.icon):delete t.icon,t.action!==null&&r?t.action=r(e,t.action):delete t.action,t};class pa extends ji{constructor(t,s,h){s=Lo(t,s,h),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){return uu(this.getChildren(),"setActiveState",t),this}setHoverState(t){return uu(this.getChildren(),"setHoverState",t),this}setDisableState(t){return uu(this.getChildren(),"setDisableState",t),this}}var uu=function(e,t,s){for(var h=0,y=e.length;h<y;h++){var S=e[h];S&&S[t]&&S[t](s)}};it.register("simpleLabel",function(e,t){var s=new pa(this.scene,e,t);return this.scene.add.existing(s),s});et(window,"RexPlugins.UI.SimpleLabel",pa);const ct=Phaser.Utils.Objects.GetValue;var bB=function(e){var t=this.scene,s=ct(e,"orientation",0);this.setOrientation(s);var h=ct(e,"icon",void 0),y=ct(e,"iconMask",void 0),S=ct(e,"innerBackground",void 0),r=ct(e,"title",void 0),T=ct(e,"separator",void 0),i=ct(e,"text",void 0),d=ct(e,"action",void 0),x=ct(e,"actionMask",void 0);if(h){var f=ct(e,"align.icon","center"),C;this.orientation===0?C={right:ct(e,"space.icon",0),top:ct(e,"space.iconTop",0),bottom:ct(e,"space.iconBottom",0),left:ct(e,"space.iconLeft",0)}:C={bottom:ct(e,"space.icon",0),left:ct(e,"space.iconLeft",0),right:ct(e,"space.iconRight",0),top:ct(e,"space.iconTop",0)};var o=ct(e,"squareFitIcon",!1)?1:0;if(this.add(h,{proportion:0,align:f,padding:C,fitRatio:o}),y&&(y=ui.call(this,h,h,1)),!o){var a=ct(e,"iconSize",void 0);this.setIconSize(ct(e,"iconWidth",a),ct(e,"iconHeight",a))}}var n=new St(t,{orientation:1});S&&n.addBackground(S);var u=ct(e,"space.separator",0);if(r){var f=ct(e,"align.title","left"),c=ct(e,"expandTitleWidth",!1),l=ct(e,"expandTitleHeight",!1),v,C,p;v=l?1:0,p=c,C={bottom:!T&&i?u:0,left:ct(e,"space.titleLeft",0),right:ct(e,"space.titleRight",0)},n.add(r,{proportion:v,expand:p,align:f,padding:C})}if(T){var C={top:r?u:0,bottom:i?u:0,left:ct(e,"space.separatorLeft",0),right:ct(e,"space.separatorRight",0)};n.add(T,{expand:!0,padding:C})}if(i){var f=ct(e,"align.text","left"),g=ct(e,"expandTextWidth",!1),m=ct(e,"expandTextHeight",!1),v,C,p;v=m?1:0,p=g,C={left:ct(e,"space.textLeft",0),right:ct(e,"space.textRight",0)},n.add(i,{proportion:v,expand:p,align:f,padding:C})}var C=void 0;if(d&&(C={right:ct(e,"space.text",0)}),this.add(n,{proportion:1,padding:C}),d){var f=ct(e,"align.action","center"),C;this.orientation===0?C={top:ct(e,"space.actionTop",0),bottom:ct(e,"space.actionBottom",0),right:ct(e,"space.actionRight",0)}:C={left:ct(e,"space.actionLeft",0),right:ct(e,"space.actionRight",0),bottom:ct(e,"space.actionBottom",0)};var o=ct(e,"squareFitAction",!1)?1:0;if(this.add(d,{proportion:0,align:f,padding:C,fitRatio:o}),x&&(x=ui.call(this,d,d,1)),!o){var P=ct(e,"actionSize");this.setActionSize(ct(e,"actionWidth",P),ct(e,"actionHeight",P))}}this.addChildrenMap("icon",h),this.addChildrenMap("iconMask",y),this.addChildrenMap("innerSizer",n),this.addChildrenMap("innerBackground",S),this.addChildrenMap("title",r),this.addChildrenMap("separator",T),this.addChildrenMap("text",i),this.addChildrenMap("action",d),this.addChildrenMap("actionMask",x)};const ft=Phaser.Utils.Objects.GetValue;var DB=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,s=ft(e,"title",void 0),h=ft(e,"separator",void 0),y=ft(e,"innerBackground",void 0),S=ft(e,"icon",void 0),r=ft(e,"iconMask",void 0),T=ft(e,"text",void 0),i=ft(e,"action",void 0),d=ft(e,"actionMask",void 0);if(s){var x=ft(e,"align.title","left"),f=ft(e,"expandTitleWidth",!1),o=ft(e,"expandTitleHeight",!1),a,n,u;a=o?1:0,u=f,n={bottom:ft(e,"space.title",0),left:ft(e,"space.titleLeft",0),right:ft(e,"space.titleRight",0)},this.add(s,{proportion:a,expand:u,align:x,padding:n})}if(h){var c=ft(e,"space.separator",0),n={top:s?c:0,bottom:T?c:0,left:ft(e,"space.separatorLeft",0),right:ft(e,"space.separatorRight",0)};this.add(h,{proportion:0,expand:!0,padding:n})}var l=ft(e,"orientation",0),v=new St(t,{orientation:l,rtl:ft(e,"rtl",!1),space:{left:ft(e,"space.innerLeft",0),right:ft(e,"space.innerRight",0),top:ft(e,"space.innerTop",0),bottom:ft(e,"space.innerBottom",0)}});if(y&&v.addBackground(y),this.add(v,{proportion:1,expand:!0}),S){var x=ft(e,"align.icon","center"),n;v.orientation===0?n={right:ft(e,"space.icon",0),top:ft(e,"space.iconTop",0),bottom:ft(e,"space.iconBottom",0),left:ft(e,"space.iconLeft",0)}:n={bottom:ft(e,"space.icon",0),left:ft(e,"space.iconLeft",0),right:ft(e,"space.iconRight",0),top:ft(e,"space.iconTop",0)};var p=ft(e,"squareFitIcon",!1)?1:0;if(v.add(S,{proportion:0,align:x,padding:n,fitRatio:p}),r&&(r=ui.call(this,S,S,1)),!p){var g=ft(e,"iconSize",void 0);this.setIconSize(ft(e,"iconWidth",g),ft(e,"iconHeight",g))}}if(T){var x=ft(e,"align.text","left"),m=ft(e,"space.text",0),C=ft(e,"expandTextWidth",!1),P=ft(e,"expandTextHeight",!1),a,n,u;v.orientation===0?(a=C?1:0,i&&(n={right:m}),u=P):(a=P?1:0,i&&(n={bottom:m}),u=C),v.add(T,{proportion:a,expand:u,align:x,padding:n})}if(i){var x=ft(e,"align.action","center"),n;v.orientation===0?n={top:ft(e,"space.actionTop",0),bottom:ft(e,"space.actionBottom",0),right:ft(e,"space.actionRight",0)}:n={left:ft(e,"space.actionLeft",0),right:ft(e,"space.actionRight",0),bottom:ft(e,"space.actionBottom",0)};var p=ft(e,"squareFitAction",!1)?1:0;if(v.add(i,{proportion:0,align:x,padding:n,fitRatio:p}),d&&(d=ui.call(this,i,i,1)),!p){var M=ft(e,"actionSize");this.setActionSize(ft(e,"actionWidth",M),ft(e,"actionHeight",M))}}this.addChildrenMap("title",s),this.addChildrenMap("separator",h),this.addChildrenMap("innerSizer",v),this.addChildrenMap("innerBackground",y),this.addChildrenMap("icon",S),this.addChildrenMap("iconMask",r),this.addChildrenMap("text",T),this.addChildrenMap("action",i),this.addChildrenMap("actionMask",d)};const Rr=Phaser.Utils.Objects.GetValue,jp=[bB,DB];class Oo extends Sf{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTitleLabel";var h=Rr(s,"background",void 0);h&&this.addBackground(h);var y=Rr(s,"title",void 0),S=Rr(s,"text",void 0);if(y){var r=Rr(s,"wrapTitle",!1);r&&(r===!0&&(r="word"),qu(y,r),s.expandTitleWidth=!0,Hh(y))}if(S){var T=Rr(s,"wrapText",!1);T&&(T===!0&&(T="word"),qu(S,T),s.expandTextWidth=!0,Hh(S))}var i=Rr(s,"layoutMode",0),d=jp[i]||jp[0];d.call(this,s),this.addChildrenMap("background",s.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var s=this.childrenMap.title;!s||s.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var s=this.childrenMap.title;return s&&(t.title===void 0||(t.title?(this.show(s),this.setTitle(t.title)):this.hide(s))),this}}it.register("titleLabel",function(e){var t=new Oo(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.TitleLabel",Oo);const du=Phaser.Utils.Objects.GetValue;var Yx=function(e,t,s){var h=du(s,"innerBackground",Oe),y=du(s,"separator",Oe),S=du(s,"title",Ff),r,T;t.innerBackground!==null&&h&&(r=h(e,t.innerBackground)),t.separator!==null&&y&&(T=y(e,t.separator)),t=Lo(e,t,s),r?t.innerBackground=r:delete t.innerBackground,T?t.separator=T:delete t.separator,t.title!==null&&S?t.title=S(e,t.title):delete t.title;var i=t.background;return i&&(r?e.children.moveBelow(i,r):T&&e.children.moveBelow(i,T)),t};class Ux extends Oo{constructor(t,s,h){s=Yx(t,s,h),super(t,s),this.type="rexSimpleTitleLabel"}setActiveState(t){return fu(this.getChildren(),"setActiveState",t),this}setHoverState(t){return fu(this.getChildren(),"setHoverState",t),this}setDisableState(t){return fu(this.getChildren(),"setDisableState",t),this}}var fu=function(e,t,s){for(var h=0,y=e.length;h<y;h++){var S=e[h];S&&S[t]&&S[t](s)}};it.register("simpleTitleLabel",function(e,t){var s=new Ux(this.scene,e,t);return this.scene.add.existing(s),s});et(window,"RexPlugins.UI.SimpleTitleLabel",Ux);const Et=Phaser.Utils.Objects.GetValue,IB=Phaser.Utils.Objects.IsPlainObject;var BB=function(e,t){var s=Et(t,"background",void 0),h=Et(t,"icon",void 0),y=Et(t,"iconMask",void 0),S=Et(t,"nameText",void 0),r=Et(t,"valueText",void 0),T=Et(t,"bar",void 0),i=Et(t,"action",void 0),d=Et(t,"actionMask",void 0),x=Et(t,"barShape","line")==="line";if(IB(T)){var f=x?Dd:Fd;T=new f(e,T),e.add.existing(T),S&&e.children.moveBelow(T,S),r&&e.children.moveBelow(T,r)}var o=S||r||T;if(s&&this.addBackground(s),h){var a=void 0;this.orientation===0?(o||i)&&(a={right:Et(t,"space.icon",0),top:Et(t,"space.iconTop",0),bottom:Et(t,"space.iconBottom",0)}):(o||i)&&(a={bottom:Et(t,"space.icon",0),left:Et(t,"space.iconLeft",0),right:Et(t,"space.iconRight",0)}),this.add(h,{proportion:0,padding:a}),y&&(y=ui.call(this,h,h,1))}if(o){var n=new St(e,{orientation:1}),u;if(S||r){if(u=new St(e,{orientation:0}),S){S.text===""&&S.setText(" "),S.setOrigin(0,S.originY);var a={left:Et(t,"space.name",0)};u.add(S,{padding:a})}if(r){r.text===""&&r.setText(" "),r.setOrigin(1,r.originY),u.addSpace();var a={right:Et(t,"space.value",0)};u.add(r,{padding:a}),this.setValueTextFormatCallback(Et(t,"valueTextFormatCallback",GB),Et(t,"valueTextFormatCallbackScope",void 0))}n.add(u,{expand:!0})}if(T)if(x){var c=u?Et(t,"space.bar"):0;c===void 0&&(c=Et(t,"space.barTop",0));var a={top:c,bottom:Et(t,"space.barBottom",0),left:Et(t,"space.barLeft",0),right:Et(t,"space.barRight",0)};n.add(T,{expand:!0,padding:a})}else{var a={top:Et(t,"space.barTop",0),bottom:Et(t,"space.barBottom",0),left:Et(t,"space.barLeft",0),right:Et(t,"space.barRight",0)};this.addBackground(T,a)}var a=void 0;i&&(a={right:Et(t,"space.text",0)});var l=Et(t,"align.text","bottom");this.add(n,{proportion:1,align:l,padding:a})}if(i){var a;this.orientation===0?a={top:Et(t,"space.actionTop",0),bottom:Et(t,"space.actionBottom",0)}:a={left:Et(t,"space.actionLeft",0),right:Et(t,"space.actionRight",0)},this.add(i,{proportion:0,padding:a}),d&&(d=ui.call(this,i,i,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",h),this.addChildrenMap("iconMask",y),this.addChildrenMap("name",S),this.addChildrenMap("value",r),this.addChildrenMap("bar",T),this.addChildrenMap("action",i),this.addChildrenMap("actionMask",d)},GB=function(e,t,s){return e.toString()};const NB=Phaser.Math.Clamp,zB={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,s){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var h;return this.valueTextFormatCallbackScope?h=this.valueTextFormatCallback(e,t,s):h=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,s),h},updateValueText(e,t,s){var h=this.childrenMap.value;return h&&this.valueTextFormatCallback&&(h.setText(this.getFormatValueText(e,t,s)),h.layout&&h.layout()),this},setValue(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,e=NB(e,t,s),this.value=e,this.updateValueText(e,t,s),this.setBarValue(e,t,s),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,this.easeValueTask===void 0&&(this.easeValueTask=new Ki(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class Fo extends St{constructor(t,s){super(t,s),this.type="rexNameValueLabel",BB.call(this,t,s),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,h){var y=this.childrenMap.bar;return y===void 0?this:(y.setValue(t,s,h),this)}easeBarValueTo(t,s,h){var y=this.childrenMap.bar;return y===void 0?this:(y.easeValueTo(t,s,h),this)}setTexture(t,s){var h=this.childrenMap.icon;if(h!==void 0)return h.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,s,h){var y=this.childrenMap.iconMask;y&&(y.setPosition(),this.resetChildPositionState(y));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),this}resize(t,s){super.resize(t,s);var h=this.childrenMap.iconMask;h&&h.resize();var y=this.childrenMap.actionMask;return y&&y.resize(),this}}Object.assign(Fo.prototype,zB);it.register("nameValueLabel",function(e){var t=new Fo(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.NameValueLabel",Fo);class VB extends nm{constructor(t){super(),this.setTable(wt(t,"table")),this.setMaxLevel(wt(t,"maxLevel"));var s=wt(t,"exp",0),h=wt(t,"level",void 0);h!==void 0&&!this.checkLevel(h,s)&&(console.error(`Level ${h} and Exp ${s} are mismatch`),h=void 0),this.resetExp(s,h)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Hi(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var s;return t!==-1?s=this.getExp(t):s=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=s,this}resetExp(t,s){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),s===void 0&&(s=this.getLevel(t)),this._exp=t,this._level=s,this._requiredExp=this.getRequiredExpToNextLevel(s,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var s=this.getLevel(t,this._level),h=this._level,y=this._exp,S;;){var r=this.getExp(h),T=this.getExp(h+1);if(S=Math.min(T,t),this.emit("levelup",h,y,S,r,T),h===s&&S===t)break;h++,y=T}this.resetExp(t,s)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,s){if(t===void 0)return this._level;for(s===void 0&&(s=0);;){var h=this.getExp(s+1);if(h>t||(s++,this.hasMaxLevel&&h===this.maxExp))break}return s}getRequiredExpToNextLevel(t,s){return t===void 0&&(t=this.level),s===void 0&&(s=this.exp),this.getExp(t+1)-s}checkLevel(t,s){return s>=this.getExp(t)&&s<this.getExp(t+1)}gainExp(t,s,h){return s&&this.on("levelup",s,h),this.exp+=t,s&&this.off("levelup",s,h),this}setExp(t,s,h){return s&&this.on("levelup",s,h),this.exp=t,s&&this.off("levelup",s,h),this}setLevel(t,s,h){return s&&this.on("levelup",s,h),this.level=t,s&&this.off("levelup",s,h),this}}var _u=function(e,t,s){var h=wt(s,"reverse",!1),y;if(li(e[0]))if(h)for(var r=e.length,S=r-1;S>=0;S--)y=_u(e[S],t,s);else for(var S=0,r=e.length;S<r;S++)y=_u(e[S],t,s);else y=kB(e,t,s);return y},kB=function(e,t,s){var h=wt(s,"argsConvert",void 0),y=wt(s,"argsConvertScope",void 0),S=e[0];if(hs=zh(hs,e,1),h){h===!0&&(h=Sd,y=void 0);for(var r=0,T=hs.length;r<T;r++)y?hs[r]=h.call(y,hs[r],e):hs[r]=h(hs[r],e)}var i;typeof S=="string"?(i=t[S],i==null&&(i=wt(t,S,null))):i=S;var d=i.apply(t,hs);return d},hs=[];const ri=Phaser.Utils.Objects.GetValue;class Hx extends Gt{constructor(t,s){super(t,s);var h=ri(s,"clock",void 0);h||(h=new _0(t)),this.clock=h,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(ri(t,"clock",void 0)),this.state=ri(t,"state",0),this.commands=ri(t,"commands",[]),this.scope=ri(t,"scope",void 0),this.setTimeUnit(ri(t,"timeUnit",0)),this.setDtMode(ri(t,"dtMode",0)),this.index=ri(t,"index",0),this.nextTime=ri(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,h){this.stop();var y=ri(h,"timeUnit",void 0);y!==void 0&&this.setTimeUnit(y);var S=ri(h,"dtMode",void 0);return S!==void 0&&this.setDtMode(S),t=t.filter(function(r){var T=r[0];return!isNaN(T)}).map(function(r){var T=r[0];return typeof T=="string"&&(r[0]=parseFloat(r[0])),r}),this.dtMode===0&&t.sort(function(r,T){var i=r[0],d=T[0];return i>d?1:i<d?-1:0}),zh(this.commands,t),this.scope=s,this}clear(){return this.commands.length=0,this}append(t,s,...h){var y;return Array.isArray(s)?y=s:y=[s,...h],this.commands.push([t,y]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands;;){var h=s[this.index],y=h[1];if(li(y)||(y=zh(XB,h,1)),_u(y,this.scope),this.emit("runcommand",y,this.scope),this.index>=s.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=YB[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=WB[t]),this.timeUnit=t,this}}var XB=[];const WB={ms:0,s:1,sec:1},YB={abs:0,absolute:0,inc:1,increment:1};var UB=function(e,t,s,h,y){var S=(s-t)/(y-h)*this.totalEaseDuration,r=s===y?e+1:e;this.player.append(0,this.setEaseValueDuration,S).append(0,this.easeValueTo,s,h,y).append(0,this.emit,"levelup.start",e,t,s,this).append(S,te).append(0,this.emit,"levelup.end",r,t,s,this),this.player.isPlaying||this.player.start()};const HB={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}},qp=Phaser.Utils.Objects.GetValue;class bf extends Fo{constructor(t,s){super(t,s),this.type="rexExpBar",this.setTotalEaseDuration(qp(s,"easeDuration",1e3)),this.levelCounter=new VB(qp(s,"levelCounter")),this.player=new Hx(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",UB,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign(bf.prototype,HB);it.register("expBar",function(e){var t=new bf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ExpBar",bf);const ch=St.prototype.add,_p=St.prototype.addSpace;var cu=function(e){var t=!e.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var h=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");h&&_p.call(this),ch.call(this,e,{proportion:s,expand:!0});var y=!this.buttonsExpand&&this.buttonsAlign==="center";y&&_p.call(this),this.hasTailSpace=y}else ch.call(this,e,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var S=this.sizerChildren.length-1;ch.call(this,e,{index:S,proportion:s,expand:!0})}else ch.call(this,e,{proportion:s,expand:!0});return t&&this.buttonGroup.add(e),this};const $B={addButton(e){if(li(e))for(var t=e,s=0,h=t.length;s<h;s++)cu.call(this,t[s]);else cu.call(this,e);return this},addButtons(e){for(var t=0,s=e.length;t<s;t++)cu.call(this,e[t]);return this}},KB=St.prototype.remove,ZB=St.prototype.clear;var vu=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),KB.call(this,e,t),this)};const JB={remove(e,t){if(li(e))for(var s=e,h=0,y=s.length;h<y;h++)vu.call(this,s[h],t);else vu.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,ZB.call(this,e),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)vu.call(this,t[s],e);return this}};var QB=function(e,t,s){if(!!e){var h=this.setValueCallback,y=this.setValueCallbackScope;h&&(y?h.call(y,e,t,s):h(e,t,s)),this.fireEvent("button.statechange",e,t,s)}},jB=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(s){if(e._selected!==s){var h=e._selected;e._selected=s,QB.call(t,e,s,h)}},enumerable:!0,configurable:!0}),e.selected=!1};const qB={add(e){return this.buttons.push(e),e._click||(e._click=new Zi(e,this.clickConfig),e._click.on("click",function(t,s,h,y){this.fireEvent("button.click",s,h,y)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this).on("over",function(t,s,h,y){this.fireEvent("button.over",s,h,y)},this).on("out",function(t,s,h,y){this.fireEvent("button.out",s,h,y)},this).on("down",function(t,s,h,y){this.fireEvent("button.down",s,h,y)},this).on("up",function(t,s,h,y){this.fireEvent("button.up",s,h,y)},this)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),jB.call(this,e)),this},addMultiple(e){for(var t=0,s=e.length;t<s;t++)this.add(e[t]);return this}},_B=Phaser.Utils.Array.Remove,tG={remove(e){return this.buttonsType&&delete e.selected,_B(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,s=e.length;t<s;t++)delete e[t].selected;return this.buttons.length=0,this}};var eG=function(e,t,...s){if(!!this.buttons){var h;if(typeof t=="number"){if(h=t,t=this.buttons[h],!t)return}else if(h=this.buttons.indexOf(t),h===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,h,...s),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,h,...s):this.eventEmitter.emit(e,t,h,...s)}};const En=Phaser.Utils.Objects.GetValue,iG={setButtonsType(e){e===void 0&&(e={});var t=En(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,h;switch(s=En(e,"setValueCallback",void 0),h=En(e,"setValueCallbackScope",void 0),s===void 0&&(s=En(e,"setButtonStateCallback",void 0),h=En(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=h,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var s=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(h){if(e._value!==h){e._value=h;for(var y=0,S=t.length;y<S;y++){var r=t[y];r.rexSizer.hidden||(s===void 0?r.name===h?r.selected=!0:r.selected=!1:s===y?r.selected=!0:r.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(h){s=this.buttons.indexOf(h),e.value=h.name,s=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,s=e.length;t<s;t++){var h=e[t];h.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,s=0,h=t.length;s<h;s++){var y=t[s];y.rexSizer.hidden||(e[y.name]=y.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var s=this.buttons,h=0,y=s.length;h<y;h++){var S=s[h];if(!S.rexSizer.hidden&&S.name===e){S.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,s=0,h=t.length;s<h;s++){var y=t[s];if(!y.rexSizer.hidden&&y.name===e)return y.selected}}};var sG=function(e,t){if(e)if(li(e)){for(var s,h=0,y=e.length;h<y;h++)if(s=tg(e[h],t),s)return s}else{var s;for(var S in e)if(s=tg(e[S],t),s)return s}else return null},tg=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null};const bo={getButton(e){var t=this.buttons,s,h=typeof e;switch(h){case"number":s=t[e];break;case"string":s=sG(t,e);break;default:s=e,t.indexOf(s)===-1&&(s=void 0);break}return s},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var s=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var h=0,y=s.length;h<y;h++)s[h]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var s=0,h=t.length;s<h;s++)t[s]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,s=this.buttons,h=0,y=s.length;h<y;h++){var S=s[h];!S._click.isOver||(S._click.isOver=!1,t.fireEvent("button.out",S))}var S=this.getButton(e);return S&&(S._click.isOver=!0,t.fireEvent("button.over",S)),this},showButton(e){return cs(this.getButton(e)),this},hideButton(e){return vs(this.getButton(e)),this},isButtonShown(e){return sf(this.getButton(e)),this},forEachButtton(e,t){for(var s=this.buttons,h=0,y=s.length;h<y;h++)t?e.call(t,s[h],h,s):e(s[h],h,s);return this}};class Do{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var rG={fireEvent:eG};Object.assign(Do.prototype,qB,tG,iG,bo,rG);const Df={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}},Vs=Phaser.Utils.Objects.GetValue;class he extends St{constructor(t,s){s===void 0&&(s={});var h=s.space;typeof h=="number"&&(s.space={item:h}),super(t,s),this.type="rexButtons",this.buttonGroup=new Do({parent:this,eventEmitter:Vs(s,"eventEmitter",this),groupName:Vs(s,"groupName",void 0),clickConfig:Vs(s,"click",void 0)}).setButtonsType(s);var y=Vs(s,"background",void 0),S=Vs(s,"buttons",void 0);this.buttonsExpand=Vs(s,"expand",!1),this.buttonsAlign=Vs(s,"align",void 0),y&&this.addBackground(y),S&&this.addButtons(S),this.addChildrenMap("background",y),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(he.prototype,$B,JB,bo,Df);it.register("buttons",function(e){var t=new he(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Buttons",he);const nG=di.prototype.add,aG={addButton(e,t,s){return nG.call(this,e,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var s=0,h=e;s<h;s++)this.addButton(e[s],void 0,t);return this}},hG=di.prototype.remove,oG=di.prototype.clear;var pu=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),hG.call(this,s,t),this):this};const lG={remove(e,t){if(li(e))for(var s=e,h=0,y=s.length;h<y;h++)pu.call(this,s[h],t);else pu.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,oG.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)pu.call(this,t[s],e);return this}},Ti=Phaser.Utils.Objects.GetValue;class Io extends di{constructor(t,s){s===void 0&&(s={});var h=Ti(s,"row",0),y=Ti(s,"column",s.col||0),S=Ti(s,"createCellContainerCallback"),r=Ti(s,"buttons",void 0),T=Ti(s,"expand",!0),i=T?1:0;if(S&&(s.createCellContainerCallback=void 0),r!==void 0){h=Math.max(h,r.length);for(var d=0,x=r.length;d<x;d++)y=Math.max(y,r[d].length)}s.row=h,s.column=y,s.columnProportions=i,s.rowProportions=i,super(t,s),this.type="rexGridButtons",this.buttonGroup=new Do({parent:this,eventEmitter:Ti(s,"eventEmitter",this),groupName:Ti(s,"groupName",void 0),clickConfig:Ti(s,"click",void 0)}).setButtonsType(s);var f=Ti(s,"background",void 0);if(this.buttonsExpand=T,Ti(s,"space",void 0),f&&this.addBackground(f),r)for(var o,a,n=0,u=r.length;n<u;n++){o=r[n];for(var c=0,l=o.length;c<l;c++)a=o[c],a&&this.addButton(a,c,n)}else if(S)for(var v=0;v<h;v++)for(var p=0;p<y;p++){var a=S(t,p,v);a&&this.addButton(a,p,v)}this.addChildrenMap("background",f),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Io.prototype,aG,lG,bo,Df);it.register("gridButtons",function(e){var t=new Io(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.GridButtons",Io);const $x=ar.prototype.add;var vh=function(e){return $x.call(this,e),this.buttonGroup.add(e),this};const uG={addButton(e){if(li(e))for(var t=e,s=0,h=t.length;s<h;s++)vh.call(this,t[s]);else vh.call(this,e);return this},addButtons(e){if(li(e[0]))for(var t=e,s,h=0,y=t.length-1;h<=y;h++){s=t[h];for(var S=0,r=s.length;S<r;S++)vh.call(this,s[S]);h>y&&$x.addNewLine(this)}else for(var S=0,r=e.length;S<r;S++)vh.call(this,e[S]);return this}},dG=ar.prototype.remove,fG=ar.prototype.clear;var gu=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),dG.call(this,s,t),this):this};const cG={remove(e,t){if(li(e))for(var s=e,h=0,y=s.length;h<y;h++)gu.call(this,s[h],t);else gu.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,fG.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)gu.call(this,t[s],e);return this}},Ar=Phaser.Utils.Objects.GetValue;class Cs extends ar{constructor(t,s){s===void 0&&(s={});var h=s.space;typeof h=="number"&&(s.space={item:h,line:h}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new Do({parent:this,eventEmitter:Ar(s,"eventEmitter",this),groupName:Ar(s,"groupName",void 0),clickConfig:Ar(s,"click",void 0)}).setButtonsType(s);var y=Ar(s,"background",void 0),S=Ar(s,"buttons",void 0);this.buttonsAlign=Ar(s,"align",void 0),y&&this.addBackground(y),S&&this.addButtons(S),this.addChildrenMap("background",y),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Cs.prototype,uG,cG,bo,Df);it.register("fixWidthButtons",function(e){var t=new Cs(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.FixWidthButtons",Cs);const vG={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,s,h,y){return this.childrenMap.fileChooser.loadFile(e,t,s,h,y),this},loadFilePromise(e,t,s,h){return this.childrenMap.fileChooser.loadFilePromise(e,t,s,h)}},eg=Phaser.Utils.Objects.GetValue;class If extends ji{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var h=new ha(t);t.add.existing(h),this.addBackground(h),this.addChildrenMap("fileChooser",h),this.setAccept(eg(s,"accept","")),this.setMultiple(eg(s,"multiple",!1)),h.on("change",function(y){var S=y.files;S.length!==0&&(S=Array.from(S),this.emit("select",S,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(If.prototype,vG);it.register("fileSelectorButton",function(e){var t=new If(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.FileSelectorButton",If);const pG={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}},gG={onCreateModalBehavior(e){e.on("button.click",function(t,s,h,y,S){var r=!1;switch(s){case"actions":r=!0;break;case"choices":e.hasAnyAction()||(r=!0);break}if(!!r){var T={index:h,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":T.value=e.getChoicesSelectedButtonName();break;case"checkboxes":T.value=e.getChoicesButtonStates();break;default:T.value=void 0}e.modalClose(T)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,hf.modal.call(this,e,t),this}};var Kx={};Object.assign(Kx,pG,gG);const ut=Phaser.Utils.Objects.GetValue;class Bo extends St{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=ut(s,"eventEmitter",this);var h=ut(s,"background",void 0),y=ut(s,"title",void 0),S=ut(s,"toolbar",void 0),r=ut(s,"toolbarBackground",void 0),T=ut(s,"leftToolbar",void 0),i=ut(s,"leftToolbarBackground",void 0),d=ut(s,"content",void 0),x=ut(s,"description",void 0),f,o=ut(s,"choices",void 0),a=ut(s,"choicesBackground",void 0),n,u=ut(s,"actions",void 0),c=ut(s,"actionsBackground",void 0),l=ut(s,"click",void 0);h&&this.addBackground(h);var v;S&&(v=new he(t,{groupName:"toolbar",background:r,buttons:S,orientation:0,space:{item:ut(s,"space.toolbarItem",0)},click:l,eventEmitter:this.eventEmitter}),t.add.existing(v));var p;if(T&&(p=new he(t,{groupName:"leftToolbar",background:i,buttons:T,orientation:0,space:{item:ut(s,"space.leftToolbarItem",0)},click:l,eventEmitter:this.eventEmitter}),t.add.existing(p)),y||S||T){var g=!!y&&ut(s,"expand.title",!0),m=ut(s,"align.title","center"),C=y&&!g&&m==="center"||!y&&(S||T),P=!C,M;P?M=new St(t,{orientation:0}):M=new qe(t),t.add.existing(M);var E=P?!0:{height:!0};if(p&&M.add(p,{align:"left",expand:E}),y){P&&!g&&m==="right"&&M.addSpace();var w={left:ut(s,"space.titleLeft",0),right:ut(s,"space.titleRight",0)},R=g?1:0;M.add(y,{align:m,proportion:R,expand:E,padding:w}),P&&!g&&m==="left"&&M.addSpace()}v&&(P&&!y&&M.addSpace(),M.add(v,{align:"right",expand:E}));var w;(d||x||o||u)&&(w={bottom:ut(s,"space.title",0),top:ut(s,"space.titleTop",0)});var R=ut(s,"proportion.title",0);this.add(M,{padding:w,proportion:R,expand:!0})}if(d){var A=ut(s,"align.content","center"),L=ut(s,"space.content",0),w={left:ut(s,"space.contentLeft",0),right:ut(s,"space.contentRight",0),bottom:x||o||u?L:0},R=ut(s,"proportion.content",0),F=ut(s,"expand.content",!0);this.add(d,{align:A,padding:w,proportion:R,expand:F})}if(x){var A=ut(s,"align.description","center"),O=ut(s,"space.description",0),w={left:ut(s,"space.descriptionLeft",0),right:ut(s,"space.descriptionRight",0),bottom:o||u?O:0},R=ut(s,"proportion.description",0),F=ut(s,"expand.description",!0);this.add(x,{align:A,padding:w,proportion:R,expand:F})}if(o){var b=ut(s,"choicesType","").split("-"),I=Mn(b,"wrap")?Cs:Mn(b,"grid")?Io:he,B=Mn(b,"radio")?"radio":Mn(b,"checkboxes")?"checkboxes":void 0,N={left:ut(s,"space.choicesBackgroundLeft",0),right:ut(s,"space.choicesBackgroundRight",0),top:ut(s,"space.choicesBackgroundTop",0),bottom:ut(s,"space.choicesBackgroundBottom",0)},k=ut(s,"space.choice",0);I===he?N.item=k:I===Cs?(N.item=k,N.line=ut(s,"space.choiceLine",k)):(N.column=ut(s,"space.choiceColumn",k),N.row=ut(s,"space.choiceRow",k));var Y={width:ut(s,"choicesWidth",void 0),height:ut(s,"choicesHeight",void 0),groupName:"choices",buttonsType:B,background:a,buttons:o,space:N,click:l,eventEmitter:this.eventEmitter,setValueCallback:ut(s,"choicesSetValueCallback",void 0),setValueCallbackScope:ut(s,"choicesSetValueCallbackScope",void 0)};I===he&&(Y.orientation=Mn(b,"x")?0:1),f=new I(t,Y),t.add.existing(f);var H=ut(s,"space.choices",0),w={left:ut(s,"space.choicesLeft",0),right:ut(s,"space.choicesRight",0),bottom:u?H:0},A=ut(s,"align.choices","center"),R=ut(s,"proportion.choices",0),F=ut(s,"expand.choices",!0);this.add(f,{align:A,padding:w,proportion:R,expand:F}),this.buttonsType=B}if(u){n=new he(t,{groupName:"actions",background:c,buttons:u,orientation:0,space:{item:ut(s,"space.action",0)},expand:ut(s,"expand.actions",!1),align:ut(s,"align.actions","center"),click:l,eventEmitter:this.eventEmitter}),t.add.existing(n);var w={left:ut(s,"space.actionsLeft",0),right:ut(s,"space.actionsRight",0),bottom:ut(s,"space.actionsBottom",0)},R=ut(s,"proportion.action",0);this.add(n,{align:"center",padding:w,proportion:R,expand:!0})}wn(this,"click"),wn(this,"over"),wn(this,"out"),wn(this,"enable"),wn(this,"disable"),this.addChildrenMap("background",h),this.addChildrenMap("title",y),this.addChildrenMap("toolbar",S),this.addChildrenMap("leftToolbar",T),this.addChildrenMap("content",d),this.addChildrenMap("description",x),this.addChildrenMap("choices",f?f.buttons:void 0),this.addChildrenMap("actions",n?n.buttons:void 0),this.addChildrenMap("choicesSizer",f),this.addChildrenMap("actionsSizer",n),this.addChildrenMap("toolbarSizer",v),this.addChildrenMap("leftToolbarSizer",p)}}var Mn=function(e,t){return e.indexOf(t)!==-1},ig={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},wn=function(e,t){e.on(`button.${t}`,function(s,h,y,S,r){!ig.hasOwnProperty(h)||e.emit(`${ig[h]}.${t}`,s,y,S,r)})};Object.assign(Bo.prototype,Kx);it.register("dialog",function(e){var t=new Bo(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Dialog",Bo);var Fe=function(e,t,s){var h=new pa(e,t,s);return e.add.existing(h),h},mG=function(e){return e===void 0&&(e={}),xG.call(this,e),yG.call(this,e),CG.call(this,e),TG.call(this,e),this},xG=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},yG=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var s=e||"";t.setText(s)}},CG=function(e){var t=this.childrenMap.actions;if(!!t){var s=e.buttons;if(s){for(var S=this.scene,r=this.defaultActionConfig,T=this.defaultActionButtonCreator,i=0,d=s.length;i<d;i++){var x=s[i],f=t[i];f||(f=Fe(S,r,T),this.addAction(f)),f.show().resetDisplayContent(x)}this.buttonMode=s.length;for(var i=s.length,d=t.length;i<d;i++)t[i].hide()}else{var h=t[0];h&&(e.buttonA===null?h.hide():(h.show(),h.resetDisplayContent(e.buttonA)));var y=t[1];y&&(e.buttonB===null?y.hide():(y.show(),y.resetDisplayContent(e.buttonB)))}}},TG=function(e){var t=this.childrenMap.choices;if(!!t){var s=e.choices;s||(s=[]);for(var h=this.scene,y=this.defaultChoiceConfig,S=this.defaultActionButtonCreator,r=0,T=s.length;r<T;r++){var i=s[r];typeof i=="string"&&(i={text:i});var d=t[r];d||(d=Fe(h,y,S),this.addChoice(d)),d.show().resetDisplayContent(i);var x;i.hasOwnProperty("value")?x=i.value:x=i.text,d.setName(x)}for(var r=s.length,T=t.length;r<T;r++)t[r].hide()}};Phaser.Utils.Objects.GetValue;const SG=Phaser.Utils.Objects.Merge;var PG=function(e,t){Hi(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=SG(e,this.modalStyle);var s;this.buttonMode===0?this.hasAnyChoice()?s=!1:s=!0:s=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=s),e.hasOwnProperty("manualClose")||(e.manualClose=!s);var h=this,y=function(S){var r=S.index;r===h.confirmButtonIndex?h.emit("confirm",S):r===h.cancelButtonIndex&&h.emit("cancel",S),t&&t(S)};return hf.modal.call(this,e,y),this};const EG={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}};var Zx={resetDisplayContent:mG,modal:PG};Object.assign(Zx,EG);var MG=function(e){e.setHoverState&&e.setHoverState(!0)},wG=function(e){e.setHoverState&&e.setHoverState(!1)},RG=function(e,t,s,h){e.setActiveState&&e.setActiveState(h)},AG=function(e){e.setDisableState&&e.setDisableState(!1)},LG=function(e){e.setDisableState&&e.setDisableState(!0)},OG=function(){this.on("button.over",MG).on("button.out",wG).on("button.enable",AG).on("button.disable",LG).on("button.statechange",RG)};const FG=Phaser.Utils.Objects.GetValue;var bG=function(e,t,s){var h=FG(t,"$type");h===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(h="textarea");var y;switch(h){case"textarea":y=new Wx(e,t,s);break;default:y=new Fe(e,t,s);break}return e.add.existing(y),y};const mu=Phaser.Utils.Objects.GetValue;class Go extends Bo{constructor(t,s,h){s=s?fe(s):{},h===void 0&&(h={});var y=mu(h,"background",Oe);y?s.background=y(t,s.background):delete s.background,s.title=Fe(t,s.title,h.title),s.content=bG(t,s.content,h.content),s.content instanceof va&&Mi(s,"height")&&!Mi(s,"proportion.content")&&et(s,"proportion.content",1);var S=s.button,r=s.buttonA||S,T=s.buttonB||S,i=s.buttonMode;i===void 0&&(i=!!r&&!!T?2:r?1:0);var d=h.button,x=h.buttonA||d,f=h.buttonB||d;switch(i){case 2:s.actions=[Fe(t,r,x),Fe(t,T,f)];break;case 1:s.actions=[Fe(t,r,x)];break;case 0:break;default:s.actions=[];break}var o=s.choice;o&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=i,this.defaultActionConfig=S,this.defaultActionButtonCreator=d,this.defaultChoiceConfig=o,this.defaultChoiceCreator=h.choice;var a=this.childrenMap.actions;this.addChildrenMap("buttonA",a?a[0]:null),this.addChildrenMap("buttonB",a?a[1]:null),OG.call(this),this.setConfirmButtonIndex(mu(s,"confirmButtonIndex",0)),this.setCancelButtonIndex(mu(s,"cancelButtonIndex",1)),this.modalStyle=s.modal||{}}}Object.assign(Go.prototype,Zx);it.register("confirmDialog",function(e,t){var s=new Go(this.scene,e,t);return this.scene.add.existing(s),s});et(window,"RexPlugins.UI.ConfirmDialog",Go);const sg=Phaser.Utils.Objects.GetValue;var Jx=function(e,t){var s=t.dialog,h=!s;if(h){var y=t.style;y.buttonMode=2,s=new Go(e,y,t.creators),e.add.existing(s)}s.setConfirmButtonIndex(sg(t,"confirmButtonIndex",0)).setCancelButtonIndex(sg(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),h&&t.onCreateDialog&&t.onCreateDialog(s);var S=t.modal;S&&!S.hasOwnProperty("destroy")&&(S.destroy=h);var r=t.confirm,T=t.cancel,i=t.confirmScope,d=t.cancelScope;r&&s.once("confirm",r,i),T&&s.once("cancel",T,d);var x=function(f){s.off("confirm",r,i),s.off("cancel",T,d)};return s.modal(S,x),s};class Qx extends ji{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Ri(s.confirmDialog||{}),s.confirm&&this.setConfirmCallback(s.confirm,s.confirmScope),s.cancel&&this.setCancelCallback(s.cancel,s.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=Jx(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,s){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=s,this}setCancelCallback(t,s){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=s,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,s=this.confirmActionConfig.confirmScope;return t&&t.call(s),this}}it.register("confirmActionButton",function(e){var t=new Qx(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ConfirmActionButton",Qx);var Hs=function(e,t){if(!!e){var s=Xe(e);!s||s.remove(e,t)}};const ph=Phaser.Utils.Objects.GetValue;var ga=function(e,t,s){var h=ph(e,`proportion.${t}`,s.proportion),y=ph(e,`align.${t}`,"center"),S=ph(e,`space.${t}`,void 0);if(typeof S=="number"&&s.paddingKey){var r=S;S={},S[s.paddingKey]=r}var T=ph(e,`expand.${t}`,!0);return{proportion:h,align:y,padding:S,expand:T}},No=function(e){return ga(e,"header",{proportion:0,paddingKey:"bottom"})},zo=function(e){return ga(e,"leftSide",{proportion:0,paddingKey:"right"})},Vo=function(e){return ga(e,"content",{proportion:1})},ko=function(e){return ga(e,"rightSide",{proportion:0,paddingKey:"left"})},Xo=function(e){return ga(e,"footer",{proportion:0,paddingKey:"top"})},Wi=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},Yi=function(e,t){var s=new St(e,{orientation:t});return e.add.existing(s),s},DG=function(e){var t=this.scene,s=e.header;s&&this.add(s,No(e));var h=Yi(t,0);this.add(h,Wi());var y=e.leftSide;y&&h.add(y,zo(e));var S=e.content;S&&h.add(S,Vo(e));var r=e.rightSide;r&&h.add(r,ko(e));var T=e.footer;T&&this.add(T,Xo(e))},IG=function(e){var t=this.scene,s=e.header;s&&this.add(s,No(e));var h=Yi(t,0);this.add(h,Wi());var y=e.leftSide;y&&h.add(y,zo(e));var S=Yi(t,1);h.add(S,Wi());var r=Yi(t,0);S.add(r,Wi());var T=e.content;T&&r.add(T,Vo(e));var i=e.rightSide;i&&r.add(i,ko(e));var d=e.footer;d&&S.add(d,Xo(e))},BG=function(e){var t=this.scene,s=e.header;s&&this.add(s,No(e));var h=Yi(t,0);this.add(h,Wi());var y=Yi(t,1);h.add(y,Wi());var S=Yi(t,0);y.add(S,Wi());var r=e.leftSide;r&&S.add(r,zo(e));var T=e.content;T&&S.add(T,Vo(e));var i=e.footer;i&&y.add(i,Xo(e));var d=e.rightSide;d&&h.add(d,ko(e))},GG=function(e){var t=this.scene,s=e.header;s&&this.add(s,No(e));var h=Yi(t,0);this.add(h,Wi());var y=e.leftSide;y&&h.add(y,zo(e));var S=Yi(t,1);h.add(S,Wi());var r=e.content;r&&S.add(r,Vo(e));var T=e.footer;T&&S.add(T,Xo(e));var i=e.rightSide;i&&h.add(i,ko(e))};const NG=Phaser.Utils.Objects.GetValue,rg=[DG,IG,BG,GG];var zG=function(e){e===void 0&&(e={});var t=e.background,s=e.header,h=e.leftSide,y=e.content,S=e.rightSide,r=e.footer;Hs(t),Hs(s),Hs(h),Hs(y),Hs(S),Hs(r),this.clear(!0),t&&this.addBackground(t);var T=NG(e,"layoutMode",0);typeof T=="string"&&(T=VG[T.toUpperCase()]);var i=rg[T]||rg[0];return i.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",s),this.addChildrenMap("leftSide",h),this.addChildrenMap("content",y),this.addChildrenMap("rightSide",S),this.addChildrenMap("footer",r),this};const VG={FFF:0,LFF:1,FFR:2,LFR:3};class Bf extends St{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var kG={build:zG};Object.assign(Bf.prototype,kG);it.register("holyGrail",function(e){var t=new Bf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.HolyGrail",Bf);const XG={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var s=this.getButtonsSizer(e);return s?s.getButton(t):void 0},setButtonEnable(e,t,s){return this.getButtonsSizer(e).setButtonEnable(t,s),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var s=this.getButtonsSizer(e);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return cs(this.getButton(e,t)),this},showLeftButton(e){return cs(this.getLeftButton(e)),this},showRightButton(e){return cs(this.getRightButton(e)),this},showTopButton(e){return cs(this.getTopButton(e)),this},showBottomButton(e){return cs(this.getBottomButton(e)),this},hideButton(e,t){return vs(this.getButton(e,t)),this},hideLeftButton(e){return vs(this.getLeftButton(e)),this},hideRightButton(e){return vs(this.getRightButton(e)),this},hideTopButton(e){return vs(this.getTopButton(e)),this},hideBottomButton(e){return vs(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,s){return this.getButtonsSizer(e).removeButton(t,s),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,s){return this.getButtonsSizer(e).forEachButtton(t,s),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}},At=Phaser.Utils.Objects.GetValue;class Gf extends di{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,s.columnProportions=[0,0,0],s.rowProportions=[0,0,0];var h=At(s,"expand.panel",!1);h&&(s.columnProportions[1]=1,s.rowProportions[1]=1),super(t,s),this.type="rexTabs",this.eventEmitter=At(s,"eventEmitter",this);var y=At(s,"background",void 0),S=At(s,"panel",void 0),r=At(s,"leftButtons",void 0),T=At(s,"leftButtonsBackground",void 0),i,d=At(s,"rightButtons",void 0),x=At(s,"rightButtonsBackground",void 0),f,o=At(s,"topButtons",void 0),a=At(s,"topButtonsBackground",void 0),n,u=At(s,"bottomButtons",void 0),c=At(s,"bottomButtonsBackground",void 0),l,v=At(s,"click",void 0);if(y&&this.addBackground(y),S&&this.add(S,{column:1,row:1,expand:h}),r){var p=At(s,"space.leftButtonsOffset",0),g=At(s,"space.leftButton",0),m=At(s,"expand.leftButtons",!1),C=At(s,"align.leftButtons","top");i=new he(t,{groupName:"left",background:T,buttons:r,orientation:"y",space:{item:g},expand:m,click:v,eventEmitter:this.eventEmitter}),this.add(i,{column:0,row:1,align:C,padding:{top:p},expand:m})}if(d){var P=At(s,"space.rightButtonsOffset",0),M=At(s,"space.rightButton",0),E=At(s,"expand.rightButtons",!1),w=At(s,"align.rightButtons","top");f=new he(t,{groupName:"right",background:x,buttons:d,orientation:"y",space:{item:M},expand:E,click:v,eventEmitter:this.eventEmitter}),this.add(f,{column:2,row:1,align:w,padding:{top:P},expand:E})}if(o){var R=At(s,"space.topButtonsOffset",0),A=At(s,"space.topButton",0),L=At(s,"expand.topButtons",!1),F=At(s,"align.topButtons","left");n=new he(t,{groupName:"top",background:a,buttons:o,orientation:"x",space:{item:A},expand:L,align:At(s,"align.topButtons",void 0),click:v,eventEmitter:this.eventEmitter}),this.add(n,{column:1,row:0,align:F,padding:{left:R},expand:L})}if(u){var O=At(s,"space.bottomButtonsOffset",0),b=At(s,"space.bottomButton",0),I=At(s,"expand.bottomButtons",!1),B=At(s,"align.bottomButtons","left");l=new he(t,{groupName:"bottom",background:c,buttons:u,orientation:"x",space:{item:b},expand:I,align:At(s,"align.bottomButtons",void 0),click:v,eventEmitter:this.eventEmitter}),this.add(l,{column:1,row:2,align:B,padding:{left:O},expand:I})}this.addChildrenMap("background",y),this.addChildrenMap("panel",S),this.addChildrenMap("leftButtons",r),this.addChildrenMap("rightButtons",d),this.addChildrenMap("topButtons",o),this.addChildrenMap("bottomButtons",u),this.addChildrenMap("leftButtonsSizer",i),this.addChildrenMap("rightButtonsSizer",f),this.addChildrenMap("topButtonsSizer",n),this.addChildrenMap("bottomButtonsSizer",l)}}Object.assign(Gf.prototype,XG);it.register("tabs",function(e){var t=new Gf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Tabs",Gf);it.register("slider",function(e){var t=new en(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Slider",en);class jx{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=qr[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var h=this._deltaHeight!==t;if(this._deltaHeight=t,h){s.resetTotalRowsHeight();var y=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(y,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(jx.prototype,to);const ng=Phaser.Utils.Objects.GetValue,WG=Phaser.Utils.Array.SpliceOne;class YG{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new wi,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=30);var h=t.cellWidth;return h===void 0&&(h=30),this.setDefaultCellHeight(s),this.setDefaultCellWidth(h),this.initCells(ng(t,"cellsCount",0)),this.setColumnCount(ng(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var h=0;h<t;h++)s[h]=null;return this}insertNewCells(t,s){var h=this.cells;if(t===h.length){var y=t+s;h.legth=y;for(var S=t;S<y;S++)h[S]=null}else{var r=[];r.length=s;for(var S=0;S<s;S++)r[S]=null;this.cells.splice(t,0,...r)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var h=t+s,y=t;y<h;y++)this.freeCell(y);return h===this.cells.length?this.cells.length=t:(s===1?WG(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var s=this.parent;if(s.expandCellSize){var h=s.scrollMode===0?s.width:s.height,y=h/t;this.setDefaultCellWidth(y)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var T=t/this.defaultCellHeight;switch(s){case 1:T=Math.ceil(T);break;default:T=Math.floor(T);break}return T}for(var h=this.rowCount,y=t,S,r,T=0;;)if(r=this.getRowHeight(T),y-=r,S=T>=0&&T<h,y>0&&S)T+=1;else{if(y===0)return s===2&&(T+=1),T;if(s===1){var i=T;T+=1,S=T>=0&&T<h,S||(T=i)}return T}}widthToColIndex(t,s){if(t===0)return 0;var h=t/this.defaultCellWidth;return s?h=Math.ceil(h):h=Math.floor(h),h}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var h,y=0,S=t;S<=s;S++)h=this.getRowHeight(S),y+=h;return y}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var h=0,y,S=0;S<s;S++)y=this.getCellHeight(this.colRowToCellIndex(S,t)),h<y&&(h=y);return h}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var h=this.getCell(t,!1),y=h?h.deltaHeight:0;s=this.defaultCellHeight+y}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var h=this.newCell(t);this.cells[t]=h}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new jx(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,h,y=t,S=s.length;y<S;y++)h=s[y],h&&(h.index=y);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var UG=function(e){var t=this.table,s=this.topTableOY,h=this.bottomTableOY,y=e>this.topTableOY,S=e<this.bottomTableOY;if(this.clampTableOXY){var r=t.rowCount,T=t.heightToRowIndex(this.instHeight,1);r<T?e=0:y?e=s:S&&(e=h)}return this._tableOY!==e&&(this._tableOY=e),y&&(this.execeedTopState||this.emit("execeedtop",this,e,s)),this.execeedTopState=y,S&&(this.execeedBottomState||this.emit("execeedbottom",this,e,h)),this.execeedBottomState=S,this},HG=function(e){var t=this.table,s=this.leftTableOX,h=this.rightTableOX,y=e>this.leftTableOX,S=e<this.rightTableOX;if(this.clampTableOXY){var r=t.colCount,T=t.widthToColIndex(this.instWidth,!0);r<T?e=0:y?e=s:S&&(e=h)}return this._tableOX!==e&&(this._tableOX=e),y&&(this.execeedLeftState||this.emit("execeedleft",this,e,s)),this.execeedLeftState=y,S&&(this.execeedRightState||this.emit("execeedright",this,e,h)),this.execeedRightState=S,this},Nf=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const $G=Phaser.Geom.Intersects.RectangleToRectangle,KG=Phaser.Geom.Rectangle.Overlaps;var ZG=function(e,t,s){if(!!t){s===void 0&&(s=e.getAllChildren());for(var h=e.getBounds(),y=Nf(t),S,r,T,i=0,d=s.length;i<d;i++)if(S=s[i],S!==y&&!!JG(S))if(S.getBounds)switch(r=S.getBounds(r),T=QG(h,r),T){case 4:jG(e,S);break;case 0:$G(h,r)||KG(h,r)?xu(e,S,t):qG(e,S);break;default:xu(e,S,t);break}else xu(e,S,t)}},JG=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){e=s;continue}else return!0}else return!1;else return e.visible}},QG=function(e,t){var s=t.top,h=t.bottom,y=t.left,S=t.right,r=0;return r+=e.contains(y,s)?1:0,r+=e.contains(y,h)?1:0,r+=e.contains(S,s)?1:0,r+=e.contains(S,h)?1:0,r},jG=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},xu=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(s),e.setChildMaskVisible(t,!0))},qG=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const yu=Phaser.Utils.Objects.GetValue,_G={update:0,everyTick:1},qx={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(yu(e,"updateMode",0)),this.enableChildrenMask(yu(e,"padding",0)),this.setMaskLayer(yu(e,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=_G[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=ui.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):ZG(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=Nf(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}};var t8=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,s=e===1&&t===1;s||this.setScale(1);var h=this.table;this.startRowIndex=Math.max(h.heightToRowIndex(-this.tableOY,2),0);for(var y=this.startRowIndex,S=Math.max(h.widthToColIndex(-this.tableOX),0),r=S,T=h.colRowToCellIndex(r,y),i=this.bottomBound,d=this.rightBound,x=h.cellsCount-1,f=h.colCount-1,o=this.getCellTLX(r),a=o,n=this.getCellTLY(y);n<i&&T<=x;){if(this.table.isValidCellIdx(T)){var u=h.getCell(T,!0);this.visibleCells.set(u),this.preVisibleCells.contains(u)||this.showCell(u);var c,l;if(this.scrollMode===0?(c=a,l=n):(c=n,l=a),u.cellContainerAlign==null)u.setXY(c,l);else{var v=u.getContainer();ta(v,c,l,u.width,u.height,u.cellContainerAlign),u.setXY(v.x,v.y)}}a<d&&r<f?(a+=h.getColWidth(r),r+=1):(a=o,n+=h.getRowHeight(y),r=S,y+=1),T=h.colRowToCellIndex(r,y)}s||this.setScale(e,t)}},_x=function(e){var t=null,s=e.getContainer();if(s?(t=s,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var s=e.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},e8=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return s},i8=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return s},s8=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},ty=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},r8=function(e){return e===void 0&&(e=!1),e&&(ag.call(this),this.hideCells()),ag.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},ag=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},n8=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},ey=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:e),h=this.tableOX-(this.scrollMode===0?e:t),y=this.table,S=y.heightToRowIndex(-s,0),r=y.widthToColIndex(-h),T=y.colRowToCellIndex(r,S);return T===null||!this.isCellVisible(T)?null:T},a8=function(e,t){var s=ey.call(this,e,t);if(s!==null)return this.getCellContainer(s)},h8=function(e,t){return this.visibleCells.each(e,t),this},o8=function(e,t){return this.visibleCells.iterate(e,t),this},l8=function(e,t){return this.table.cells.slice().forEach(e,t),this},u8=function(e,t){return this.table.cells.forEach(e,t),this},d8=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const f8=Phaser.Math.Clamp;var c8=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=f8(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},v8=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var s,h=e,y=e+t;h<y;h++)s=this.getCell(h,!1),s&&(this.visibleCells.contains(s)&&(ty.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(e,t),this},p8=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},g8=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},m8=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(_x.call(this,t),this)},iy={setTableOY:UG,setTableOX:HG,showCells:t8,showCell:_x,getCellTLX:e8,getCellTLY:i8,hideCells:s8,hideCell:ty,updateTable:r8,isCellVisible:n8,pointToCellIndex:ey,pointToCellContainer:a8,eachVisibleCell:h8,iterateVisibleCell:o8,eachCell:l8,iterateCell:u8,setCellsCount:d8,insertNewCells:c8,removeCells:v8,setColumnCount:p8,setGridSize:g8,updateVisibleCell:m8};Object.assign(iy,qx);const x8=Phaser.GameObjects.Group,hg=Phaser.Structs.Set,Si=Phaser.Utils.Objects.GetValue;class sy extends We{constructor(t,s,h,y,S,r){r===void 0&&(r={}),super(t,s,h,y,S),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new hg,this.preVisibleCells=new hg,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var T=Si(r,"reuseCellContainer",!1);T&&(this.cellContainersPool=new x8(t));var i=Si(r,"cellVisibleCallback",null);if(i!==null){var d=Si(r,"cellVisibleCallbackScope",void 0);this.on("cellvisible",i,d)}if(i=Si(r,"cellInvisibleCallback",null),i!==null){var d=Si(r,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",i,d)}Si(r,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Si(r,"mask",void 0)),this.setScrollMode(Si(r,"scrollMode",0)),this.setClampMode(Si(r,"clamplTableOXY",!0));var x,f,o,a=this.scrollMode===0;if(a?(x=r.cellWidth,f=r.cellHeight,o=r.columns):(x=r.cellHeight,f=r.cellWidth,o=Si(r,"rows",r.columns)),o||(o=1),this.expandCellSize=x===void 0,this.expandCellSize){var y=a?this.width:this.height;x=y/o}r.cellWidth=x,r.cellHeight=f,r.columns=o,this.table=new YG(this,r),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=y8[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,s){return this.setTableOY(s).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,s){return this.addTableOY(s).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var s=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-s).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var s=this.table.getCell(t,!1),h;return s&&(h=s.getContainer()),h}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,s){var h;return typeof t=="number"?h=this.table.getCell(t,!0):h=t,h.height=s,this}setCellWidth(t,s){var h;return typeof t=="number"?h=this.table.getCell(t,!0):h=t,h.width=s,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,s){return this.width===t&&this.height===s?this:(super.resize(t,s),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(sy.prototype,iy);const y8={v:0,vertical:0,h:1,horizontal:1};var C8=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},T8=function(e){e.on("cellvisible",function(t,r,h){var y=this.createCellContainerCallback,S=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var r;S?r=y.call(S,t,r,h):r=y(t,r,h),r&&(t.cellContainerAlign==null&&r.setOrigin&&r.setOrigin(0),r.isRexSizer&&r.layout()),t.item=void 0,t.items=void 0,t.setContainer(r)},this)},Oi=function(e,t,s,h,y,S,r){var T;if(y===void 0?T=h:T=s.pointToCellIndex(h,y),T!=null){var i=s.getCellContainer(T);i&&e.emit(t,i,T,S,r)}},S8=function(e,t){e.on("pointerdown",function(s,h,y,S){Oi(this.eventEmitter,"cell.down",e,s.worldX,s.worldY,s,S)},this).on("pointerup",function(s,h,y,S){Oi(this.eventEmitter,"cell.up",e,s.worldX,s.worldY,s,S)},this)},P8=function(e,t){e.on("pointermove",og,this).on("pointerover",og,this).on("pointerout",E8,this)},og=function(e,t,s,h){var y=this.childrenMap.child,S=y.pointToCellIndex(e.worldX,e.worldY);if(S!==y.input.lastOverCellIndex){var r=y.input.lastOverCellIndex;y.input.lastOverCellIndex=S,Oi(this.eventEmitter,"cell.out",y,r,void 0,e,h),Oi(this.eventEmitter,"cell.over",y,S,void 0,e,h)}},E8=function(e,t){var s=this.childrenMap.child,h=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,Oi(this.eventEmitter,"cell.out",s,h,void 0,e,t)};const M8=Phaser.Utils.Objects.GetValue;var w8=function(e,t){var s=M8(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,e._click=new Zi(e,s),e._click.on("click",function(h,y,S,r){Oi(this.eventEmitter,"cell.click",y,S.worldX,S.worldY,S,r)},this))};const R8=Phaser.Utils.Objects.GetValue;var A8=function(e,t){var s=R8(t,"tap",void 0);s!==!1&&(e._tap=new yo(e,s),e._tap.on("tap",function(h,y,S){var r=`cell.${h.tapsCount}tap`;Oi(this.eventEmitter,r,h.gameObject,h.worldX,h.worldY,S)},this))};const L8=Phaser.Utils.Objects.GetValue;var O8=function(e,t){var s=L8(t,"press",void 0);s!==!1&&(e._press=new Co(e,s),e._press.on("pressstart",function(h,y,S){Oi(this.eventEmitter,"cell.pressstart",e,h.worldX,h.worldY,S)},this).on("pressend",function(h,y,S){Oi(this.eventEmitter,"cell.pressend",e,h.worldX,h.worldY,S)},this))};const F8=Phaser.Utils.Objects.GetValue;var b8=function(e,t){var s=F8(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",e._swipe=new aa(e,s),e._swipe.on("swipe",function(h,y,S){var r=h.left?"left":h.right?"right":h.up?"up":"down";Oi(this.eventEmitter,`cell.swipe${r}`,e,h.worldX,h.worldY,S)},this))},D8=function(e,t){e.setInteractive(),S8.call(this,e,t),P8.call(this,e,t),w8.call(this,e,t),A8.call(this,e,t),O8.call(this,e,t),b8.call(this,e,t)},I8=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setCellsCount(this.items.length),t&&(s.updateTable(!0),this.resizeController()),this};const B8={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}},ni=Phaser.Utils.Objects.GetValue;class zf extends ca{constructor(t,s){s===void 0&&(s={});var h=Rf(s),y=ni(s,"table",void 0);y===void 0&&(y={}),y.scrollMode=h===2?0:h,y.clamplTableOXY=ni(s,"clamplChildOY",!1);var S=ni(y,"width",void 0),r=ni(y,"height",void 0),T=new sy(t,0,0,S,r,y);t.add.existing(T);var i,d;y.scrollMode===0?(i=S===void 0,d=r===void 0):(i=r===void 0,d=S===void 0),C8(T),T._minWidth=S===void 0?0:void 0,T._minHeight=r===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:T,expandWidth:i,expandHeight:d};var x=ni(s,"space",void 0);x&&(x.child=ni(x,"table",0)),super(t,s),this.addChildrenMap("table",T),this.addChildrenMap("tableLayer",T.maskLayer),this.eventEmitter=ni(s,"eventEmitter",this);var f=ni(s,"createCellContainerCallback",te),o=ni(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(f,o),T8.call(this,T),this.resizeControllerFlag=!1;var a=h===0?"cellheightchange":"cellwidthchange";T.on(a,function(){this.resizeControllerFlag=!0},this),ni(y,"interactive",!0)&&D8.call(this,T,y),this.setItems(ni(s,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var G8={setItems:I8};Object.assign(zf.prototype,B8,G8);it.register("gridTable",function(e){var t=new zf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.GridTable",zf);var Vf=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},N8=function(e,t){e.popUp(Vf(e.root.easeIn,e))},z8=function(e,t){e.scaleDown(Vf(e.root.easeOut,e))};const V8={setTransitInCallback(e){return e===void 0&&(e=N8),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=z8),this.transitOutCallback=e,this}};var k8=function(e,t,s,h,y){var S=Qr(e),r=S.time.delayedCall(t,function(){S.sys.events.once("postupdate",function(){s.call(h,y)})});return r};const X8={delayCall(e,t,s){return this.timer=k8(this,e,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var W8=function(e,t){var h=this.childrenMap.subMenu;if(h&&h.parentButton===e)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var h=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(h),this.childrenMap.subMenu=h,this.root.emit("expand",h,e,this),this},Y8=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},U8=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},ry={expandSubMenu:W8,collapse:Y8,collapseSubMenu:U8};Object.assign(ry,V8,X8);var H8=function(e,t,s,h){var y;return s&&(t.scene=e,h?y=s.call(h,t):y=s(t),t.scene=void 0),y},$8=function(e,t,s,h){var y,S=[],r;if(t&&s)for(var T=0,i=t.length;T<i;T++)y=t[T],y.scene=e,h?r=s.call(h,y,T,t):r=s(y,T,t),y.scene=void 0,S.push(r);return S},K8=function(e){e.on(e.root.expandEventName,function(t,s){if(!this._isPassedEvent){var h=this.root.childrenKey,y=this.items[s][h];y&&this.expandSubMenu(t,y)}},e).on("button.click",function(t,s,h,y){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,h,y),this.root._isPassedEvent=!1)},e).on("button.over",function(t,s,h,y){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,h,y),this.root._isPassedEvent=!1)},e).on("button.out",function(t,s,h,y){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,h,y),this.root._isPassedEvent=!1)},e)},lg=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=oa(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},Z8=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const Te=Phaser.Utils.Objects.GetValue;class kf extends he{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var h=s._rootMenu,y=s._parentMenu,S=s._parentButton,r=Te(s,"popup",!0),T=Te(s,"items",void 0),i=Te(s,"createBackgroundCallback",void 0),d=Te(s,"createBackgroundCallbackScope",void 0);s.background=H8(t,T,i,d);var x=Te(s,"createButtonCallback",void 0),f=Te(s,"createButtonCallbackScope",void 0);if(s.buttons=$8(t,T,x,f),super(t,s),this.type="rexMenu",this.items=T,this.root=h===void 0?this:h,this.isRoot=this.root===this,this.parentMenu=y,this.parentButton=S,this.timer=void 0,this.isRoot){this.isPopUpMode=r;var o=s.bounds;o===void 0&&(o=Jr(t)),this.bounds=o,this.subMenuSide=[this.y<o.centerY?ed:Fh,this.x<o.centerX?td:Oh];var a=Te(s,"subMenuSide",void 0);a!==void 0&&(typeof a=="string"&&(a=J8[a]),this.subMenuSide[this.orientation]=a),this.toggleOrientation=Te(s,"toggleOrientation",!1),this.expandEventName=Te(s,"expandEvent","button.click"),this.easeIn=lg(this,Te(s,"easeIn",0)),this.easeOut=lg(this,Te(s,"easeOut",0)),this.setTransitInCallback(Te(s,"transitIn")),this.setTransitOutCallback(Te(s,"transitOut")),this.createBackgroundCallback=i,this.createBackgroundCallbackScope=d,this.createButtonCallback=x,this.createButtonCallbackScope=f,this.childrenKey=Te(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Te(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var n=0,u=0;if(!this.root.easeIn.sameOrientation){var c=Vf(this.root.easeIn,this).orientation,l=y?y.orientation:this.orientation,a=this.root.subMenuSide[l];c===0&&a===Oh&&(n=1),c===1&&a===Fh&&(u=1)}if(r&&this.setOrigin(n,u).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var a=this.root.subMenuSide[y.orientation];switch(a){case Oh:this.alignTop(S.top).alignRight(S.left);break;case td:this.alignTop(S.top).alignLeft(S.right);break;case Fh:this.alignLeft(S.left).alignBottom(S.top);break;case ed:this.alignLeft(S.left).alignTop(S.bottom);break}}K8(this),r&&(this.pushIntoBounds(this.root.bounds),Z8.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Oh=2,td=0,Fh=3,ed=1,J8={up:Fh,down:ed,left:Oh,right:td};Object.assign(kf.prototype,ry);it.register("menu",function(e){var t=new kf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Menu",kf);var Q8={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=j8[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const j8={down:0,up:1};var q8=function(){var e=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,e),e.add.existing(t));var h=[],y=this.listCreateButtonCallback;if(y)for(var S=this.options,r=0,T=S.length;r<T;r++){var i=y.call(this,e,S[r],r,S);!i||(e.add.existing(i),h.push(i))}var d=this.listWidth;d===void 0&&(this.listAlignMode==="text"?d=this.getElement("text").width:d=this.width);var x=this.listHeight,f;return this.listWrapEnable?f=new Cs(e,{width:d,height:x,background:t,buttons:h,space:this.listSpace,draggable:this.listDraggable}):f=new he(e,{width:d,height:x,orientation:"y",background:t,buttons:h,space:this.listSpace,draggable:this.listDraggable}),e.add.existing(f),f},_8=function(e,t,s,h,y){h===void 0&&(h="Linear");var S={};switch(S.mode=0,s){case 0:case"x":S.end={x:0};break;case 1:case"y":S.end={y:0};break;default:S.end=0;break}return S.duration=t,S.ease=h,y===void 0?y=new Xn(e,S):y.resetFromJSON(S),y.restart(),y},t6=function(e,t,s,h,y){return Mi(e,t)?wt(e,t):s&&Mi(e,s)?wt(e,s):h&&Mi(e,h)?wt(e,h):y};const Lr=Phaser.Utils.Objects.GetValue;var e6=function(e,t){var s=Lr(t,"expandDirection",void 0);typeof s=="string"&&(s=i6[s]);var h=t6(t,"alignTarget","alignTargetX"),y=Lr(t,"alignTargetY",h),S=Lr(t,"alignOffsetX",0),r=Lr(t,"alignOffsetY",0),T=Lr(t,"alignSide",""),i=T.includes("right"),d=Lr(t,"bounds"),x=s===0,f=s===1,o=!x&&!f,a=i?1:0,n=x||o?0:1;e.setOrigin(a,n);var u,c;i?u=h.getTopRight().x:u=h.getTopLeft().x,c=y.getBottomLeft().y,e.setPosition(u+S,c+r);var l=d;l||(l=Jr(e.scene)),o&&e.getBottomLeft().y>l.bottom&&(c=y.getTopLeft().y,e.setOrigin(0,1).setPosition(u+S,c+r))};const i6={down:0,up:1},ug=Phaser.Utils.Objects.GetValue;class ny extends go{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(S,r){tf(S,r,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(S,r){_8(S,r,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),e6(t,s),t.isRexSizer&&t.layout();var h=ug(s,"touchOutsideClose",!1),y=ug(s,"anyTouchClose",!1);y&&(h=!1),y?this.once("open",this.anyTouchClose,this):h&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Js(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var s6=function(){if(this.listPanel)return this;var e=q8.call(this);e.on("button.over",function(h,y,S,r){this.currentOverIndex=y,this.listOnButtonOver&&this.listOnButtonOver.call(this,h,y,S,r),this.emit("button.over",this,e,h,y,S,r)},this).on("button.out",function(h,y,S,r){this.currentOverIndex===y&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,h,y,S,r),this.emit("button.out",this,e,h,y,S,r)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new ny(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){e.on("button.click",function(h,y,S,r){this.listOnButtonClick&&this.listOnButtonClick.call(this,h,y,S,r),this.emit("button.click",this,e,h,y,S,r)},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return this.listPanel=e,this.dropDownBehavior=s,this.pin(e),this},r6=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},n6=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},a6=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,s=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,s,e),this.emit("button.click",this,t,s,e),this},h6=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this};const o6={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e+1)%s}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e-1+s)%s}return this.emitButtonOver(t),this}};var ay={openListPanel:s6,closeListPanel:r6,toggleListPanel:n6,emitButtonClick:a6,emitButtonOver:h6};Object.assign(ay,Q8,o6);const Nt=Phaser.Utils.Objects.GetValue;class ma extends ji{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(Nt(s,"options"));var h=Nt(s,"list");this.setWrapEnable(Nt(h,"wrap",!1)),this.setCreateButtonCallback(Nt(h,"createButtonCallback")),this.setCreateListBackgroundCallback(Nt(h,"createBackgroundCallback")),this.setButtonClickCallback(Nt(h,"onButtonClick")),this.setButtonOverCallback(Nt(h,"onButtonOver")),this.setButtonOutCallback(Nt(h,"onButtonOut")),this.setListExpandDirection(Nt(h,"expandDirection")),this.setListEaseInDuration(Nt(h,"easeIn",500)),this.setListEaseOutDuration(Nt(h,"easeOut",100)),this.setListTransitInCallback(Nt(h,"transitIn")),this.settListTransitOutCallback(Nt(h,"transitOut")),this.setListSize(Nt(h,"width"),Nt(h,"height")),this.setListAlignmentMode(Nt(h,"alignParent","text")),this.setListAlignmentSide(Nt(h,"alignSide","")),this.setListBounds(Nt(h,"bounds")),this.setListSpace(Nt(h,"space")),this.setListDraggable(Nt(h,"draggable",!1)),this.setValueChangeCallback(Nt(s,"setValueCallback"),Nt(s,"setValueCallbackScope")),this.setValue(Nt(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var h=this.valueChangeCallback,y=this.valueChangeCallbackScope;h&&(y?h.call(y,this,t,s):h(this,t,s)),this.emit("valuechange",this,t,s)}}}Object.assign(ma.prototype,ay);it.register("dropDownList",function(e){var t=new ma(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.DropDownList",ma);var hy=function(e,t,s){t=t?fe(t):{},s===void 0&&(s={});var h=t.label||t.button,y=t.button||t.label;delete t.label,delete t.button;var S=s.label||s.button||s,r=s.button||s.label||s,T=Lo(e,h,S);return T.list=t.list||{},T.list.createButtonCallback=function(i,d){var x=Fe(i,y,r).resetDisplayContent(d);return d.hasOwnProperty("value")&&(x.value=d.value),x},T.list.onButtonOver=function(i,d,x,f){i.setHoverState&&i.setHoverState(!0)},T.list.onButtonOut=function(i,d,x,f){i.setHoverState&&i.setHoverState(!1)},T};class oy extends ma{constructor(t,s,h){s=hy(t,s,h),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,h=t.length;s<h;s++){var y=t[s];typeof y=="string"&&(t[s]={text:y,value:y})}return super.setOptions(t),this}}it.register("simpleDropDownList",function(e,t){var s=new oy(this.scene,e,t);return this.scene.add.existing(s),s});et(window,"RexPlugins.UI.SimpleDropDownList",oy);var l6=function(e){var t=Ps(e),s,h,y;switch(t){case ge:case me:s=e.height-e.padding.top-e.padding.bottom,h=e.lineSpacing,y=e.style.metrics.fontSize+e.style.strokeThickness;break;case ke:s=e.height,h=0;var S=e.fontSize/e.fontData.size;y=e.fontData.lineHeight*S;break}return(s-h)/(y+h)},u6=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var s=this.pageLinesCount;s>0?t=e+s:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var h;switch(this.textObjectType){case ge:case ke:h=this.lines.slice(e,t).join(`
`);break;case me:var y=this.lines.getLineStartIndex(e),S=this.lines.getLineEndIndex(t-1);h=this.lines.getSliceTagText(y,S,!0);var r=(h.match(/\n/g)||[]).length;r>t-e-1&&(h=h.substring(0,h.length-1));break}return h},Cu=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e};const d6={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(Cu(s));var s=this.sections.join(`
`);this.lines=Lf(this.parent,s,this.lines);var h=this.totalLinesCount-t,y=this.pageLinesCount,S;y>0?S=Math.ceil(h/this.pageLinesCount):S=1;for(var r=0;r<S;r++)this.pageStartIndexes.push(t+r*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var s=Cu(e).split(this.pageBreak),h=0,y=s.length;h<y;h++)this.appendPage(s[h]);return this},appendText(e){var t=this.content+Cu(e);return this.setText(t,!1),this}},dg=Phaser.Math.Clamp,f6={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=dg(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=dg(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},c6={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){Of(this.parent,e)}};var ly={getLines:u6};Object.assign(ly,d6,f6,c6);const Or=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class Wo extends Gt{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=Ps(this.parent),this.pageStartIndexes=[],this.lines=Lf(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){this.setMaxLines(Or(t,"maxLines",void 0)),this.setPageBreak(Or(t,"pageBreak",`\f
`)),this.setText(Or(t,"text","")),this.startLineIndex=Or(t,"start",-1),this.endLineIndex=Or(t,"end",void 0);var s=Or(t,"page");return s===void 0?this.resetIndex():this.setPageIndex(s),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case ge:this.lines.length=0;break;case me:this.lines.destroy();break;case ke:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case ge:case me:var s=this.parent.style.maxLines;s>0?t=s:t=Math.floor(l6(this.parent));break;case ke:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Wo.prototype,ly);var v6=function(e,t,s,h){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),s===void 0&&(s=0),this.typingIndex=s+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(h)),this},uy=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},p6=function(e,t,s,h,y){var S;if(t>0){h===void 0&&(h=0);var r=uy(this.parent,e);S=g6(r,t)+h}return this.start(e,s,S,y)},g6=function(e,t){for(var s=void 0,h=0;h<t&&(s=e.indexOf(`
`,s+1),s!==-1);h++);return s},Rn=function(e,t,s,h){var y;return e.getSubString?y=e.getSubString(t,s,h):y=t.slice(s,h),y},dy=function(e,t,s,h){var y=this.parent,S;if(h===0){var r=0,T=t;this.insertIndex=T,S=Rn(y,e,r,T)}else if(h===1){var T=s,r=T-t;this.insertIndex=0,S=Rn(y,e,r,T)}else if(h===2){var i=s/2,r=Math.floor(i-t/2),T=r+t;this.insertIndex=t%2?t:0,S=Rn(y,e,r,T)}else if(h===3){var d=Math.floor(t/2),x;if(d>0){var T=s,r=T-d;x=Rn(y,e,r,T)}else x="";var f=t-d,o;if(f>0){var r=0,T=r+f;this.insertIndex=T,o=Rn(y,e,r,T)}else o="",this.insertIndex=0;S=o+x}return this.insertChar=S.charAt(this.insertIndex-1),S},m6=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)dy.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},x6=function(){var e=this.getTimer();return e&&(e.paused=!0),this},y6=function(){var e=this.getTimer();return e&&(e.paused=!1),this},C6=function(e){var t=this.text.concat(TransferText(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this},T6={start:v6,startFromLine:p6,stop:m6,pause:x6,resumeTyping:y6,appendText:C6},S6=function(e,t){var s=Ps(e);switch(s){case ge:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case me:t=e.getText(t,void 0,void 0,!0);break;case ke:t=e.setText(t).getTextBounds().wrappedText;break}return t};const An=Phaser.Utils.Objects.GetFastValue,Tu=Phaser.Utils.Objects.GetValue;class Yo extends Gt{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(Tu(t,"wrap",!1)),this.setTypeMode(Tu(t,"typeMode",0)),this.setTypingSpeed(Tu(t,"speed",333)),this.setTextCallback=An(t,"setTextCallback",null),this.setTextCallbackScope=An(t,"setTextCallbackScope",null),this.setTypingContent(An(t,"text","")),this.typingIndex=An(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var s=An(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIndex,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=E6[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=P6(t);this.textWrapEnable&&(s=S6(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=uy(this.parent,this.text).length,this}onTyping(){var t=dy.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?Of(this.parent,t):this.parent.setText(t)}}var P6=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e};const E6={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(Yo.prototype,T6);const Ln=Phaser.Utils.Objects.GetValue;var M6=function(e,t){t===void 0&&(t="rexTextBox");class s extends e{constructor(y,S){super(y,S),this.type=t,this.isRunning=!1;var r=this.childrenMap.text,T=Ln(S,"expandTextWidth",!1),i=Ln(S,"expandTextHeight",!1);if(T||i){var d=Ps(r);switch(d){case ge:case me:if(r.resize=function(f,o){var a=T?f:0,n=i?o:0;r.setFixedSize(a,n),a>0&&r.setWordWrapWidth(a)},d===me){var x=r.style;x.wrapMode===0&&(x.wrapMode=1)}break}T&&(r._minWidth=0),i&&(r._minHeight=0)}this.setTypingMode(Ln(S,"typingMode","page")),this.page=new Wo(r,Ln(S,"page",void 0)),this.typing=new Yo(r,Ln(S,"typing",S.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=r.width,this.textHeightSave=r.height}setTypingMode(y){return typeof y=="string"&&(y=w6[y]),this.typingMode=y,this}start(y,S){return S!==void 0&&this.setTypingSpeed(S),this.isRunning=!0,this.page.setText(y),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(y,S){if(S!==void 0&&this.setTypingSpeed(S),this.isRunning)this.page.appendText(y),this.typing.appendText(y);else{if(this.isRunning=!0,this.page.appendText(y),this.emit("start"),this.typingMode===0){var r=this.page.getPage(),T=this.typing.textLength;this.typing.start(r,void 0,T)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{var y=this.page.getNextPage();this.typing.start(y)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var y=this.page.getPageOfNextLine(),S;this.isFirstLine?S=0:S=this.page.pageLinesCount-1,this.typing.startFromLine(y,S)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(y){return this.isRunning?(this.typing.stop(y),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(y){return this.typing.setTypingSpeed(y),this}setTypingSpeed(y){return this.typing.setTypingSpeed(y),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var y=this.childrenMap.text;(this.textWidthSave!==y.width||this.textHeightSave!==y.height)&&(this.textWidthSave=y.width,this.textHeightSave=y.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(y){this.emit("typechar",y)}onTypingComplete(){if(this.typingMode===0){var y=this.isLastPage;this.isRunning=!y,this.emit("pageend"),y&&this.emit("complete")}else this.typeNextLine()}}return s};const w6={page:0,line:1};class Xf extends M6(Oo){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("layoutMode")||(s.layoutMode=1),super(t,s)}}it.register("textBox",function(e){var t=new Xf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.TextBox",Xf);class fy extends Xf{constructor(t,s,h){s=Yx(t,s,h),super(t,s)}}it.register("simpleTextBox",function(e){var t=new fy(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.SimpleTextBox",fy);const Ve=Phaser.Utils.Objects.GetValue;class cy extends St{constructor(t,s){super(t,s),this.type="rexNumberBar";var h=Ve(s,"background",void 0),y=Ve(s,"icon",void 0),S=Ve(s,"iconMask",void 0),r=Ve(s,"slider",void 0),T=Ve(s,"text",void 0),i=Ve(s,"space.icon",0),d=Ve(s,"space.slider",0);if(h&&this.addBackground(h),y){var x;this.orientation===0?(r||T)&&(x={right:i}):(r||T)&&(x={bottom:i}),this.add(y,{proportion:0,align:"center",padding:x}),S&&(S=ui.call(this,y,y,1))}var f;if(r){r.orientation=this.orientation,r.eventEmitter=this,r.value=null,r.hasOwnProperty("input")||(r.input=-1),f=new en(t,r),t.add.existing(f);var x;this.orientation===0?T&&(x={right:d}):T&&(x={bottom:d});var o;if(this.orientation===0){var a=Ve(r,"width",void 0);o=a===void 0?1:0}else{var n=Ve(r,"height",void 0);o=n===void 0?1:0}this.add(f,{proportion:o,align:"center",padding:x})}T&&this.add(T),this.addChildrenMap("background",h),this.addChildrenMap("icon",y),this.addChildrenMap("iconMask",S),this.addChildrenMap("slider",f),this.addChildrenMap("text",T);var u=Ve(s,"valuechangeCallback",null);if(u!==null){var c=Ve(s,"valuechangeCallbackScope",void 0);this.on("valuechange",u,c)}this.setEnable(Ve(s,"enable",void 0)),this.setValue(Ve(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,h),this}addValue(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,h),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,h){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,h),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}it.register("numberBar",function(e){var t=new cy(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.NumberBar",cy);it.register("scrollBar",function(e){var t=new Af(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ScrollBar",Af);const Su=Phaser.Utils.Objects.GetValue,fg={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class vy extends qe{constructor(t,s){super(t,s),this.type="rexBadge";var h=Su(s,"background",void 0);h&&this.addBackground(h),this.addChildrenMap("background",h);var y=Su(s,"main",void 0);y&&this.add(y,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",y);for(var S in fg){var r=Su(s,S,void 0);r&&(this.add(r,{key:S,align:fg[S],expand:!1}),this.addChildrenMap(S,r))}}}it.register("badgeLabel",function(e){var t=new vy(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.BadgeLabel",vy);const R6=qe.prototype.add;var cg=function(e,t,s,h,y,S,r,T,i){return e.setVisible(!1),R6.call(this,e,t,s,h,y,S,r,T,i),this};const A6={add:cg,addPage:cg};var L6=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const vg=We.prototype.setChildVisible;var O6=function(e,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(vg.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var h=this.currentPage;return h&&(vg.call(this,h,!0),this.emit("pagevisible",h,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&h.setAlpha(0).fadeIn(t,1)),this},F6=function(e){return this.sizerChildren.hasOwnProperty(e)},py={getPage:L6,swapPage:O6,hasPage:F6};Object.assign(py,A6);const pg=Phaser.Utils.Objects.GetValue;class Uo extends qe{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(pg(s,"swapMode",0)),this.setFadeInDuration(pg(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=b6[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Uo.prototype,py);const b6={invisible:0,destroy:1};it.register("pages",function(e){var t=new Uo(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Pages",Uo);const D6=Phaser.GameObjects.Mesh;class gy extends D6{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const my=Phaser.Math.Vector3,I6=Phaser.Math.Matrix4;var gg=new my,mg=new my,xg=new I6,B6=function(e,t,s,h,y,S,r){t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=0),r===void 0&&(r=0),gg.set(t,s,h),mg.set(y,S,r),xg.fromRotationXYTranslation(mg,gg,!0);for(var T=0,i=e.vertices.length;T<i;T++)e.vertices[T].transformMat4(xg)};const G6=Phaser.Utils.Objects.IsPlainObject,ks=Phaser.Utils.Objects.GetValue,N6=Phaser.Geom.Mesh.GenerateGridVerts,Pu=Phaser.Math.RadToDeg,bh=Phaser.Math.DegToRad,xy=45,z6=1+1/Math.sin(bh(xy));class yy extends gy{constructor(t,s,h,y,S,r){G6(s)&&(r=s,s=ks(r,"x",0),h=ks(r,"y",0),y=ks(r,"key",null),S=ks(r,"frame",null)),super(t,s,h,y,S),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(z6),this.hideCCW=ks(r,"hideCCW",!0);var T=ks(r,"gridWidth",0),i=ks(r,"gridHeight",T);this.resetVerts(T,i),this.prevFrame=this.frame}preUpdate(t,s){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,s)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,xy),this}resetVerts(S,r){if(S!==void 0&&(this.gridWidth=S),r!==void 0&&(this.gridHeight=r),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var h=this.frame.cutWidth,y=this.frame.cutHeight,S,r;this.gridWidth===0?S=Math.max(h/8,32):r=this.gridWidth,this.gridHeight===0?r=Math.max(y/8,32):r=this.gridHeight,N6({mesh:this,width:h/this.height,height:y/this.height,widthSegments:Math.ceil(h/S),heightSegments:Math.ceil(y/r)});var T=this.transformInfo;return T&&this.transformVerts(T.x,T.y,T.z,T.rotateX,T.rotateY,T.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Pu(this.rotationX)}set angleX(t){this.rotationX=bh(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Pu(this.rotationY)}set angleY(t){this.rotationY=bh(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Pu(this.rotationZ)}set angleZ(t){this.rotationZ=bh(t)}transformVerts(t,s,h,y,S,r){return t===void 0&&(t=0),s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=0),S===void 0&&(S=0),r===void 0&&(r=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=s,this.transformInfo.rotateX=y,this.transformInfo.rotateY=S,this.transformInfo.rotateZ=r,B6(this,t,s,h,y,S,r),this}}const V6=Phaser.Textures.DynamicTexture;var Cy=function(e,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var h=new V6(e.sys.textures,null,t,s);return h};const k6=Phaser.Utils.Objects.IsPlainObject,gh=Phaser.Utils.Objects.GetValue;class Ty extends yy{constructor(t,s,h,y,S,r){k6(s)&&(r=s,s=gh(r,"x",0),h=gh(r,"y",0),y=gh(r,"width",32),S=gh(r,"height",32));var T=Cy(t,y,S);super(t,s,h,T,null,r),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,Id(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var oi=function(e,t,s,h){if(Array.isArray(e))for(var y=!1,S=0,r=e.length;S<r;S++){var T=e[S];if(!(h&&!T)&&(s?y=t.call(s,T,S,e):y=t(T,S,e),y))return}else{var y=!1;for(var i in e){var T=e[i];if(!(h&&!T)&&(s?y=t.call(s,T,i,e):y=t(T,i,e),y))return}}};const Fr=Phaser.Math.RadToDeg,br=Phaser.Math.DegToRad;class X6 extends We{constructor(t,s,h,y,S,r){super(t,s,h,y,S),this.faces=r,oi(r,function(T){T.setPosition(s,h),this.add(T)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Fr(this.rotationX)}set angleX(t){this.rotationX=br(t)}get rotateX(){return Fr(this.rotationX)}set rotateX(t){this.rotationX=br(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Fr(this.rotationY)}set angleY(t){this.rotationY=br(t)}get rotateY(){return Fr(this.rotationY)}set rotateY(t){this.rotationY=br(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Fr(this.rotationZ)}set angleZ(t){this.rotationZ=br(t)}get rotateZ(){return Fr(this.rotationZ)}set rotateZ(t){this.rotationZ=br(t)}setDebug(t,s){return oi(this.faces,function(h){h.setDebug(t,s)},null,!0),this}panX(t){return oi(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return oi(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return oi(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,h,y,S,r){return oi(this.faces,function(T){T.transformVerts(t,s,h,y,S,r)},null,!0),this}forEachFace(t,s,h){return oi(this.faces,t,s,h),this}}const W6=Phaser.Utils.Objects.IsPlainObject,Y6={key:"__WHITE"},U6={image:yy,rendertexture:Ty};var yg=function(e,t){t===void 0&&(t=Y6);var s;return W6(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new U6[t.type](e,t),e.add.existing(s)):s=t,s},H6=function(e,t,s){var h;if(s===void 0){h=[];for(var y,S,r=0,T=t.length;r<T;r++)S=t[r],S?y=yg(e,S):y=null,h.push(y)}else{h={};for(var y,i,r=0,T=s.length;r<T;r++)i=s[r],t.hasOwnProperty(i)?y=yg(e,t[i]):y=null,h[i]=y}return h};const $6=Phaser.Math.DegToRad,Cg=$6(180);var K6=function(e,t){var s=t.back;s&&(e.orientation===0?s.transformVerts(0,0,0,0,Cg,0):s.transformVerts(0,0,0,Cg,0,0))};const Eu=Phaser.Utils.Objects.GetValue,Z6=Phaser.Math.Linear;class J6 extends ir{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Eu(t,"ease","Cubic")),this.setFrontToBackDirection(Eu(t,"frontToBack",0)),this.setBackToFrontDirection(Eu(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Tg[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Tg[t]),this.endAngleBF=t===0?-180:180,this}start(t,s){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var h=s+1,y=this.parent;return y.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*h):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*h),super.start(),this}flip(t,s){return this.isRunning?this:(t===void 0&&(t=this.duration),s===void 0&&(s=0),this.start(t,s),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+s+1)%2,this)}flipRight(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,s),this}flipLeft(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,s),this}updateTarget(t,s){var h=this.easeFn(s.t),y=Z6(this.startAngle,this.endAngle,h);t.orientation===0?t.angleY=y:t.angleX=y}}const Tg={right:0,"left-to-right":0,left:1,"right-to-left":1},Q6=Phaser.Utils.Objects.IsPlainObject,Xs=Phaser.Utils.Objects.GetValue,j6=["back","front"];class q6 extends X6{constructor(t,s,h,y){Q6(s)&&(y=s,s=Xs(y,"x",0),h=Xs(y,"y",0));var S=H6(t,y,j6),r=S.back,T=S.front,i=Xs(y,"width"),d=Xs(y,"height");if(i===void 0||d===void 0){if(i===void 0){var x=T?T.width:0,f=r?r.width:0;i=Math.max(x,f)}if(d===void 0){var o=T?T.height:0,a=r?r.height:0;d=Math.max(o,a)}}super(t,s,h,i,d,S),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,oi(S,function(u,c){this[`${c}Face`]=u},this);var n=Xs(y,"flip",void 0);n!==!1&&(this.flip=new J6(this,n)),this.setOrientation(Xs(y,"orientation",0)),K6(this,S),this.setFace(Xs(y,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,oi(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,oi(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,oi(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=_6[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=t7[t]),this.currentFaceIndex=t;var s=t===1,h=s?180:0;this.orientation===0?this.angleY=h:this.angleX=h}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const _6={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},t7={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const e7=Phaser.Utils.Objects.GetValue;var i7=function(e,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=e7(s,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},Sy=function(e,t){if(!e)return!1;for(var s=t.visibleSibling,h=0,y=s.length;h<y;h++)e.setChildVisible(s[h],!0);return s.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},s7=function(e,t){if(!e)return!1;Sy(e,t);var s=t.useParentBounds;Id({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?e.displayWidth:void 0,height:s?e.displayHeighth:void 0,originX:s?e.originX:void 0,originY:s?e.originY:void 0}),e.setChildVisible(t,!0);for(var h=t.visibleSibling,y=e.children,S=0,r=y.length;S<r;S++){var T=y[S];T.visible&&T!==t&&(e.setChildVisible(T,!1),h.push(T))}return t.isRunning=!0,!0},Py=function(e){return class extends e{constructor(s,h){var y=s.scene;super(y,0,0,1,1,h),y.add.existing(this),i7(s,this,h)}destroy(s){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(s))}enter(){var s=s7(this.rexContainer.parent,this);return s&&this.syncSize(),this}exit(){return Sy(this.rexContainer.parent,this),this}}};class Ey extends Py(Ty){get perspectiveState(){return this.isRunning}}const r7=Phaser.Utils.Objects.GetValue;var n7=function(e){var t=this.scene;this.setSnapshotPadding(r7(e,"snapshotPadding",0)),e=Ri(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var s=new q6(t,e);t.add.existing(s);var h=s.flip;if(h){var y=this;h.on("start",function(){y.enterPerspectiveMode()}).on("complete",function(){y.exitPerspectiveMode()})}return s};const a7=["front","back"],h7={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=a7[e]);var t=this.perspectiveCard.faces[e],s=this.childrenMap[e];t.rt.clear();var h=s.visible;s.visible=!0;var y=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(y,{padding:this.snapshotPadding}),s.visible=h,this}},Sg=Phaser.Utils.Objects.GetValue;class Wf extends qe{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var h=s.back,y=Sg(s,"expand.back",!0);this.add(h,{key:"back",expand:y});var S=s.front,r=Sg(s,"expand.front",!0);this.add(S,{key:"front",expand:r}),this.perspectiveCard=n7.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,h=this.childrenMap.front,y=this.childrenMap.back;this.setChildVisible(h,s),this.setChildVisible(y,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,h,y,S,r){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,h,y,S,r),this}forEachFace(t,s,h){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,h),this}}Object.assign(Wf.prototype,h7);it.register("perspectiveCard",function(e){var t=new Wf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.PerspectiveCard",Wf);var o7=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},l7=function(e){for(var t=this.getElement("tabs.buttons"),s=0,h=t.length;s<h;s++)if(t[s].name===e)return s};const u7=Phaser.Utils.Objects.IsPlainObject,Mu=Phaser.Utils.Objects.GetValue,d7=Phaser.Utils.String.UUID;var f7=function(e,t,s){if(u7(e)){var h=e;e=Mu(h,"key"),t=Mu(h,"tab"),s=Mu(h,"page")}return e||(e=d7()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:e}),this},c7=function(e,t){var s;if(typeof e=="number"?s=e:s=this.getPageIndex(e),s!=null){var h;t!==void 0&&(h=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),h!==void 0&&(this.childrenMap.pages.fadeInDuration=h)}return this},v7=function(e){return this.swapPage(0,e),this},p7=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this};const g7={swapPage:c7,swapFirstPage:v7,swapLastPage:p7},m7={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var s=this.childrenMap.tabs,h=s.getByName(e),y=this.childrenMap.pages,S=y.getElement(e);return!h||!S?this:(y.removeChildrenMap(e),s.removeButton(h,t),y.remove(S,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),s=t.length-1;s>=0;s--)this.removePage(t[s].name,e);return this}};var x7=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},y7=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},C7={top:1,left:3,right:5,bottom:7},Pg={top:"bottom",left:"right",right:"left",bottom:"top"},T7=function(e){var t=C7[e];if(t===void 0)return this;var s=this.childrenMap.tabs,h=this.sizerChildren.indexOf(s);if(h===t)return this;this.sizerChildren[h]=null,this.sizerChildren[t]=s;var y=this.getSizerConfig(s).padding,S=Pg[this.tabsPosition],r=Pg[e];return y[r]=y[S],y[S]=0,this.tabsPosition=e,this},My={getPageKey:o7,getPageIndex:l7,addPage:f7,getPage:x7,getTab:y7,setTabPosition:T7};Object.assign(My,g7,m7);const ai=Phaser.Utils.Objects.GetValue,Eg=di.prototype.add;class Ho extends di{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,s.columnProportions=[0,0,0],s.rowProportions=[0,0,0];var h=ai(s,"expand.pages",!0);h&&(s.columnProportions[1]=1,s.rowProportions[1]=1),super(t,s),this.type="rexTabPages";var y=ai(s,"background",void 0);y&&this.addBackground(y);var S=ai(s,"pages"),r=new Uo(t,S);t.add.existing(r);var T=ai(s,"tabsPosition",void 0);T===void 0&&(T=ai(s,"tabPosition","top"));var i=ai(s,"wrapTabs",!1),d=i?Cs:he,x=ai(s,"tabs",void 0);x===void 0&&(x={}),x.orientation=T==="top"||T==="bottom"?"x":"y",x.buttonsType="radio",!i&&!x.hasOwnProperty("expand")&&(x.expand=ai(s,"expand.tabs",!1));var f=new d(t,x);t.add.existing(f),Eg.call(this,r,{column:1,row:1,expand:h});var o,a,n=ai(s,"space.item",0);switch(T){case"top":o=1,a=0,n={bottom:n};break;case"bottom":o=1,a=2,n={top:n};break;case"left":o=0,a=1,n={right:n};break;case"right":o=2,a=1,n={left:n};break}Eg.call(this,f,{column:o,row:a,padding:n,expand:i?!0:ai(s,"expand.tabs",!1),align:ai(s,"align.tabs","left")}),this.addChildrenMap("background",y),this.addChildrenMap("tabs",f),this.addChildrenMap("pages",r),this.tabsPosition=T,f.on("button.click",function(u){var c=u.name;r.hasPage(c)&&r.swapPage(c)}),f.on("button.statechange",function(u,c,l,v){var p=l?"tab.focus":"tab.blur";this.emit(p,u,u.name)},this),r.on("pagevisible",function(u,c,l){this.emit("page.focus",u,c)}),r.on("pageinvisible",function(u,c,l){this.emit("page.blur",u,c)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(Ho.prototype,My);it.register("tabPages",function(e){var t=new Ho(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.TabPages",Ho);class S7 extends go{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const P7={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;if(this.show(s),this.reLayoutEnable){var h=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();h.layout()}return t.emit("folder.expand",e,this),s.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",e,this),s.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(s,1,1).hide(s),this.reLayoutEnable){var h=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();h.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}};var E7=function(e,t){ki.popUp.call(e,t,this.expandDirection)},M7=function(e,t){ki.scaleDown.call(e,t,this.expandDirection)};const w7={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=E7.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=M7.bind(this)),this.childTransition.setTransitOutCallback(e),this}},Kt=Phaser.Utils.Objects.GetValue;class xa extends St{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var h=s.background,y=s.title,S=s.child;h&&this.addBackground(h);var r=Kt(s,"space"),T=this.orientation===1?"left":"top",o=Kt(s,"align.title",T),a=Kt(s,"expand.title",!0);this.add(y,{proportion:0,align:o,expand:a,padding:{left:Kt(r,"titleLeft",0),right:Kt(r,"titleRight",0),top:Kt(r,"titleTop",0),bottom:Kt(r,"titleBottom",0)}});var i=Kt(s,"toggleByTarget",void 0),d=Kt(s,"toggleClickConfig");i===void 0&&(i=y),i&&of.onClick.call(i,function(){this.toggle()},this,d),this.childTransition=new S7(S);var x=Kt(s,"customChildOrigin",!1);if(!x){var f=this.rtl?1:0;S.setOrigin(f)}var o=Kt(s,"align.child","left"),a=Kt(s,"expand.child",!0),n=a?1:0;this.add(S,{proportion:n,align:o,expand:a,padding:{left:Kt(r,"childLeft",0),right:Kt(r,"childRight",0),top:Kt(r,"childTop",0),bottom:Kt(r,"childBottom",0)}}),this.addChildrenMap("title",y),this.addChildrenMap("child",S),this.addChildrenMap("background",h);var u=s.transition;this.setTransitionDuration(Kt(u,"duration",200)),this.setExpandCallback(Kt(u,"expandCallback",void 0)),this.setCollapseCallback(Kt(u,"collapseCallback",void 0)),this.reLayoutTarget=Kt(s,"reLayoutTarget",void 0);var c=s.onExpandStart;c&&this.on("expand.start",c);var l=s.onExpandComplete;l&&this.on("expand.complete",l);var v=s.onCollapseStart;v&&this.on("collapse.start",v);var p=s.onCollapseComplete;p&&this.on("collapse.complete",p);var g=Kt(s,"expanded",void 0);g!==void 0&&this.setExpandedState(g)}}Object.assign(xa.prototype,P7,w7);it.register("folder",function(e){var t=new xa(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Folder",xa);var wy=function(e){return class extends e{setText(s){return this.text=s,this}get text(){var s=this.childrenMap.nodeBody;return s.text}set text(s){var h=this.childrenMap.nodeBody;h.setText&&h.setText(s)}setTexture(s,h){var y=this.childrenMap.nodeBody;return y.setTexture&&y.setTexture(s,h),this}get texture(){var s=this.childrenMap.nodeBody;if(!!s)return s.texture}get frame(){var s=this.childrenMap.nodeBody;if(!!s)return s.frame}}};const R7={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}},A7=Phaser.Utils.Objects.GetValue;var Yn=function(e,t,s,h,y){var S=A7(t,s),r;return De(S)?(r=S,delete t[s]):Hi(S)?(r=S(e,h),e.add.existing(r)):y&&(r=y(e,S,h),e.add.existing(r)),r};const mh=Phaser.Utils.Objects.GetValue;class Ry extends wy(St){constructor(t,s,h){var y=s.space;super(t,{orientation:"x",space:{left:mh(y,"nodeLeft",0),right:mh(y,"nodeRight",0),top:mh(y,"nodeTop",0),bottom:mh(y,"nodeBottom",0)}}),this.type="rexTreeNode";var S=Yn(t,s,"nodeBackground",h),r=Yn(t,s,"nodeBody",h,L7);S&&this.addBackground(S),this.add(r,{proportion:1,key:"nodeBody"})}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}}var L7=function(e,t,s){var h=new pa(e,t);return h.resetDisplayContent(""),h},Ay=function(e,t){var s=e.parentContainer;if(s){t.isRexContainerLite?t.addToContainer(s):s.add(t);return}var h=e.displayList;if(bn(h)){t.isRexContainerLite?t.addToLayer(h):h.add(t);return}e.scene.add.existing(t)};const Mg=Phaser.Utils.String.UUID,O7={addTree(e,t){if(De(e)){var s=e;e={nodeBody:s,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=Mg());var h=this.createTree(t);return Ay(this,h),this.insertNode(e,h,{expand:!0}),h},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,s){var h;De(t)||(s=t,t=new Ry(this.scene,this.configSave,{isLeaf:!0})),typeof s=="string"?(h=s,s=void 0):s&&(h=s.nodeKey,delete s.nodeKey),h===void 0&&(h=Mg()),s===void 0&&(s={}),s.hasOwnProperty("expand")||(s.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(h)&&(console.error(`[Trees] Duplicate nodeKey '${h}'`),this.removeNode(this.nodesMap[h],!0)),t.nodeKey=h,this.nodesMap[h]=t;var y=this.childrenMap.child;return y.insert(e,t,s),t}},F7={removeNode(e,t){if(!e)return this;var s=this.getTreePatent(e);if(!s)return this;delete s.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var h=s.childrenMap.child;return h.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var s in t)this.removeNode(t[s],e);return this}},b7={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),s=this.nodesMap[t];return e.length===0?s:s&&this.isTree(s)?s.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var s in t)e.push(t[s]);return e},getAllNodes(e){}};var Ly={};Object.assign(Ly,R7,O7,F7,b7);const D7=Phaser.Utils.Objects.GetValue;var I7=function(e,t){var s=new Ry(e,t,{isLeaf:!1});e.add.existing(s);var h=Yn(e,t,"toggleButton",{isLeaf:!1},B7);return s.insert(0,h,{padding:{right:D7(t,"space.toggleButton",0)},fitRatio:1,key:"toggleButton"}),s},B7=function(e,t,s){var h=new qn(e,t);return h.on("expand.start",function(y){y.setDirection("down")}).on("collapse.complete",function(y){y.setDirection("right")}),h};const G7=Phaser.Utils.Objects.GetValue;var N7=function(e,t){var s=new St(e,{orientation:G7(t,"childrenOrientation","y")});e.add.existing(s);var h=Yn(e,t,"childrenBackground",{isLeaf:!1});return h&&s.addBackground(h),s};const z7=Phaser.Utils.Objects.Clone;var V7=function(e,t){var s=e?z7(e):{};if(!t)return s;for(var h in t)s[h]=t[h];return s};const Ws=Phaser.Utils.Objects.GetValue;class $r extends wy(xa){constructor(t,s){s===void 0&&(s={});var h=Yn(t,s,"background",{isLeaf:!1}),y=N7(t,s),S=y.childrenMap.items,r=I7(t,s),T=r.childrenMap.toggleButton,i=r.childrenMap.nodeBody,d=oa(Ws(s,"orientation","y")),x=s.space;if(x){var f=Ws(x,"indent",0);x.childLeft=Ws(x,"indentLeft",d===1?f:0),x.childRight=Ws(x,"indentRight",0),x.childTop=Ws(x,"indentTop",d===0?f:0),x.childBottom=Ws(x,"indentBottom",0)}var o={background:h,title:r,child:y,toggleByTarget:T,transition:s.transition,orientation:d,space:x,align:s.align,expand:s.expand};super(t,o),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=s,this.addChildrenMap("toggleButton",T),this.addChildrenMap("nodeBody",i),this.addChildrenMap("childrenNodes",S),this.on("expand.start",function(){T.emit("expand.start",T)}).on("expand.complete",function(){T.emit("expand.complete",T)}).on("collapse.start",function(){T.emit("collapse.start",T)}).on("collapse.complete",function(){T.emit("collapse.complete",T)});var a=Ws(s,"expanded",!0);a!==void 0&&this.setExpandedState(a)}destroy(t){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}createTree(t){return $r.CreateTree(this.scene,this.configSave,t)}isTree(t){return!!t&&t instanceof TreeNode}}$r.CreateTree=function(e,t,s){return new $r(e,V7(t,s))};Object.assign($r.prototype,Ly);const k7=Phaser.Utils.String.UUID,X7={addTree(e){if(De(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=k7());var h=$r.CreateTree(this.scene,this.treeConfig,t);return Ay(this,h),h.nodeKey=s,this.treesMap[s]=h,this.insert(e,h,{expand:!0}),h}},W7={removeTree(e,t){return e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var s in t)this.removeTree(t[s],e);return this}},Y7={getTree(e){return this.treesMap[e]},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var s=this.getTree(e.substring(0,t));if(!!s)return s.getNode(e.substring(t+1))}};var Oy={};Object.assign(Oy,X7,W7,Y7);const U7=Phaser.Utils.Objects.GetValue;class Yf extends St{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation="y"),super(t,s),this.type="rexTrees",this.treesMap={},this.treeConfig=U7(s,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}}Object.assign(Yf.prototype,Oy);it.register("trees",function(e){var t=new Yf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Trees",Yf);it.register("textArea",function(e){var t=new va(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.TextArea",va);var H7=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})};const $7={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}},K7={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},xh=Phaser.Utils.Objects.GetValue;class $o extends ca{constructor(t,s){s===void 0&&(s={});var h=xh(s,"text"),y;De(h)?y=h:(h===void 0&&(h={}),h.textArea=!0,y=new Qn(t,h),t.add.existing(y)),H7(y);var S=h.width===void 0,r=h.height===void 0;S&&(y.minWidth=0),r&&(y.minHeight=0),s.scrollMode=0,s.type="rexTextAreaInput",s.child={gameObject:y,expandWidth:S,expandHeight:r};var T=xh(s,"space",void 0);T&&(T.child=xh(T,"text",0)),s.scroller=!1,super(t,s),this.addChildrenMap("text",y);var i,d;y.on("cursorin",function(){var f=y.textOY,o=y.contentHeight,a=i!==f,n=d!==o;i=f,d=o,n&&this.resizeController(),(a||n)&&(this.t=y.t)},this),y.on("textchange",function(f){this.emit("textchange",f,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var x=xh(s,"content",void 0);x&&this.setText(x)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var s=this.childrenMap.child;s.readOnly=t}setReadOnly(t){var s=this.childrenMap.child;return s.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}}Object.assign($o.prototype,$7,K7);it.register("textAreaInput",function(e){var t=new $o(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.TextAreaInput",$o);var Z7=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,h=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(h=!0);break;case 1:e=0;break;default:e=0;break}if(!h)return e},J7=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,h=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(h=!0);break;default:e=0;break}if(!h)return e},Q7=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},j7=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},q7=function(){var e=this.child,t,s;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width;break;case 1:s=this.height;break}e.isRexSizer?e.runLayout(this,t,s):Se(e,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},_7=function(e,t){t||e.clearMask&&e.clearMask(!1)},Fy={getChildrenWidth:Z7,getChildrenHeight:J7,getChildrenSizers:Q7,resetChildPosition:j7,layoutChildren:q7,removeChildCallback:_7};Object.assign(Fy,qx);const wg=Phaser.Utils.Objects.IsPlainObject,Ze=Phaser.Utils.Objects.GetValue,tN=Phaser.Display.Align.TOP_LEFT;class by extends nr{constructor(t,s,h,y,S,r){wg(s)?(r=s,s=Ze(r,"x",0),h=Ze(r,"y",0),y=Ze(r,"width",void 0),S=Ze(r,"height",void 0)):wg(y)&&(r=y,y=Ze(r,"width",void 0),S=Ze(r,"height",void 0)),super(t,s,h,y,S,r),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(Ze(r,"scrollMode",0));var T=Ze(r,"clamplChildOY",!0),i=Ze(r,"clamplChildOX",T);this.setClampMode(T,i);var d=Ze(r,"child",void 0),x=Ze(r,"expand",!0);d.setOrigin&&d.setOrigin(0),this.add(d),this.sizerChildren=[d];var f=this.getSizerConfig(d);f.align=tN,f.expand=x,this.child=d,this.setupChildrenMask(Ze(r,"mask",void 0)),this.childrenMask&&(this.maskGameObject=Nf(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Bx[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,s){return this.clampChildOY=t,this.clampChildOX=s,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.height:this.width}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.width:this.height}get childHeight(){return this.scrollMode===0||this.scrollMode===2?Ot(this.child):Lt(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?Lt(this.child):Ot(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,h=this.bottomChildOY,y=this.childOYExceedTop(t),S=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:y?t=s:S&&(t=h)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),y&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=y,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,h)),this.execeedBottomState=S}get childOX(){return this._childOX}set childOX(t){var s=this.leftChildOX,h=this.rightChildOX,y=this.childOXExceedLeft(t),S=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:y?t=s:S&&(t=h)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),y&&(this.execeedLeftState||this.emit("execeedleft",this,t,s)),this.execeedLeftState=y,S&&(this.execeedRightState||this.emit("execeedright",this,t,h)),this.execeedRightState=S}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(by.prototype,Fy);var eN=function(e,t){if(!this.hasChild(e))return this;switch(this.scrollMode){case 0:yh.call(this,e,"y",t);break;case 1:yh.call(this,e,"x",t);break;default:yh.call(this,e,"y",t),yh.call(this,e,"x",t);break}return this};const Rg=["top","bottom","centerY","center"],Ag=["left","right","centerX","center"];var yh=function(e,t,s){t=t.toUpperCase();var h=t==="Y",y=this.childrenMap.child,S;if(h){if(s)for(var r=0,T=Rg.length;r<T;r++){var i=Rg[r];if(s.indexOf(i)!==-1){s=i;break}}switch(s){case"top":S=y.top-Zs(e).y;break;case"bottom":S=y.bottom-zn(e).y;break;case"centerY":case"center":S=y.centerY-Nc(e).y;break;default:var d=y.top-Zs(e).y,x=y.bottom-zn(e).y;d<=0&&x>=0?S=0:S=Math.abs(d)<=Math.abs(x)?d:x;break}}else{if(s)for(var r=0,T=Ag.length;r<T;r++){var i=Ag[r];if(s.indexOf(i)!==-1){s=i;break}}switch(s){case"left":S=y.left-Zs(e).x;break;case"right":S=y.right-Nn(e).x;break;case"centerX":case"center":S=y.centerX-Nc(e).x;break;default:var f=y.left-Zs(e).x,o=y.right-Nn(e).x;f<=0&&o>=0?S=0:S=Math.abs(f)<=Math.abs(o)?f:o;break}}switch(this.scrollMode){case 0:case 1:this.childOY+=S;break;default:this[`childO${t}`]+=S;break}};const os=Phaser.Utils.Objects.GetValue;class Uf extends ca{constructor(t,s){s===void 0&&(s={});var h=Rf(s),y=os(s,"panel",void 0);y===void 0&&(y={}),y.scrollMode=h,y.clamplChildOY=os(s,"clamplChildOY",!1),y.clamplChildOX=os(s,"clamplChildOX",!1);var S=new by(t,y);t.add.existing(S);var r,T;switch(h){case 0:r=os(s,"expand.panel",!0),T=!0;break;case 1:r=!0,T=os(s,"expand.panel",!0);break;default:r=!0,T=!0}s.type="rexScrollablePanel",s.child={gameObject:S,expandWidth:r,expandHeight:T,align:os(s,"align.panel","center")};var i=os(s,"space",void 0);i&&(i.child=os(i,"panel",0)),super(t,s),this.addChildrenMap("panel",S.child),this.addChildrenMap("panelLayer",S.maskLayer),this.addChildrenMap("mask",S.maskGameObject),this.addChildrenMap("scrollableBlock",S)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ff(this.childrenMap.child,t),this}}var iN={scrollToChild:eN};Object.assign(Uf.prototype,iN);it.register("scrollablePanel",function(e){var t=new Uf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ScrollablePanel",Uf);const Ch={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}},ds={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},sN={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=ds[e]),e){case ds.popUp:e=Ch.popUp;break;case ds.fadeIn:e=Ch.fadeIn;break}return e||(e=te),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=ds[e]),e){case ds.scaleDown:e=Ch.scaleDown;break;case ds.fadeOut:e=Ch.fadeOut;break}return e||(e=te),this.transitOutCallback=e,this}},rN={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[te]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[te]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}},On=Phaser.Utils.Objects.GetValue;class Hf extends ji{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(On(s,"duration.in",200)),this.setDisplayTime(On(s,"duration.hold",1200)),this.setTransitOutTime(On(s,"duration.out",200)),this.setTransitInCallback(On(s,"transitIn",ds.popUp)),this.setTransitOutCallback(On(s,"transitOut",ds.scaleDown)),this.player=new Hx(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}}Object.assign(Hf.prototype,sN,rN);it.register("toast",function(e){var t=new Hf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Toast",Hf);var nN={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0};const aN={setQueueDirection(e){return typeof e=="string"&&(e=nN[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=te),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=te),this.transitOutCallback=e,this}},hN=of.onClick,Dy=Km.delayCall,oN=po.moveTo;var lN=function(e,t,s){var h=t(e.scene,s,e);if(hN.call(h,function(){e.removeMessage(h)}),e.displayTime){var y=e.transitInTime+e.displayTime+10;Dy.call(h,y,function(){e.removeMessage(h)})}return h},Iy=function(e){for(var t=e.childrenMap.items,s,h=[],y=0,S=t.length;y<S;y++)s=t[y],h.push({x:s.x,y:s.y});return h},uN=function(e){for(var t=e.childrenMap.items,s,h=[],y=0,S=t.length;y<S;y++)s=t[y],h.push({x:s.scaleX,y:s.scaleY}),s.setScale(1);e.layout();for(var r=Iy(e),y=0,S=t.length;y<S;y++){var T=h[y];t[y].setScale(T.x,T.y)}return r},dN=function(e,t,s,h){for(var y=e.childrenMap.items,S=Math.min(t.length,s.length,y.length),r,T,i,d=e.queueDirection,x=0;x<S;x++){switch(r=y[x],T=t[x],i=s[x],r.setPosition(T.x,T.y),d){case 0:if(T.y<=i.y)continue;break;case 1:if(T.y>=i.y)continue;break;case 2:if(T.x<=i.x)continue;break;case 3:if(T.x>=i.x)continue;break}oN.call(r,h,i.x,i.y)}},fN=function(e,t,s){var h=Iy(e);e.add(t);var y=uN(e);dN(e,h,y,s),e.transitInCallback(t,s,e)};const cN={showMessage(e){var t=lN(this,this.createMessageLabelCallback,e);return fN(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),Dy.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,s=e.length;t<s;t++)this.removeMessage(e[t]);return this}};var By={};Object.assign(By,aN,cN);const Lg={transitIn(e,t,s){switch(s.queueDirection){case 0:e.setOrigin(.5,1),ki.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),ki.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),ki.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),ki.popUp.call(e,t,"x");break}Wn.fadeIn.call(e,t)},transitOut(e,t,s){Wn.fadeOut.call(e,t)}},Ys=Phaser.Utils.Objects.GetValue;class $f extends St{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexToastQueue",this.setCreateMessageLabelCallback(Ys(s,"createMessageLabelCallback")),this.setQueueDirection(Ys(s,"queueDirection",1)),this.setTransitInTime(Ys(s,"duration.in",200)),this.setDisplayTime(Ys(s,"duration.hold",2e3)),this.setTransitOutTime(Ys(s,"duration.out",200)),this.setTransitInCallback(Ys(s,"transitIn",Lg.transitIn)),this.setTransitOutCallback(Ys(s,"transitOut",Lg.transitOut))}}Object.assign($f.prototype,By);it.register("toastQueue",function(e){var t=new $f(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ToastQueue",$f);var vN=function(e,t){if(t===!1)return null;if(De(t))return t;var s=new tr(e,t);return e.add.existing(s),s},sn=function(e,t,s){s===void 0&&(s=!0),s?t=t?fe(t):{}:t||(t={});var h=new Qn(e,t);return e.add.existing(h),h};const Og=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],pN=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var id={},Fg;for(var Th=0,gN=Og.length;Th<gN;Th++)Fg=Og[Th].toLowerCase(),id[Fg]=pN[Th];var mN=function(e){return e=e.toLowerCase(),id.hasOwnProperty(e)?id[e]:null},xN=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=mN(e)),e};const yN=Phaser.Utils.String.Pad;var bg=function(e,t){t===void 0&&(t="0x");var s=e.toString(16).toUpperCase();return s=yN(s,6,0,1),s=t+s,s},CN=function(e,t){!e||(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const Je=Phaser.Utils.Objects.GetValue,TN=Phaser.Utils.Objects.IsPlainObject,SN=Phaser.Math.Clamp;class Kf extends St{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorInputLite";var h=Je(s,"background",void 0),y=Je(s,"swatch"),S;TN(y)&&(S=Je(y,"size"));var r=vN(t,Je(s,"swatch")),T=Je(s,"inputText",{}),i;if(T&&(i=sn(t,T)),h&&this.addBackground(h),r){S=Je(s,"swatchSize",S);var d;S!==void 0?(Se(r,S,S),d=!1):d=Je(s,"squareExpandSwatch",!0);var x=d?1:0;this.add(r,{proportion:0,expand:!1,fitRatio:x})}if(i){var f=Je(T,"width")===void 0?1:0,o=Je(T,"height")===void 0;this.add(i,{proportion:f,expand:o})}this.addChildrenMap("background",h),this.addChildrenMap("swatch",r),this.addChildrenMap("inputText",i),i&&i.on("close",function(){this.setValue(i.value)},this);var a=Je(s,"valuechangeCallback",null);if(a!==null){var n=Je(s,"valuechangeCallbackScope",void 0);this.on("valuechange",a,n)}this.setValue(Je(s,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=xN(t),t==null){var h=this.childrenMap.inputText;h&&h.setText(bg(this._value));return}}else t=SN(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var s=this.childrenMap.swatch;s&&CN(s,t);var h=this.childrenMap.inputText;h&&h.setText(bg(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}}var PN={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=EN[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const EN={down:0,up:1},Gy=Phaser.Display.Color,$h=Phaser.Math.Percent;var MN=function(e,t,s){s===void 0&&(s=!1);var h=e.width,y=e.height,S=new Gy;if(s)for(var r=0;r<y;r++){var T=$h(r,0,y);S.setFromHSV(T,1,1),t.fillStyle=S.rgba,t.fillRect(0,r,h,1)}else for(var i=0;i<h;i++){var T=$h(i,0,h);S.setFromHSV(T,1,1),t.fillStyle=S.rgba,t.fillRect(i,0,1,y)}},wN=function(e,t,s){for(var h=e.width,y=e.height,S=t.getImageData(0,0,h,y),r=S.data,T=new Gy,i=0;i<y;i++)for(var d=0;d<h;d++){var x=$h(d,0,h),f=1-$h(i,0,y);T.setFromHSV(s,x,f);var o=(i*h+d)*4;r[o]=T.red,r[o+1]=T.green,r[o+2]=T.blue,r[o+3]=255}t.putImageData(S,0,0)};const RN=Phaser.Display.Color,Dg=Phaser.Math.Percent,AN=Phaser.Display.Color.ColorToRGBA,LN=Phaser.Display.Color.HSVToRGB;class ON extends sr{constructor(t,s,h,y,S,r){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=2),S===void 0&&(S=2),super(t,s,h,y,S),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new RN,this.setOrientation(r),this.setSize(y,S)}setOrientation(t){return this.orientation=oa(t),this}updateTexture(){return MN(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=Dg(t,0,this.width):this.hue=Dg(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var h=this.getHue(t,s);return this.colorObject.setFromRGB(LN(h,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(wu===void 0&&(wu={}),s=wu),this.colorObject.setFromRGB(AN(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var wu=void 0,FN=Phaser.Math.RotateAround,Ny=function(e,t,s,h){h===void 0?h={}:h===!0&&(Ru===void 0&&(Ru={}),h=Ru),t-=e.width*e.originX,s-=e.height*e.originY;var y={x:t*e.scaleX,y:s*e.scaleY};return FN(y,0,0,-e.rotation),h.x=e.x+t,h.y=e.y+s,h},Ru;class bN extends qe{constructor(t,s){s===void 0&&(s={}),super(t,s);var h=s.width!=null?1:0,y=new ON(t).setOrientation(h);t.add.existing(y),this.type="rexColorPicker.HPalette",y.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var S=new tr(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(S),this.add(y,{key:"paletteCanvas",expand:!0}).add(S,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var h=Math.min(t,s);return this.childrenMap.marker.setSize(h,h),this}onPaletteCanvasPointerDown(t,s,h,y){if(!!t.isDown){var S=this.childrenMap.paletteCanvas,r=S.getColor(s,h);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,h=this.childrenMap.marker,y=s.colorToLocalPosition(t,!0);return Ny(s,y.x,y.y,h),this.resetChildPositionState(h),this}getHue(t,s){var h=this.childrenMap.paletteCanvas;return h.getHue(t,s)}}const DN=Phaser.Display.Color,Ig=Phaser.Math.Percent,Bg=Phaser.Display.Color.ColorToRGBA,IN=Phaser.Display.Color.HSVToRGB;class BN extends sr{constructor(t,s,h,y,S,r){s===void 0&&(s=0),h===void 0&&(h=0),y===void 0&&(y=2),S===void 0&&(S=2),super(t,s,h,y,S),this.type="rexColorPicker.SVPaletteCanvas",r===void 0&&(r=1),this.colorObject=new DN,this.setHue(r),this.setSize(y,S)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return wN(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var h=Ig(t,0,this.width),y=1-Ig(s,0,this.height);return this.colorObject.setFromRGB(IN(this.hue,h,y)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(Bg(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(Au===void 0&&(Au={}),s=Au),this.colorObject.setFromRGB(Bg(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var Au=void 0;class GN extends qe{constructor(t,s){super(t,s);var h=new BN(t);t.add.existing(h),this.type="rexColorPicker.SVPalette",h.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var y=new tr(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(y),this.add(h,{key:"paletteCanvas",expand:!0}).add(y,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,h,y){if(!!t.isDown){var S=this.childrenMap.paletteCanvas,r=S.getColor(s,h);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,h=this.childrenMap.marker,y=s.colorToLocalPosition(t,!0);return Ny(s,y.x,y.y,h),this.resetChildPositionState(h),this}}const hi=Phaser.Utils.Objects.GetValue;class Zf extends St{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var h=hi(s,"hPalette.position",0);typeof h=="string"&&(h=NN[h]);var y=h===0||h===2?1:0;this.setOrientation(y);var S=hi(s,"background",void 0),r,T;if(this.orientation===0){var r=hi(s,"hPalette.width",void 0);r===void 0&&(r=hi(s,"hPalette.size",10))}else T=hi(s,"hPalette.height",void 0),T===void 0&&(T=hi(s,"hPalette.size",10));var i=new bN(t,{width:r,height:T});t.add.existing(i);var d=hi(s,"svPalette.width",void 0),x=hi(s,"svPalette.height",void 0),f=new GN(t,{width:d,height:x});t.add.existing(f),S&&this.addBackground(S);var o={proportion:0,expand:!0},a,n;this.orientation===0?(a=d===void 0?1:0,n=x===void 0):(a=x===void 0?1:0,n=d===void 0);var u={proportion:a,expand:n};h===0||h===3?this.add(f,u).add(i,o):this.add(i,o).add(f,u),i.on("input",function(){f.setHue(i.getHue()),this.setValue(f.color,!0)},this),f.on("input",function(){this.setValue(f.color,!0)},this),this.addChildrenMap("background",S),this.addChildrenMap("hPalette",i),this.addChildrenMap("svPalette",f);var c=hi(s,"valuechangeCallback",null);if(c!==null){var l=hi(s,"valuechangeCallbackScope",void 0);this.on("valuechange",c,l)}this.setValue(hi(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,s,h){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this}}var NN={bottom:0,left:1,top:2,right:3};const Pi=Phaser.Utils.Objects.GetValue,zN=Phaser.Display.Color,VN=Phaser.Display.Color.ColorToRGBA,kN=Phaser.Display.Color.HSVToRGB,Us=Phaser.Math.Clamp;class Jf extends St{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new zN;var h=Pi(s,"background",void 0),y=Pi(s,"formatLabel",void 0);De(y)||(y=Fe(t,y).resetDisplayContent());var S=[];if(s.inputText0&&s.inputText1&&s.inputText2)S.push(s.inputText0),S.push(s.inputText1),S.push(s.inputText2);else for(var r=Pi(s,"inputText"),T=0;T<3;T++){var i=sn(t,r).setMaxLength(3).setNumberInput();S.push(i)}h&&this.addBackground(h);var x=Pi(s,"proportion.formatLabel",0),d=!!y.isRexContainerLite,f=Pi(s,"expand.formatLabel",d);this.add(y,{proportion:x,expand:f});for(var x=Pi(r,"width")===void 0?1:0,f=Pi(r,"height")===void 0,T=0,o=S.length;T<o;T++)this.add(S[T],{proportion:x,expand:f});this.addChildrenMap("background",h),this.addChildrenMap("formatLabel",y),this.addChildrenMap("components",S),this.onClick(y,this.toggleColorFormat,this);for(var T=0,o=S.length;T<o;T++)S[T].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var a=Pi(s,"valuechangeCallback",null);if(a!==null){var n=Pi(s,"valuechangeCallbackScope",void 0);this.on("valuechange",a,n)}y.setText("RGB"),this.setValue(Pi(s,"value",16777215))}get value(){return this._value}set value(t){t=Us(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(VN(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,h,y;return this.colorFormat==="RGB"?(s=this.colorObject.red,h=this.colorObject.green,y=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),h=Math.floor(this.colorObject.s*100),y=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(h),t[2].setValue(y),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=Us(t[0].value,0,255),h=Us(t[1].value,0,255),y=Us(t[2].value,0,255);this.colorObject.setTo(s,h,y)}else{var S=Us(t[0].value,0,359)/360,r=Us(t[1].value,0,100)/100,T=Us(t[2].value,0,100)/100;this.colorObject.setFromRGB(kN(S,r,T))}return this}}const Lu=Phaser.Utils.Objects.GetValue;class XN extends St{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var h=Lu(s,"background",void 0),y=new Zf(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:Lu(s,"space.hPalette",8)}});t.add.existing(y);var S;s.colorComponents&&(S=new Jf(t,s.colorComponents),t.add.existing(S)),h&&(this.addBackground(h),new mo(h,{stopAllLevels:!1})),this.add(y,{proportion:1,expand:!0}),S&&this.add(S,{proportion:0,expand:!0}),this.addChildrenMap("background",h),this.addChildrenMap("colorPicker",y),this.addChildrenMap("colorComponents",S),y.on("valuechange",function(r){this.setValue(r)},this),S&&S.on("valuechange",function(r){this.setValue(r)},this),this.setValue(Lu(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var h=this.childrenMap.colorComponents;h&&h.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var WN=function(t){var t=this.scene,s,h=this.colorPickerCreateBackgroundCallback;h&&(s=h.call(this,t),t.add.existing(s));var y=this.colorPickerWidth;y===void 0&&(y=this.width);var S=this.colorPickerHeight;S===void 0&&(S=y);var r;this.colorComponentsHeight>0?r={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:r=!1;var T=new XN(t,{width:y,height:S,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:r,value:this.value});return t.add.existing(T),T},YN=function(){if(!this.colorPicker){var e=WN.call(this).layout(),t=new ny(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},zy={openColorPicker:YN};Object.assign(zy,PN);const ue=Phaser.Utils.Objects.GetValue;class Ko extends Kf{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var h=s.colorPicker,y=h!==!1&&h!==null;if(y){this.setColorPickerSize(ue(h,"width",160),ue(h,"height",170));var S,r=ue(h,"background");r?S=function(a){return Oe(a,r)}:S=ue(h,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(S),this.setColorPickerHPalettePosition(ue(h,"hPalettePosition",0)),this.setColorPickerExpandDirection(ue(h,"expandDirection")),this.setColorPickerEaseInDuration(ue(h,"easeIn",200)),this.setColorPickerEaseOutDuration(ue(h,"easeOut",200)),this.setColorPickerTransitInCallback(ue(h,"transitIn")),this.setColorPickerTransitOutCallback(ue(h,"transitOut")),this.setColorPickerBounds(ue(h,"bounds"));var T=ue(h,"space");T===void 0&&(T={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(T)}var i=s.colorComponents,d=i!==!1&&i!==null;if(y&&d){this.setColorComponentsHeight(ue(i,"height",30)),this.setColorComponentsFormatLabelConfig(ue(i,"formatLabel"));var x=ue(i,"inputText");x||(x=ue(s,"inputText")),this.setColorComponentsInputTextConfig(x);var f=ue(i,"space");f===void 0&&(f={item:8}),this.setColorComponentsSpace(f)}var o=this.childrenMap.swatch;o&&y&&this.onClick(o,this.openColorPicker,this)}}Object.assign(Ko.prototype,zy);it.register("colorInput",function(e){var t=new Ko(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ColorInput",Ko);it.register("colorInputLite",function(e){var t=new Kf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ColorInputBase",Kf);it.register("colorPicker",function(e){var t=new Zf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ColorPicker",Zf);it.register("colorComponents",function(e){var t=new Jf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.ColorComponents",Jf);var Vy=function(e){for(var t=e.scene.input,s=t.manager,h=s.pointersTotal,y=s.pointers,S,r=0;r<h;r++)if(S=y[r],!(!S.primaryDown||t.getDragState(S)!==0||!Ed(e,S)))return t.setDragState(S,1),t._drag[S.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(S,3),t.processDragStartList(S)):t.setDragState(S,2),!0;return!1};const Sh=Phaser.Utils.Objects.GetValue,Gg=Phaser.Math.Distance.Between,Ng=Phaser.Math.RotateAroundDistance;class Qf extends Gt{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Sh(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Sh(t,"enable",!0)),this.setAxisMode(Sh(t,"axis",0)),this.setAxisRotation(Sh(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=UN[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return Vy(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,h){this.isDragging||(this.pointer=t)}onDrag(t,s,h){if(this.pointer===t){var y=this.parent;if(this.axisMode===0)y.x=s,y.y=h;else if(this.axisRotation===0)this.axisMode===1?y.x=s:this.axisMode===2&&(y.y=h);else{var S,r={x:s,y:h};S=Gg(r.x,r.y,y.x,y.y),r=Ng(r,y.x,y.y,-this.axisRotation,S),this.axisMode===1?r.y=y.y:this.axisMode===2&&(r.x=y.x),S=Gg(r.x,r.y,y.x,y.y),r=Ng(r,y.x,y.y,this.axisRotation,S),y.x=r.x,y.y=r.y}}}onDragEnd(t,s,h,y){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const UN={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var HN=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],s=this.sizerChildren[2],h=this.getSizerConfig(e).padding,y=this.getSizerConfig(t).padding,S=this.getSizerConfig(s).padding;if(this.orientation===0){var r=this.innerLeft+h.left,T=this.innerRight-S.right,i=Lt(t),d=t.x+i*(0-t.originX),x=t.x+i*(1-t.originX),f=d-y.left-this.space.item-h.right,o=x+y.right+this.space.item+S.left,a=f-r,n=T-o,u=a+n;this.minFirstChildSize>0&&a<this.minFirstChildSize&&(a=this.minFirstChildSize,n=u-a),this.minSecondChildSize>0&&n<this.minSecondChildSize&&(n=this.minSecondChildSize,a=u-n),this.setSplitRatio(a/u)}else{var c=this.innerTop+h.top,l=this.innerBottom-S.bottom,v=Ot(t),p=t.y+v*(0-t.originY),g=t.y+v*(1-t.originY),m=p-y.top-this.space.item-h.bottom,C=g+y.bottom+this.space.item+S.top,P=m-c,M=l-C,E=P+M;this.minFirstChildSize>0&&P<this.minFirstChildSize&&(P=this.minFirstChildSize,M=E-P),this.minSecondChildSize>0&&M<this.minSecondChildSize&&(M=this.minSecondChildSize,P=E-M),this.setSplitRatio(P/E)}var w=this.minWidth,R=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(w,R)};const Jt=Phaser.Utils.Objects.GetValue,$N=Phaser.Math.Clamp;class ky extends St{constructor(t,s){s.hasOwnProperty("orientation")||(s.orientation=s.hasOwnProperty("leftPanel")?0:1),super(t,s),this.type="rexSplit";var h=Jt(s,"background",void 0),y,S,r,T;this.orientation===0?(y="leftPanel",S="rightPanel",r="minLeftPanelWidth",T="minRightPanelWidth"):(y="topPanel",S="bottomPanel",r="minTopPanelHeight",T="minBottomPanelHeight");var i=Jt(s,y,void 0),d=Jt(s,"splitter",void 0),x=Jt(s,S,void 0);h&&this.addBackground(h);var f=Jt(s,"space",void 0);this.add(i,{proportion:1,expand:!0,padding:{left:Jt(f,`${y}Left`,0),right:Jt(f,`${y}Right`,0),top:Jt(f,`${y}Top`,0),bottom:Jt(f,`${y}Bottom`,0)}}),this.add(d,{proportion:0,expand:!0,padding:{left:Jt(f,"splitterLeft",0),right:Jt(f,"splitterRight",0),top:Jt(f,"splitterTop",0),bottom:Jt(f,"splitterBottom",0)}}),this.add(x,{proportion:1,expand:!0,padding:{left:Jt(f,`${S}Left`,0),right:Jt(f,`${S}Right`,0),top:Jt(f,`${S}Top`,0),bottom:Jt(f,`${S}Bottom`,0)}}),this.addChildrenMap("background",h),this.addChildrenMap(y,i),this.addChildrenMap("splitter",d),this.addChildrenMap(S,x),this.minFirstChildSize=Jt(s,r,0),this.minSecondChildSize=Jt(s,T,0),this.setSplitRatio(Jt(s,"splitRatio",.5)),this.splitterDragBehavior=new Qf(d,{axis:this.orientation===0?1:2}),d.on("dragstart",function(){this.emit("splitter.dragstart",d,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",d,this.splitRatio)},this).on("drag",function(){HN.call(this),this.emit("splitter.drag",d,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",d,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",d,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=$N(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}}it.register("splitPanels",function(e){var t=new ky(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.SplitPanels",ky);var KN=function(){return function(e,t,s,h){t!=="panel"&&s.setChildVisible(e,!0)}},ZN=function(){return function(e,t,s,h){t!=="panel"&&s.setChildVisible(e,!1)}};const JN={show:KN,hide:ZN};var QN=function(e,t){return t===void 0&&(t=1),function(s,h,y,S){h!=="panel"&&y.fadeChild(s,S?0:e,t)}},jN=function(e,t){return t===void 0&&(t=0),function(s,h,y,S){h!=="panel"&&y.fadeChild(s,S?0:e,t)}};const qN={show:QN,hide:jN};var zg=function(e,t){return function(s,h,y,S){h!=="panel"&&y.moveChild(s,S?0:e,t)}};const _N={show:zg,hide:zg};var Vg=function(e,t){return function(s,h,y,S){h==="panel"&&y.moveChild(s,S?0:e,t)}};const tz={show:Vg,hide:Vg},Ou={visible:JN,fade:qN,move:_N,"move-panel":tz};var ez=function(e){var t,s;[t,...s]=typeof e=="string"?[e]:e;var h,y;return Ou.hasOwnProperty(t)?(h=Ou[t].show.apply(null,s),y=Ou[t].hide.apply(null,s)):(h=te,y=te),{show:h,hide:y}};const iz={showChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("showchild",s,e,this,t),this.resetChildState(s)),this},hideChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("hidechild",s,e,this,t),this.resetChildState(s)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}},sz=We.prototype.setChildVisible,rz={setChildVisible(e,t){var s;if(typeof e=="string"){var s=e;e=this.sizerChildren[s]}else s=So(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===s),sz.call(this,e,t),this}},nz={fadeChild(e,t,s){var h;return typeof e=="string"?(h=e,e=this.sizerChildren[h]):h=So(this.sizerChildren,e),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===h?1:0),e.fadeIn(t,{start:e.alpha,end:s}),this},fadeChildPromise(e,t,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,s),e._fade?de(e._fade):Promise.resolve()}},az={moveChild(e,t,s,h){var y;typeof e=="string"?(y=e,e=this.sizerChildren[y]):y=So(this.sizerChildren,e),t===void 0&&(t=500);var S=this.currentChildKey===y;if(h===void 0)switch(y){case"leftSide":case"rightSide":h=Lt(e);break;case"topSide":case"bottomSide":h=Ot(e);break;default:if(S)switch(this.previousChildKey){case"leftSide":case"rightSide":h=Lt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":h=Ot(this.sizerChildren[this.previousChildKey]);break;default:h=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":h=Lt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":h=Ot(this.sizerChildren[this.currentChildKey]);break;default:h=0;break}break}var r,T,i,d;if(S)switch(y){case"panel":switch(this.previousChildKey){case"leftSide":r=!0;break;case"rightSide":T=!0;break;case"topSide":i=!0;break;case"bottomSide":d=!0;break}break;case"leftSide":T=!0;break;case"rightSide":r=!0;break;case"topSide":d=!0;break;case"bottomSide":i=!0;break}else switch(y){case"panel":switch(this.currentChildKey){case"leftSide":T=!0;break;case"rightSide":r=!0;break;case"topSide":d=!0;break;case"bottomSide":i=!0;break}break;case"leftSide":r=!0;break;case"rightSide":T=!0;break;case"topSide":i=!0;break;case"bottomSide":d=!0;break}return r?e.moveTo(t,`-=${h}`,void 0,s):T?e.moveTo(t,`+=${h}`,void 0,s):i?e.moveTo(t,void 0,`-=${h}`,s):d?e.moveTo(t,void 0,`+=${h}`,s):e.moveTo(0),this},moveChildPromise(e,t,s,h){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,s,h),e._easeMove?de(e._easeMove):Promise.resolve()}};var Xy={};Object.assign(Xy,rz,nz,az);const Le=Phaser.Utils.Objects.GetValue;class jf extends qe{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var h=Le(s,"showChildCallback",void 0);if(h)if(Hi(h)){var y=Le(s,"showChildCallbackScope",void 0);this.on("showchild",h,y);var S=Le(s,"hideChildCallback",void 0),r=Le(s,"hideChildCallbackScope",void 0);this.on("hidechild",S,r)}else{var T=ez(h);this.on("showchild",T.show),this.on("hidechild",T.hide)}var i=Le(s,"background",void 0),d=Le(s,"panel",void 0),x=Le(s,"leftSide",void 0),f=Le(s,"rightSide",void 0),o=Le(s,"topSide",void 0),a=Le(s,"bottomSide",void 0);if(i&&this.addBackground(i),d&&this.add(d,"panel","center",0,!0),x){var n=Le(s,"expand.left",!0);this.add(x,"leftSide","left-top",0,{height:n})}if(f){var n=Le(s,"expand.right",!0);this.add(f,"rightSide","right-top",0,{height:n})}if(o){var n=Le(s,"expand.top",!0);this.add(o,"topSide","left-top",0,{width:n})}if(a){var n=Le(s,"expand.bottom",!0);this.add(a,"bottomSide","left-bottom",0,{width:n})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(jf.prototype,iz,Xy);it.register("sides",function(e){var t=new jf(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Sides",jf);var hz=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const oz=Phaser.Utils.Array.GetFirst,lz=Phaser.Utils.Array.Remove;var uz=function(e){var t=oz(this.inputHandlers,"name",e);return t&&lz(this.inputHandlers,t),this};class Wy extends ji{constructor(t,s){s=Lo(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?fe(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class dz extends Wy{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var h=new qn(t,s.expandedIcon);t.add.existing(h),this.addSpace().add(h,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",h)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",h=this.childrenMap.expandedIcon;return h.setDirection(s),this}}var Yy=function(e,t){var s=new tc(e,t);return e.add.existing(s),s},qf=function(e,t,s){return Oe(e,s)};const fz={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}},cz={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};class Uy extends xa{constructor(t,s){super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(Uy.prototype,fz,cz);const Dr=Phaser.Utils.Objects.GetValue;var vz=function(e,t,s){var h=Dr(s,"title")||{},y=new dz(e,h);e.add.existing(y),y.on("folder.expand",function(){y.setExpandedState(!0)}).on("folder.collapse",function(){y.setExpandedState(!1)});var S={root:Dr(s,"root"),styles:Dr(s,"tweaker"),space:Dr(s,"space")||{}},r=Yy(e,S),T=Dr(s,"background"),i=qf(e,t,T),d=new Uy(e,{orientation:1,title:y,child:r,background:i,transition:{duration:Dr(s,"transition.duration",200)}});return e.add.existing(d),d};const kg=Phaser.Utils.Objects.GetValue;var pz=function(e){var t=this.scene,s=kg(this.styles,"folder")||{};s.tweaker=this.styles,s.root=this.root;var h=vz(t,e,s);delete s.tweaker,delete s.root,this.add(h,{expand:!0}),h.setTitle(e);var y=kg(e,"expanded",!0);y!==void 0&&h.setExpandedState(y);var S=h.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,S),S};const gz={setBindingTarget(e){for(var t=this.childrenMap.pages.children,s=0,h=t.length;s<h;s++)t[s].setBindingTarget(e);return this}},mz={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,s=0,h=t.length;s<h;s++)e=Math.max(e,t[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,h=t.length;s<h;s++)t[s].setInputRowTitleWidth(e);return this}};class Hy extends Ho{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(Hy.prototype,gz,mz);const Ph=Phaser.Utils.Objects.GetValue;var xz=function(e,t,s){var h=new Hy(e,s);e.add.existing(h);for(var y=Ph(s,"tab"),S={root:Ph(s,"root"),styles:Ph(s,"tweaker")},r=Ph(t,"pages")||[],T=0,i=r.length;T<i;T++){var d=r[T];h.addPage({key:d.title,tab:Fe(e,y).setActiveState(!1).resetDisplayContent({text:d.title}),page:Yy(e,S)})}return h.on("tab.focus",function(x,f){x.setActiveState(!0)}).on("tab.blur",function(x,f){x.setActiveState(!1)}),h};const Xg=Phaser.Utils.Objects.GetValue;var yz=function(e){var t=this.scene,s=Xg(this.styles,"tab")||{};s.tweaker=this.styles,s.root=this.root;var h=xz(t,e,s);delete s.tweaker,delete s.root,this.add(h,{expand:!0});for(var y=Xg(e,"pages")||[],S=[],r=0,T=0,i=y.length;T<i;T++){var d=h.getPage(T),x=y[T].show;x&&(r=T);var f=y[T].key;f&&this.root.addChildrenMap(f,d),S.push(d)}return h.swapPage(r,0),S};const Wg=Phaser.Utils.Objects.GetValue,Cz={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){!this.autoUpdateEnable||this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){return this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=Wg(e,"onGetValue"),this.onSetValue=Wg(e,"onSetValue"),this},getTargetValue(){if(!!this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},Tz={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(!!this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},Sz={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return s+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var s=t.rexSizer.padding;return e-=s.left+s.right,t.minWidth=e,this}},Fu=Phaser.Utils.Objects.GetValue;class _f extends St{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var h=s.inputTitle,y=s.inputField,S=s.background,d=Fu(s,"proportion.title",0),r=Fu(s,"space.title",0),T;this.orientation===0?T={right:r}:T={bottom:r},this.add(h,{proportion:d,expand:!0,padding:T});var i=y.defaultProportion;i===void 0&&(i=s.parentOrientation===1?1:0);var d=Fu(s,"proportion.inputField",i);this.add(y,{proportion:d,expand:!0}),S&&this.addBackground(S),this.addChildrenMap("title",h),this.addChildrenMap("inputField",y),this.addChildrenMap("background",S),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(_f.prototype,Cz,Tz,Sz);var $y=function(e,t,s){var h=new Wy(e,s);return e.add.existing(h),h},Pz=function(e){e===void 0&&(e=St);class t extends e{get bindingTarget(){var h=this.getParentSizer();return h.bindingTarget}get bindingKey(){var h=this.getParentSizer();return h.bindTargetKey}get value(){return this._value}get root(){var h=this.getParentSizer(),y=h.getParentSizer();return y.root}validate(h){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(h,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(h){return this.textFormatCallback?h=this.textFormatCallback(h):h=h.toString(),h}set value(h){if(this._value!==h&&(this.validate(h)||(h=this._value),this.filterValueCallback&&(h=this.filterValueCallback(this,h)),this.displayValueCallback&&this.displayValueCallback(this,h),this._value!==h)){var y=this._value;if(this._value=h,!this.syncValueFlag){var S=this.bindingTarget,r=this.bindingKey;this.emit("valuechange",h,y,S,r),this.root.emit("valuechange",h,y,S,r)}}}getValue(){return this.value}setValue(h){return this.value=h,this}syncValue(h){return this.syncValueFlag=!0,this.value=h,this.syncValueFlag=!1,this}setup(h,y){return y===void 0&&(y=!1),(y||h.hasOwnProperty("format"))&&this.setTextFormatCallback(h.format),(y||h.hasOwnProperty("onValidate"))&&this.setValidateCallback(h.onValidate),this.setupCallback&&this.setupCallback(this,h,y),this}setSetupCallback(h){return this.setupCallback=h,this}setFilterValueCallback(h){return this.filterValueCallback=h,this}setDisplayValueCallback(h){return this.displayValueCallback=h,this}setTextFormatCallback(h){return this.textFormatCallback=h,this}setValidateCallback(h){return this.validateCallback=h,this}}return t},Ez=function(e,t,s){for(var h,y=this.inputHandlers,S=0,r=y.length;S<r;S++){var T=y[S];if(T.accept(t)){var i=Pz(T.baseClass);h=new i(e),e.add.existing(h),h.setSetupCallback(T.setup).setFilterValueCallback(T.filterValue).setDisplayValueCallback(T.displayValue),T.build(h,s);break}}return h&&h.setup(t,!0),h};const Yg=Phaser.Utils.Objects.GetValue;var Mz=function(e,t,s){var h=Ez.call(this,e,t,s);if(!h)return null;var y=Yg(s,"title")||{},S=$y(e,t,y),r=Yg(s,"background")||{},T=Oe(e,r),i=new _f(e,{...s,...t,inputTitle:S,inputField:h,background:T});return e.add.existing(i),i.setTitle(t),i.setValueCallbacks(t),i},wz=function(e,t,s){arguments.length===1?(s=e,e=s.bindingTarget,t=s.bindingKey):(s===void 0&&(s={}),s.bindingTarget=e,s.bindingKey=t),s.title||(s.title=t),s.bindingTarget&&s.bindingKey?s.value=s.bindingTarget[s.bindingKey]:s.value=void 0;var h=this.styles.inputRow||{};h.parentOrientation=this.styles.orientation;var y=Mz.call(this,this.scene,s,h);if(!y)return console.error(`[Tweaker] Can't add Input
    title: ${s.title}
    view: ${s.view}
`),this;var S=y.childrenMap.inputField,r;return this.orientation===1?r=0:(r=this.itemWidth>0?0:1,y.setMinWidth(this.itemWidth)),this.add(y,{proportion:r,expand:!0}),s.onValueChange&&S.on("valuechange",s.onValueChange),y.setAutoUpdateEnable(s.autoUpdate),y.setBindingTarget(e,t),s.monitor&&y.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,y),this},Rz=function(e,t){var s=new tr(e,t);return e.add.existing(s),s};const Az=Phaser.Utils.Objects.GetValue;var Lz=function(e,t){var s=Az(t,"wrap",!1),h=s?Cs:he,y=new h(e,t);return e.add.existing(y),y};const Eh=Phaser.Utils.Objects.GetValue;var Oz=function(e,t,s){for(var h=Eh(s,"title")||{},y=$y(e,t,h),S=t.buttons,r=Eh(s,"button")||{},T=[],i=0,d=S.length;i<d;i++){var x=Fe(e,r);T.push(x);var f=S[i];x.resetDisplayContent(f.label),x.callback=f.callback}var o=Lz(e,{buttons:T,expand:!0,wrap:Eh(t,"wrap",!1)});o.defaultProportion=1;var a=Eh(s,"background")||{},n=Rz(e,a),u=new _f(e,{...s,inputTitle:y,inputField:o,background:n});return e.add.existing(u),u.setTitle(t),o.on("button.click",function(c){c.callback(u.bindingTarget)}),u};const Fz=Phaser.Utils.Objects.GetValue;var bz=function(e){var t=this.scene;e===void 0&&(e={});var s=e.bindingTarget;delete e.bindingTarget;var h=Fz(this.styles,"inputRow")||{},y=Oz(t,e,h);return this.add(y,{expand:!0}),s&&y.setBindingTarget(s),e.key&&this.root.addChildrenMap(e.key,y),this},Dz=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this};const Iz=Phaser.Utils.Objects.GetValue;var Bz=function(e){var t=this.scene,s=Iz(this.styles,"separator"),h=qf(t,e,s);return this.add(h,{expand:!0}),this},Gz=function(e,t,s){return typeof t=="boolean"&&(s=t,t=void 0),s===void 0&&(s=!0),sd(this,fe(e),t,s),this},sd=function(e,t,s,h){if(!!t)for(var y=0,S=t.length;y<S;y++){var r=t[y];r.hasOwnProperty("$target")&&(s=r.$target,delete r.$target);var T=r.$type;switch(delete r.$type,T){case"folder":var i=e.addFolder(r);sd(i,r.$properties,s,h);break;case"tab":for(var d=e.addTab(r),x=0,f=d.length;x<f;x++)sd(d[x],r.pages[x].$properties,s,h);break;case"separator":e.addSeparator();break;case"button":r.bindingTarget=s,e.addButton(r);break;case"buttons":r.bindingTarget=s,e.addButtons(r);break;default:var o=r.$key;if(delete r.$key,o.indexOf(".")===-1)r.bindingTarget=s,r.bindingKey=o;else{var a=o.split(".");r.bindingKey=a.pop();for(var n=s,u=0,c=a.length;u<c;u++)if(n=n[a[u]],!s){console.warn(`[Monitor] Key path '${o}' is invalid`);continue}r.bindingTarget=n}r.hasOwnProperty("monitor")||(r.monitor=h),e.addInput(r);break}}},Nz=function(e){for(var t=this.sizerChildren,s=0,h=t.length;s<h;s++){var y=t[s];!y.setBindingTarget||y.setBindingTarget(e)}return this},zz=function(){for(var e=0,t=this.sizerChildren,s=0,h=t.length;s<h;s++){var y=t[s];y.rexSizer.hidden||(y.getMinTitleWidth?e=Math.max(e,y.getMinTitleWidth()):y.getMaxInputRowTitleWidth&&(e=Math.max(e,y.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},Vz=function(e){e-=this.getInnerPadding("left");for(var t=this.sizerChildren,s=0,h=t.length;s<h;s++){var y=t[s];y.rexSizer.hidden||(y.setMinTitleWidth?y.setMinTitleWidth(e):y.setInputRowTitleWidth&&y.setInputRowTitleWidth(e))}return this},kz={registerInputHandler:hz,removeInputHandler:uz,addFolder:pz,addTab:yz,addInput:wz,addButtons:bz,addButton:Dz,addSeparator:Bz,addRows:Gz,setBindingTarget:Nz,getMaxInputRowTitleWidth:zz,setInputRowTitleWidth:Vz};const Mh=Phaser.Utils.Objects.GetValue;class tc extends St{constructor(t,s){if(s===void 0&&(s={}),s.orientation===void 0&&(s.orientation=1),super(t,s),this.type="rexTweakerShell",this.root=s.root||this,this.styles=Mh(s,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=Mh(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var h=Mh(s,"inputRow.alignTitle");if(h===void 0){var y=Mh(this.styles,"inputRow.proportion.title");h=!y}else h&&et(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=h}else this.alignInputRowTitle=!1,this.inputHandlers=this.root.inputHandlers;var S=qf(t,void 0,s.background);S&&this.addBackground(S)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(tc.prototype,kz);var Xz=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)};const Wz={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var s=e.scene;e.type="rexTweaker.TextInput";var h=t.inputText,y=sn(s,h);e.add(y,{proportion:1,expand:!0,key:"inputText"}),y.on("close",function(){e.setValue(y.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Xz(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}};var Yz=function(e,t,s){s===void 0&&(s=!0),s?t=t?fe(t):{}:t||(t={});var h=new $o(e,t);return e.add.existing(h),h},Uz=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)};const Hz={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var s=e.scene;this.type="rexTweaker.TextAreaInput";var h=t.inputTextArea;h===void 0&&(h={}),h.hasOwnProperty("text")||(h.text=t.inputText),h.hasOwnProperty("slider")||(h.slider=t.slider);var y=Yz(s,h);e.add(y,{proportion:1,expand:!0,key:"inputText"}),y.on("close",function(){e.setValue(y.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Uz(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}};var $z=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)};const Kz={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var s=e.scene;e.type="rexTweaker.NumberInput";var h=t.inputNumber||t.inputText,y=sn(s,h).setNumberInput();e.add(y,{proportion:1,expand:!0,key:"inputText"}),y.on("close",function(){e.setValue(y.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&$z(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}};var Zz=function(e,t){var s=new en(e,t);return e.add.existing(s),s};const bu=Phaser.Utils.Objects.GetValue,Jz=Phaser.Math.Linear,Qz=Phaser.Math.Snap.Floor;var jz=function(e,t,s,h){e.minValue=t,e.maxValue=s,e.step=h;var y=e.childrenMap.slider;y.setGap(h,t,s)},qz=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)};const _z={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var s=e.scene;e.type="rexTweaker.RangeInput";var h=t.slider,y=e.orientation===0?"track.height":"track.width",S=bu(h,y),r=Zz(s,h),x=t.parentOrientation===1?2:0,f=bu(t,"proportion.range.slider",x),T=S===void 0;e.add(r,{proportion:f,expand:T,key:"slider"});var i=t.inputNumber||t.inputText,d=sn(s,i).setNumberInput(),x=t.parentOrientation===1?1:0,f=bu(t,"proportion.range.inputText",x);e.add(d,{proportion:f,expand:!0,key:"inputText"}),d.on("close",function(){e.setValue(d.value)}),r.on("valuechange",function(){var o=Jz(e.minValue,e.maxValue,r.value);e.step&&(o=Qz(o,e.step,e.minValue)),e.setValue(o)})},setup(e,t,s){(s||t.hasOwnProperty("max"))&&jz(e,t.min,t.max,t.step),(s||t.hasOwnProperty("inputTextReadOnly"))&&qz(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.slider;s.setValue(t,e.minValue,e.maxValue);var h=e.childrenMap.inputText;h.setText("").setText(e.getFotmatText(t))}};var Ky=function(e,t){var s=new he(e,t);return e.add.existing(s),s};const tV=Phaser.Utils.Objects.GetValue;var eV=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)};const iV={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var s=e.scene;e.type="rexTweaker.IncDecInput";var h=tV(t,"incDec")||{},y={text:null,action:null},S=Ky(s,{expand:!1}),r=t.parentOrientation===1?1:0;e.add(S,{proportion:r,expand:!0});var T=t.inputNumber||t.inputText,i=sn(s,T).setNumberInput();i.on("close",function(){e.setValue(i.value)});var d=Object.assign(fe(y),h.incButton||{}),x=Fe(s,d),f=Object.assign(fe(y),h.decButton||{}),o=Fe(s,f);S.addButton(x),S.addButton(o);var a=h.inputTextIndex||0;S.insert(a,i,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,S.on("button.click",function(n,u,c,l){var v=e.value;u===0?v+=e.step:v-=e.step,e.maxValue!==void 0&&v>e.maxValue&&(v=e.maxValue),e.minValue!==void 0&&v<e.minValue&&(v=e.minValue),e.setValue(v)}),e.addChildrenMap("incButton",x),e.addChildrenMap("decButton",o),e.addChildrenMap("inputText",i)},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&eV(e,!!t.inputTextReadOnly),(s||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(s||t.hasOwnProperty("min"))&&(e.minValue=t.min),(s||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText("").setText(e.getFotmatText(t))}};var sV=function(e,t,s){s===void 0&&(s=!0),s?t=t?fe(t):{}:t||(t={});var h=new Ko(e,t);return e.add.existing(h),h};const rV={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ColorInput";var h=t.colorInput;h===void 0&&(h={}),h.hasOwnProperty("inputText")||(h.inputText=t.inputText);var y=sV(s,h);e.add(y,{proportion:1,expand:!0,key:"colorInput"}),y.on("valuechange",function(S){e.setValue(S)})},displayValue(e,t){var s=e.childrenMap.colorInput;s.setValue(t)}};var nV=function(e,t){var s=new Ld(e,t);return e.add.existing(s),s};const aV={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var s=e.scene;e.type="rexTweaker.CheckboxInput";var h=t.checkbox,y=nV(s,h),S=h.size;S!==void 0&&y.setSize(S,S);var r=S!==void 0?0:1;e.add(y,{proportion:0,expand:!1,fitRatio:r,key:"checkbox"}),y.on("valuechange",function(T){e.setValue(T)})},displayValue(e,t){var s=e.childrenMap.checkbox;s.setValue(t)}};var hV=function(e,t){var s=new Od(e,t);return e.add.existing(s),s};const oV={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ToggleSwitchInput";var h=t.toggleSwitch,y=hV(s,h),S=h.size;S!==void 0&&y.setSize(S,S);var r=S!==void 0?0:1;e.addSpace().add(y,{proportion:0,expand:!1,fitRatio:r,key:"toggleSwitch"}),y.on("valuechange",function(T){e.setValue(T)})},displayValue(e,t){var s=e.childrenMap.toggleSwitch;s.setValue(t)}};var lV=function(e,t){t=hy(e,t);var s=new ma(e,t);return e.add.existing(s),s},Zy=function(e,t){for(var s=0,h=e.length;s<h;s++){var y=e[s];if(y.value===t)return s}},uV=function(e,t){var s=Zy(e,t);if(s!=null)return e[s]},dV=function(e,t){var s=e.childrenMap.list;s.setOptions(t)};const fV={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var s=e.scene;e.type="rexTweaker.ListInput";var h=lV(s,t.list);e.add(h,{proportion:1,expand:!0,key:"list"}),h.on("button.click",function(y,S,r,T,i,d){e.setValue(r.value)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&dV(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,h=uV(s.options,t);s.resetDisplayContent(h).setMinSize(s.width,s.height).layout().setMinSize(0,0)}};var cV=function(e,t){for(var s=0,h=e.length;s<h;s++){var y=e[s];!y||y.setActiveState(s===t)}};const vV=Phaser.Utils.Objects.GetValue;var pV=function(e,t){var s=e.childrenMap.list;s.options=t;var h=e.scene,y=s.buttonConfig;s.clearButtons(!0);for(var S=0,r=t.length;S<r;S++){var T=t[S],i=Fe(h,y).setActiveState(!1).resetDisplayContent({text:T.text});s.addButton(i)}};const gV={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ButtonsInput";var h=t.button?fe(t.button):{},y=vV(h,"expand",!0);y&&(h.align="center"),delete h.expand;var S=Ky(s,{expand:y});S.buttonConfig=h,e.add(S,{proportion:1,expand:!0,key:"list"}),S.on("button.click",function(r,T,i,d){var x=S.options[T];!x||(e._selectedIndex=T,e.setValue(x.value),e._selectedIndex=void 0)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&pV(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,h=e._selectedIndex;h===void 0&&(h=Zy(s.options,t)),cV(s.childrenMap.buttons,h)}};var mV=function(){this.registerInputHandler(Wz).registerInputHandler(Hz).registerInputHandler(Kz).registerInputHandler(_z).registerInputHandler(iV).registerInputHandler(rV).registerInputHandler(aV).registerInputHandler(oV).registerInputHandler(fV).registerInputHandler(gV)};class Jy extends tc{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("style")&&(s.styles=s.style),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker",this.inputHandlers=[],mV.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}it.register("tweaker",function(e){var t=new Jy(this.scene,e);return this.scene.add.existing(t),t});et(window,"RexPlugins.UI.Tweaker",Jy);it.register("click",function(e,t){return new Zi(e,t)});et(window,"RexPlugins.UI.Click",Zi);it.register("clickOutside",function(e,t){return new lf(e,t)});et(window,"RexPlugins.UI.ClickOutside",lf);it.register("inTouching",function(e,t){return new Hr(e,t)});et(window,"RexPlugins.UI.InTouching",Hr);it.register("tap",function(e,t){return De(e)||(t=e,e=this.scene),new yo(e,t)});et(window,"RexPlugins.UI.Tap",yo);it.register("press",function(e,t){return De(e)||(t=e,e=this.scene),new Co(e,t)});et(window,"RexPlugins.UI.Press",Co);it.register("swipe",function(e,t){return De(e)||(t=e,e=this.scene),new aa(e,t)});et(window,"RexPlugins.UI.Swipe",aa);it.register("pan",function(e,t){return De(e)||(t=e,e=this.scene),new _m(e,t)});et(window,"RexPlugins.UI.Pan",_m);it.register("drag",function(e,t){return new Qf(e,t)});et(window,"RexPlugins.UI.Drag",Qf);it.register("pinch",function(e){return new tx(this.scene,e)});et(window,"RexPlugins.UI.Pinch",tx);it.register("rotate",function(e){return new df(this.scene,e)});et(window,"RexPlugins.UI.Rotate",df);const xV=Phaser.Utils.Objects.IsPlainObject,Ug=Phaser.Utils.Objects.GetValue;var Hg=function(e,t,s){var h;if(e===void 0)e=s.texture.key,t=s.frame.name;else if(xV(e)){var y=e;e=Ug(y,"key",s.texture.key),t=Ug(y,"frame",s.frame.name)}else typeof e=="string"||(h=e);return h===void 0&&(h=function(S){S.setTexture(e,t)}),h};const Fn=Phaser.Utils.Objects.GetValue,yV=Phaser.Utils.Objects.GetAdvancedValue,CV=Phaser.Math.Linear;class Qy extends ir{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(yV(t,"duration",500)),this.setEase(Fn(t,"ease","Sine")),this.setOrientation(Fn(t,"orientation",0)),this.setFrontFace(Fn(t,"front",void 0)),this.setBackFace(Fn(t,"back",void 0)),this.setFace(Fn(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=TV[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=SV[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=Hg(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=Hg(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,s){s.justRestart&&this.toggleFace();var h=s.t;s.isOddIteration&&(h=1-h),h=this.easeFn(h);var y=CV(this.scale0,0,h);this.orientation===0?t.scaleX=y:t.scaleY=y}}const TV={x:0,horizontal:0,y:1,vertical:1},SV={front:0,back:1};it.register("flip",function(e,t){return new Qy(e,t)});et(window,"RexPlugins.UI.Flip",Qy);it.register("shake",function(e,t){return new ef(e,t)});et(window,"RexPlugins.UI.Shake",ef);it.register("touchEventStop",function(e,t){return new mo(e,t)});et(window,"RexPlugins.UI.TouchEventStop",mo);it.register("perspective",function(e,t){return new Ey(e,t)});et(window,"RexPlugins.UI.Perspective",Ey);const jy=Phaser.Math.RotateAround;var Du=function(e,t,s){var h=e.width/2,y=e.height/2;return pe.x=t-h,pe.y=s-y,jy(pe,0,0,e.rotation),pe.x*=e.scaleX,pe.y*=e.scaleY,pe.x+=e.x,pe.y+=e.y,pe},PV=function(e,t,s){var h=e.width/2,y=e.height/2;return pe.x=t-e.x,pe.y=s-e.y,pe.x/=e.scaleX,pe.y/=e.scaleY,jy(pe,0,0,-e.rotation),pe.x+=h,pe.y+=y,pe},pe={x:0,y:0};class EV{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var h=this.parent,y=h.height,S=h.frame.cutWidth/y/2,r=h.frame.cutHeight/y/2,T=t/y-S,i=s/y-r,d=this.vertex;return d.x=T,d.y=-i,h.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,h){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,h||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var h=PV(this.parent,t,s);return this.setLocalXY(h.x,h.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return Du(this.parent,this._localX,this._localY)}get x(){var t=Du(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Du(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const MV=Phaser.Geom.Mesh.Vertex,wV=Phaser.Geom.Mesh.Face;var RV=function(e){for(var t=e.isNinePointMode,s=t?9:4,h=e.vertices,y=e.faces,S=e.controlPoints,r=0;r<s;r++){var T=new MV;h.push(T),S.push(new EV(e,T))}var i;t?i=OV:e.fourPointsModeRTL?i=LV:i=AV;for(var r=0,d=i.length;r<d;r+=3){var x=h[i[r+0]],f=h[i[r+1]],o=h[i[r+2]];y.push(new wV(x,f,o))}t?(e.topLeft=S[0],e.topCenter=S[1],e.topRight=S[2],e.centerLeft=S[3],e.center=S[4],e.centerRight=S[5],e.bottomLeft=S[6],e.bottomCenter=S[7],e.bottomRight=S[8]):(e.topLeft=S[0],e.topRight=S[1],e.bottomLeft=S[2],e.bottomRight=S[3])};const AV=[0,2,3,0,3,1],LV=[1,3,2,1,2,0],OV=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var FV=function(e){var t,s=0,h=e.height,y=0,S=e.width;if(e.isNinePointMode){var r=(y+S)/2,T=(s+h)/2;t=[y,s,r,s,S,s,y,T,r,T,S,T,y,h,r,h,S,h]}else t=[y,s,S,s,y,h,S,h];return t};const bV=Phaser.Utils.Objects.IsPlainObject,Ir=Phaser.Utils.Objects.GetValue;class DV extends gy{constructor(t,s,h,y,S,r){bV(s)&&(r=s,s=Ir(r,"x",0),h=Ir(r,"y",0),y=Ir(r,"key",null),S=Ir(r,"frame",null)),super(t,s,h,y,S),this.type="rexQuadImage",this.isNinePointMode=Ir(r,"ninePointMode",!1),this.fourPointsModeRTL=Ir(r,"rtl",!1),this.controlPoints=[],RV(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var s=0,h=this.controlPoints.length;s<h;s++)this.controlPoints[s].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=FV(this),s=this.width,h=this.height,y=this.frame.cutWidth/h/2,S=this.frame.cutHeight/h/2,r=this.frame.u0,T=this.frame.u1,i=this.frame.v0,d=this.frame.v1,x=T-r,f=d-i,o=this.controlPoints,a=0,n=t.length;a<n;a+=2){var u=t[a+0],c=t[a+1],l=a/2,v=u/h-y,p=c/h-S,g=r+x*(u/s),m=i+f*(c/h);this.vertices[l].set(v,-p,0).setUVs(g,m),o[l].resetLocalXY(u,c)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}}Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var $g=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var h=e.width,y=e.height,S=h*.5,r=y*.5,T=Math.tan(t)*r,i=Math.tan(s)*S,d=e.controlPoints,x=0,f=d.length;x<f;x++){var o=d[x],a=o.localXOrigin,n=o.localYOrigin;o.localX=a+(n>r?T:-T),o.localY=n+(a>S?i:-i)}};const IV=Phaser.Utils.Objects.IsPlainObject,wh=Phaser.Utils.Objects.GetValue,Kg=Phaser.Math.DegToRad,Zg=Phaser.Math.RadToDeg;class BV extends DV{constructor(t,s,h,y,S){if(IV(s)){var r=s;s=wh(r,"x",0),h=wh(r,"y",0),y=wh(r,"key",null),S=wh(r,"frame",null)}super(t,s,h,y,S),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,$g(this,this._skewX,this._skewY)}get skewXDeg(){return Zg(this._skewX)}set skewXDeg(t){this.skewX=Kg(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,$g(this,this._skewX,this._skewY)}get skewYDeg(){return Zg(this._skewY)}set skewYDeg(t){this.skewY=Kg(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const GV=Phaser.Utils.Objects.IsPlainObject,Rh=Phaser.Utils.Objects.GetValue;class NV extends BV{constructor(t,s,h,y,S){if(GV(s)){var r=s;s=Rh(r,"x",0),h=Rh(r,"y",0),y=Rh(r,"width",32),S=Rh(r,"height",32)}var T=Cy(t,y,S);super(t,s,h,T,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class qy extends Py(NV){get skewState(){return this.isRunning}}it.register("skew",function(e,t){return new qy(e,t)});et(window,"RexPlugins.UI.Skew",qy);it.register("anchor",function(e,t){return new _d(e,t)});et(window,"RexPlugins.UI.Anchor",_d);it.register("textTyping",function(e,t){return new Yo(e,t)});et(window,"RexPlugins.UI.TextTyping",Yo);it.register("textPage",function(e,t){return new Wo(e,t)});et(window,"RexPlugins.UI.TextPage",Wo);var Nr=void 0,zV=function(e){e!==Nr&&(Nr!==void 0&&Nr.close(),Nr=e)},VV=function(e){e===Nr&&(Nr=void 0)};const Ei=Phaser.Utils.Objects.GetValue,kV=Phaser.Utils.Objects.Clone;var XV=function(e,t){t===void 0&&(t={}),t=kV(t);var s=e.scene,h=e.style,y=Ei(t,"backgroundColor",h.backgroundColor);y===null&&(y="transparent"),t.text=Ei(t,"text",e.text),t.fontFamily=Ei(t,"fontFamily",h.fontFamily),t.fontSize=Ei(t,"fontSize",h.fontSize),t.color=Ei(t,"color",h.color),t.backgroundColor=y,t.direction=Ei(t,"rtl",h.rtl)?"rtl":"ltr",t.align=Ei(t,"align",WV(h)),t.direction==="rtl"&&Pf(e)&&(t.align="right");var S=e.padding;S.left>0&&(t.paddingLeft=`${S.left}px`),S.right>0&&(t.paddingRight=`${S.right}px`),h.backgroundCornerRadius&&(t.borderRadius=Ei(t,"borderRadius",`${h.backgroundCornerRadius}px`));var r=new wo(s,e.x,e.y,Ei(t,"width",e.width),Ei(t,"height",e.height),t);r.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var T=e.parentContainer;return T?T.add(r):s.add.existing(r),r},WV=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},YV=function(e,t,s){return e.time.delayedCall(0,t,[],s)};const Br=Phaser.Utils.Objects.GetValue,UV=Phaser.Utils.Objects.Merge;var HV=function(e,t){e===void 0&&(e={}),e=UV(e,this.openConfig),zV(this),Hi(e)&&(t=e,e=void 0);var s=Br(e,"inputType",void 0);s===void 0&&(s=Br(e,"type","text")),t===void 0&&(t=Br(e,"onClose",void 0));var h=Br(e,"onOpen",void 0),y=Br(e,"onTextChanged",void 0);return this.inputText=XV(this.parent,e).on("textchange",function(S){var r=S.text;y?y(this.parent,r):this.parent.text=r},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Br(e,"enterClose",s!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=YV(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),h&&h(this.parent),this.emit("open",this.parent)},this),this},$V=function(){return VV(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},KV={open:HV,close:$V};const ZV=Phaser.Utils.Objects.GetValue;class Zo extends Gt{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var h=ZV(s,"clickEnable",!0);h&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(Zo.prototype,KV);var JV=function(e,t,s){return e._edit||(e._edit=new Zo(e,{clickEnable:!1})),e._edit.open(t,s),e._edit};it.register("textEdit",function(e,t){return new Zo(e,t)});et(window,"RexPlugins.UI.TextEdit",Zo);it.register("layerManager",function(e){return new ro(this.scene,e)});et(window,"RexPlugins.UI.LayerManager",ro);const Iu=65535;var Kh=function(e,t,s){if(t==null)return e;if(t===0)return Bu(e,0,s),e;var h=e.text.length;if(h===0)return Bu(e,t,s),e;var y=Math.floor(t*1.5/h);s!==void 0&&y>s&&(y=Math.floor(s));for(var S={},r=Qg(e,y,t,s,S),T=0;T<=Iu&&r!==0;T++){if(y+=r,y<0){y=0;break}r=Qg(e,y,t,s,S)}return T===Iu&&console.warn(`FontSizeFit: Test count exceeds ${Iu}`),e.setFontSize(y),Bu(e,t,s),e},Jg=function(e,t,s){return s[t]===void 0&&(e.setFontSize(t),s[t]={width:e.width,height:e.height}),s[t]},Qg=function(e,t,s,h,y){var S=Jg(e,t,y),r=Jg(e,t+1,y),T;if(h!==void 0)if(S.height<=h&&r.height>h)T=0;else{if(S.height>h)return-1;T=Math.floor(h-S.height)}var i;if(S.width<=s&&r.width>s)return 0;if(S.width>s)return-1;var i=Math.floor(s-S.width);return T===void 0?i:Math.min(i,T)},Bu=function(e,t,s){var h=e.style;!h||(h.fixedWidth=t,h.parent.width=t,s!==void 0&&(h.fixedHeight=s,h.parent.height=s),h.update(!1))};const Gu=Phaser.Utils.Objects.GetValue;var QV=function(e,t){typeof t=="number"&&(t={minWidth:t});var s=Gu(t,"minWidth",0),h=Gu(t,"minHeight",0),y=Gu(t,"fitHeight",!1);return e._minWidth=s,e._minHeight=h,y?(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(S,r){return Kh(e,S,r),e}):(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),Kh(e,S,void 0),e},e.resize=function(S,r){return e.width===S&&e.height===r||e.setFixedSize(S,r),e}),e};class _y extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new it(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,s,h,y){return t.visible?_s(t,s,h,y):!1}get viewport(){return Jr(this.scene,this.scene.cameras.main,!0)}}var jV={getParentSizer:Xe,getTopmostSizer:Dm,removeFromParent:Hs,hide:vs,show:cs,isShown:sf,confirmAction:Jx,edit:JV,wrapExpandText:Hh,fontSizeExpandText:QV,fontSizeResize:Kh,setFontSizeToFitWidth:Kh,waitEvent:ho,waitComplete:de,delayPromise:vx,setChildrenInteractive:ff,fadeIn:co,fadeOutDestroy:vo,easeMoveTo:Um,easeMoveFrom:Hm,modal:af,modalPromise:s3,modalClose:jm,requestDrag:Vy,openFileChooser:gx};Object.assign(_y.prototype,jV);const Jh=class extends Phaser.Physics.Arcade.Sprite{constructor(s,h,y,S,r){super(s,h,y,S);rt(this,"health");rt(this,"id");rt(this,"attack");this.setPipeline("Light2D"),this.health=10,this.attack=5,this.id=Jh.currentId,Jh.currentId+=1,s.add.existing(this),s.physics.add.existing(this),s.physics.add.collider(this,r.layer),this.setPushable(!1),s.enemyGroup.add(this)}update(){}handleDamage(s){this.health-=s,console.log(this.health)}};let js=Jh;rt(js,"currentId",0);var tC=(e=>(e[e.IDLE=0]="IDLE",e[e.WALK=1]="WALK",e[e.JUMP=2]="JUMP",e[e.FALL=3]="FALL",e[e.LAND=4]="LAND",e[e.DEATH=5]="DEATH",e))(tC||{}),Dh=(e=>(e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.IDLE=2]="IDLE",e))(Dh||{});class rn{constructor(t,s,h){rt(this,"player");rt(this,"slime");rt(this,"direction");rt(this,"SlimeStateManager");this.player=t,this.slime=s,this.SlimeStateManager=h}enter(t){}update(){}exit(t){}findFollowDirection(){if(this.player.body&&this.slime.body){let t=this.player.body.center,s=this.slime.body.center;if(Phaser.Math.Distance.Between(t.x,t.y,s.x,s.y)<200){let y=2,S=t.x-s.x,r=1;return S<r*-1?y=0:S>r&&(y=1),y}else return 2}else return console.error("No player or slime body"),2}slimeOnFloor(){return this.slime.body?!!(this.slime.body instanceof Phaser.Physics.Arcade.Body&&this.slime.body.onFloor()):(console.error("No Body"),!1)}moveHorizontally(t){this.slime.setAccelerationX(0),t==1?(this.slime.setFlipX(!0),this.slime.setVelocityX(30)):t==0?(this.slime.setFlipX(!1),this.slime.setVelocityX(-30)):this.slime.setVelocityX(0)}}class qV extends rn{constructor(t,s,h){super(t,s,h)}enter(t){this.slime.setVelocityX(0),this.slime.anims.play("slime_idle",!0)}update(){let t=0,s=this.findFollowDirection();s!=2&&(t=1),this.SlimeStateManager.changeState(t,s)}}class _V extends rn{constructor(t,s,h){super(t,s,h)}enter(t){this.moveHorizontally(t),this.slime.anims.play("slime_walk",!0)}update(){let t=0,s=this.findFollowDirection();s!=2&&(Math.random()*10<.1&&this.slimeOnFloor()?t=2:t=1),this.SlimeStateManager.changeState(t,s)}}class tk extends rn{constructor(t,s,h){super(t,s,h)}enter(t){this.moveHorizontally(t),this.slime.setVelocityY(-200),this.slime.anims.play("slime_jump",!0)}update(){let t=2,s=this.findFollowDirection();this.moveHorizontally(s),this.slime.body&&this.slime.body.velocity.y>-20&&(t=3),t!=2&&this.SlimeStateManager.changeState(t,s)}}class ek extends rn{constructor(t,s,h){super(t,s,h)}enter(t){this.moveHorizontally(t),this.slime.anims.play("slime_fall",!0)}update(){let t=3,s=this.findFollowDirection();this.moveHorizontally(s),this.slimeOnFloor()&&(t=4),t!=3&&this.SlimeStateManager.changeState(t,s)}}class ik extends rn{constructor(s,h,y){super(s,h,y);rt(this,"finishedAnimation");this.finishedAnimation=!1}enter(s){this.moveHorizontally(s),this.slime.anims.play("slime_land",!0).on("animationcomplete-slime_land",()=>{this.finishedAnimation=!0},this)}update(){if(this.finishedAnimation){let s=0,h=this.findFollowDirection();h!=2&&(s=1),this.SlimeStateManager.changeState(s,h)}}}class sk extends rn{constructor(t,s,h){super(t,s,h)}enter(t){this.slime.anims.play("slime_death",!0).on("animationcomplete-slime_death",()=>{this.slime.destroy()},this)}}class rk{constructor(t,s){rt(this,"slime");rt(this,"player");rt(this,"states");rt(this,"currentState");rt(this,"currentDirection");rt(this,"canAttack");this.canAttack=!0,this.slime=t,this.player=s,this.states=[new qV(this.player,this.slime,this),new _V(this.player,this.slime,this),new tk(this.player,this.slime,this),new ek(this.player,this.slime,this),new ik(this.player,this.slime,this),new sk(this.player,this.slime,this)],this.currentDirection=Dh.IDLE,this.currentState=this.states[0],this.currentState.enter(Dh.IDLE)}update(){this.slime.health<=0?this.changeState(tC.DEATH,Dh.IDLE):this.currentState.update()}changeState(t,s){let h=this.states[t];h.direction=s,(h!=this.currentState||s!=this.currentDirection)&&(this.currentState.exit(t),this.currentState=h,this.currentDirection=s,this.currentState.enter(s))}}class nk extends js{constructor(s,h,y,S,r,T){super(s,h,y,S,r);rt(this,"slimeStateManager");rt(this,"InvisibleLayer");this.body?(this.setSize(14,12),this.setOffset(0,4),this.setScale(1.5,1.5)):console.log("No Body??"),this.InvisibleLayer=s.InvisibleLayer,this.slimeStateManager=new rk(this,T)}update(){this.slimeStateManager.update(),this.InvisibleLayer.getTileAtObject(this)?this.setVisible(!1):this.setVisible(!0)}}var ec=(e=>(e[e.IDLE=0]="IDLE",e[e.WALK=1]="WALK",e[e.RUN=2]="RUN",e[e.MINE=3]="MINE",e[e.JUMP=4]="JUMP",e[e.FALL=5]="FALL",e[e.LAND=6]="LAND",e[e.CLIMB=7]="CLIMB",e[e.ATTACK=8]="ATTACK",e[e.HURT=9]="HURT",e[e.DEATH=10]="DEATH",e))(ec||{}),Zh=(e=>(e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.UP=2]="UP",e[e.DOWN=3]="DOWN",e[e.IDLE=4]="IDLE",e))(Zh||{}),Ih=(e=>(e[e.LADDER=0]="LADDER",e[e.TORCH=1]="TORCH",e[e.DYNAMITE=2]="DYNAMITE",e[e.POTION=3]="POTION",e))(Ih||{});class fi{constructor(t,s,h,y){rt(this,"player");rt(this,"PlayerStateManager");rt(this,"direction");rt(this,"finishedAnimation");rt(this,"GroundLayer");rt(this,"ItemLayer");this.player=t,this.PlayerStateManager=s,this.finishedAnimation=!1,this.GroundLayer=h,this.ItemLayer=y}enter(t){}exit(t){}update(t,s){}moveHorizontally(t){let s=this.getPlayerVelocity();this.player.setAccelerationX(0),t==0?(this.player.setFlipX(!0),this.player.setVelocityX(Math.min(-100,s.x))):(this.player.setFlipX(!1),this.player.setVelocityX(Math.max(100,s.x)))}handleKeyPress(t){t&&(this.craftItem(t),this.removeItem(t))}craftItem(t){let s=-1,h=0;t==Phaser.Input.Keyboard.KeyCodes.ONE?(s=0,h=-.5):t==Phaser.Input.Keyboard.KeyCodes.TWO?(s=1,h=-1):t==Phaser.Input.Keyboard.KeyCodes.THREE?(s=2,h=-2):t==Phaser.Input.Keyboard.KeyCodes.FOUR&&(s=3,h=-5),s!=-1&&this.player.gold+h>=0&&(s==0?this.ItemLayer.placeItem(s,this.player)&&this.player.scene.updateGold(h):s==1?this.ItemLayer.placeItem(s,this.player)&&this.player.scene.updateGold(h):s==2?(this.GroundLayer.handleDynamite(),this.player.scene.updateGold(h)):s==3&&this.player.changeHealth(.5*this.player.maxHealth)&&this.player.scene.updateGold(h))}removeItem(t){t==Phaser.Input.Keyboard.KeyCodes.Q&&this.ItemLayer.removeItem(this.player)}playerOnFloor(){return this.player.body?!!(this.player.body instanceof Phaser.Physics.Arcade.Body&&this.player.body.onFloor()):(console.error("No Body"),!1)}getPlayerVelocity(){return this.player.body?this.player.body.velocity:(console.error("No Body"),new Phaser.Math.Vector2(0,0))}stopMineCheck(t,s){(t.left.isDown||t.right.isDown||t.down.isDown)&&s!=3&&this.GroundLayer.stopMining()}}class ak extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.player.anims.play("idle",!0),this.player.setVelocityX(0),this.player.setVelocityY(0),this.player.setAccelerationX(0),this.player.setAccelerationY(0)}update(t,s){let h=0,y=4;this.handleKeyPress(s),t.left.isDown&&(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(h=1,y=0)),t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(h=1,y=1)),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),this.PlayerStateManager.changeState(h,y)}}class hk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.direction=t,t==0?(this.moveHorizontally(t),this.player.setAccelerationX(-50)):(this.moveHorizontally(t),this.player.setAccelerationX(50)),this.player.anims.play("walk",!0)}update(t,s){let h=0,y=4,S=this.getPlayerVelocity();this.handleKeyPress(s),t.left.isDown&&(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(S.x<-200?(h=2,y=0):(h=1,y=0))),t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(S.x>200?(h=2,y=1):(h=1,y=1))),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y)}}class ok extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.direction=t,t==0?this.player.setAccelerationX(-75):this.player.setAccelerationX(75),this.player.anims.play("run",!0)}update(t,s){let h=0,y=4,S=this.getPlayerVelocity();this.handleKeyPress(s),t.left.isDown&&(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(S.x<-200?(h=2,y=0):(h=1,y=0))),t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(S.x>200?(h=2,y=1):(h=1,y=1))),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y)}}class lk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.direction=t,t==0?this.moveHorizontally(t):t==1?this.moveHorizontally(t):(this.player.setVelocityX(0),this.player.setAccelerationX(0)),this.player.anims.play("mine",!0)}update(t,s){let h=0,y=4;if(this.GroundLayer.currentMiningDirection&&this.GroundLayer.miningTile){let S=this.GroundLayer.checkTileCollision(this.GroundLayer.currentMiningDirection,this.player);(!S||S&&(S.x!=this.GroundLayer.miningTile.x||S.y!=this.GroundLayer.miningTile.y))&&this.GroundLayer.stopMining()}t.left.isDown&&(this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(h=1,y=0)),t.right.isDown&&(this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(h=1,y=1)),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y)}exit(){this.GroundLayer.stopMining()}}class uk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.player.setVelocityY(-250),this.finishedAnimation=!1,this.player.anims.play("jump",!0).on("animationcomplete-jump",()=>{this.finishedAnimation=!0},this)}update(t,s){let h=0,y=4;this.handleKeyPress(s),this.finishedAnimation&&(t.left.isDown?(this.GroundLayer.startMining("left"),this.moveHorizontally(0),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"&&(h=3,y=0)):t.right.isDown?(this.GroundLayer.startMining("right"),this.moveHorizontally(1),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"&&(h=3,y=1)):(this.player.setAccelerationX(0),this.player.setVelocityX(0)),t.space.isDown&&(h=8),t.up.isDown&&this.player.canClimb&&(h=7,y=2),t.down.isDown&&this.player.canClimb&&(h=7,y=3),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=6:h=5),this.PlayerStateManager.changeState(h,y))}}class dk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.player.setAccelerationX(0),this.player.anims.play("fall",!0)}update(t,s){let h=0,y=4;this.handleKeyPress(s),t.left.isDown?(this.GroundLayer.startMining("left"),this.moveHorizontally(0),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"&&(h=3,y=0)):t.right.isDown?(this.GroundLayer.startMining("right"),this.moveHorizontally(1),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"&&(h=3,y=1)):(this.player.setAccelerationX(0),this.player.setVelocityX(0)),t.space.isDown&&(h=8),t.up.isDown&&this.player.canClimb&&(h=7,y=2),t.down.isDown&&this.player.canClimb&&(h=7,y=3),this.playerOnFloor()&&(h=6),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()||(h=5)),this.PlayerStateManager.changeState(h,y)}}class fk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.finishedAnimation=!1,this.player.anims.play("land",!0).on("animationcomplete-land",()=>{this.finishedAnimation=!0},this)}update(t,s){let h=0,y=4;this.handleKeyPress(s),this.finishedAnimation&&(t.left.isDown&&(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(h=1,y=0)),t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(h=1,y=1)),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y))}}class ck extends fi{constructor(s,h,y,S){super(s,h,y,S);rt(this,"currentFrame");this.currentFrame=null}enter(s){this.direction=s,this.player.body&&this.player.body instanceof Phaser.Physics.Arcade.Body&&this.player.body.setAllowGravity(!1),s==2?(this.currentFrame?this.player.anims.play({key:"climbUp",startFrame:this.currentFrame},!0):this.player.anims.play("climbUp",!0),this.player.setVelocityY(-150)):s==3?(this.currentFrame?this.player.anims.play({key:"climbDown",startFrame:this.currentFrame},!0):this.player.anims.play("climbDown",!0),this.player.setVelocityY(150)):(this.player.anims.currentAnim&&this.player.anims.currentFrame&&["climbUp","climbDown"].includes(this.player.anims.currentAnim.key)?(this.currentFrame=this.player.anims.currentFrame.index-1,this.player.anims.pause()):this.player.anims.play("climbIdle"),this.player.setVelocityY(0))}update(s,h){let y=this.getPlayerVelocity(),S=0,r=4;this.handleKeyPress(h),s.left.isDown?(this.moveHorizontally(0),this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(S=3,r=0):this.playerOnFloor()&&(y.x<-200?(S=2,r=0):(S=1,r=0))):s.right.isDown?(this.moveHorizontally(1),this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(S=3,r=1):this.playerOnFloor()&&(y.x>200?(S=2,r=1):(S=1,r=1))):(this.player.setAccelerationX(0),this.player.setVelocityX(0)),s.space.isDown&&(S=8),s.up.isDown&&(this.player.canClimb?(S=7,r=2):this.playerOnFloor()&&(S=4)),s.down.isDown&&(this.playerOnFloor()?(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&(S=3,r=3)):this.player.canClimb&&(S=7,r=3)),this.stopMineCheck(s,S),S==0&&(this.player.canClimb&&!this.playerOnFloor()?(S=7,r=4):this.playerOnFloor()?S=0:S=5),this.PlayerStateManager.changeState(S,r)}exit(s){s!=7&&this.player.body&&this.player.body instanceof Phaser.Physics.Arcade.Body&&this.player.body.setAllowGravity(!0)}}class vk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.finishedAnimation=!1,this.player.setVelocityX(0),this.player.setAccelerationX(0),this.player.attackHitBox.body.enable=!0,this.player.anims.play("attack",!0).on("animationcomplete-attack",()=>{this.finishedAnimation=!0},this)}update(t,s){let h=0,y=4;this.finishedAnimation&&(t.left.isDown?(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(h=1,y=0)):t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(h=1,y=1)),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y))}exit(t){this.player.attackHitBox.body.enable=!1,this.player.enemiesHit.clear()}}class pk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.finishedAnimation=!1,this.player.setVelocityX(0),this.player.setAccelerationX(0),this.player.anims.play("hurt",!0).on("animationcomplete-hurt",this.handleHurtEnd,this)}update(t,s){let h=0,y=4;this.finishedAnimation&&(t.left.isDown?(this.GroundLayer.startMining("left"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="left"?(h=3,y=0):this.playerOnFloor()&&(h=1,y=0)):t.right.isDown&&(this.GroundLayer.startMining("right"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="right"?(h=3,y=1):this.playerOnFloor()&&(h=1,y=1)),t.space.isDown&&(h=8),t.up.isDown&&(this.player.canClimb?(h=7,y=2):this.playerOnFloor()&&(h=4)),t.down.isDown&&(this.GroundLayer.startMining("down"),this.GroundLayer.miningCooldown&&this.GroundLayer.currentMiningDirection=="down"&&this.playerOnFloor()?(h=3,y=3):this.player.canClimb&&(h=7,y=3)),this.stopMineCheck(t,h),h==0&&(this.playerOnFloor()?h=0:h=5),this.PlayerStateManager.changeState(h,y))}handleHurtEnd(){this.player.health<=0?this.PlayerStateManager.changeState(10,4):this.finishedAnimation=!0}}class gk extends fi{constructor(t,s,h,y){super(t,s,h,y)}enter(t){this.player.setVelocityX(0),this.player.setAccelerationX(0),this.player.anims.play("death",!0).on("animationcomplete-death",()=>{this.player.destroy()},this)}}class mk{constructor(t,s,h){rt(this,"player");rt(this,"states");rt(this,"currentState");rt(this,"currentDirection");rt(this,"GroundLayer");rt(this,"ItemLayer");rt(this,"updateHitboxPosition",()=>{if(this.player.body){let t=this.player.body.center;this.player.attackHitBox.x=this.player.flipX?t.x-this.player.body.width*.9:t.x+this.player.body.width*.9,this.player.attackHitBox.y=t.y}});this.GroundLayer=s,this.ItemLayer=h,this.player=t,this.states=[new ak(this.player,this,this.GroundLayer,this.ItemLayer),new hk(this.player,this,this.GroundLayer,this.ItemLayer),new ok(this.player,this,this.GroundLayer,this.ItemLayer),new lk(this.player,this,this.GroundLayer,this.ItemLayer),new uk(this.player,this,this.GroundLayer,this.ItemLayer),new dk(this.player,this,this.GroundLayer,this.ItemLayer),new fk(this.player,this,this.GroundLayer,this.ItemLayer),new ck(this.player,this,this.GroundLayer,this.ItemLayer),new vk(this.player,this,this.GroundLayer,this.ItemLayer),new pk(this.player,this,this.GroundLayer,this.ItemLayer),new gk(this.player,this,this.GroundLayer,this.ItemLayer)],this.currentDirection=Zh.IDLE,this.currentState=this.states[0],this.currentState.enter(Zh.IDLE)}update(t,s){this.currentState.update(t,s),this.updateHitboxPosition()}changeState(t,s){this.updateHitboxPosition(),this.player.scene.physics.world.overlap(this.player,this.ItemLayer.layer,this.ItemLayer.canClimb)||(this.player.canClimb=!1);let h=this.states[t];h.direction=s,(h!=this.currentState||s!=this.currentDirection)&&this.currentState!=this.states[ec.DEATH]&&(this.currentState.exit(t),this.currentState=h,this.currentDirection=s,this.currentState.enter(s))}}const Qh=class extends Phaser.Physics.Arcade.Sprite{constructor(s,h,y,S){super(s,h,y,S);rt(this,"id");rt(this,"attack");rt(this,"enemiesHit");this.enemiesHit=new Set,s.add.existing(this),s.physics.add.existing(this),this.attack=10,this.id=Qh.currentId,Qh.currentId+=1,s.explosionOverlapGroup.add(this),this.body&&this.body instanceof Phaser.Physics.Arcade.Body?(this.body.setAllowGravity(!1),this.body.setVelocityY(0)):console.error("Explosion has no body"),this.setScale(3.5,3.5),this.anims.play("explosion",!0),this.on("animationcomplete-explosion",()=>{this.destroy()})}handleDamage(s,h){if(s instanceof js){if(!this.enemiesHit.has(s.id)){s.handleDamage(10);let y=new Phaser.Math.Vector2(s.x-this.x,s.y-this.y).normalize(),S=100,r=30;s.setVelocity(y.x*S,y.y*S),s.setAccelerationX(-y.x*r)}this.enemiesHit.add(s.id)}else console.error("Not of type Enemy")}};let kr=Qh;rt(kr,"currentId",0);class rd extends Phaser.Physics.Arcade.Sprite{constructor(s,h,y,S,r,T){super(s,h,y,S);rt(this,"playerStateManager");rt(this,"playerHealth");rt(this,"canClimb");rt(this,"gold");rt(this,"health");rt(this,"maxHealth");rt(this,"maxHealthWidth");rt(this,"enemiesHit");rt(this,"explosions");rt(this,"canBeHit");rt(this,"attackHitBox");rt(this,"scene");rt(this,"handleEnemyDamage",(s,h)=>{if(h instanceof js){if(!this.enemiesHit.has(h.id)){h.handleDamage(5);let y=new Phaser.Math.Vector2(h.x-this.x,h.y-this.y).normalize(),S=50,r=30;h.setVelocity(y.x*S,y.y*S),h.setAccelerationX(-y.x*r)}this.enemiesHit.add(h.id)}else console.error("Not of type Enemy")});rt(this,"handlePlayerDamage",(s,h)=>{h instanceof js?this.canBeHit&&(this.takeDamage(h.attack),this.canBeHit=!1,this.scene.time.addEvent({callback:()=>{this.canBeHit=!0},callbackScope:this,delay:1e3})):h instanceof kr?(this.explosions.has(h.id)||this.takeDamage(h.attack),this.explosions.add(h.id)):console.error("Not of type Enemy")});rt(this,"takeDamage",s=>{this.changeHealth(-1*s),this.playerStateManager.changeState(ec.HURT,Zh.IDLE)});this.scene=s,this.setPipeline("Light2D"),s.add.existing(this),s.physics.add.existing(this),this.setMaxVelocity(250),this.playerStateManager=new mk(this,r,T),this.maxHealth=40,this.health=this.maxHealth,this.canBeHit=!0,this.enemiesHit=new Set,this.explosions=new Set,this.gold=20,s.physics.add.collider(this,r.layer),this.canClimb=!1,s.physics.add.overlap(this,T.layer,T.canClimb,void 0,this),this.setCollideWorldBounds(!0),s.physics.add.collider(this,s.enemyGroup,this.handlePlayerDamage,void 0,this),this.setPushable(!1),this.body?(this.setScale(1.3,1.3),this.body.setSize(26,36),this.body.setOffset(12,12)):console.error("No Body"),this.attackHitBox=s.add.rectangle(this.x,this.y,16,16,16777215,0),this.attackHitBox.setScale(1.3,1.3),s.physics.add.existing(this.attackHitBox),this.attackHitBox.body.setAllowGravity(!1),this.attackHitBox.body.enable=!1,s.physics.add.overlap(this.attackHitBox,s.enemyGroup,this.handleEnemyDamage,void 0,this);const i=2;this.maxHealthWidth=200;const d=20,x=120,f=25,o=x-(this.maxHealthWidth+i)/2,a=f-(d+i)/2;let n=s.add.graphics();n.lineStyle(i,16777215,1),n.strokeRect(o,a,this.maxHealthWidth+i,d+i),this.playerHealth=s.add.rectangle(x,f,this.maxHealthWidth,d,16711680),n.scrollFactorX=0,n.scrollFactorY=0,this.playerHealth.scrollFactorX=0,this.playerHealth.scrollFactorY=0}update(s,h){this.playerStateManager.update(s,h)}changeHealth(s){if(!this.scene.intro){let h=this.health+s;return h<0?h=0:h>this.maxHealth&&(h=this.maxHealth),s>0&&h==this.health?!1:(this.health=h,this.playerHealth.width=Math.max(this.maxHealthWidth*this.health/this.maxHealth,0),!0)}}}const jh=class extends Phaser.Physics.Arcade.Sprite{constructor(s,h,y,S){super(s,h,y,S);rt(this,"id");s.add.existing(this),s.physics.add.existing(this),this.id=jh.currentId,jh.currentId+=1,s.dynamiteColliderGroup.add(this),this.setScale(1.2,1.2),this.anims.play("dynamite",!0),this.on("animationcomplete-dynamite",()=>{this.destroy(),new kr(s,this.x,this.y,"explosion")})}};let Bh=jh;rt(Bh,"currentId",0);class ic{constructor(t,s,h,y){rt(this,"scene");rt(this,"layer");this.layer=s,this.scene=t,this.layer.x=h,this.layer.y=y,this.layer.setScale(3,3)}getCenterOfObject(t){if(t&&t.body){let s=t.body.width,h=t.body.height,y=t.body.x+Math.floor(s/2),S=t.body.y+Math.floor(h/2);return[y,S]}else return console.error("No Sprite or Body"),[0,0]}checkTileCollision(t,s){if(s&&s.body){let h,y=s.body.width,S=s.body.height,[r,T]=this.getCenterOfObject(s);return t=="left"?h=this.layer.getTileAtWorldXY(r-y,T):t=="right"?h=this.layer.getTileAtWorldXY(r+y,T):t=="down"?h=this.layer.getTileAtWorldXY(r,T+S):h=this.layer.getTileAtWorldXY(r,T-S),h}else return console.error("No Sprite or Body"),null}getTileAtObject(t){let[s,h]=this.getCenterOfObject(t);return this.layer.getTileAtWorldXY(s,h)}handleDynamite(){let[t,s]=this.getCenterOfObject(this.scene.player);new Bh(this.scene,t,s,"dynamite")}removeGroundTiles(t,s){this.scene.intro||(this instanceof sC?(this.layer.removeTileAt(t,s),this.scene.InvisibleLayer.removeInvisibilityTiles(t,s)):console.log("Not supposed to be called by non-ground layer"))}}class Un extends ic{constructor(s,h,y,S){super(s,h,y,S);rt(this,"exploredTileSet");this.exploredTileSet=new Set,this.generateInitialInvisibilityTiles(this.layer.tilemap.width,this.layer.tilemap.height)}generateInitialInvisibilityTiles(s,h){for(let y=0;y<h;y++)for(let S=0;S<s;S++){let r=0;y==0&&(r=1),this.layer.putTileAt(r,S,y)}}removeInvisibilityTiles(s,h){let y,S,r,T=`${s.toString()},${h.toString()}`;this.exploredTileSet.add(T);for(let i=-1;i<2;i++)for(let d=-1;d<2;d++)S=s+i,r=h+d,y=this.scene.GroundLayer.layer.getTileAt(S,r),this.layer.removeTileAt(S,r),T=`${S.toString()},${r.toString()}`,!y&&!this.exploredTileSet.has(T)&&(d==0||i==0)&&(d!=0||i!=0)&&Un.checkIfTileIsValid(S,r,this.layer)&&this.removeInvisibilityTiles(S,r)}static checkIfTileIsValid(s,h,y){return s>=0&&s<y.tilemap.width&&h>=0&&h<y.tilemap.height}}var eC=(e=>(e[e.GRASS=0]="GRASS",e[e.DIRT=1]="DIRT",e[e.STONE=2]="STONE",e[e.COAL=3]="COAL",e[e.IRON=4]="IRON",e[e.COPPER=5]="COPPER",e[e.SILVER=6]="SILVER",e[e.GOLD=7]="GOLD",e[e.DIAMOND=8]="DIAMOND",e[e.EMERALD=9]="EMERALD",e[e.EMPTY=10]="EMPTY",e))(eC||{}),iC=(e=>(e[e.GRASS=0]="GRASS",e[e.DIRT=0]="DIRT",e[e.STONE=0]="STONE",e[e.COAL=.1]="COAL",e[e.IRON=.3]="IRON",e[e.COPPER=.4]="COPPER",e[e.SILVER=.5]="SILVER",e[e.GOLD=1]="GOLD",e[e.DIAMOND=3]="DIAMOND",e[e.EMERALD=10]="EMERALD",e))(iC||{});class sC extends ic{constructor(s,h,y,S){super(s,h,y,S);rt(this,"miningCooldown");rt(this,"miningTile");rt(this,"miningRate");rt(this,"currentMiningDirection");rt(this,"map");rt(this,"groundExploded",(s,h)=>{h instanceof Phaser.Tilemaps.Tile?this.removeGroundTiles(h.x,h.y):console.error("Got game object instead of tile")});this.miningRate=500,this.mapCreation(),this.layer.setCollisionByExclusion([-1]),this.layer.setPipeline("Light2D")}mineBlock(s){let h=this.checkTileCollision(s,this.scene.player);h&&(this.miningTile=h,this.miningCooldown=this.scene.time.addEvent({args:[h.x,h.y,h.index],callback:(y,S,r)=>{this.removeGroundTiles(y,S);let T=iC[eC[r]];this.scene.updateGold(T),this.miningCooldown=void 0,this.miningTile=void 0},callbackScope:this,delay:this.miningRate}))}startMining(s){this.miningCooldown?this.currentMiningDirection!=s&&(this.stopMining(),this.currentMiningDirection=s,this.mineBlock(s)):(this.currentMiningDirection=s,this.mineBlock(s))}stopMining(){this.miningCooldown&&(console.log("cooldown stopped"),this.miningCooldown.remove(!1),this.miningCooldown=void 0,this.miningTile=void 0,this.currentMiningDirection=void 0)}generateRandomTiles(s,h){let y,S=[];for(let r=0;r<h;r++){y=this.getWeightedArr(r),S[r]=[];for(let T=0;T<s;T++){let i=Math.floor(Math.random()*y.length),d=y[i];S[r][T]=d}}return S}getWeightedArr(s){let h={};h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=0;let y={};y[0]=0,y[1]=.9,y[2]=0,y[3]=0,y[4]=0,y[5]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=.1;let S={};S[0]=0,S[1]=.2,S[2]=.4,S[3]=.2,S[4]=0,S[5]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=.2;let r={};r[0]=0,r[1]=0,r[2]=.4,r[3]=.1,r[4]=.1,r[5]=.05,r[6]=.03,r[7]=.02,r[8]=0,r[9]=0,r[10]=.3;let T={};T[0]=0,T[1]=0,T[2]=.2,T[3]=.1,T[4]=.1,T[5]=.1,T[6]=.05,T[7]=.03,T[8]=.02,T[9]=0,T[10]=.4;let i={};i[0]=0,i[1]=0,i[2]=.2,i[3]=.1,i[4]=.1,i[5]=.1,i[6]=.1,i[7]=.05,i[8]=.03,i[9]=.02,i[10]=.4;let d=[];return s==0?d=this.generateFrequencyArr(h):s<3?d=this.generateFrequencyArr(y):s<10?d=this.generateFrequencyArr(S):s<50?d=this.generateFrequencyArr(r):s<100?d=this.generateFrequencyArr(T):d=this.generateFrequencyArr(i),d}generateFrequencyArr(s){let h=[],y=100;for(let S in s){let r=s[S]*y;for(let T=0;T<r;T++)h.push(parseInt(S))}return h}applyAutomataRules(s){let h=[];for(let y=0;y<s.length;y++){h[y]=[];for(let S=0;S<s[0].length;S++){let r=this.countEmptyNeighbors(s,S,y);y!=0?s[y][S]==10?h[y][S]=r>=4?10:s[y][S]:h[y][S]=r>=5?10:s[y][S]:h[y][S]=s[y][S]}}return h}countEmptyNeighbors(s,h,y){let S=0;for(let r=-1;r<=1;r++)for(let T=-1;T<=1;T++)if(r!=0||T!=0){let i=h+r,d=y+T;i>=0&&d>=0&&i<s[0].length&&d<s.length&&s[i][d]==10&&(S+=1)}return S}addTiles(s){for(let h=0;h<s.length;h++)for(let y=0;y<s[0].length;y++)s[h][y]!=10&&this.layer.putTileAt(s[h][y],y,h)}mapCreation(){let s=5;this.map=this.generateRandomTiles(this.layer.tilemap.width,this.layer.tilemap.height);for(let h=0;h<s;h++)this.map=this.applyAutomataRules(this.map);this.addTiles(this.map)}findCaves(s){let h=[],y=new Set;for(let S=0;S<this.map.length;S++)for(let r=0;r<this.map[0].length;r++)if(!y.has([r,S].toString())&&this.map[S][r]==10){let T=this.findCave(r,S,this.map,y);T.length>=s&&h.push(T)}return h}findCave(s,h,y,S){let r=[[s,h]],T=[];for(;r.length>0;){let i=r.pop();if(i){let[d,x]=i;if(Un.checkIfTileIsValid(d,x,this.layer)&&!S.has(i.toString())&&y[x][d]==10){S.add(i.toString()),T.push([d,x]);let f=[[d+1,x],[d-1,x],[d,x+1],[d,x-1]];for(let o of f){let[a,n]=o;Un.checkIfTileIsValid(a,n,this.layer)&&!S.has(o.toString())&&r.push(o)}}}}return T}}class xk extends ic{constructor(s,h,y,S){super(s,h,y,S);rt(this,"itemsExploded",(s,h)=>{h instanceof Phaser.Tilemaps.Tile?this.removeLightsAndTile(h):console.error("Got game object instead of tile")});rt(this,"canClimb",(s,h)=>{if(h instanceof Phaser.Tilemaps.Tile){let y=this.layer.tileToWorldXY(h.x,h.y),S=this.layer.tileToWorldX(1)-this.layer.tileToWorldX(0),r=this.layer.tileToWorldY(1)-this.layer.tileToWorldY(0),T=y.x,i=y.x+S,d=y.y,x=d+r;h.index==Ih.LADDER&&s&&s instanceof rd&&s.body&&s.body.left>=T&&s.body.right<=i&&s.body.bottom-Math.floor(s.body.height/4)>d&&s.body.top+Math.floor(s.body.height/4)<x?s.canClimb=!0:s instanceof rd&&(s.canClimb=!1)}});this.layer.setPipeline("Light2D")}placeItem(s,h){let[y,S]=this.getCenterOfObject(h);if(!this.layer.getTileAtWorldXY(y,S)){let T=this.layer.putTileAtWorldXY(s,y,S);if(T){let i=this.layer.tileToWorldXY(T.x,T.y),d=i.x,x=i.y;return s==Ih.TORCH&&this.scene.lights.addLight(d,x,200).setIntensity(4),!0}}return!1}removeItem(s){let[h,y]=this.getCenterOfObject(s),S=this.layer.getTileAtWorldXY(h,y);S&&this.removeLightsAndTile(S)}removeLightsAndTile(s){let h=this.layer.tileToWorldXY(s.x,s.y),y=h.x,S=h.y;if(s.index==Ih.TORCH){let r=this.scene.lights.lights;for(let T=r.length-1;T>=0;T--){const i=r[T];if(i.x===y&&i.y===S){this.scene.lights.removeLight(i);break}}}this.layer.removeTileAt(s.x,s.y)}}class yk extends nd.Scene{constructor(){super("GameScene");rt(this,"goldText");rt(this,"playerHealth");rt(this,"lastKeyPressed");rt(this,"map");rt(this,"ItemLayer");rt(this,"GroundLayer");rt(this,"InvisibleLayer");rt(this,"player");rt(this,"cursors");rt(this,"dynamiteColliderGroup");rt(this,"explosionOverlapGroup");rt(this,"enemyGroup");rt(this,"landPos");rt(this,"rexUI");rt(this,"textIndex");rt(this,"textArr");rt(this,"textBox");rt(this,"dialog");rt(this,"intro");rt(this,"tileOffset");rt(this,"tileOffsetPos");rt(this,"trueGameWidth");rt(this,"trueCenter");this.landPos=500,this.textIndex=0,this.textArr=["Welcome, your goal is to reach the center of the planet and defeat the demon lord. Press Enter to continue.","Use arrow keys to move around and mine and Space to attack.","To place/use items, press the number corresponding to your item shown on the top left of the screen.","You can only use torches and ladders underground, and you can remove them by pressing Q.","If you ever forget the controls of the game or need to step away from the game, click P to pause.","Good luck!"],this.intro=!0}preload(){this.load.spritesheet("tiles","../assets/sprites/ores.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("items","../assets/sprites/Extras/items.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("invisible","../assets/sprites/invisible.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("dynamite","../assets/sprites/Extras/dynamite.png",{frameWidth:22,frameHeight:24}),this.load.spritesheet("explosion","../assets/sprites/Extras/explosion.png",{frameWidth:32,frameHeight:32}),this.load.image("sky","../assets/sprites/sky.png"),this.load.image("underground","../assets/sprites/background.png"),this.load.image("goldImage","../assets/sprites/gold.png"),this.load.image("potion","../assets/sprites/health_potion.png"),this.load.spritesheet("mine","../assets/sprites/3 SteamMan/mine.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("walk","../assets/sprites/3 SteamMan/walk.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("idle","../assets/sprites/3 SteamMan/idle.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("jump","../assets/sprites/3 SteamMan/jump.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("run","../assets/sprites/3 SteamMan/run.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("climb","../assets/sprites/3 SteamMan/climb.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("attack","../assets/sprites/3 SteamMan/attack.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("hurt","../assets/sprites/3 SteamMan/hurt.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("death","../assets/sprites/3 SteamMan/death.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("slime_idle","../assets/sprites/Slime/slime_idle_spritesheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("slime_walk","../assets/sprites/Slime/slime_walk_spritesheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("slime_death","../assets/sprites/Slime/slime_death_spritesheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("slime_attack","../assets/sprites/Slime/slime_attack_spritesheet.png",{frameWidth:32,frameHeight:24}),this.load.spritesheet("slime_jump","../assets/sprites/Slime/slime_jump_spritesheet.png",{frameWidth:16,frameHeight:16})}create(){this.tileOffset=Math.ceil(this.cameras.main.width/(48*2)),this.tileOffsetPos=-48*this.tileOffset,this.trueGameWidth=48*2*this.tileOffset+this.game.canvas.width,this.trueCenter=this.trueGameWidth/2+this.tileOffsetPos;let s=this.add.image(this.trueCenter,this.landPos,"sky");s.setOrigin(.5,1),s.setDisplaySize(this.trueGameWidth,750);let h=this.add.image(this.trueCenter,this.landPos,"underground").setPipeline("Light2D");h.setOrigin(.5,0),h.setDisplaySize(this.trueGameWidth,this.game.canvas.height-this.landPos),this.createPlayerAnimations(),this.createEnemyAnimations(),this.dynamiteColliderGroup=this.physics.add.group({defaultKey:"dynamite",collideWorldBounds:!0}),this.explosionOverlapGroup=this.physics.add.group({defaultKey:"explosion",collideWorldBounds:!0}),this.enemyGroup=this.physics.add.group({collideWorldBounds:!0});var y=this.add.graphics(),S=1,r=16711680;y.lineStyle(S,r,1),y.beginPath(),y.moveTo(0,-150),y.lineTo(0,this.game.canvas.height),y.moveTo(this.game.canvas.width,-150),y.lineTo(this.game.canvas.width,this.game.canvas.height),y.strokePath(),this.map=this.make.tilemap({width:this.trueGameWidth/48,height:this.game.canvas.height/48,tileWidth:16,tileHeight:16});let T=this.map.addTilesetImage("items",void 0,16,16);if(T){let b=this.map.createBlankLayer("itemLayer",T);b?this.ItemLayer=new xk(this,b,this.tileOffsetPos,this.landPos):console.error("itemLayer does not exist")}else console.error("Failed to load the tileset image");let i=this.map.addTilesetImage("tiles",void 0,16,16);if(i){let b=this.map.createBlankLayer("groundLayer",i);b?this.GroundLayer=new sC(this,b,this.tileOffsetPos,this.landPos):console.error("groundLayer does not exist")}else console.error("Failed to load the tileset image");let d=this.map.addTilesetImage("invisible",void 0,16,16);if(d){let b=this.map.createBlankLayer("darknessLayer",d);b?this.InvisibleLayer=new Un(this,b,this.tileOffsetPos,this.landPos):console.error("darknessLayer does not exist")}else console.error("Failed to load the tileset image");this.player=new rd(this,this.trueCenter,this.landPos-40,"idle",this.GroundLayer,this.ItemLayer);let x=this.GroundLayer.findCaves(10);this.spawnMobs(x);let f=this.add.rectangle(300,25,32,32,12303801);f.scrollFactorX=0,f.scrollFactorY=0;let o=this.add.image(300,25,"items",0);o.setSize(32,32),o.setScale(1.8,1.8),o.scrollFactorX=0,o.scrollFactorY=0,this.createBorder(o,2);let a=this.add.text(295,50,"1",{fontSize:"20px"});a.scrollFactorX=0,a.scrollFactorY=0;let n=this.add.text(270,75,"0.5",{fontSize:"14px"});n.scrollFactorX=0,n.scrollFactorY=0;let u=this.add.image(310,82,"goldImage");u.setScale(.8,.8),u.scrollFactorX=0,u.scrollFactorY=0;let c=this.add.rectangle(350,25,32,32,12303801);c.scrollFactorX=0,c.scrollFactorY=0;let l=this.add.image(350,25,"items",1);l.setSize(32,32),l.setScale(2.5,2.5),l.scrollFactorX=0,l.scrollFactorY=0,this.createBorder(l,2);let v=this.add.text(345,50,"2",{fontSize:"20px"});v.scrollFactorX=0,v.scrollFactorY=0;let p=this.add.text(340,75,"1",{fontSize:"14px"});p.scrollFactorX=0,p.scrollFactorY=0;let g=this.add.image(360,82,"goldImage");g.setScale(.8,.8),g.scrollFactorX=0,g.scrollFactorY=0;let m=this.add.rectangle(400,25,32,32,12303801);m.scrollFactorX=0,m.scrollFactorY=0;let C=this.add.image(400,25,"dynamite",0);C.setSize(32,32),C.scrollFactorX=0,C.scrollFactorY=0,this.createBorder(C,2);let P=this.add.text(395,50,"3",{fontSize:"20px"});P.scrollFactorX=0,P.scrollFactorY=0;let M=this.add.text(390,75,"2",{fontSize:"14px"});M.scrollFactorX=0,M.scrollFactorY=0;let E=this.add.image(410,82,"goldImage");E.setScale(.8,.8),E.scrollFactorX=0,E.scrollFactorY=0;let w=this.add.rectangle(450,25,32,32,12303801);w.scrollFactorX=0,w.scrollFactorY=0;let R=this.add.image(450,25,"potion",0);R.setSize(32,32),R.setScale(1.5,1.5),R.scrollFactorX=0,R.scrollFactorY=0,this.createBorder(R,2);let A=this.add.text(445,50,"4",{fontSize:"20px"});A.scrollFactorX=0,A.scrollFactorY=0;let L=this.add.text(440,75,"5",{fontSize:"14px"});L.scrollFactorX=0,L.scrollFactorY=0;let F=this.add.image(460,82,"goldImage");F.setScale(.8,.8),F.scrollFactorX=0,F.scrollFactorY=0,this.goldText=this.add.text(100,50,String(this.player.gold.toFixed(1)),{fontSize:"24px"}),this.goldText.setOrigin(1,0),this.goldText.scrollFactorX=0,this.goldText.scrollFactorY=0;let O=this.add.image(120,60,"goldImage");O.setScale(1.5,1.5),O.scrollFactorX=0,O.scrollFactorY=0,this.handleInitialDialog(),this.physics.add.collider(this.dynamiteColliderGroup,this.GroundLayer.layer),this.physics.add.overlap(this.explosionOverlapGroup,this.GroundLayer.layer,this.GroundLayer.groundExploded,void 0,this),this.physics.add.overlap(this.explosionOverlapGroup,this.ItemLayer.layer,this.ItemLayer.itemsExploded,void 0,this),this.physics.add.overlap(this.player,this.explosionOverlapGroup,this.player.handlePlayerDamage,void 0,this),this.physics.add.overlap(this.enemyGroup,this.explosionOverlapGroup,this.handleExplosionDamage,void 0,this),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys(),this.input.keyboard.on("keydown",this.handleKeyPress,this),this.input.keyboard.on("keydown-ENTER",this.updateText,this),this.input.keyboard.on("keydown-P",this.pauseGame,this)),this.cameras.main.startFollow(this.player),this.cameras.main.height=window.innerHeight,this.cameras.main.width=window.innerWidth,this.lights.enable().setAmbientColor(1118481),this.lights.addLight(this.game.canvas.width/2,0,this.trueGameWidth).setIntensity(15)}update(){this.player.update(this.cursors,this.lastKeyPressed);for(let s of this.enemyGroup.children.entries)s.update();this.lastKeyPressed=void 0}handleExplosionDamage(s,h){h instanceof kr&&h.handleDamage(s,h)}handleKeyPress(s){this.lastKeyPressed=s.keyCode}createPlayerAnimations(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("walk",{start:0,end:5}),frameRate:10,repeat:-1}),this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("idle",{start:0,end:3}),frameRate:3,repeat:-1}),this.anims.create({key:"mine",frames:this.anims.generateFrameNumbers("mine",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"jump",frames:[{key:"jump",frame:0},{key:"jump",frame:1},{key:"jump",frame:2},{key:"jump",frame:3}],frameRate:20}),this.anims.create({key:"land",frames:[{key:"jump",frame:4,duration:50},{key:"jump",frame:5,duration:100},{key:"idle",frame:0,duration:50}],frameRate:5}),this.anims.create({key:"fall",frames:[{key:"jump",frame:3}],frameRate:5}),this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("run",{start:0,end:5}),frameRate:10,repeat:-1}),this.anims.create({key:"climbUp",frames:this.anims.generateFrameNumbers("climb",{start:0,end:5}),frameRate:10,repeat:-1}),this.anims.create({key:"climbDown",frames:this.anims.generateFrameNumbers("climb",{start:5,end:0}),frameRate:10,repeat:-1}),this.anims.create({key:"climbIdle",frames:[{key:"climb",frame:0}],frameRate:5}),this.anims.create({key:"dynamite",frames:this.anims.generateFrameNumbers("dynamite",{start:0,end:4}),frameRate:3}),this.anims.create({key:"explosion",frames:this.anims.generateFrameNumbers("explosion",{start:0,end:4}),frameRate:3}),this.anims.create({key:"attack",frames:this.anims.generateFrameNumbers("attack",{start:0,end:5}),frameRate:10}),this.anims.create({key:"hurt",frames:this.anims.generateFrameNumbers("hurt",{start:0,end:2}),frameRate:10}),this.anims.create({key:"death",frames:this.anims.generateFrameNumbers("death",{start:0,end:5}),frameRate:5})}createEnemyAnimations(){this.anims.create({key:"slime_idle",frames:this.anims.generateFrameNumbers("slime_idle",{start:0,end:4}),frameRate:5,repeat:-1}),this.anims.create({key:"slime_walk",frames:this.anims.generateFrameNumbers("slime_walk",{start:0,end:6}),frameRate:10,repeat:-1}),this.anims.create({key:"slime_attack",frames:this.anims.generateFrameNumbers("slime_attack",{start:0,end:4}),frameRate:10}),this.anims.create({key:"slime_death",frames:this.anims.generateFrameNumbers("slime_death",{start:0,end:4}),frameRate:10}),this.anims.create({key:"slime_jump",frames:this.anims.generateFrameNumbers("slime_jump",{start:0,end:2}),frameRate:30}),this.anims.create({key:"slime_fall",frames:this.anims.generateFrameNumbers("slime_jump",{start:3,end:6}),frameRate:30}),this.anims.create({key:"slime_land",frames:this.anims.generateFrameNumbers("slime_jump",{start:7,end:9}),frameRate:15})}updateGold(s){this.intro||(this.player.gold+=s,this.goldText.setText(this.player.gold.toFixed(1)))}createBorder(s,h){let y=s.x,S=s.y,r=s.width,T=s.height,i=this.add.graphics();const d=y-(r+h)/2,x=S-(T+h)/2;return i.lineStyle(h,0,1),i.strokeRect(d,x,r+h,T+h),i.scrollFactorX=0,i.scrollFactorY=0,i}spawnMobs(s){console.log(s);for(let h of s){let y=h.pop();if(y){let[S,r]=y,T=this.GroundLayer.layer.tileToWorldXY(S,r),i=new nk(this,T.x+this.GroundLayer.layer.tilemap.tileWidth,T.y+this.GroundLayer.layer.tilemap.tileHeight,"slime_idle",this.GroundLayer,this.player);this.enemyGroup.add(i)}}}handleInitialDialog(){this.dialog=this.rexUI.add.dialog({x:this.game.canvas.width/2,y:200,width:550,height:100,background:this.rexUI.add.roundRectangle(0,0,0,0,20,16777215),content:this.textBox}).layout(),this.textBox=this.rexUI.add.textBox({x:this.game.canvas.width/2,y:this.dialog.y-this.dialog.height/4,width:550,height:50,text:this.add.text(0,0,this.textArr[this.textIndex],{fontSize:"24px",fontFamily:"Open Sans",color:"#000",wordWrap:{width:550,useAdvancedWrap:!0}}),space:{left:30,right:30,top:60,bottom:20}}).layout(),this.updateText()}updateText(){this.textIndex<this.textArr.length?(this.textBox.setText(this.textArr[this.textIndex]),this.textIndex++):(this.dialog.setVisible(!1),this.textBox.setText(""),this.intro=!1)}pauseGame(){this.physics.pause(),this.scene.pause(),this.scene.launch("PauseScene")}}class Ck extends Phaser.Scene{constructor(){super("PauseScene")}create(){this.add.text(50,100,"Game Paused",{fontSize:"32px"});let t=this.add.text(90,200,"Controls",{fontSize:"24px"}),s=this.add.graphics();s.lineStyle(2,16777215),s.beginPath(),s.moveTo(t.x,t.y+t.height),s.lineTo(t.x+t.width,t.y+t.height),s.strokePath(),this.add.text(25,250,"Q: Remove an item",{fontSize:"24px"}),this.add.text(25,275,"P: Pause game",{fontSize:"24px"}),this.add.text(25,300,"1: Craft Ladder",{fontSize:"24px"}),this.add.text(25,325,"2: Craft Torch",{fontSize:"24px"}),this.add.text(25,350,"3: Craft Dynamite",{fontSize:"24px"}),this.add.text(25,375,"4: Use potion",{fontSize:"24px"}),this.add.text(25,400,"Space: Attack",{fontSize:"24px"}),this.add.text(25,425,"\u2190/\u2192/\u2193/\u2191: Move/Mine",{fontSize:"24px"}),this.input.keyboard&&this.input.keyboard.on("keydown-P",this.resume,this)}resume(){this.scene.get("GameScene").physics.resume(),this.scene.resume("GameScene"),this.scene.stop()}}const Tk={type:nd.AUTO,width:1920,height:5400,physics:{default:"arcade",arcade:{gravity:{x:0,y:300},debug:!0}},render:{pixelArt:!0},scene:[yk,Ck],plugins:{scene:[{key:"rexUI",plugin:_y,mapping:"rexUI"}]}};new nd.Game(Tk);
